function _mergeNamespaces(_,d){for(var g=0;g<d.length;g++){const b=d[g];if(typeof b!="string"&&!Array.isArray(b)){for(const $ in b)if($!=="default"&&!($ in _)){const j=Object.getOwnPropertyDescriptor(b,$);j&&Object.defineProperty(_,$,j.get?j:{enumerable:!0,get:()=>b[$]})}}}return Object.freeze(Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}))}(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const $ of document.querySelectorAll('link[rel="modulepreload"]'))b($);new MutationObserver($=>{for(const j of $)if(j.type==="childList")for(const _e of j.addedNodes)_e.tagName==="LINK"&&_e.rel==="modulepreload"&&b(_e)}).observe(document,{childList:!0,subtree:!0});function g($){const j={};return $.integrity&&(j.integrity=$.integrity),$.referrerPolicy&&(j.referrerPolicy=$.referrerPolicy),$.crossOrigin==="use-credentials"?j.credentials="include":$.crossOrigin==="anonymous"?j.credentials="omit":j.credentials="same-origin",j}function b($){if($.ep)return;$.ep=!0;const j=g($);fetch($.href,j)}})();function getDefaultExportFromCjs(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$4=Symbol.for("react.profiler"),t$3=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(_){return _===null||typeof _!="object"?null:(_=z$1&&_[z$1]||_["@@iterator"],typeof _=="function"?_:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$1={};function E$1(_,d,g){this.props=_,this.context=d,this.refs=D$1,this.updater=g||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(_,d){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,d,"setState")};E$1.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(_,d,g){this.props=_,this.context=d,this.refs=D$1,this.updater=g||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$2(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(_,d,g){var b,$={},j=null,_e=null;if(d!=null)for(b in d.ref!==void 0&&(_e=d.ref),d.key!==void 0&&(j=""+d.key),d)J.call(d,b)&&!L$1.hasOwnProperty(b)&&($[b]=d[b]);var et=arguments.length-2;if(et===1)$.children=g;else if(1<et){for(var tt=Array(et),nt=0;nt<et;nt++)tt[nt]=arguments[nt+2];$.children=tt}if(_&&_.defaultProps)for(b in et=_.defaultProps,et)$[b]===void 0&&($[b]=et[b]);return{$$typeof:l$3,type:_,key:j,ref:_e,props:$,_owner:K$1.current}}function N$1(_,d){return{$$typeof:l$3,type:_.type,key:d,ref:_.ref,props:_.props,_owner:_._owner}}function O$1(_){return typeof _=="object"&&_!==null&&_.$$typeof===l$3}function escape(_){var d={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(g){return d[g]})}var P$1=/\/+/g;function Q$1(_,d){return typeof _=="object"&&_!==null&&_.key!=null?escape(""+_.key):d.toString(36)}function R$1(_,d,g,b,$){var j=typeof _;(j==="undefined"||j==="boolean")&&(_=null);var _e=!1;if(_===null)_e=!0;else switch(j){case"string":case"number":_e=!0;break;case"object":switch(_.$$typeof){case l$3:case n$3:_e=!0}}if(_e)return _e=_,$=$(_e),_=b===""?"."+Q$1(_e,0):b,I$1($)?(g="",_!=null&&(g=_.replace(P$1,"$&/")+"/"),R$1($,d,g,"",function(nt){return nt})):$!=null&&(O$1($)&&($=N$1($,g+(!$.key||_e&&_e.key===$.key?"":(""+$.key).replace(P$1,"$&/")+"/")+_)),d.push($)),1;if(_e=0,b=b===""?".":b+":",I$1(_))for(var et=0;et<_.length;et++){j=_[et];var tt=b+Q$1(j,et);_e+=R$1(j,d,g,tt,$)}else if(tt=A$1(_),typeof tt=="function")for(_=tt.call(_),et=0;!(j=_.next()).done;)j=j.value,tt=b+Q$1(j,et++),_e+=R$1(j,d,g,tt,$);else if(j==="object")throw d=String(_),Error("Objects are not valid as a React child (found: "+(d==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":d)+"). If you meant to render a collection of children, use an array instead.");return _e}function S$1(_,d,g){if(_==null)return _;var b=[],$=0;return R$1(_,b,"","",function(j){return d.call(g,j,$++)}),b}function T$1(_){if(_._status===-1){var d=_._result;d=d(),d.then(function(g){(_._status===0||_._status===-1)&&(_._status=1,_._result=g)},function(g){(_._status===0||_._status===-1)&&(_._status=2,_._result=g)}),_._status===-1&&(_._status=0,_._result=d)}if(_._status===1)return _._result.default;throw _._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(_,d,g){S$1(_,function(){d.apply(this,arguments)},g)},count:function(_){var d=0;return S$1(_,function(){d++}),d},toArray:function(_){return S$1(_,function(d){return d})||[]},only:function(_){if(!O$1(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};react_production_min.Component=E$1;react_production_min.Fragment=p$4;react_production_min.Profiler=r$4;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(_,d,g){if(_==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_+".");var b=C$2({},_.props),$=_.key,j=_.ref,_e=_._owner;if(d!=null){if(d.ref!==void 0&&(j=d.ref,_e=K$1.current),d.key!==void 0&&($=""+d.key),_.type&&_.type.defaultProps)var et=_.type.defaultProps;for(tt in d)J.call(d,tt)&&!L$1.hasOwnProperty(tt)&&(b[tt]=d[tt]===void 0&&et!==void 0?et[tt]:d[tt])}var tt=arguments.length-2;if(tt===1)b.children=g;else if(1<tt){et=Array(tt);for(var nt=0;nt<tt;nt++)et[nt]=arguments[nt+2];b.children=et}return{$$typeof:l$3,type:_.type,key:$,ref:j,props:b,_owner:_e}};react_production_min.createContext=function(_){return _={$$typeof:u$2,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_.Provider={$$typeof:t$3,_context:_},_.Consumer=_};react_production_min.createElement=M$1;react_production_min.createFactory=function(_){var d=M$1.bind(null,_);return d.type=_,d};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_){return{$$typeof:v$1,render:_}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(_){return{$$typeof:y$1,_payload:{_status:-1,_result:_},_init:T$1}};react_production_min.memo=function(_,d){return{$$typeof:x,type:_,compare:d===void 0?null:d}};react_production_min.startTransition=function(_){var d=V$1.transition;V$1.transition={};try{_()}finally{V$1.transition=d}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(_,d){return U$1.current.useCallback(_,d)};react_production_min.useContext=function(_){return U$1.current.useContext(_)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_){return U$1.current.useDeferredValue(_)};react_production_min.useEffect=function(_,d){return U$1.current.useEffect(_,d)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(_,d,g){return U$1.current.useImperativeHandle(_,d,g)};react_production_min.useInsertionEffect=function(_,d){return U$1.current.useInsertionEffect(_,d)};react_production_min.useLayoutEffect=function(_,d){return U$1.current.useLayoutEffect(_,d)};react_production_min.useMemo=function(_,d){return U$1.current.useMemo(_,d)};react_production_min.useReducer=function(_,d,g){return U$1.current.useReducer(_,d,g)};react_production_min.useRef=function(_){return U$1.current.useRef(_)};react_production_min.useState=function(_){return U$1.current.useState(_)};react_production_min.useSyncExternalStore=function(_,d,g){return U$1.current.useSyncExternalStore(_,d,g)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$2=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$1(_,d,g){var b,$={},j=null,_e=null;g!==void 0&&(j=""+g),d.key!==void 0&&(j=""+d.key),d.ref!==void 0&&(_e=d.ref);for(b in d)m$2.call(d,b)&&!p$3.hasOwnProperty(b)&&($[b]=d[b]);if(_&&_.defaultProps)for(b in d=_.defaultProps,d)$[b]===void 0&&($[b]=d[b]);return{$$typeof:k$1,type:_,key:j,ref:_e,props:$,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_){function d(_t,Ct){var Pt=_t.length;_t.push(Ct);e:for(;0<Pt;){var Nt=Pt-1>>>1,$t=_t[Nt];if(0<$($t,Ct))_t[Nt]=Ct,_t[Pt]=$t,Pt=Nt;else break e}}function g(_t){return _t.length===0?null:_t[0]}function b(_t){if(_t.length===0)return null;var Ct=_t[0],Pt=_t.pop();if(Pt!==Ct){_t[0]=Pt;e:for(var Nt=0,$t=_t.length,Zt=$t>>>1;Nt<Zt;){var Ft=2*(Nt+1)-1,It=_t[Ft],Lt=Ft+1,Dt=_t[Lt];if(0>$(It,Pt))Lt<$t&&0>$(Dt,It)?(_t[Nt]=Dt,_t[Lt]=Pt,Nt=Lt):(_t[Nt]=It,_t[Ft]=Pt,Nt=Ft);else if(Lt<$t&&0>$(Dt,Pt))_t[Nt]=Dt,_t[Lt]=Pt,Nt=Lt;else break e}}return Ct}function $(_t,Ct){var Pt=_t.sortIndex-Ct.sortIndex;return Pt!==0?Pt:_t.id-Ct.id}if(typeof performance=="object"&&typeof performance.now=="function"){var j=performance;_.unstable_now=function(){return j.now()}}else{var _e=Date,et=_e.now();_.unstable_now=function(){return _e.now()-et}}var tt=[],nt=[],it=1,rt=null,st=3,ot=!1,at=!1,ct=!1,ht=typeof setTimeout=="function"?setTimeout:null,ut=typeof clearTimeout=="function"?clearTimeout:null,dt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ft(_t){for(var Ct=g(nt);Ct!==null;){if(Ct.callback===null)b(nt);else if(Ct.startTime<=_t)b(nt),Ct.sortIndex=Ct.expirationTime,d(tt,Ct);else break;Ct=g(nt)}}function mt(_t){if(ct=!1,ft(_t),!at)if(g(tt)!==null)at=!0,At(pt);else{var Ct=g(nt);Ct!==null&&Tt(mt,Ct.startTime-_t)}}function pt(_t,Ct){at=!1,ct&&(ct=!1,ut(yt),yt=-1),ot=!0;var Pt=st;try{for(ft(Ct),rt=g(tt);rt!==null&&(!(rt.expirationTime>Ct)||_t&&!wt());){var Nt=rt.callback;if(typeof Nt=="function"){rt.callback=null,st=rt.priorityLevel;var $t=Nt(rt.expirationTime<=Ct);Ct=_.unstable_now(),typeof $t=="function"?rt.callback=$t:rt===g(tt)&&b(tt),ft(Ct)}else b(tt);rt=g(tt)}if(rt!==null)var Zt=!0;else{var Ft=g(nt);Ft!==null&&Tt(mt,Ft.startTime-Ct),Zt=!1}return Zt}finally{rt=null,st=Pt,ot=!1}}var Ot=!1,gt=null,yt=-1,St=5,vt=-1;function wt(){return!(_.unstable_now()-vt<St)}function xt(){if(gt!==null){var _t=_.unstable_now();vt=_t;var Ct=!0;try{Ct=gt(!0,_t)}finally{Ct?kt():(Ot=!1,gt=null)}}else Ot=!1}var kt;if(typeof dt=="function")kt=function(){dt(xt)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,Et=bt.port2;bt.port1.onmessage=xt,kt=function(){Et.postMessage(null)}}else kt=function(){ht(xt,0)};function At(_t){gt=_t,Ot||(Ot=!0,kt())}function Tt(_t,Ct){yt=ht(function(){_t(_.unstable_now())},Ct)}_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function(_t){_t.callback=null},_.unstable_continueExecution=function(){at||ot||(at=!0,At(pt))},_.unstable_forceFrameRate=function(_t){0>_t||125<_t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):St=0<_t?Math.floor(1e3/_t):5},_.unstable_getCurrentPriorityLevel=function(){return st},_.unstable_getFirstCallbackNode=function(){return g(tt)},_.unstable_next=function(_t){switch(st){case 1:case 2:case 3:var Ct=3;break;default:Ct=st}var Pt=st;st=Ct;try{return _t()}finally{st=Pt}},_.unstable_pauseExecution=function(){},_.unstable_requestPaint=function(){},_.unstable_runWithPriority=function(_t,Ct){switch(_t){case 1:case 2:case 3:case 4:case 5:break;default:_t=3}var Pt=st;st=_t;try{return Ct()}finally{st=Pt}},_.unstable_scheduleCallback=function(_t,Ct,Pt){var Nt=_.unstable_now();switch(typeof Pt=="object"&&Pt!==null?(Pt=Pt.delay,Pt=typeof Pt=="number"&&0<Pt?Nt+Pt:Nt):Pt=Nt,_t){case 1:var $t=-1;break;case 2:$t=250;break;case 5:$t=1073741823;break;case 4:$t=1e4;break;default:$t=5e3}return $t=Pt+$t,_t={id:it++,callback:Ct,priorityLevel:_t,startTime:Pt,expirationTime:$t,sortIndex:-1},Pt>Nt?(_t.sortIndex=Pt,d(nt,_t),g(tt)===null&&_t===g(nt)&&(ct?(ut(yt),yt=-1):ct=!0,Tt(mt,Pt-Nt))):(_t.sortIndex=$t,d(tt,_t),at||ot||(at=!0,At(pt))),_t},_.unstable_shouldYield=wt,_.unstable_wrapCallback=function(_t){var Ct=st;return function(){var Pt=st;st=Ct;try{return _t.apply(this,arguments)}finally{st=Pt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(_){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+_,g=1;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+_+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_,d){ha(_,d),ha(_+"Capture",d)}function ha(_,d){for(ea[_]=d,_=0;_<d.length;_++)da.add(d[_])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_){return ja.call(ma,_)?!0:ja.call(la,_)?!1:ka.test(_)?ma[_]=!0:(la[_]=!0,!1)}function pa(_,d,g,b){if(g!==null&&g.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return b?!1:g!==null?!g.acceptsBooleans:(_=_.toLowerCase().slice(0,5),_!=="data-"&&_!=="aria-");default:return!1}}function qa(_,d,g,b){if(d===null||typeof d>"u"||pa(_,d,g,b))return!0;if(b)return!1;if(g!==null)switch(g.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function v(_,d,g,b,$,j,_e){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=b,this.attributeNamespace=$,this.mustUseProperty=g,this.propertyName=_,this.type=d,this.sanitizeURL=j,this.removeEmptyString=_e}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_){z[_]=new v(_,0,!1,_,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_){var d=_[0];z[d]=new v(d,1,!1,_[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_){z[_]=new v(_,2,!1,_.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_){z[_]=new v(_,2,!1,_,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_){z[_]=new v(_,3,!1,_.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_){z[_]=new v(_,3,!0,_,null,!1,!1)});["capture","download"].forEach(function(_){z[_]=new v(_,4,!1,_,null,!1,!1)});["cols","rows","size","span"].forEach(function(_){z[_]=new v(_,6,!1,_,null,!1,!1)});["rowSpan","start"].forEach(function(_){z[_]=new v(_,5,!1,_.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_){return _[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_){var d=_.replace(ra,sa);z[d]=new v(d,1,!1,_,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_){var d=_.replace(ra,sa);z[d]=new v(d,1,!1,_,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_){var d=_.replace(ra,sa);z[d]=new v(d,1,!1,_,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_){z[_]=new v(_,1,!1,_.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_){z[_]=new v(_,1,!1,_.toLowerCase(),null,!0,!0)});function ta(_,d,g,b){var $=z.hasOwnProperty(d)?z[d]:null;($!==null?$.type!==0:b||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(qa(d,g,$,b)&&(g=null),b||$===null?oa(d)&&(g===null?_.removeAttribute(d):_.setAttribute(d,""+g)):$.mustUseProperty?_[$.propertyName]=g===null?$.type===3?!1:"":g:(d=$.attributeName,b=$.attributeNamespace,g===null?_.removeAttribute(d):($=$.type,g=$===3||$===4&&g===!0?"":""+g,b?_.setAttributeNS(b,d,g):_.setAttribute(d,g))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_){return _===null||typeof _!="object"?null:(_=Ja&&_[Ja]||_["@@iterator"],typeof _=="function"?_:null)}var A=Object.assign,La;function Ma(_){if(La===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);La=d&&d[1]||""}return`
`+La+_}var Na=!1;function Oa(_,d){if(!_||Na)return"";Na=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(nt){var b=nt}Reflect.construct(_,[],d)}else{try{d.call()}catch(nt){b=nt}_.call(d.prototype)}else{try{throw Error()}catch(nt){b=nt}_()}}catch(nt){if(nt&&b&&typeof nt.stack=="string"){for(var $=nt.stack.split(`
`),j=b.stack.split(`
`),_e=$.length-1,et=j.length-1;1<=_e&&0<=et&&$[_e]!==j[et];)et--;for(;1<=_e&&0<=et;_e--,et--)if($[_e]!==j[et]){if(_e!==1||et!==1)do if(_e--,et--,0>et||$[_e]!==j[et]){var tt=`
`+$[_e].replace(" at new "," at ");return _.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",_.displayName)),tt}while(1<=_e&&0<=et);break}}}finally{Na=!1,Error.prepareStackTrace=g}return(_=_?_.displayName||_.name:"")?Ma(_):""}function Pa(_){switch(_.tag){case 5:return Ma(_.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _=Oa(_.type,!1),_;case 11:return _=Oa(_.type.render,!1),_;case 1:return _=Oa(_.type,!0),_;default:return""}}function Qa(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case Ca:return(_.displayName||"Context")+".Consumer";case Ba:return(_._context.displayName||"Context")+".Provider";case Da:var d=_.render;return _=_.displayName,_||(_=d.displayName||d.name||"",_=_!==""?"ForwardRef("+_+")":"ForwardRef"),_;case Ga:return d=_.displayName||null,d!==null?d:Qa(_.type)||"Memo";case Ha:d=_._payload,_=_._init;try{return Qa(_(d))}catch{}}return null}function Ra(_){var d=_.type;switch(_.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _=d.render,_=_.displayName||_.name||"",d.displayName||(_!==""?"ForwardRef("+_+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(d);case 8:return d===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Sa(_){switch(typeof _){case"boolean":case"number":case"string":case"undefined":return _;case"object":return _;default:return""}}function Ta(_){var d=_.type;return(_=_.nodeName)&&_.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Ua(_){var d=Ta(_)?"checked":"value",g=Object.getOwnPropertyDescriptor(_.constructor.prototype,d),b=""+_[d];if(!_.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var $=g.get,j=g.set;return Object.defineProperty(_,d,{configurable:!0,get:function(){return $.call(this)},set:function(_e){b=""+_e,j.call(this,_e)}}),Object.defineProperty(_,d,{enumerable:g.enumerable}),{getValue:function(){return b},setValue:function(_e){b=""+_e},stopTracking:function(){_._valueTracker=null,delete _[d]}}}}function Va(_){_._valueTracker||(_._valueTracker=Ua(_))}function Wa(_){if(!_)return!1;var d=_._valueTracker;if(!d)return!0;var g=d.getValue(),b="";return _&&(b=Ta(_)?_.checked?"true":"false":_.value),_=b,_!==g?(d.setValue(_),!0):!1}function Xa(_){if(_=_||(typeof document<"u"?document:void 0),typeof _>"u")return null;try{return _.activeElement||_.body}catch{return _.body}}function Ya(_,d){var g=d.checked;return A({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??_._wrapperState.initialChecked})}function Za(_,d){var g=d.defaultValue==null?"":d.defaultValue,b=d.checked!=null?d.checked:d.defaultChecked;g=Sa(d.value!=null?d.value:g),_._wrapperState={initialChecked:b,initialValue:g,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function ab(_,d){d=d.checked,d!=null&&ta(_,"checked",d,!1)}function bb(_,d){ab(_,d);var g=Sa(d.value),b=d.type;if(g!=null)b==="number"?(g===0&&_.value===""||_.value!=g)&&(_.value=""+g):_.value!==""+g&&(_.value=""+g);else if(b==="submit"||b==="reset"){_.removeAttribute("value");return}d.hasOwnProperty("value")?cb(_,d.type,g):d.hasOwnProperty("defaultValue")&&cb(_,d.type,Sa(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(_.defaultChecked=!!d.defaultChecked)}function db(_,d,g){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var b=d.type;if(!(b!=="submit"&&b!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+_._wrapperState.initialValue,g||d===_.value||(_.value=d),_.defaultValue=d}g=_.name,g!==""&&(_.name=""),_.defaultChecked=!!_._wrapperState.initialChecked,g!==""&&(_.name=g)}function cb(_,d,g){(d!=="number"||Xa(_.ownerDocument)!==_)&&(g==null?_.defaultValue=""+_._wrapperState.initialValue:_.defaultValue!==""+g&&(_.defaultValue=""+g))}var eb=Array.isArray;function fb(_,d,g,b){if(_=_.options,d){d={};for(var $=0;$<g.length;$++)d["$"+g[$]]=!0;for(g=0;g<_.length;g++)$=d.hasOwnProperty("$"+_[g].value),_[g].selected!==$&&(_[g].selected=$),$&&b&&(_[g].defaultSelected=!0)}else{for(g=""+Sa(g),d=null,$=0;$<_.length;$++){if(_[$].value===g){_[$].selected=!0,b&&(_[$].defaultSelected=!0);return}d!==null||_[$].disabled||(d=_[$])}d!==null&&(d.selected=!0)}}function gb(_,d){if(d.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A({},d,{value:void 0,defaultValue:void 0,children:""+_._wrapperState.initialValue})}function hb(_,d){var g=d.value;if(g==null){if(g=d.children,d=d.defaultValue,g!=null){if(d!=null)throw Error(p$2(92));if(eb(g)){if(1<g.length)throw Error(p$2(93));g=g[0]}d=g}d==null&&(d=""),g=d}_._wrapperState={initialValue:Sa(g)}}function ib(_,d){var g=Sa(d.value),b=Sa(d.defaultValue);g!=null&&(g=""+g,g!==_.value&&(_.value=g),d.defaultValue==null&&_.defaultValue!==g&&(_.defaultValue=g)),b!=null&&(_.defaultValue=""+b)}function jb(_){var d=_.textContent;d===_._wrapperState.initialValue&&d!==""&&d!==null&&(_.value=d)}function kb(_){switch(_){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_,d){return _==null||_==="http://www.w3.org/1999/xhtml"?kb(d):_==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":_}var mb,nb=function(_){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,g,b,$){MSApp.execUnsafeLocalFunction(function(){return _(d,g,b,$)})}:_}(function(_,d){if(_.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _)_.innerHTML=d;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=mb.firstChild;_.firstChild;)_.removeChild(_.firstChild);for(;d.firstChild;)_.appendChild(d.firstChild)}});function ob(_,d){if(d){var g=_.firstChild;if(g&&g===_.lastChild&&g.nodeType===3){g.nodeValue=d;return}}_.textContent=d}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_){qb.forEach(function(d){d=d+_.charAt(0).toUpperCase()+_.substring(1),pb[d]=pb[_]})});function rb(_,d,g){return d==null||typeof d=="boolean"||d===""?"":g||typeof d!="number"||d===0||pb.hasOwnProperty(_)&&pb[_]?(""+d).trim():d+"px"}function sb(_,d){_=_.style;for(var g in d)if(d.hasOwnProperty(g)){var b=g.indexOf("--")===0,$=rb(g,d[g],b);g==="float"&&(g="cssFloat"),b?_.setProperty(g,$):_[g]=$}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_,d){if(d){if(tb[_]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(p$2(137,_));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(p$2(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(p$2(61))}if(d.style!=null&&typeof d.style!="object")throw Error(p$2(62))}}function vb(_,d){if(_.indexOf("-")===-1)return typeof d.is=="string";switch(_){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_){return _=_.target||_.srcElement||window,_.correspondingUseElement&&(_=_.correspondingUseElement),_.nodeType===3?_.parentNode:_}var yb=null,zb=null,Ab=null;function Bb(_){if(_=Cb(_)){if(typeof yb!="function")throw Error(p$2(280));var d=_.stateNode;d&&(d=Db(d),yb(_.stateNode,_.type,d))}}function Eb(_){zb?Ab?Ab.push(_):Ab=[_]:zb=_}function Fb(){if(zb){var _=zb,d=Ab;if(Ab=zb=null,Bb(_),d)for(_=0;_<d.length;_++)Bb(d[_])}}function Gb(_,d){return _(d)}function Hb(){}var Ib=!1;function Jb(_,d,g){if(Ib)return _(d,g);Ib=!0;try{return Gb(_,d,g)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_,d){var g=_.stateNode;if(g===null)return null;var b=Db(g);if(b===null)return null;g=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(_=_.type,b=!(_==="button"||_==="input"||_==="select"||_==="textarea")),_=!b;break e;default:_=!1}if(_)return null;if(g&&typeof g!="function")throw Error(p$2(231,d,typeof g));return g}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_,d,g,b,$,j,_e,et,tt){var nt=Array.prototype.slice.call(arguments,3);try{d.apply(g,nt)}catch(it){this.onError(it)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_){Ob=!0,Pb=_}};function Tb(_,d,g,b,$,j,_e,et,tt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_,d,g,b,$,j,_e,et,tt){if(Tb.apply(this,arguments),Ob){if(Ob){var nt=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=nt)}}function Vb(_){var d=_,g=_;if(_.alternate)for(;d.return;)d=d.return;else{_=d;do d=_,d.flags&4098&&(g=d.return),_=d.return;while(_)}return d.tag===3?g:null}function Wb(_){if(_.tag===13){var d=_.memoizedState;if(d===null&&(_=_.alternate,_!==null&&(d=_.memoizedState)),d!==null)return d.dehydrated}return null}function Xb(_){if(Vb(_)!==_)throw Error(p$2(188))}function Yb(_){var d=_.alternate;if(!d){if(d=Vb(_),d===null)throw Error(p$2(188));return d!==_?null:_}for(var g=_,b=d;;){var $=g.return;if($===null)break;var j=$.alternate;if(j===null){if(b=$.return,b!==null){g=b;continue}break}if($.child===j.child){for(j=$.child;j;){if(j===g)return Xb($),_;if(j===b)return Xb($),d;j=j.sibling}throw Error(p$2(188))}if(g.return!==b.return)g=$,b=j;else{for(var _e=!1,et=$.child;et;){if(et===g){_e=!0,g=$,b=j;break}if(et===b){_e=!0,b=$,g=j;break}et=et.sibling}if(!_e){for(et=j.child;et;){if(et===g){_e=!0,g=j,b=$;break}if(et===b){_e=!0,b=j,g=$;break}et=et.sibling}if(!_e)throw Error(p$2(189))}}if(g.alternate!==b)throw Error(p$2(190))}if(g.tag!==3)throw Error(p$2(188));return g.stateNode.current===g?_:d}function Zb(_){return _=Yb(_),_!==null?$b(_):null}function $b(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){var d=$b(_);if(d!==null)return d;_=_.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(_){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,_,void 0,(_.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_){return _>>>=0,_===0?32:31-(pc(_)/qc|0)|0}var rc=64,sc=4194304;function tc(_){switch(_&-_){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _}}function uc(_,d){var g=_.pendingLanes;if(g===0)return 0;var b=0,$=_.suspendedLanes,j=_.pingedLanes,_e=g&268435455;if(_e!==0){var et=_e&~$;et!==0?b=tc(et):(j&=_e,j!==0&&(b=tc(j)))}else _e=g&~$,_e!==0?b=tc(_e):j!==0&&(b=tc(j));if(b===0)return 0;if(d!==0&&d!==b&&!(d&$)&&($=b&-b,j=d&-d,$>=j||$===16&&(j&4194240)!==0))return d;if(b&4&&(b|=g&16),d=_.entangledLanes,d!==0)for(_=_.entanglements,d&=b;0<d;)g=31-oc(d),$=1<<g,b|=_[g],d&=~$;return b}function vc(_,d){switch(_){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_,d){for(var g=_.suspendedLanes,b=_.pingedLanes,$=_.expirationTimes,j=_.pendingLanes;0<j;){var _e=31-oc(j),et=1<<_e,tt=$[_e];tt===-1?(!(et&g)||et&b)&&($[_e]=vc(et,d)):tt<=d&&(_.expiredLanes|=et),j&=~et}}function xc(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function yc(){var _=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_}function zc(_){for(var d=[],g=0;31>g;g++)d.push(_);return d}function Ac(_,d,g){_.pendingLanes|=d,d!==536870912&&(_.suspendedLanes=0,_.pingedLanes=0),_=_.eventTimes,d=31-oc(d),_[d]=g}function Bc(_,d){var g=_.pendingLanes&~d;_.pendingLanes=d,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=d,_.mutableReadLanes&=d,_.entangledLanes&=d,d=_.entanglements;var b=_.eventTimes;for(_=_.expirationTimes;0<g;){var $=31-oc(g),j=1<<$;d[$]=0,b[$]=-1,_[$]=-1,g&=~j}}function Cc(_,d){var g=_.entangledLanes|=d;for(_=_.entanglements;g;){var b=31-oc(g),$=1<<b;$&d|_[b]&d&&(_[b]|=d),g&=~$}}var C$1=0;function Dc(_){return _&=-_,1<_?4<_?_&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_,d){switch(_){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(d.pointerId)}}function Tc(_,d,g,b,$,j){return _===null||_.nativeEvent!==j?(_={blockedOn:d,domEventName:g,eventSystemFlags:b,nativeEvent:j,targetContainers:[$]},d!==null&&(d=Cb(d),d!==null&&Fc(d)),_):(_.eventSystemFlags|=b,d=_.targetContainers,$!==null&&d.indexOf($)===-1&&d.push($),_)}function Uc(_,d,g,b,$){switch(d){case"focusin":return Lc=Tc(Lc,_,d,g,b,$),!0;case"dragenter":return Mc=Tc(Mc,_,d,g,b,$),!0;case"mouseover":return Nc=Tc(Nc,_,d,g,b,$),!0;case"pointerover":var j=$.pointerId;return Oc.set(j,Tc(Oc.get(j)||null,_,d,g,b,$)),!0;case"gotpointercapture":return j=$.pointerId,Pc.set(j,Tc(Pc.get(j)||null,_,d,g,b,$)),!0}return!1}function Vc(_){var d=Wc(_.target);if(d!==null){var g=Vb(d);if(g!==null){if(d=g.tag,d===13){if(d=Wb(g),d!==null){_.blockedOn=d,Ic(_.priority,function(){Gc(g)});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){_.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}_.blockedOn=null}function Xc(_){if(_.blockedOn!==null)return!1;for(var d=_.targetContainers;0<d.length;){var g=Yc(_.domEventName,_.eventSystemFlags,d[0],_.nativeEvent);if(g===null){g=_.nativeEvent;var b=new g.constructor(g.type,g);wb=b,g.target.dispatchEvent(b),wb=null}else return d=Cb(g),d!==null&&Fc(d),_.blockedOn=g,!1;d.shift()}return!0}function Zc(_,d,g){Xc(_)&&g.delete(d)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_,d){_.blockedOn===d&&(_.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_){function d($){return ad($,_)}if(0<Kc.length){ad(Kc[0],_);for(var g=1;g<Kc.length;g++){var b=Kc[g];b.blockedOn===_&&(b.blockedOn=null)}}for(Lc!==null&&ad(Lc,_),Mc!==null&&ad(Mc,_),Nc!==null&&ad(Nc,_),Oc.forEach(d),Pc.forEach(d),g=0;g<Qc.length;g++)b=Qc[g],b.blockedOn===_&&(b.blockedOn=null);for(;0<Qc.length&&(g=Qc[0],g.blockedOn===null);)Vc(g),g.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(_,d,g,b){var $=C$1,j=cd.transition;cd.transition=null;try{C$1=1,fd(_,d,g,b)}finally{C$1=$,cd.transition=j}}function gd(_,d,g,b){var $=C$1,j=cd.transition;cd.transition=null;try{C$1=4,fd(_,d,g,b)}finally{C$1=$,cd.transition=j}}function fd(_,d,g,b){if(dd){var $=Yc(_,d,g,b);if($===null)hd(_,d,b,id$1,g),Sc(_,b);else if(Uc($,_,d,g,b))b.stopPropagation();else if(Sc(_,b),d&4&&-1<Rc.indexOf(_)){for(;$!==null;){var j=Cb($);if(j!==null&&Ec(j),j=Yc(_,d,g,b),j===null&&hd(_,d,b,id$1,g),j===$)break;$=j}$!==null&&b.stopPropagation()}else hd(_,d,b,null,g)}}var id$1=null;function Yc(_,d,g,b){if(id$1=null,_=xb(b),_=Wc(_),_!==null)if(d=Vb(_),d===null)_=null;else if(g=d.tag,g===13){if(_=Wb(d),_!==null)return _;_=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;_=null}else d!==_&&(_=null);return id$1=_,null}function jd(_){switch(_){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _,d=ld,g=d.length,b,$="value"in kd?kd.value:kd.textContent,j=$.length;for(_=0;_<g&&d[_]===$[_];_++);var _e=g-_;for(b=1;b<=_e&&d[g-b]===$[j-b];b++);return md=$.slice(_,1<b?1-b:void 0)}function od(_){var d=_.keyCode;return"charCode"in _?(_=_.charCode,_===0&&d===13&&(_=13)):_=d,_===10&&(_=13),32<=_||_===13?_:0}function pd(){return!0}function qd(){return!1}function rd(_){function d(g,b,$,j,_e){this._reactName=g,this._targetInst=$,this.type=b,this.nativeEvent=j,this.target=_e,this.currentTarget=null;for(var et in _)_.hasOwnProperty(et)&&(g=_[et],this[et]=g?g(j):j[et]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),d}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_){return _.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_){return _.relatedTarget===void 0?_.fromElement===_.srcElement?_.toElement:_.fromElement:_.relatedTarget},movementX:function(_){return"movementX"in _?_.movementX:(_!==yd&&(yd&&_.type==="mousemove"?(wd=_.screenX-yd.screenX,xd=_.screenY-yd.screenY):xd=wd=0,yd=_),wd)},movementY:function(_){return"movementY"in _?_.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(_){return"clipboardData"in _?_.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(_):(_=Od[_])?!!d[_]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(_){if(_.key){var d=Md[_.key]||_.key;if(d!=="Unidentified")return d}return _.type==="keypress"?(_=od(_),_===13?"Enter":String.fromCharCode(_)):_.type==="keydown"||_.type==="keyup"?Nd[_.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_){return _.type==="keypress"?od(_):0},keyCode:function(_){return _.type==="keydown"||_.type==="keyup"?_.keyCode:0},which:function(_){return _.type==="keypress"?od(_):_.type==="keydown"||_.type==="keyup"?_.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(_){return"deltaX"in _?_.deltaX:"wheelDeltaX"in _?-_.wheelDeltaX:0},deltaY:function(_){return"deltaY"in _?_.deltaY:"wheelDeltaY"in _?-_.wheelDeltaY:"wheelDelta"in _?-_.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(_,d){switch(_){case"keyup":return $d.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(_){return _=_.detail,typeof _=="object"&&"data"in _?_.data:null}var ie$2=!1;function je(_,d){switch(_){case"compositionend":return he(d);case"keypress":return d.which!==32?null:(fe=!0,ee);case"textInput":return _=d.data,_===ee&&fe?null:_;default:return null}}function ke(_,d){if(ie$2)return _==="compositionend"||!ae&&ge(_,d)?(_=nd(),md=ld=kd=null,ie$2=!1,_):null;switch(_){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return de&&d.locale!=="ko"?null:d.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(_){var d=_&&_.nodeName&&_.nodeName.toLowerCase();return d==="input"?!!le[_.type]:d==="textarea"}function ne(_,d,g,b){Eb(b),d=oe(d,"onChange"),0<d.length&&(g=new td("onChange","change",null,g,b),_.push({event:g,listeners:d}))}var pe=null,qe=null;function re(_){se(_,0)}function te(_){var d=ue(_);if(Wa(d))return _}function ve(_,d){if(_==="change")return d}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(_){if(_.propertyName==="value"&&te(qe)){var d=[];ne(d,qe,_,xb(_)),Jb(re,d)}}function Ce(_,d,g){_==="focusin"?(Ae(),pe=d,qe=g,pe.attachEvent("onpropertychange",Be)):_==="focusout"&&Ae()}function De(_){if(_==="selectionchange"||_==="keyup"||_==="keydown")return te(qe)}function Ee(_,d){if(_==="click")return te(d)}function Fe(_,d){if(_==="input"||_==="change")return te(d)}function Ge(_,d){return _===d&&(_!==0||1/_===1/d)||_!==_&&d!==d}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(_,d){if(He(_,d))return!0;if(typeof _!="object"||_===null||typeof d!="object"||d===null)return!1;var g=Object.keys(_),b=Object.keys(d);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var $=g[b];if(!ja.call(d,$)||!He(_[$],d[$]))return!1}return!0}function Je(_){for(;_&&_.firstChild;)_=_.firstChild;return _}function Ke(_,d){var g=Je(_);_=0;for(var b;g;){if(g.nodeType===3){if(b=_+g.textContent.length,_<=d&&b>=d)return{node:g,offset:d-_};_=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Je(g)}}function Le(_,d){return _&&d?_===d?!0:_&&_.nodeType===3?!1:d&&d.nodeType===3?Le(_,d.parentNode):"contains"in _?_.contains(d):_.compareDocumentPosition?!!(_.compareDocumentPosition(d)&16):!1:!1}function Me(){for(var _=window,d=Xa();d instanceof _.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)_=d.contentWindow;else break;d=Xa(_.document)}return d}function Ne(_){var d=_&&_.nodeName&&_.nodeName.toLowerCase();return d&&(d==="input"&&(_.type==="text"||_.type==="search"||_.type==="tel"||_.type==="url"||_.type==="password")||d==="textarea"||_.contentEditable==="true")}function Oe(_){var d=Me(),g=_.focusedElem,b=_.selectionRange;if(d!==g&&g&&g.ownerDocument&&Le(g.ownerDocument.documentElement,g)){if(b!==null&&Ne(g)){if(d=b.start,_=b.end,_===void 0&&(_=d),"selectionStart"in g)g.selectionStart=d,g.selectionEnd=Math.min(_,g.value.length);else if(_=(d=g.ownerDocument||document)&&d.defaultView||window,_.getSelection){_=_.getSelection();var $=g.textContent.length,j=Math.min(b.start,$);b=b.end===void 0?j:Math.min(b.end,$),!_.extend&&j>b&&($=b,b=j,j=$),$=Ke(g,j);var _e=Ke(g,b);$&&_e&&(_.rangeCount!==1||_.anchorNode!==$.node||_.anchorOffset!==$.offset||_.focusNode!==_e.node||_.focusOffset!==_e.offset)&&(d=d.createRange(),d.setStart($.node,$.offset),_.removeAllRanges(),j>b?(_.addRange(d),_.extend(_e.node,_e.offset)):(d.setEnd(_e.node,_e.offset),_.addRange(d)))}}for(d=[],_=g;_=_.parentNode;)_.nodeType===1&&d.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<d.length;g++)_=d[g],_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(_,d,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Te||Qe==null||Qe!==Xa(b)||(b=Qe,"selectionStart"in b&&Ne(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Se&&Ie(Se,b)||(Se=b,b=oe(Re,"onSelect"),0<b.length&&(d=new td("onSelect","select",null,d,g),_.push({event:d,listeners:b}),d.target=Qe)))}function Ve(_,d){var g={};return g[_.toLowerCase()]=d.toLowerCase(),g["Webkit"+_]="webkit"+d,g["Moz"+_]="moz"+d,g}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(_){if(Xe[_])return Xe[_];if(!We[_])return _;var d=We[_],g;for(g in d)if(d.hasOwnProperty(g)&&g in Ye)return Xe[_]=d[g];return _}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_,d){df.set(_,d),fa(d,[_])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_,d,g){var b=_.type||"unknown-event";_.currentTarget=g,Ub(b,d,void 0,_),_.currentTarget=null}function se(_,d){d=(d&4)!==0;for(var g=0;g<_.length;g++){var b=_[g],$=b.event;b=b.listeners;e:{var j=void 0;if(d)for(var _e=b.length-1;0<=_e;_e--){var et=b[_e],tt=et.instance,nt=et.currentTarget;if(et=et.listener,tt!==j&&$.isPropagationStopped())break e;nf($,et,nt),j=tt}else for(_e=0;_e<b.length;_e++){if(et=b[_e],tt=et.instance,nt=et.currentTarget,et=et.listener,tt!==j&&$.isPropagationStopped())break e;nf($,et,nt),j=tt}}}if(Qb)throw _=Rb,Qb=!1,Rb=null,_}function D(_,d){var g=d[of];g===void 0&&(g=d[of]=new Set);var b=_+"__bubble";g.has(b)||(pf(d,_,2,!1),g.add(b))}function qf(_,d,g){var b=0;d&&(b|=4),pf(g,_,b,d)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_){if(!_[rf]){_[rf]=!0,da.forEach(function(g){g!=="selectionchange"&&(mf.has(g)||qf(g,!1,_),qf(g,!0,_))});var d=_.nodeType===9?_:_.ownerDocument;d===null||d[rf]||(d[rf]=!0,qf("selectionchange",!1,d))}}function pf(_,d,g,b){switch(jd(d)){case 1:var $=ed;break;case 4:$=gd;break;default:$=fd}g=$.bind(null,d,g,_),$=void 0,!Lb||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||($=!0),b?$!==void 0?_.addEventListener(d,g,{capture:!0,passive:$}):_.addEventListener(d,g,!0):$!==void 0?_.addEventListener(d,g,{passive:$}):_.addEventListener(d,g,!1)}function hd(_,d,g,b,$){var j=b;if(!(d&1)&&!(d&2)&&b!==null)e:for(;;){if(b===null)return;var _e=b.tag;if(_e===3||_e===4){var et=b.stateNode.containerInfo;if(et===$||et.nodeType===8&&et.parentNode===$)break;if(_e===4)for(_e=b.return;_e!==null;){var tt=_e.tag;if((tt===3||tt===4)&&(tt=_e.stateNode.containerInfo,tt===$||tt.nodeType===8&&tt.parentNode===$))return;_e=_e.return}for(;et!==null;){if(_e=Wc(et),_e===null)return;if(tt=_e.tag,tt===5||tt===6){b=j=_e;continue e}et=et.parentNode}}b=b.return}Jb(function(){var nt=j,it=xb(g),rt=[];e:{var st=df.get(_);if(st!==void 0){var ot=td,at=_;switch(_){case"keypress":if(od(g)===0)break e;case"keydown":case"keyup":ot=Rd;break;case"focusin":at="focus",ot=Fd;break;case"focusout":at="blur",ot=Fd;break;case"beforeblur":case"afterblur":ot=Fd;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Vd;break;case $e:case af:case bf:ot=Hd;break;case cf:ot=Xd;break;case"scroll":ot=vd;break;case"wheel":ot=Zd;break;case"copy":case"cut":case"paste":ot=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Td}var ct=(d&4)!==0,ht=!ct&&_==="scroll",ut=ct?st!==null?st+"Capture":null:st;ct=[];for(var dt=nt,ft;dt!==null;){ft=dt;var mt=ft.stateNode;if(ft.tag===5&&mt!==null&&(ft=mt,ut!==null&&(mt=Kb(dt,ut),mt!=null&&ct.push(tf(dt,mt,ft)))),ht)break;dt=dt.return}0<ct.length&&(st=new ot(st,at,null,g,it),rt.push({event:st,listeners:ct}))}}if(!(d&7)){e:{if(st=_==="mouseover"||_==="pointerover",ot=_==="mouseout"||_==="pointerout",st&&g!==wb&&(at=g.relatedTarget||g.fromElement)&&(Wc(at)||at[uf]))break e;if((ot||st)&&(st=it.window===it?it:(st=it.ownerDocument)?st.defaultView||st.parentWindow:window,ot?(at=g.relatedTarget||g.toElement,ot=nt,at=at?Wc(at):null,at!==null&&(ht=Vb(at),at!==ht||at.tag!==5&&at.tag!==6)&&(at=null)):(ot=null,at=nt),ot!==at)){if(ct=Bd,mt="onMouseLeave",ut="onMouseEnter",dt="mouse",(_==="pointerout"||_==="pointerover")&&(ct=Td,mt="onPointerLeave",ut="onPointerEnter",dt="pointer"),ht=ot==null?st:ue(ot),ft=at==null?st:ue(at),st=new ct(mt,dt+"leave",ot,g,it),st.target=ht,st.relatedTarget=ft,mt=null,Wc(it)===nt&&(ct=new ct(ut,dt+"enter",at,g,it),ct.target=ft,ct.relatedTarget=ht,mt=ct),ht=mt,ot&&at)t:{for(ct=ot,ut=at,dt=0,ft=ct;ft;ft=vf(ft))dt++;for(ft=0,mt=ut;mt;mt=vf(mt))ft++;for(;0<dt-ft;)ct=vf(ct),dt--;for(;0<ft-dt;)ut=vf(ut),ft--;for(;dt--;){if(ct===ut||ut!==null&&ct===ut.alternate)break t;ct=vf(ct),ut=vf(ut)}ct=null}else ct=null;ot!==null&&wf(rt,st,ot,ct,!1),at!==null&&ht!==null&&wf(rt,ht,at,ct,!0)}}e:{if(st=nt?ue(nt):window,ot=st.nodeName&&st.nodeName.toLowerCase(),ot==="select"||ot==="input"&&st.type==="file")var pt=ve;else if(me(st))if(we)pt=Fe;else{pt=De;var Ot=Ce}else(ot=st.nodeName)&&ot.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(pt=Ee);if(pt&&(pt=pt(_,nt))){ne(rt,pt,g,it);break e}Ot&&Ot(_,st,nt),_==="focusout"&&(Ot=st._wrapperState)&&Ot.controlled&&st.type==="number"&&cb(st,"number",st.value)}switch(Ot=nt?ue(nt):window,_){case"focusin":(me(Ot)||Ot.contentEditable==="true")&&(Qe=Ot,Re=nt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(rt,g,it);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(rt,g,it)}var gt;if(ae)e:{switch(_){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else ie$2?ge(_,g)&&(yt="onCompositionEnd"):_==="keydown"&&g.keyCode===229&&(yt="onCompositionStart");yt&&(de&&g.locale!=="ko"&&(ie$2||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&ie$2&&(gt=nd()):(kd=it,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),Ot=oe(nt,yt),0<Ot.length&&(yt=new Ld(yt,_,null,g,it),rt.push({event:yt,listeners:Ot}),gt?yt.data=gt:(gt=he(g),gt!==null&&(yt.data=gt)))),(gt=ce?je(_,g):ke(_,g))&&(nt=oe(nt,"onBeforeInput"),0<nt.length&&(it=new Ld("onBeforeInput","beforeinput",null,g,it),rt.push({event:it,listeners:nt}),it.data=gt))}se(rt,d)})}function tf(_,d,g){return{instance:_,listener:d,currentTarget:g}}function oe(_,d){for(var g=d+"Capture",b=[];_!==null;){var $=_,j=$.stateNode;$.tag===5&&j!==null&&($=j,j=Kb(_,g),j!=null&&b.unshift(tf(_,j,$)),j=Kb(_,d),j!=null&&b.push(tf(_,j,$))),_=_.return}return b}function vf(_){if(_===null)return null;do _=_.return;while(_&&_.tag!==5);return _||null}function wf(_,d,g,b,$){for(var j=d._reactName,_e=[];g!==null&&g!==b;){var et=g,tt=et.alternate,nt=et.stateNode;if(tt!==null&&tt===b)break;et.tag===5&&nt!==null&&(et=nt,$?(tt=Kb(g,j),tt!=null&&_e.unshift(tf(g,tt,et))):$||(tt=Kb(g,j),tt!=null&&_e.push(tf(g,tt,et)))),g=g.return}_e.length!==0&&_.push({event:d,listeners:_e})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_){return(typeof _=="string"?_:""+_).replace(xf,`
`).replace(yf,"")}function Af(_,d,g){if(d=zf(d),zf(_)!==d&&g)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(_,d){return _==="textarea"||_==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_){return Hf.resolve(null).then(_).catch(If)}:Ff;function If(_){setTimeout(function(){throw _})}function Kf(_,d){var g=d,b=0;do{var $=g.nextSibling;if(_.removeChild(g),$&&$.nodeType===8)if(g=$.data,g==="/$"){if(b===0){_.removeChild($),bd(d);return}b--}else g!=="$"&&g!=="$?"&&g!=="$!"||b++;g=$}while(g);bd(d)}function Lf(_){for(;_!=null;_=_.nextSibling){var d=_.nodeType;if(d===1||d===3)break;if(d===8){if(d=_.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return _}function Mf(_){_=_.previousSibling;for(var d=0;_;){if(_.nodeType===8){var g=_.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return _;d--}else g==="/$"&&d++}_=_.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_){var d=_[Of];if(d)return d;for(var g=_.parentNode;g;){if(d=g[uf]||g[Of]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(_=Mf(_);_!==null;){if(g=_[Of])return g;_=Mf(_)}return d}_=g,g=_.parentNode}return null}function Cb(_){return _=_[Of]||_[uf],!_||_.tag!==5&&_.tag!==6&&_.tag!==13&&_.tag!==3?null:_}function ue(_){if(_.tag===5||_.tag===6)return _.stateNode;throw Error(p$2(33))}function Db(_){return _[Pf]||null}var Sf=[],Tf=-1;function Uf(_){return{current:_}}function E(_){0>Tf||(_.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(_,d){Tf++,Sf[Tf]=_.current,_.current=d}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_,d){var g=_.type.contextTypes;if(!g)return Vf;var b=_.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===d)return b.__reactInternalMemoizedMaskedChildContext;var $={},j;for(j in g)$[j]=d[j];return b&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=d,_.__reactInternalMemoizedMaskedChildContext=$),$}function Zf(_){return _=_.childContextTypes,_!=null}function $f(){E(Wf),E(H)}function ag(_,d,g){if(H.current!==Vf)throw Error(p$2(168));G(H,d),G(Wf,g)}function bg(_,d,g){var b=_.stateNode;if(d=d.childContextTypes,typeof b.getChildContext!="function")return g;b=b.getChildContext();for(var $ in b)if(!($ in d))throw Error(p$2(108,Ra(_)||"Unknown",$));return A({},g,b)}function cg(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,_),G(Wf,Wf.current),!0}function dg(_,d,g){var b=_.stateNode;if(!b)throw Error(p$2(169));g?(_=bg(_,d,Xf),b.__reactInternalMemoizedMergedChildContext=_,E(Wf),E(H),G(H,_)):E(Wf),G(Wf,g)}var eg=null,fg=!1,gg=!1;function hg(_){eg===null?eg=[_]:eg.push(_)}function ig(_){fg=!0,hg(_)}function jg(){if(!gg&&eg!==null){gg=!0;var _=0,d=C$1;try{var g=eg;for(C$1=1;_<g.length;_++){var b=g[_];do b=b(!0);while(b!==null)}eg=null,fg=!1}catch($){throw eg!==null&&(eg=eg.slice(_+1)),ac(fc,jg),$}finally{C$1=d,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_,d){kg[lg++]=ng,kg[lg++]=mg,mg=_,ng=d}function ug(_,d,g){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_;var b=rg;_=sg;var $=32-oc(b)-1;b&=~(1<<$),g+=1;var j=32-oc(d)+$;if(30<j){var _e=$-$%5;j=(b&(1<<_e)-1).toString(32),b>>=_e,$-=_e,rg=1<<32-oc(d)+$|g<<$|b,sg=j+_}else rg=1<<j|g<<$|b,sg=_}function vg(_){_.return!==null&&(tg(_,1),ug(_,1,0))}function wg(_){for(;_===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(_,d){var g=Bg(5,null,null,0);g.elementType="DELETED",g.stateNode=d,g.return=_,d=_.deletions,d===null?(_.deletions=[g],_.flags|=16):d.push(g)}function Cg(_,d){switch(_.tag){case 5:var g=_.type;return d=d.nodeType!==1||g.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(_.stateNode=d,xg=_,yg=Lf(d.firstChild),!0):!1;case 6:return d=_.pendingProps===""||d.nodeType!==3?null:d,d!==null?(_.stateNode=d,xg=_,yg=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(g=qg!==null?{id:rg,overflow:sg}:null,_.memoizedState={dehydrated:d,treeContext:g,retryLane:1073741824},g=Bg(18,null,null,0),g.stateNode=d,g.return=_,_.child=g,xg=_,yg=null,!0):!1;default:return!1}}function Dg(_){return(_.mode&1)!==0&&(_.flags&128)===0}function Eg(_){if(I){var d=yg;if(d){var g=d;if(!Cg(_,d)){if(Dg(_))throw Error(p$2(418));d=Lf(g.nextSibling);var b=xg;d&&Cg(_,d)?Ag(b,g):(_.flags=_.flags&-4097|2,I=!1,xg=_)}}else{if(Dg(_))throw Error(p$2(418));_.flags=_.flags&-4097|2,I=!1,xg=_}}}function Fg(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;xg=_}function Gg(_){if(_!==xg)return!1;if(!I)return Fg(_),I=!0,!1;var d;if((d=_.tag!==3)&&!(d=_.tag!==5)&&(d=_.type,d=d!=="head"&&d!=="body"&&!Ef(_.type,_.memoizedProps)),d&&(d=yg)){if(Dg(_))throw Hg(),Error(p$2(418));for(;d;)Ag(_,d),d=Lf(d.nextSibling)}if(Fg(_),_.tag===13){if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(p$2(317));e:{for(_=_.nextSibling,d=0;_;){if(_.nodeType===8){var g=_.data;if(g==="/$"){if(d===0){yg=Lf(_.nextSibling);break e}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++}_=_.nextSibling}yg=null}}else yg=xg?Lf(_.stateNode.nextSibling):null;return!0}function Hg(){for(var _=yg;_;)_=Lf(_.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(_){zg===null?zg=[_]:zg.push(_)}var Kg=ua.ReactCurrentBatchConfig;function Lg(_,d,g){if(_=g.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(p$2(309));var b=g.stateNode}if(!b)throw Error(p$2(147,_));var $=b,j=""+_;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===j?d.ref:(d=function(_e){var et=$.refs;_e===null?delete et[j]:et[j]=_e},d._stringRef=j,d)}if(typeof _!="string")throw Error(p$2(284));if(!g._owner)throw Error(p$2(290,_))}return _}function Mg(_,d){throw _=Object.prototype.toString.call(d),Error(p$2(31,_==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":_))}function Ng(_){var d=_._init;return d(_._payload)}function Og(_){function d(ut,dt){if(_){var ft=ut.deletions;ft===null?(ut.deletions=[dt],ut.flags|=16):ft.push(dt)}}function g(ut,dt){if(!_)return null;for(;dt!==null;)d(ut,dt),dt=dt.sibling;return null}function b(ut,dt){for(ut=new Map;dt!==null;)dt.key!==null?ut.set(dt.key,dt):ut.set(dt.index,dt),dt=dt.sibling;return ut}function $(ut,dt){return ut=Pg(ut,dt),ut.index=0,ut.sibling=null,ut}function j(ut,dt,ft){return ut.index=ft,_?(ft=ut.alternate,ft!==null?(ft=ft.index,ft<dt?(ut.flags|=2,dt):ft):(ut.flags|=2,dt)):(ut.flags|=1048576,dt)}function _e(ut){return _&&ut.alternate===null&&(ut.flags|=2),ut}function et(ut,dt,ft,mt){return dt===null||dt.tag!==6?(dt=Qg(ft,ut.mode,mt),dt.return=ut,dt):(dt=$(dt,ft),dt.return=ut,dt)}function tt(ut,dt,ft,mt){var pt=ft.type;return pt===ya?it(ut,dt,ft.props.children,mt,ft.key):dt!==null&&(dt.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===Ha&&Ng(pt)===dt.type)?(mt=$(dt,ft.props),mt.ref=Lg(ut,dt,ft),mt.return=ut,mt):(mt=Rg(ft.type,ft.key,ft.props,null,ut.mode,mt),mt.ref=Lg(ut,dt,ft),mt.return=ut,mt)}function nt(ut,dt,ft,mt){return dt===null||dt.tag!==4||dt.stateNode.containerInfo!==ft.containerInfo||dt.stateNode.implementation!==ft.implementation?(dt=Sg(ft,ut.mode,mt),dt.return=ut,dt):(dt=$(dt,ft.children||[]),dt.return=ut,dt)}function it(ut,dt,ft,mt,pt){return dt===null||dt.tag!==7?(dt=Tg(ft,ut.mode,mt,pt),dt.return=ut,dt):(dt=$(dt,ft),dt.return=ut,dt)}function rt(ut,dt,ft){if(typeof dt=="string"&&dt!==""||typeof dt=="number")return dt=Qg(""+dt,ut.mode,ft),dt.return=ut,dt;if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case va:return ft=Rg(dt.type,dt.key,dt.props,null,ut.mode,ft),ft.ref=Lg(ut,null,dt),ft.return=ut,ft;case wa:return dt=Sg(dt,ut.mode,ft),dt.return=ut,dt;case Ha:var mt=dt._init;return rt(ut,mt(dt._payload),ft)}if(eb(dt)||Ka(dt))return dt=Tg(dt,ut.mode,ft,null),dt.return=ut,dt;Mg(ut,dt)}return null}function st(ut,dt,ft,mt){var pt=dt!==null?dt.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number")return pt!==null?null:et(ut,dt,""+ft,mt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:return ft.key===pt?tt(ut,dt,ft,mt):null;case wa:return ft.key===pt?nt(ut,dt,ft,mt):null;case Ha:return pt=ft._init,st(ut,dt,pt(ft._payload),mt)}if(eb(ft)||Ka(ft))return pt!==null?null:it(ut,dt,ft,mt,null);Mg(ut,ft)}return null}function ot(ut,dt,ft,mt,pt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return ut=ut.get(ft)||null,et(dt,ut,""+mt,pt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:return ut=ut.get(mt.key===null?ft:mt.key)||null,tt(dt,ut,mt,pt);case wa:return ut=ut.get(mt.key===null?ft:mt.key)||null,nt(dt,ut,mt,pt);case Ha:var Ot=mt._init;return ot(ut,dt,ft,Ot(mt._payload),pt)}if(eb(mt)||Ka(mt))return ut=ut.get(ft)||null,it(dt,ut,mt,pt,null);Mg(dt,mt)}return null}function at(ut,dt,ft,mt){for(var pt=null,Ot=null,gt=dt,yt=dt=0,St=null;gt!==null&&yt<ft.length;yt++){gt.index>yt?(St=gt,gt=null):St=gt.sibling;var vt=st(ut,gt,ft[yt],mt);if(vt===null){gt===null&&(gt=St);break}_&&gt&&vt.alternate===null&&d(ut,gt),dt=j(vt,dt,yt),Ot===null?pt=vt:Ot.sibling=vt,Ot=vt,gt=St}if(yt===ft.length)return g(ut,gt),I&&tg(ut,yt),pt;if(gt===null){for(;yt<ft.length;yt++)gt=rt(ut,ft[yt],mt),gt!==null&&(dt=j(gt,dt,yt),Ot===null?pt=gt:Ot.sibling=gt,Ot=gt);return I&&tg(ut,yt),pt}for(gt=b(ut,gt);yt<ft.length;yt++)St=ot(gt,ut,yt,ft[yt],mt),St!==null&&(_&&St.alternate!==null&&gt.delete(St.key===null?yt:St.key),dt=j(St,dt,yt),Ot===null?pt=St:Ot.sibling=St,Ot=St);return _&&gt.forEach(function(wt){return d(ut,wt)}),I&&tg(ut,yt),pt}function ct(ut,dt,ft,mt){var pt=Ka(ft);if(typeof pt!="function")throw Error(p$2(150));if(ft=pt.call(ft),ft==null)throw Error(p$2(151));for(var Ot=pt=null,gt=dt,yt=dt=0,St=null,vt=ft.next();gt!==null&&!vt.done;yt++,vt=ft.next()){gt.index>yt?(St=gt,gt=null):St=gt.sibling;var wt=st(ut,gt,vt.value,mt);if(wt===null){gt===null&&(gt=St);break}_&&gt&&wt.alternate===null&&d(ut,gt),dt=j(wt,dt,yt),Ot===null?pt=wt:Ot.sibling=wt,Ot=wt,gt=St}if(vt.done)return g(ut,gt),I&&tg(ut,yt),pt;if(gt===null){for(;!vt.done;yt++,vt=ft.next())vt=rt(ut,vt.value,mt),vt!==null&&(dt=j(vt,dt,yt),Ot===null?pt=vt:Ot.sibling=vt,Ot=vt);return I&&tg(ut,yt),pt}for(gt=b(ut,gt);!vt.done;yt++,vt=ft.next())vt=ot(gt,ut,yt,vt.value,mt),vt!==null&&(_&&vt.alternate!==null&&gt.delete(vt.key===null?yt:vt.key),dt=j(vt,dt,yt),Ot===null?pt=vt:Ot.sibling=vt,Ot=vt);return _&&gt.forEach(function(xt){return d(ut,xt)}),I&&tg(ut,yt),pt}function ht(ut,dt,ft,mt){if(typeof ft=="object"&&ft!==null&&ft.type===ya&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:e:{for(var pt=ft.key,Ot=dt;Ot!==null;){if(Ot.key===pt){if(pt=ft.type,pt===ya){if(Ot.tag===7){g(ut,Ot.sibling),dt=$(Ot,ft.props.children),dt.return=ut,ut=dt;break e}}else if(Ot.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===Ha&&Ng(pt)===Ot.type){g(ut,Ot.sibling),dt=$(Ot,ft.props),dt.ref=Lg(ut,Ot,ft),dt.return=ut,ut=dt;break e}g(ut,Ot);break}else d(ut,Ot);Ot=Ot.sibling}ft.type===ya?(dt=Tg(ft.props.children,ut.mode,mt,ft.key),dt.return=ut,ut=dt):(mt=Rg(ft.type,ft.key,ft.props,null,ut.mode,mt),mt.ref=Lg(ut,dt,ft),mt.return=ut,ut=mt)}return _e(ut);case wa:e:{for(Ot=ft.key;dt!==null;){if(dt.key===Ot)if(dt.tag===4&&dt.stateNode.containerInfo===ft.containerInfo&&dt.stateNode.implementation===ft.implementation){g(ut,dt.sibling),dt=$(dt,ft.children||[]),dt.return=ut,ut=dt;break e}else{g(ut,dt);break}else d(ut,dt);dt=dt.sibling}dt=Sg(ft,ut.mode,mt),dt.return=ut,ut=dt}return _e(ut);case Ha:return Ot=ft._init,ht(ut,dt,Ot(ft._payload),mt)}if(eb(ft))return at(ut,dt,ft,mt);if(Ka(ft))return ct(ut,dt,ft,mt);Mg(ut,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"?(ft=""+ft,dt!==null&&dt.tag===6?(g(ut,dt.sibling),dt=$(dt,ft),dt.return=ut,ut=dt):(g(ut,dt),dt=Qg(ft,ut.mode,mt),dt.return=ut,ut=dt),_e(ut)):g(ut,dt)}return ht}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(_){var d=Wg.current;E(Wg),_._currentValue=d}function bh(_,d,g){for(;_!==null;){var b=_.alternate;if((_.childLanes&d)!==d?(_.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),_===g)break;_=_.return}}function ch(_,d){Xg=_,Zg=Yg=null,_=_.dependencies,_!==null&&_.firstContext!==null&&(_.lanes&d&&(dh=!0),_.firstContext=null)}function eh(_){var d=_._currentValue;if(Zg!==_)if(_={context:_,memoizedValue:d,next:null},Yg===null){if(Xg===null)throw Error(p$2(308));Yg=_,Xg.dependencies={lanes:0,firstContext:_}}else Yg=Yg.next=_;return d}var fh=null;function gh(_){fh===null?fh=[_]:fh.push(_)}function hh(_,d,g,b){var $=d.interleaved;return $===null?(g.next=g,gh(d)):(g.next=$.next,$.next=g),d.interleaved=g,ih(_,b)}function ih(_,d){_.lanes|=d;var g=_.alternate;for(g!==null&&(g.lanes|=d),g=_,_=_.return;_!==null;)_.childLanes|=d,g=_.alternate,g!==null&&(g.childLanes|=d),g=_,_=_.return;return g.tag===3?g.stateNode:null}var jh=!1;function kh(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(_,d){_=_.updateQueue,d.updateQueue===_&&(d.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function mh(_,d){return{eventTime:_,lane:d,tag:0,payload:null,callback:null,next:null}}function nh(_,d,g){var b=_.updateQueue;if(b===null)return null;if(b=b.shared,K&2){var $=b.pending;return $===null?d.next=d:(d.next=$.next,$.next=d),b.pending=d,ih(_,g)}return $=b.interleaved,$===null?(d.next=d,gh(b)):(d.next=$.next,$.next=d),b.interleaved=d,ih(_,g)}function oh(_,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194240)!==0)){var b=d.lanes;b&=_.pendingLanes,g|=b,d.lanes=g,Cc(_,g)}}function ph(_,d){var g=_.updateQueue,b=_.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var $=null,j=null;if(g=g.firstBaseUpdate,g!==null){do{var _e={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};j===null?$=j=_e:j=j.next=_e,g=g.next}while(g!==null);j===null?$=j=d:j=j.next=d}else $=j=d;g={baseState:b.baseState,firstBaseUpdate:$,lastBaseUpdate:j,shared:b.shared,effects:b.effects},_.updateQueue=g;return}_=g.lastBaseUpdate,_===null?g.firstBaseUpdate=d:_.next=d,g.lastBaseUpdate=d}function qh(_,d,g,b){var $=_.updateQueue;jh=!1;var j=$.firstBaseUpdate,_e=$.lastBaseUpdate,et=$.shared.pending;if(et!==null){$.shared.pending=null;var tt=et,nt=tt.next;tt.next=null,_e===null?j=nt:_e.next=nt,_e=tt;var it=_.alternate;it!==null&&(it=it.updateQueue,et=it.lastBaseUpdate,et!==_e&&(et===null?it.firstBaseUpdate=nt:et.next=nt,it.lastBaseUpdate=tt))}if(j!==null){var rt=$.baseState;_e=0,it=nt=tt=null,et=j;do{var st=et.lane,ot=et.eventTime;if((b&st)===st){it!==null&&(it=it.next={eventTime:ot,lane:0,tag:et.tag,payload:et.payload,callback:et.callback,next:null});e:{var at=_,ct=et;switch(st=d,ot=g,ct.tag){case 1:if(at=ct.payload,typeof at=="function"){rt=at.call(ot,rt,st);break e}rt=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=ct.payload,st=typeof at=="function"?at.call(ot,rt,st):at,st==null)break e;rt=A({},rt,st);break e;case 2:jh=!0}}et.callback!==null&&et.lane!==0&&(_.flags|=64,st=$.effects,st===null?$.effects=[et]:st.push(et))}else ot={eventTime:ot,lane:st,tag:et.tag,payload:et.payload,callback:et.callback,next:null},it===null?(nt=it=ot,tt=rt):it=it.next=ot,_e|=st;if(et=et.next,et===null){if(et=$.shared.pending,et===null)break;st=et,et=st.next,st.next=null,$.lastBaseUpdate=st,$.shared.pending=null}}while(1);if(it===null&&(tt=rt),$.baseState=tt,$.firstBaseUpdate=nt,$.lastBaseUpdate=it,d=$.shared.interleaved,d!==null){$=d;do _e|=$.lane,$=$.next;while($!==d)}else j===null&&($.shared.lanes=0);rh|=_e,_.lanes=_e,_.memoizedState=rt}}function sh(_,d,g){if(_=d.effects,d.effects=null,_!==null)for(d=0;d<_.length;d++){var b=_[d],$=b.callback;if($!==null){if(b.callback=null,b=g,typeof $!="function")throw Error(p$2(191,$));$.call(b)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(_){if(_===th)throw Error(p$2(174));return _}function yh(_,d){switch(G(wh,d),G(vh,_),G(uh,th),_=d.nodeType,_){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:lb(null,"");break;default:_=_===8?d.parentNode:d,d=_.namespaceURI||null,_=_.tagName,d=lb(d,_)}E(uh),G(uh,d)}function zh(){E(uh),E(vh),E(wh)}function Ah(_){xh(wh.current);var d=xh(uh.current),g=lb(d,_.type);d!==g&&(G(vh,_),G(uh,g))}function Bh(_){vh.current===_&&(E(uh),E(vh))}var L=Uf(0);function Ch(_){for(var d=_;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===_)break;for(;d.sibling===null;){if(d.return===null||d.return===_)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Dh=[];function Eh(){for(var _=0;_<Dh.length;_++)Dh[_]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p$2(321))}function Mh(_,d){if(d===null)return!1;for(var g=0;g<d.length&&g<_.length;g++)if(!He(_[g],d[g]))return!1;return!0}function Nh(_,d,g,b,$,j){if(Hh=j,M=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Fh.current=_===null||_.memoizedState===null?Oh:Ph,_=g(b,$),Jh){j=0;do{if(Jh=!1,Kh=0,25<=j)throw Error(p$2(301));j+=1,O=N=null,d.updateQueue=null,Fh.current=Qh,_=g(b,$)}while(Jh)}if(Fh.current=Rh,d=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,d)throw Error(p$2(300));return _}function Sh(){var _=Kh!==0;return Kh=0,_}function Th(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=_:O=O.next=_,O}function Uh(){if(N===null){var _=M.alternate;_=_!==null?_.memoizedState:null}else _=N.next;var d=O===null?M.memoizedState:O.next;if(d!==null)O=d,N=_;else{if(_===null)throw Error(p$2(310));N=_,_={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=_:O=O.next=_}return O}function Vh(_,d){return typeof d=="function"?d(_):d}function Wh(_){var d=Uh(),g=d.queue;if(g===null)throw Error(p$2(311));g.lastRenderedReducer=_;var b=N,$=b.baseQueue,j=g.pending;if(j!==null){if($!==null){var _e=$.next;$.next=j.next,j.next=_e}b.baseQueue=$=j,g.pending=null}if($!==null){j=$.next,b=b.baseState;var et=_e=null,tt=null,nt=j;do{var it=nt.lane;if((Hh&it)===it)tt!==null&&(tt=tt.next={lane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),b=nt.hasEagerState?nt.eagerState:_(b,nt.action);else{var rt={lane:it,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null};tt===null?(et=tt=rt,_e=b):tt=tt.next=rt,M.lanes|=it,rh|=it}nt=nt.next}while(nt!==null&&nt!==j);tt===null?_e=b:tt.next=et,He(b,d.memoizedState)||(dh=!0),d.memoizedState=b,d.baseState=_e,d.baseQueue=tt,g.lastRenderedState=b}if(_=g.interleaved,_!==null){$=_;do j=$.lane,M.lanes|=j,rh|=j,$=$.next;while($!==_)}else $===null&&(g.lanes=0);return[d.memoizedState,g.dispatch]}function Xh(_){var d=Uh(),g=d.queue;if(g===null)throw Error(p$2(311));g.lastRenderedReducer=_;var b=g.dispatch,$=g.pending,j=d.memoizedState;if($!==null){g.pending=null;var _e=$=$.next;do j=_(j,_e.action),_e=_e.next;while(_e!==$);He(j,d.memoizedState)||(dh=!0),d.memoizedState=j,d.baseQueue===null&&(d.baseState=j),g.lastRenderedState=j}return[j,b]}function Yh(){}function Zh(_,d){var g=M,b=Uh(),$=d(),j=!He(b.memoizedState,$);if(j&&(b.memoizedState=$,dh=!0),b=b.queue,$h(ai.bind(null,g,b,_),[_]),b.getSnapshot!==d||j||O!==null&&O.memoizedState.tag&1){if(g.flags|=2048,bi(9,ci.bind(null,g,b,$,d),void 0,null),Q===null)throw Error(p$2(349));Hh&30||di(g,d,$)}return $}function di(_,d,g){_.flags|=16384,_={getSnapshot:d,value:g},d=M.updateQueue,d===null?(d={lastEffect:null,stores:null},M.updateQueue=d,d.stores=[_]):(g=d.stores,g===null?d.stores=[_]:g.push(_))}function ci(_,d,g,b){d.value=g,d.getSnapshot=b,ei(d)&&fi(_)}function ai(_,d,g){return g(function(){ei(d)&&fi(_)})}function ei(_){var d=_.getSnapshot;_=_.value;try{var g=d();return!He(_,g)}catch{return!0}}function fi(_){var d=ih(_,1);d!==null&&gi(d,_,1,-1)}function hi(_){var d=Th();return typeof _=="function"&&(_=_()),d.memoizedState=d.baseState=_,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:_},d.queue=_,_=_.dispatch=ii.bind(null,M,_),[d.memoizedState,_]}function bi(_,d,g,b){return _={tag:_,create:d,destroy:g,deps:b,next:null},d=M.updateQueue,d===null?(d={lastEffect:null,stores:null},M.updateQueue=d,d.lastEffect=_.next=_):(g=d.lastEffect,g===null?d.lastEffect=_.next=_:(b=g.next,g.next=_,_.next=b,d.lastEffect=_)),_}function ji(){return Uh().memoizedState}function ki(_,d,g,b){var $=Th();M.flags|=_,$.memoizedState=bi(1|d,g,void 0,b===void 0?null:b)}function li(_,d,g,b){var $=Uh();b=b===void 0?null:b;var j=void 0;if(N!==null){var _e=N.memoizedState;if(j=_e.destroy,b!==null&&Mh(b,_e.deps)){$.memoizedState=bi(d,g,j,b);return}}M.flags|=_,$.memoizedState=bi(1|d,g,j,b)}function mi(_,d){return ki(8390656,8,_,d)}function $h(_,d){return li(2048,8,_,d)}function ni(_,d){return li(4,2,_,d)}function oi(_,d){return li(4,4,_,d)}function pi(_,d){if(typeof d=="function")return _=_(),d(_),function(){d(null)};if(d!=null)return _=_(),d.current=_,function(){d.current=null}}function qi(_,d,g){return g=g!=null?g.concat([_]):null,li(4,4,pi.bind(null,d,_),g)}function ri(){}function si(_,d){var g=Uh();d=d===void 0?null:d;var b=g.memoizedState;return b!==null&&d!==null&&Mh(d,b[1])?b[0]:(g.memoizedState=[_,d],_)}function ti(_,d){var g=Uh();d=d===void 0?null:d;var b=g.memoizedState;return b!==null&&d!==null&&Mh(d,b[1])?b[0]:(_=_(),g.memoizedState=[_,d],_)}function ui(_,d,g){return Hh&21?(He(g,d)||(g=yc(),M.lanes|=g,rh|=g,_.baseState=!0),d):(_.baseState&&(_.baseState=!1,dh=!0),_.memoizedState=g)}function vi(_,d){var g=C$1;C$1=g!==0&&4>g?g:4,_(!0);var b=Gh.transition;Gh.transition={};try{_(!1),d()}finally{C$1=g,Gh.transition=b}}function wi(){return Uh().memoizedState}function xi(_,d,g){var b=yi(_);if(g={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null},zi(_))Ai(d,g);else if(g=hh(_,d,g,b),g!==null){var $=R();gi(g,_,b,$),Bi(g,d,b)}}function ii(_,d,g){var b=yi(_),$={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null};if(zi(_))Ai(d,$);else{var j=_.alternate;if(_.lanes===0&&(j===null||j.lanes===0)&&(j=d.lastRenderedReducer,j!==null))try{var _e=d.lastRenderedState,et=j(_e,g);if($.hasEagerState=!0,$.eagerState=et,He(et,_e)){var tt=d.interleaved;tt===null?($.next=$,gh(d)):($.next=tt.next,tt.next=$),d.interleaved=$;return}}catch{}finally{}g=hh(_,d,$,b),g!==null&&($=R(),gi(g,_,b,$),Bi(g,d,b))}}function zi(_){var d=_.alternate;return _===M||d!==null&&d===M}function Ai(_,d){Jh=Ih=!0;var g=_.pending;g===null?d.next=d:(d.next=g.next,g.next=d),_.pending=d}function Bi(_,d,g){if(g&4194240){var b=d.lanes;b&=_.pendingLanes,g|=b,d.lanes=g,Cc(_,g)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(_,d){return Th().memoizedState=[_,d===void 0?null:d],_},useContext:eh,useEffect:mi,useImperativeHandle:function(_,d,g){return g=g!=null?g.concat([_]):null,ki(4194308,4,pi.bind(null,d,_),g)},useLayoutEffect:function(_,d){return ki(4194308,4,_,d)},useInsertionEffect:function(_,d){return ki(4,2,_,d)},useMemo:function(_,d){var g=Th();return d=d===void 0?null:d,_=_(),g.memoizedState=[_,d],_},useReducer:function(_,d,g){var b=Th();return d=g!==void 0?g(d):d,b.memoizedState=b.baseState=d,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_,lastRenderedState:d},b.queue=_,_=_.dispatch=xi.bind(null,M,_),[b.memoizedState,_]},useRef:function(_){var d=Th();return _={current:_},d.memoizedState=_},useState:hi,useDebugValue:ri,useDeferredValue:function(_){return Th().memoizedState=_},useTransition:function(){var _=hi(!1),d=_[0];return _=vi.bind(null,_[1]),Th().memoizedState=_,[d,_]},useMutableSource:function(){},useSyncExternalStore:function(_,d,g){var b=M,$=Th();if(I){if(g===void 0)throw Error(p$2(407));g=g()}else{if(g=d(),Q===null)throw Error(p$2(349));Hh&30||di(b,d,g)}$.memoizedState=g;var j={value:g,getSnapshot:d};return $.queue=j,mi(ai.bind(null,b,j,_),[_]),b.flags|=2048,bi(9,ci.bind(null,b,j,g,d),void 0,null),g},useId:function(){var _=Th(),d=Q.identifierPrefix;if(I){var g=sg,b=rg;g=(b&~(1<<32-oc(b)-1)).toString(32)+g,d=":"+d+"R"+g,g=Kh++,0<g&&(d+="H"+g.toString(32)),d+=":"}else g=Lh++,d=":"+d+"r"+g.toString(32)+":";return _.memoizedState=d},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(_){var d=Uh();return ui(d,N.memoizedState,_)},useTransition:function(){var _=Wh(Vh)[0],d=Uh().memoizedState;return[_,d]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(_){var d=Uh();return N===null?d.memoizedState=_:ui(d,N.memoizedState,_)},useTransition:function(){var _=Xh(Vh)[0],d=Uh().memoizedState;return[_,d]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(_,d){if(_&&_.defaultProps){d=A({},d),_=_.defaultProps;for(var g in _)d[g]===void 0&&(d[g]=_[g]);return d}return d}function Di(_,d,g,b){d=_.memoizedState,g=g(b,d),g=g==null?d:A({},d,g),_.memoizedState=g,_.lanes===0&&(_.updateQueue.baseState=g)}var Ei={isMounted:function(_){return(_=_._reactInternals)?Vb(_)===_:!1},enqueueSetState:function(_,d,g){_=_._reactInternals;var b=R(),$=yi(_),j=mh(b,$);j.payload=d,g!=null&&(j.callback=g),d=nh(_,j,$),d!==null&&(gi(d,_,$,b),oh(d,_,$))},enqueueReplaceState:function(_,d,g){_=_._reactInternals;var b=R(),$=yi(_),j=mh(b,$);j.tag=1,j.payload=d,g!=null&&(j.callback=g),d=nh(_,j,$),d!==null&&(gi(d,_,$,b),oh(d,_,$))},enqueueForceUpdate:function(_,d){_=_._reactInternals;var g=R(),b=yi(_),$=mh(g,b);$.tag=2,d!=null&&($.callback=d),d=nh(_,$,b),d!==null&&(gi(d,_,b,g),oh(d,_,b))}};function Fi(_,d,g,b,$,j,_e){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(b,j,_e):d.prototype&&d.prototype.isPureReactComponent?!Ie(g,b)||!Ie($,j):!0}function Gi(_,d,g){var b=!1,$=Vf,j=d.contextType;return typeof j=="object"&&j!==null?j=eh(j):($=Zf(d)?Xf:H.current,b=d.contextTypes,j=(b=b!=null)?Yf(_,$):Vf),d=new d(g,j),_.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ei,_.stateNode=d,d._reactInternals=_,b&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=$,_.__reactInternalMemoizedMaskedChildContext=j),d}function Hi(_,d,g,b){_=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,b),d.state!==_&&Ei.enqueueReplaceState(d,d.state,null)}function Ii(_,d,g,b){var $=_.stateNode;$.props=g,$.state=_.memoizedState,$.refs={},kh(_);var j=d.contextType;typeof j=="object"&&j!==null?$.context=eh(j):(j=Zf(d)?Xf:H.current,$.context=Yf(_,j)),$.state=_.memoizedState,j=d.getDerivedStateFromProps,typeof j=="function"&&(Di(_,d,j,g),$.state=_.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(d=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),d!==$.state&&Ei.enqueueReplaceState($,$.state,null),qh(_,g,$,b),$.state=_.memoizedState),typeof $.componentDidMount=="function"&&(_.flags|=4194308)}function Ji(_,d){try{var g="",b=d;do g+=Pa(b),b=b.return;while(b);var $=g}catch(j){$=`
Error generating stack: `+j.message+`
`+j.stack}return{value:_,source:d,stack:$,digest:null}}function Ki(_,d,g){return{value:_,source:null,stack:g??null,digest:d??null}}function Li(_,d){try{console.error(d.value)}catch(g){setTimeout(function(){throw g})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(_,d,g){g=mh(-1,g),g.tag=3,g.payload={element:null};var b=d.value;return g.callback=function(){Oi||(Oi=!0,Pi=b),Li(_,d)},g}function Qi(_,d,g){g=mh(-1,g),g.tag=3;var b=_.type.getDerivedStateFromError;if(typeof b=="function"){var $=d.value;g.payload=function(){return b($)},g.callback=function(){Li(_,d)}}var j=_.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(g.callback=function(){Li(_,d),typeof b!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var _e=d.stack;this.componentDidCatch(d.value,{componentStack:_e!==null?_e:""})}),g}function Si(_,d,g){var b=_.pingCache;if(b===null){b=_.pingCache=new Mi;var $=new Set;b.set(d,$)}else $=b.get(d),$===void 0&&($=new Set,b.set(d,$));$.has(g)||($.add(g),_=Ti.bind(null,_,d,g),d.then(_,_))}function Ui(_){do{var d;if((d=_.tag===13)&&(d=_.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return _;_=_.return}while(_!==null);return null}function Vi(_,d,g,b,$){return _.mode&1?(_.flags|=65536,_.lanes=$,_):(_===d?_.flags|=65536:(_.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(d=mh(-1,1),d.tag=2,nh(g,d,1))),g.lanes|=1),_)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(_,d,g,b){d.child=_===null?Vg(d,null,g,b):Ug(d,_.child,g,b)}function Yi(_,d,g,b,$){g=g.render;var j=d.ref;return ch(d,$),b=Nh(_,d,g,b,j,$),g=Sh(),_!==null&&!dh?(d.updateQueue=_.updateQueue,d.flags&=-2053,_.lanes&=~$,Zi(_,d,$)):(I&&g&&vg(d),d.flags|=1,Xi(_,d,b,$),d.child)}function $i(_,d,g,b,$){if(_===null){var j=g.type;return typeof j=="function"&&!aj(j)&&j.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(d.tag=15,d.type=j,bj(_,d,j,b,$)):(_=Rg(g.type,null,b,d,d.mode,$),_.ref=d.ref,_.return=d,d.child=_)}if(j=_.child,!(_.lanes&$)){var _e=j.memoizedProps;if(g=g.compare,g=g!==null?g:Ie,g(_e,b)&&_.ref===d.ref)return Zi(_,d,$)}return d.flags|=1,_=Pg(j,b),_.ref=d.ref,_.return=d,d.child=_}function bj(_,d,g,b,$){if(_!==null){var j=_.memoizedProps;if(Ie(j,b)&&_.ref===d.ref)if(dh=!1,d.pendingProps=b=j,(_.lanes&$)!==0)_.flags&131072&&(dh=!0);else return d.lanes=_.lanes,Zi(_,d,$)}return cj(_,d,g,b,$)}function dj(_,d,g){var b=d.pendingProps,$=b.children,j=_!==null?_.memoizedState:null;if(b.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=g;else{if(!(g&1073741824))return _=j!==null?j.baseLanes|g:g,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:_,cachePool:null,transitions:null},d.updateQueue=null,G(ej,fj),fj|=_,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=j!==null?j.baseLanes:g,G(ej,fj),fj|=b}else j!==null?(b=j.baseLanes|g,d.memoizedState=null):b=g,G(ej,fj),fj|=b;return Xi(_,d,$,g),d.child}function gj(_,d){var g=d.ref;(_===null&&g!==null||_!==null&&_.ref!==g)&&(d.flags|=512,d.flags|=2097152)}function cj(_,d,g,b,$){var j=Zf(g)?Xf:H.current;return j=Yf(d,j),ch(d,$),g=Nh(_,d,g,b,j,$),b=Sh(),_!==null&&!dh?(d.updateQueue=_.updateQueue,d.flags&=-2053,_.lanes&=~$,Zi(_,d,$)):(I&&b&&vg(d),d.flags|=1,Xi(_,d,g,$),d.child)}function hj(_,d,g,b,$){if(Zf(g)){var j=!0;cg(d)}else j=!1;if(ch(d,$),d.stateNode===null)ij(_,d),Gi(d,g,b),Ii(d,g,b,$),b=!0;else if(_===null){var _e=d.stateNode,et=d.memoizedProps;_e.props=et;var tt=_e.context,nt=g.contextType;typeof nt=="object"&&nt!==null?nt=eh(nt):(nt=Zf(g)?Xf:H.current,nt=Yf(d,nt));var it=g.getDerivedStateFromProps,rt=typeof it=="function"||typeof _e.getSnapshotBeforeUpdate=="function";rt||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(et!==b||tt!==nt)&&Hi(d,_e,b,nt),jh=!1;var st=d.memoizedState;_e.state=st,qh(d,b,_e,$),tt=d.memoizedState,et!==b||st!==tt||Wf.current||jh?(typeof it=="function"&&(Di(d,g,it,b),tt=d.memoizedState),(et=jh||Fi(d,g,et,b,st,tt,nt))?(rt||typeof _e.UNSAFE_componentWillMount!="function"&&typeof _e.componentWillMount!="function"||(typeof _e.componentWillMount=="function"&&_e.componentWillMount(),typeof _e.UNSAFE_componentWillMount=="function"&&_e.UNSAFE_componentWillMount()),typeof _e.componentDidMount=="function"&&(d.flags|=4194308)):(typeof _e.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=tt),_e.props=b,_e.state=tt,_e.context=nt,b=et):(typeof _e.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{_e=d.stateNode,lh(_,d),et=d.memoizedProps,nt=d.type===d.elementType?et:Ci(d.type,et),_e.props=nt,rt=d.pendingProps,st=_e.context,tt=g.contextType,typeof tt=="object"&&tt!==null?tt=eh(tt):(tt=Zf(g)?Xf:H.current,tt=Yf(d,tt));var ot=g.getDerivedStateFromProps;(it=typeof ot=="function"||typeof _e.getSnapshotBeforeUpdate=="function")||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(et!==rt||st!==tt)&&Hi(d,_e,b,tt),jh=!1,st=d.memoizedState,_e.state=st,qh(d,b,_e,$);var at=d.memoizedState;et!==rt||st!==at||Wf.current||jh?(typeof ot=="function"&&(Di(d,g,ot,b),at=d.memoizedState),(nt=jh||Fi(d,g,nt,b,st,at,tt)||!1)?(it||typeof _e.UNSAFE_componentWillUpdate!="function"&&typeof _e.componentWillUpdate!="function"||(typeof _e.componentWillUpdate=="function"&&_e.componentWillUpdate(b,at,tt),typeof _e.UNSAFE_componentWillUpdate=="function"&&_e.UNSAFE_componentWillUpdate(b,at,tt)),typeof _e.componentDidUpdate=="function"&&(d.flags|=4),typeof _e.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof _e.componentDidUpdate!="function"||et===_.memoizedProps&&st===_.memoizedState||(d.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||et===_.memoizedProps&&st===_.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=at),_e.props=b,_e.state=at,_e.context=tt,b=nt):(typeof _e.componentDidUpdate!="function"||et===_.memoizedProps&&st===_.memoizedState||(d.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||et===_.memoizedProps&&st===_.memoizedState||(d.flags|=1024),b=!1)}return jj(_,d,g,b,j,$)}function jj(_,d,g,b,$,j){gj(_,d);var _e=(d.flags&128)!==0;if(!b&&!_e)return $&&dg(d,g,!1),Zi(_,d,j);b=d.stateNode,Wi.current=d;var et=_e&&typeof g.getDerivedStateFromError!="function"?null:b.render();return d.flags|=1,_!==null&&_e?(d.child=Ug(d,_.child,null,j),d.child=Ug(d,null,et,j)):Xi(_,d,et,j),d.memoizedState=b.state,$&&dg(d,g,!0),d.child}function kj(_){var d=_.stateNode;d.pendingContext?ag(_,d.pendingContext,d.pendingContext!==d.context):d.context&&ag(_,d.context,!1),yh(_,d.containerInfo)}function lj(_,d,g,b,$){return Ig(),Jg($),d.flags|=256,Xi(_,d,g,b),d.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(_){return{baseLanes:_,cachePool:null,transitions:null}}function oj(_,d,g){var b=d.pendingProps,$=L.current,j=!1,_e=(d.flags&128)!==0,et;if((et=_e)||(et=_!==null&&_.memoizedState===null?!1:($&2)!==0),et?(j=!0,d.flags&=-129):(_===null||_.memoizedState!==null)&&($|=1),G(L,$&1),_===null)return Eg(d),_=d.memoizedState,_!==null&&(_=_.dehydrated,_!==null)?(d.mode&1?_.data==="$!"?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(_e=b.children,_=b.fallback,j?(b=d.mode,j=d.child,_e={mode:"hidden",children:_e},!(b&1)&&j!==null?(j.childLanes=0,j.pendingProps=_e):j=pj(_e,b,0,null),_=Tg(_,b,g,null),j.return=d,_.return=d,j.sibling=_,d.child=j,d.child.memoizedState=nj(g),d.memoizedState=mj,_):qj(d,_e));if($=_.memoizedState,$!==null&&(et=$.dehydrated,et!==null))return rj(_,d,_e,b,et,$,g);if(j){j=b.fallback,_e=d.mode,$=_.child,et=$.sibling;var tt={mode:"hidden",children:b.children};return!(_e&1)&&d.child!==$?(b=d.child,b.childLanes=0,b.pendingProps=tt,d.deletions=null):(b=Pg($,tt),b.subtreeFlags=$.subtreeFlags&14680064),et!==null?j=Pg(et,j):(j=Tg(j,_e,g,null),j.flags|=2),j.return=d,b.return=d,b.sibling=j,d.child=b,b=j,j=d.child,_e=_.child.memoizedState,_e=_e===null?nj(g):{baseLanes:_e.baseLanes|g,cachePool:null,transitions:_e.transitions},j.memoizedState=_e,j.childLanes=_.childLanes&~g,d.memoizedState=mj,b}return j=_.child,_=j.sibling,b=Pg(j,{mode:"visible",children:b.children}),!(d.mode&1)&&(b.lanes=g),b.return=d,b.sibling=null,_!==null&&(g=d.deletions,g===null?(d.deletions=[_],d.flags|=16):g.push(_)),d.child=b,d.memoizedState=null,b}function qj(_,d){return d=pj({mode:"visible",children:d},_.mode,0,null),d.return=_,_.child=d}function sj(_,d,g,b){return b!==null&&Jg(b),Ug(d,_.child,null,g),_=qj(d,d.pendingProps.children),_.flags|=2,d.memoizedState=null,_}function rj(_,d,g,b,$,j,_e){if(g)return d.flags&256?(d.flags&=-257,b=Ki(Error(p$2(422))),sj(_,d,_e,b)):d.memoizedState!==null?(d.child=_.child,d.flags|=128,null):(j=b.fallback,$=d.mode,b=pj({mode:"visible",children:b.children},$,0,null),j=Tg(j,$,_e,null),j.flags|=2,b.return=d,j.return=d,b.sibling=j,d.child=b,d.mode&1&&Ug(d,_.child,null,_e),d.child.memoizedState=nj(_e),d.memoizedState=mj,j);if(!(d.mode&1))return sj(_,d,_e,null);if($.data==="$!"){if(b=$.nextSibling&&$.nextSibling.dataset,b)var et=b.dgst;return b=et,j=Error(p$2(419)),b=Ki(j,b,void 0),sj(_,d,_e,b)}if(et=(_e&_.childLanes)!==0,dh||et){if(b=Q,b!==null){switch(_e&-_e){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}$=$&(b.suspendedLanes|_e)?0:$,$!==0&&$!==j.retryLane&&(j.retryLane=$,ih(_,$),gi(b,_,$,-1))}return tj(),b=Ki(Error(p$2(421))),sj(_,d,_e,b)}return $.data==="$?"?(d.flags|=128,d.child=_.child,d=uj.bind(null,_),$._reactRetry=d,null):(_=j.treeContext,yg=Lf($.nextSibling),xg=d,I=!0,zg=null,_!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_.id,sg=_.overflow,qg=d),d=qj(d,b.children),d.flags|=4096,d)}function vj(_,d,g){_.lanes|=d;var b=_.alternate;b!==null&&(b.lanes|=d),bh(_.return,d,g)}function wj(_,d,g,b,$){var j=_.memoizedState;j===null?_.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:$}:(j.isBackwards=d,j.rendering=null,j.renderingStartTime=0,j.last=b,j.tail=g,j.tailMode=$)}function xj(_,d,g){var b=d.pendingProps,$=b.revealOrder,j=b.tail;if(Xi(_,d,b.children,g),b=L.current,b&2)b=b&1|2,d.flags|=128;else{if(_!==null&&_.flags&128)e:for(_=d.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&vj(_,g,d);else if(_.tag===19)vj(_,g,d);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===d)break e;for(;_.sibling===null;){if(_.return===null||_.return===d)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}b&=1}if(G(L,b),!(d.mode&1))d.memoizedState=null;else switch($){case"forwards":for(g=d.child,$=null;g!==null;)_=g.alternate,_!==null&&Ch(_)===null&&($=g),g=g.sibling;g=$,g===null?($=d.child,d.child=null):($=g.sibling,g.sibling=null),wj(d,!1,$,g,j);break;case"backwards":for(g=null,$=d.child,d.child=null;$!==null;){if(_=$.alternate,_!==null&&Ch(_)===null){d.child=$;break}_=$.sibling,$.sibling=g,g=$,$=_}wj(d,!0,g,null,j);break;case"together":wj(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function ij(_,d){!(d.mode&1)&&_!==null&&(_.alternate=null,d.alternate=null,d.flags|=2)}function Zi(_,d,g){if(_!==null&&(d.dependencies=_.dependencies),rh|=d.lanes,!(g&d.childLanes))return null;if(_!==null&&d.child!==_.child)throw Error(p$2(153));if(d.child!==null){for(_=d.child,g=Pg(_,_.pendingProps),d.child=g,g.return=d;_.sibling!==null;)_=_.sibling,g=g.sibling=Pg(_,_.pendingProps),g.return=d;g.sibling=null}return d.child}function yj(_,d,g){switch(d.tag){case 3:kj(d),Ig();break;case 5:Ah(d);break;case 1:Zf(d.type)&&cg(d);break;case 4:yh(d,d.stateNode.containerInfo);break;case 10:var b=d.type._context,$=d.memoizedProps.value;G(Wg,b._currentValue),b._currentValue=$;break;case 13:if(b=d.memoizedState,b!==null)return b.dehydrated!==null?(G(L,L.current&1),d.flags|=128,null):g&d.child.childLanes?oj(_,d,g):(G(L,L.current&1),_=Zi(_,d,g),_!==null?_.sibling:null);G(L,L.current&1);break;case 19:if(b=(g&d.childLanes)!==0,_.flags&128){if(b)return xj(_,d,g);d.flags|=128}if($=d.memoizedState,$!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),G(L,L.current),b)break;return null;case 22:case 23:return d.lanes=0,dj(_,d,g)}return Zi(_,d,g)}var zj,Aj,Bj,Cj;zj=function(_,d){for(var g=d.child;g!==null;){if(g.tag===5||g.tag===6)_.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return;g=g.return}g.sibling.return=g.return,g=g.sibling}};Aj=function(){};Bj=function(_,d,g,b){var $=_.memoizedProps;if($!==b){_=d.stateNode,xh(uh.current);var j=null;switch(g){case"input":$=Ya(_,$),b=Ya(_,b),j=[];break;case"select":$=A({},$,{value:void 0}),b=A({},b,{value:void 0}),j=[];break;case"textarea":$=gb(_,$),b=gb(_,b),j=[];break;default:typeof $.onClick!="function"&&typeof b.onClick=="function"&&(_.onclick=Bf)}ub(g,b);var _e;g=null;for(nt in $)if(!b.hasOwnProperty(nt)&&$.hasOwnProperty(nt)&&$[nt]!=null)if(nt==="style"){var et=$[nt];for(_e in et)et.hasOwnProperty(_e)&&(g||(g={}),g[_e]="")}else nt!=="dangerouslySetInnerHTML"&&nt!=="children"&&nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&nt!=="autoFocus"&&(ea.hasOwnProperty(nt)?j||(j=[]):(j=j||[]).push(nt,null));for(nt in b){var tt=b[nt];if(et=$!=null?$[nt]:void 0,b.hasOwnProperty(nt)&&tt!==et&&(tt!=null||et!=null))if(nt==="style")if(et){for(_e in et)!et.hasOwnProperty(_e)||tt&&tt.hasOwnProperty(_e)||(g||(g={}),g[_e]="");for(_e in tt)tt.hasOwnProperty(_e)&&et[_e]!==tt[_e]&&(g||(g={}),g[_e]=tt[_e])}else g||(j||(j=[]),j.push(nt,g)),g=tt;else nt==="dangerouslySetInnerHTML"?(tt=tt?tt.__html:void 0,et=et?et.__html:void 0,tt!=null&&et!==tt&&(j=j||[]).push(nt,tt)):nt==="children"?typeof tt!="string"&&typeof tt!="number"||(j=j||[]).push(nt,""+tt):nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(nt)?(tt!=null&&nt==="onScroll"&&D("scroll",_),j||et===tt||(j=[])):(j=j||[]).push(nt,tt))}g&&(j=j||[]).push("style",g);var nt=j;(d.updateQueue=nt)&&(d.flags|=4)}};Cj=function(_,d,g,b){g!==b&&(d.flags|=4)};function Dj(_,d){if(!I)switch(_.tailMode){case"hidden":d=_.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?_.tail=null:g.sibling=null;break;case"collapsed":g=_.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?d||_.tail===null?_.tail=null:_.tail.sibling=null:b.sibling=null}}function S(_){var d=_.alternate!==null&&_.alternate.child===_.child,g=0,b=0;if(d)for(var $=_.child;$!==null;)g|=$.lanes|$.childLanes,b|=$.subtreeFlags&14680064,b|=$.flags&14680064,$.return=_,$=$.sibling;else for($=_.child;$!==null;)g|=$.lanes|$.childLanes,b|=$.subtreeFlags,b|=$.flags,$.return=_,$=$.sibling;return _.subtreeFlags|=b,_.childLanes=g,d}function Ej(_,d,g){var b=d.pendingProps;switch(wg(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(d),null;case 1:return Zf(d.type)&&$f(),S(d),null;case 3:return b=d.stateNode,zh(),E(Wf),E(H),Eh(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(_===null||_.child===null)&&(Gg(d)?d.flags|=4:_===null||_.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(_,d),S(d),null;case 5:Bh(d);var $=xh(wh.current);if(g=d.type,_!==null&&d.stateNode!=null)Bj(_,d,g,b,$),_.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!b){if(d.stateNode===null)throw Error(p$2(166));return S(d),null}if(_=xh(uh.current),Gg(d)){b=d.stateNode,g=d.type;var j=d.memoizedProps;switch(b[Of]=d,b[Pf]=j,_=(d.mode&1)!==0,g){case"dialog":D("cancel",b),D("close",b);break;case"iframe":case"object":case"embed":D("load",b);break;case"video":case"audio":for($=0;$<lf.length;$++)D(lf[$],b);break;case"source":D("error",b);break;case"img":case"image":case"link":D("error",b),D("load",b);break;case"details":D("toggle",b);break;case"input":Za(b,j),D("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!j.multiple},D("invalid",b);break;case"textarea":hb(b,j),D("invalid",b)}ub(g,j),$=null;for(var _e in j)if(j.hasOwnProperty(_e)){var et=j[_e];_e==="children"?typeof et=="string"?b.textContent!==et&&(j.suppressHydrationWarning!==!0&&Af(b.textContent,et,_),$=["children",et]):typeof et=="number"&&b.textContent!==""+et&&(j.suppressHydrationWarning!==!0&&Af(b.textContent,et,_),$=["children",""+et]):ea.hasOwnProperty(_e)&&et!=null&&_e==="onScroll"&&D("scroll",b)}switch(g){case"input":Va(b),db(b,j,!0);break;case"textarea":Va(b),jb(b);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(b.onclick=Bf)}b=$,d.updateQueue=b,b!==null&&(d.flags|=4)}else{_e=$.nodeType===9?$:$.ownerDocument,_==="http://www.w3.org/1999/xhtml"&&(_=kb(g)),_==="http://www.w3.org/1999/xhtml"?g==="script"?(_=_e.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild)):typeof b.is=="string"?_=_e.createElement(g,{is:b.is}):(_=_e.createElement(g),g==="select"&&(_e=_,b.multiple?_e.multiple=!0:b.size&&(_e.size=b.size))):_=_e.createElementNS(_,g),_[Of]=d,_[Pf]=b,zj(_,d,!1,!1),d.stateNode=_;e:{switch(_e=vb(g,b),g){case"dialog":D("cancel",_),D("close",_),$=b;break;case"iframe":case"object":case"embed":D("load",_),$=b;break;case"video":case"audio":for($=0;$<lf.length;$++)D(lf[$],_);$=b;break;case"source":D("error",_),$=b;break;case"img":case"image":case"link":D("error",_),D("load",_),$=b;break;case"details":D("toggle",_),$=b;break;case"input":Za(_,b),$=Ya(_,b),D("invalid",_);break;case"option":$=b;break;case"select":_._wrapperState={wasMultiple:!!b.multiple},$=A({},b,{value:void 0}),D("invalid",_);break;case"textarea":hb(_,b),$=gb(_,b),D("invalid",_);break;default:$=b}ub(g,$),et=$;for(j in et)if(et.hasOwnProperty(j)){var tt=et[j];j==="style"?sb(_,tt):j==="dangerouslySetInnerHTML"?(tt=tt?tt.__html:void 0,tt!=null&&nb(_,tt)):j==="children"?typeof tt=="string"?(g!=="textarea"||tt!=="")&&ob(_,tt):typeof tt=="number"&&ob(_,""+tt):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(ea.hasOwnProperty(j)?tt!=null&&j==="onScroll"&&D("scroll",_):tt!=null&&ta(_,j,tt,_e))}switch(g){case"input":Va(_),db(_,b,!1);break;case"textarea":Va(_),jb(_);break;case"option":b.value!=null&&_.setAttribute("value",""+Sa(b.value));break;case"select":_.multiple=!!b.multiple,j=b.value,j!=null?fb(_,!!b.multiple,j,!1):b.defaultValue!=null&&fb(_,!!b.multiple,b.defaultValue,!0);break;default:typeof $.onClick=="function"&&(_.onclick=Bf)}switch(g){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return S(d),null;case 6:if(_&&d.stateNode!=null)Cj(_,d,_.memoizedProps,b);else{if(typeof b!="string"&&d.stateNode===null)throw Error(p$2(166));if(g=xh(wh.current),xh(uh.current),Gg(d)){if(b=d.stateNode,g=d.memoizedProps,b[Of]=d,(j=b.nodeValue!==g)&&(_=xg,_!==null))switch(_.tag){case 3:Af(b.nodeValue,g,(_.mode&1)!==0);break;case 5:_.memoizedProps.suppressHydrationWarning!==!0&&Af(b.nodeValue,g,(_.mode&1)!==0)}j&&(d.flags|=4)}else b=(g.nodeType===9?g:g.ownerDocument).createTextNode(b),b[Of]=d,d.stateNode=b}return S(d),null;case 13:if(E(L),b=d.memoizedState,_===null||_.memoizedState!==null&&_.memoizedState.dehydrated!==null){if(I&&yg!==null&&d.mode&1&&!(d.flags&128))Hg(),Ig(),d.flags|=98560,j=!1;else if(j=Gg(d),b!==null&&b.dehydrated!==null){if(_===null){if(!j)throw Error(p$2(318));if(j=d.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(p$2(317));j[Of]=d}else Ig(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;S(d),j=!1}else zg!==null&&(Fj(zg),zg=null),j=!0;if(!j)return d.flags&65536?d:null}return d.flags&128?(d.lanes=g,d):(b=b!==null,b!==(_!==null&&_.memoizedState!==null)&&b&&(d.child.flags|=8192,d.mode&1&&(_===null||L.current&1?T===0&&(T=3):tj())),d.updateQueue!==null&&(d.flags|=4),S(d),null);case 4:return zh(),Aj(_,d),_===null&&sf(d.stateNode.containerInfo),S(d),null;case 10:return ah(d.type._context),S(d),null;case 17:return Zf(d.type)&&$f(),S(d),null;case 19:if(E(L),j=d.memoizedState,j===null)return S(d),null;if(b=(d.flags&128)!==0,_e=j.rendering,_e===null)if(b)Dj(j,!1);else{if(T!==0||_!==null&&_.flags&128)for(_=d.child;_!==null;){if(_e=Ch(_),_e!==null){for(d.flags|=128,Dj(j,!1),b=_e.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),d.subtreeFlags=0,b=g,g=d.child;g!==null;)j=g,_=b,j.flags&=14680066,_e=j.alternate,_e===null?(j.childLanes=0,j.lanes=_,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=_e.childLanes,j.lanes=_e.lanes,j.child=_e.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=_e.memoizedProps,j.memoizedState=_e.memoizedState,j.updateQueue=_e.updateQueue,j.type=_e.type,_=_e.dependencies,j.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),g=g.sibling;return G(L,L.current&1|2),d.child}_=_.sibling}j.tail!==null&&B()>Gj&&(d.flags|=128,b=!0,Dj(j,!1),d.lanes=4194304)}else{if(!b)if(_=Ch(_e),_!==null){if(d.flags|=128,b=!0,g=_.updateQueue,g!==null&&(d.updateQueue=g,d.flags|=4),Dj(j,!0),j.tail===null&&j.tailMode==="hidden"&&!_e.alternate&&!I)return S(d),null}else 2*B()-j.renderingStartTime>Gj&&g!==1073741824&&(d.flags|=128,b=!0,Dj(j,!1),d.lanes=4194304);j.isBackwards?(_e.sibling=d.child,d.child=_e):(g=j.last,g!==null?g.sibling=_e:d.child=_e,j.last=_e)}return j.tail!==null?(d=j.tail,j.rendering=d,j.tail=d.sibling,j.renderingStartTime=B(),d.sibling=null,g=L.current,G(L,b?g&1|2:g&1),d):(S(d),null);case 22:case 23:return Hj(),b=d.memoizedState!==null,_!==null&&_.memoizedState!==null!==b&&(d.flags|=8192),b&&d.mode&1?fj&1073741824&&(S(d),d.subtreeFlags&6&&(d.flags|=8192)):S(d),null;case 24:return null;case 25:return null}throw Error(p$2(156,d.tag))}function Ij(_,d){switch(wg(d),d.tag){case 1:return Zf(d.type)&&$f(),_=d.flags,_&65536?(d.flags=_&-65537|128,d):null;case 3:return zh(),E(Wf),E(H),Eh(),_=d.flags,_&65536&&!(_&128)?(d.flags=_&-65537|128,d):null;case 5:return Bh(d),null;case 13:if(E(L),_=d.memoizedState,_!==null&&_.dehydrated!==null){if(d.alternate===null)throw Error(p$2(340));Ig()}return _=d.flags,_&65536?(d.flags=_&-65537|128,d):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(d.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(_,d){var g=_.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(b){W(_,d,b)}else g.current=null}function Mj(_,d,g){try{g()}catch(b){W(_,d,b)}}var Nj=!1;function Oj(_,d){if(Cf=dd,_=Me(),Ne(_)){if("selectionStart"in _)var g={start:_.selectionStart,end:_.selectionEnd};else e:{g=(g=_.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var $=b.anchorOffset,j=b.focusNode;b=b.focusOffset;try{g.nodeType,j.nodeType}catch{g=null;break e}var _e=0,et=-1,tt=-1,nt=0,it=0,rt=_,st=null;t:for(;;){for(var ot;rt!==g||$!==0&&rt.nodeType!==3||(et=_e+$),rt!==j||b!==0&&rt.nodeType!==3||(tt=_e+b),rt.nodeType===3&&(_e+=rt.nodeValue.length),(ot=rt.firstChild)!==null;)st=rt,rt=ot;for(;;){if(rt===_)break t;if(st===g&&++nt===$&&(et=_e),st===j&&++it===b&&(tt=_e),(ot=rt.nextSibling)!==null)break;rt=st,st=rt.parentNode}rt=ot}g=et===-1||tt===-1?null:{start:et,end:tt}}else g=null}g=g||{start:0,end:0}}else g=null;for(Df={focusedElem:_,selectionRange:g},dd=!1,V=d;V!==null;)if(d=V,_=d.child,(d.subtreeFlags&1028)!==0&&_!==null)_.return=d,V=_;else for(;V!==null;){d=V;try{var at=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(at!==null){var ct=at.memoizedProps,ht=at.memoizedState,ut=d.stateNode,dt=ut.getSnapshotBeforeUpdate(d.elementType===d.type?ct:Ci(d.type,ct),ht);ut.__reactInternalSnapshotBeforeUpdate=dt}break;case 3:var ft=d.stateNode.containerInfo;ft.nodeType===1?ft.textContent="":ft.nodeType===9&&ft.documentElement&&ft.removeChild(ft.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(mt){W(d,d.return,mt)}if(_=d.sibling,_!==null){_.return=d.return,V=_;break}V=d.return}return at=Nj,Nj=!1,at}function Pj(_,d,g){var b=d.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var $=b=b.next;do{if(($.tag&_)===_){var j=$.destroy;$.destroy=void 0,j!==void 0&&Mj(d,g,j)}$=$.next}while($!==b)}}function Qj(_,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&_)===_){var b=g.create;g.destroy=b()}g=g.next}while(g!==d)}}function Rj(_){var d=_.ref;if(d!==null){var g=_.stateNode;switch(_.tag){case 5:_=g;break;default:_=g}typeof d=="function"?d(_):d.current=_}}function Sj(_){var d=_.alternate;d!==null&&(_.alternate=null,Sj(d)),_.child=null,_.deletions=null,_.sibling=null,_.tag===5&&(d=_.stateNode,d!==null&&(delete d[Of],delete d[Pf],delete d[of],delete d[Qf],delete d[Rf])),_.stateNode=null,_.return=null,_.dependencies=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.stateNode=null,_.updateQueue=null}function Tj(_){return _.tag===5||_.tag===3||_.tag===4}function Uj(_){e:for(;;){for(;_.sibling===null;){if(_.return===null||Tj(_.return))return null;_=_.return}for(_.sibling.return=_.return,_=_.sibling;_.tag!==5&&_.tag!==6&&_.tag!==18;){if(_.flags&2||_.child===null||_.tag===4)continue e;_.child.return=_,_=_.child}if(!(_.flags&2))return _.stateNode}}function Vj(_,d,g){var b=_.tag;if(b===5||b===6)_=_.stateNode,d?g.nodeType===8?g.parentNode.insertBefore(_,d):g.insertBefore(_,d):(g.nodeType===8?(d=g.parentNode,d.insertBefore(_,g)):(d=g,d.appendChild(_)),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=Bf));else if(b!==4&&(_=_.child,_!==null))for(Vj(_,d,g),_=_.sibling;_!==null;)Vj(_,d,g),_=_.sibling}function Wj(_,d,g){var b=_.tag;if(b===5||b===6)_=_.stateNode,d?g.insertBefore(_,d):g.appendChild(_);else if(b!==4&&(_=_.child,_!==null))for(Wj(_,d,g),_=_.sibling;_!==null;)Wj(_,d,g),_=_.sibling}var X=null,Xj=!1;function Yj(_,d,g){for(g=g.child;g!==null;)Zj(_,d,g),g=g.sibling}function Zj(_,d,g){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,g)}catch{}switch(g.tag){case 5:U||Lj(g,d);case 6:var b=X,$=Xj;X=null,Yj(_,d,g),X=b,Xj=$,X!==null&&(Xj?(_=X,g=g.stateNode,_.nodeType===8?_.parentNode.removeChild(g):_.removeChild(g)):X.removeChild(g.stateNode));break;case 18:X!==null&&(Xj?(_=X,g=g.stateNode,_.nodeType===8?Kf(_.parentNode,g):_.nodeType===1&&Kf(_,g),bd(_)):Kf(X,g.stateNode));break;case 4:b=X,$=Xj,X=g.stateNode.containerInfo,Xj=!0,Yj(_,d,g),X=b,Xj=$;break;case 0:case 11:case 14:case 15:if(!U&&(b=g.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){$=b=b.next;do{var j=$,_e=j.destroy;j=j.tag,_e!==void 0&&(j&2||j&4)&&Mj(g,d,_e),$=$.next}while($!==b)}Yj(_,d,g);break;case 1:if(!U&&(Lj(g,d),b=g.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=g.memoizedProps,b.state=g.memoizedState,b.componentWillUnmount()}catch(et){W(g,d,et)}Yj(_,d,g);break;case 21:Yj(_,d,g);break;case 22:g.mode&1?(U=(b=U)||g.memoizedState!==null,Yj(_,d,g),U=b):Yj(_,d,g);break;default:Yj(_,d,g)}}function ak(_){var d=_.updateQueue;if(d!==null){_.updateQueue=null;var g=_.stateNode;g===null&&(g=_.stateNode=new Kj),d.forEach(function(b){var $=bk.bind(null,_,b);g.has(b)||(g.add(b),b.then($,$))})}}function ck(_,d){var g=d.deletions;if(g!==null)for(var b=0;b<g.length;b++){var $=g[b];try{var j=_,_e=d,et=_e;e:for(;et!==null;){switch(et.tag){case 5:X=et.stateNode,Xj=!1;break e;case 3:X=et.stateNode.containerInfo,Xj=!0;break e;case 4:X=et.stateNode.containerInfo,Xj=!0;break e}et=et.return}if(X===null)throw Error(p$2(160));Zj(j,_e,$),X=null,Xj=!1;var tt=$.alternate;tt!==null&&(tt.return=null),$.return=null}catch(nt){W($,d,nt)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)dk(d,_),d=d.sibling}function dk(_,d){var g=_.alternate,b=_.flags;switch(_.tag){case 0:case 11:case 14:case 15:if(ck(d,_),ek(_),b&4){try{Pj(3,_,_.return),Qj(3,_)}catch(ct){W(_,_.return,ct)}try{Pj(5,_,_.return)}catch(ct){W(_,_.return,ct)}}break;case 1:ck(d,_),ek(_),b&512&&g!==null&&Lj(g,g.return);break;case 5:if(ck(d,_),ek(_),b&512&&g!==null&&Lj(g,g.return),_.flags&32){var $=_.stateNode;try{ob($,"")}catch(ct){W(_,_.return,ct)}}if(b&4&&($=_.stateNode,$!=null)){var j=_.memoizedProps,_e=g!==null?g.memoizedProps:j,et=_.type,tt=_.updateQueue;if(_.updateQueue=null,tt!==null)try{et==="input"&&j.type==="radio"&&j.name!=null&&ab($,j),vb(et,_e);var nt=vb(et,j);for(_e=0;_e<tt.length;_e+=2){var it=tt[_e],rt=tt[_e+1];it==="style"?sb($,rt):it==="dangerouslySetInnerHTML"?nb($,rt):it==="children"?ob($,rt):ta($,it,rt,nt)}switch(et){case"input":bb($,j);break;case"textarea":ib($,j);break;case"select":var st=$._wrapperState.wasMultiple;$._wrapperState.wasMultiple=!!j.multiple;var ot=j.value;ot!=null?fb($,!!j.multiple,ot,!1):st!==!!j.multiple&&(j.defaultValue!=null?fb($,!!j.multiple,j.defaultValue,!0):fb($,!!j.multiple,j.multiple?[]:"",!1))}$[Pf]=j}catch(ct){W(_,_.return,ct)}}break;case 6:if(ck(d,_),ek(_),b&4){if(_.stateNode===null)throw Error(p$2(162));$=_.stateNode,j=_.memoizedProps;try{$.nodeValue=j}catch(ct){W(_,_.return,ct)}}break;case 3:if(ck(d,_),ek(_),b&4&&g!==null&&g.memoizedState.isDehydrated)try{bd(d.containerInfo)}catch(ct){W(_,_.return,ct)}break;case 4:ck(d,_),ek(_);break;case 13:ck(d,_),ek(_),$=_.child,$.flags&8192&&(j=$.memoizedState!==null,$.stateNode.isHidden=j,!j||$.alternate!==null&&$.alternate.memoizedState!==null||(fk=B())),b&4&&ak(_);break;case 22:if(it=g!==null&&g.memoizedState!==null,_.mode&1?(U=(nt=U)||it,ck(d,_),U=nt):ck(d,_),ek(_),b&8192){if(nt=_.memoizedState!==null,(_.stateNode.isHidden=nt)&&!it&&_.mode&1)for(V=_,it=_.child;it!==null;){for(rt=V=it;V!==null;){switch(st=V,ot=st.child,st.tag){case 0:case 11:case 14:case 15:Pj(4,st,st.return);break;case 1:Lj(st,st.return);var at=st.stateNode;if(typeof at.componentWillUnmount=="function"){b=st,g=st.return;try{d=b,at.props=d.memoizedProps,at.state=d.memoizedState,at.componentWillUnmount()}catch(ct){W(b,g,ct)}}break;case 5:Lj(st,st.return);break;case 22:if(st.memoizedState!==null){gk(rt);continue}}ot!==null?(ot.return=st,V=ot):gk(rt)}it=it.sibling}e:for(it=null,rt=_;;){if(rt.tag===5){if(it===null){it=rt;try{$=rt.stateNode,nt?(j=$.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(et=rt.stateNode,tt=rt.memoizedProps.style,_e=tt!=null&&tt.hasOwnProperty("display")?tt.display:null,et.style.display=rb("display",_e))}catch(ct){W(_,_.return,ct)}}}else if(rt.tag===6){if(it===null)try{rt.stateNode.nodeValue=nt?"":rt.memoizedProps}catch(ct){W(_,_.return,ct)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===_)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===_)break e;for(;rt.sibling===null;){if(rt.return===null||rt.return===_)break e;it===rt&&(it=null),rt=rt.return}it===rt&&(it=null),rt.sibling.return=rt.return,rt=rt.sibling}}break;case 19:ck(d,_),ek(_),b&4&&ak(_);break;case 21:break;default:ck(d,_),ek(_)}}function ek(_){var d=_.flags;if(d&2){try{e:{for(var g=_.return;g!==null;){if(Tj(g)){var b=g;break e}g=g.return}throw Error(p$2(160))}switch(b.tag){case 5:var $=b.stateNode;b.flags&32&&(ob($,""),b.flags&=-33);var j=Uj(_);Wj(_,j,$);break;case 3:case 4:var _e=b.stateNode.containerInfo,et=Uj(_);Vj(_,et,_e);break;default:throw Error(p$2(161))}}catch(tt){W(_,_.return,tt)}_.flags&=-3}d&4096&&(_.flags&=-4097)}function hk(_,d,g){V=_,ik(_)}function ik(_,d,g){for(var b=(_.mode&1)!==0;V!==null;){var $=V,j=$.child;if($.tag===22&&b){var _e=$.memoizedState!==null||Jj;if(!_e){var et=$.alternate,tt=et!==null&&et.memoizedState!==null||U;et=Jj;var nt=U;if(Jj=_e,(U=tt)&&!nt)for(V=$;V!==null;)_e=V,tt=_e.child,_e.tag===22&&_e.memoizedState!==null?jk($):tt!==null?(tt.return=_e,V=tt):jk($);for(;j!==null;)V=j,ik(j),j=j.sibling;V=$,Jj=et,U=nt}kk(_)}else $.subtreeFlags&8772&&j!==null?(j.return=$,V=j):kk(_)}}function kk(_){for(;V!==null;){var d=V;if(d.flags&8772){var g=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:U||Qj(5,d);break;case 1:var b=d.stateNode;if(d.flags&4&&!U)if(g===null)b.componentDidMount();else{var $=d.elementType===d.type?g.memoizedProps:Ci(d.type,g.memoizedProps);b.componentDidUpdate($,g.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var j=d.updateQueue;j!==null&&sh(d,j,b);break;case 3:var _e=d.updateQueue;if(_e!==null){if(g=null,d.child!==null)switch(d.child.tag){case 5:g=d.child.stateNode;break;case 1:g=d.child.stateNode}sh(d,_e,g)}break;case 5:var et=d.stateNode;if(g===null&&d.flags&4){g=et;var tt=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":tt.autoFocus&&g.focus();break;case"img":tt.src&&(g.src=tt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var nt=d.alternate;if(nt!==null){var it=nt.memoizedState;if(it!==null){var rt=it.dehydrated;rt!==null&&bd(rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U||d.flags&512&&Rj(d)}catch(st){W(d,d.return,st)}}if(d===_){V=null;break}if(g=d.sibling,g!==null){g.return=d.return,V=g;break}V=d.return}}function gk(_){for(;V!==null;){var d=V;if(d===_){V=null;break}var g=d.sibling;if(g!==null){g.return=d.return,V=g;break}V=d.return}}function jk(_){for(;V!==null;){var d=V;try{switch(d.tag){case 0:case 11:case 15:var g=d.return;try{Qj(4,d)}catch(tt){W(d,g,tt)}break;case 1:var b=d.stateNode;if(typeof b.componentDidMount=="function"){var $=d.return;try{b.componentDidMount()}catch(tt){W(d,$,tt)}}var j=d.return;try{Rj(d)}catch(tt){W(d,j,tt)}break;case 5:var _e=d.return;try{Rj(d)}catch(tt){W(d,_e,tt)}}}catch(tt){W(d,d.return,tt)}if(d===_){V=null;break}var et=d.sibling;if(et!==null){et.return=d.return,V=et;break}V=d.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(_){return _.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(_=C$1,_!==0||(_=window.event,_=_===void 0?16:jd(_.type)),_):1}function gi(_,d,g,b){if(50<yk)throw yk=0,zk=null,Error(p$2(185));Ac(_,g,b),(!(K&2)||_!==Q)&&(_===Q&&(!(K&2)&&(qk|=g),T===4&&Ck(_,Z)),Dk(_,b),g===1&&K===0&&!(d.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(_,d){var g=_.callbackNode;wc(_,d);var b=uc(_,_===Q?Z:0);if(b===0)g!==null&&bc(g),_.callbackNode=null,_.callbackPriority=0;else if(d=b&-b,_.callbackPriority!==d){if(g!=null&&bc(g),d===1)_.tag===0?ig(Ek.bind(null,_)):hg(Ek.bind(null,_)),Jf(function(){!(K&6)&&jg()}),g=null;else{switch(Dc(b)){case 1:g=fc;break;case 4:g=gc;break;case 16:g=hc;break;case 536870912:g=jc;break;default:g=hc}g=Fk(g,Gk.bind(null,_))}_.callbackPriority=d,_.callbackNode=g}}function Gk(_,d){if(Ak=-1,Bk=0,K&6)throw Error(p$2(327));var g=_.callbackNode;if(Hk()&&_.callbackNode!==g)return null;var b=uc(_,_===Q?Z:0);if(b===0)return null;if(b&30||b&_.expiredLanes||d)d=Ik(_,b);else{d=b;var $=K;K|=2;var j=Jk();(Q!==_||Z!==d)&&(uk=null,Gj=B()+500,Kk(_,d));do try{Lk();break}catch(et){Mk(_,et)}while(1);$g(),mk.current=j,K=$,Y!==null?d=0:(Q=null,Z=0,d=T)}if(d!==0){if(d===2&&($=xc(_),$!==0&&(b=$,d=Nk(_,$))),d===1)throw g=pk,Kk(_,0),Ck(_,b),Dk(_,B()),g;if(d===6)Ck(_,b);else{if($=_.current.alternate,!(b&30)&&!Ok($)&&(d=Ik(_,b),d===2&&(j=xc(_),j!==0&&(b=j,d=Nk(_,j))),d===1))throw g=pk,Kk(_,0),Ck(_,b),Dk(_,B()),g;switch(_.finishedWork=$,_.finishedLanes=b,d){case 0:case 1:throw Error(p$2(345));case 2:Pk(_,tk,uk);break;case 3:if(Ck(_,b),(b&130023424)===b&&(d=fk+500-B(),10<d)){if(uc(_,0)!==0)break;if($=_.suspendedLanes,($&b)!==b){R(),_.pingedLanes|=_.suspendedLanes&$;break}_.timeoutHandle=Ff(Pk.bind(null,_,tk,uk),d);break}Pk(_,tk,uk);break;case 4:if(Ck(_,b),(b&4194240)===b)break;for(d=_.eventTimes,$=-1;0<b;){var _e=31-oc(b);j=1<<_e,_e=d[_e],_e>$&&($=_e),b&=~j}if(b=$,b=B()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*lk(b/1960))-b,10<b){_.timeoutHandle=Ff(Pk.bind(null,_,tk,uk),b);break}Pk(_,tk,uk);break;case 5:Pk(_,tk,uk);break;default:throw Error(p$2(329))}}}return Dk(_,B()),_.callbackNode===g?Gk.bind(null,_):null}function Nk(_,d){var g=sk;return _.current.memoizedState.isDehydrated&&(Kk(_,d).flags|=256),_=Ik(_,d),_!==2&&(d=tk,tk=g,d!==null&&Fj(d)),_}function Fj(_){tk===null?tk=_:tk.push.apply(tk,_)}function Ok(_){for(var d=_;;){if(d.flags&16384){var g=d.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var b=0;b<g.length;b++){var $=g[b],j=$.getSnapshot;$=$.value;try{if(!He(j(),$))return!1}catch{return!1}}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===_)break;for(;d.sibling===null;){if(d.return===null||d.return===_)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Ck(_,d){for(d&=~rk,d&=~qk,_.suspendedLanes|=d,_.pingedLanes&=~d,_=_.expirationTimes;0<d;){var g=31-oc(d),b=1<<g;_[g]=-1,d&=~b}}function Ek(_){if(K&6)throw Error(p$2(327));Hk();var d=uc(_,0);if(!(d&1))return Dk(_,B()),null;var g=Ik(_,d);if(_.tag!==0&&g===2){var b=xc(_);b!==0&&(d=b,g=Nk(_,b))}if(g===1)throw g=pk,Kk(_,0),Ck(_,d),Dk(_,B()),g;if(g===6)throw Error(p$2(345));return _.finishedWork=_.current.alternate,_.finishedLanes=d,Pk(_,tk,uk),Dk(_,B()),null}function Qk(_,d){var g=K;K|=1;try{return _(d)}finally{K=g,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(_){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var d=K;K|=1;var g=ok.transition,b=C$1;try{if(ok.transition=null,C$1=1,_)return _()}finally{C$1=b,ok.transition=g,K=d,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(_,d){_.finishedWork=null,_.finishedLanes=0;var g=_.timeoutHandle;if(g!==-1&&(_.timeoutHandle=-1,Gf(g)),Y!==null)for(g=Y.return;g!==null;){var b=g;switch(wg(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(b);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(b.type._context);break;case 22:case 23:Hj()}g=g.return}if(Q=_,Y=_=Pg(_.current,null),Z=fj=d,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(d=0;d<fh.length;d++)if(g=fh[d],b=g.interleaved,b!==null){g.interleaved=null;var $=b.next,j=g.pending;if(j!==null){var _e=j.next;j.next=$,b.next=_e}g.pending=b}fh=null}return _}function Mk(_,d){do{var g=Y;try{if($g(),Fh.current=Rh,Ih){for(var b=M.memoizedState;b!==null;){var $=b.queue;$!==null&&($.pending=null),b=b.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,g===null||g.return===null){T=1,pk=d,Y=null;break}e:{var j=_,_e=g.return,et=g,tt=d;if(d=Z,et.flags|=32768,tt!==null&&typeof tt=="object"&&typeof tt.then=="function"){var nt=tt,it=et,rt=it.tag;if(!(it.mode&1)&&(rt===0||rt===11||rt===15)){var st=it.alternate;st?(it.updateQueue=st.updateQueue,it.memoizedState=st.memoizedState,it.lanes=st.lanes):(it.updateQueue=null,it.memoizedState=null)}var ot=Ui(_e);if(ot!==null){ot.flags&=-257,Vi(ot,_e,et,j,d),ot.mode&1&&Si(j,nt,d),d=ot,tt=nt;var at=d.updateQueue;if(at===null){var ct=new Set;ct.add(tt),d.updateQueue=ct}else at.add(tt);break e}else{if(!(d&1)){Si(j,nt,d),tj();break e}tt=Error(p$2(426))}}else if(I&&et.mode&1){var ht=Ui(_e);if(ht!==null){!(ht.flags&65536)&&(ht.flags|=256),Vi(ht,_e,et,j,d),Jg(Ji(tt,et));break e}}j=tt=Ji(tt,et),T!==4&&(T=2),sk===null?sk=[j]:sk.push(j),j=_e;do{switch(j.tag){case 3:j.flags|=65536,d&=-d,j.lanes|=d;var ut=Ni(j,tt,d);ph(j,ut);break e;case 1:et=tt;var dt=j.type,ft=j.stateNode;if(!(j.flags&128)&&(typeof dt.getDerivedStateFromError=="function"||ft!==null&&typeof ft.componentDidCatch=="function"&&(Ri===null||!Ri.has(ft)))){j.flags|=65536,d&=-d,j.lanes|=d;var mt=Qi(j,et,d);ph(j,mt);break e}}j=j.return}while(j!==null)}Sk(g)}catch(pt){d=pt,Y===g&&g!==null&&(Y=g=g.return);continue}break}while(1)}function Jk(){var _=mk.current;return mk.current=Rh,_===null?Rh:_}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(_,d){var g=K;K|=2;var b=Jk();(Q!==_||Z!==d)&&(uk=null,Kk(_,d));do try{Tk();break}catch($){Mk(_,$)}while(1);if($g(),K=g,mk.current=b,Y!==null)throw Error(p$2(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(_){var d=Vk(_.alternate,_,fj);_.memoizedProps=_.pendingProps,d===null?Sk(_):Y=d,nk.current=null}function Sk(_){var d=_;do{var g=d.alternate;if(_=d.return,d.flags&32768){if(g=Ij(g,d),g!==null){g.flags&=32767,Y=g;return}if(_!==null)_.flags|=32768,_.subtreeFlags=0,_.deletions=null;else{T=6,Y=null;return}}else if(g=Ej(g,d,fj),g!==null){Y=g;return}if(d=d.sibling,d!==null){Y=d;return}Y=d=_}while(d!==null);T===0&&(T=5)}function Pk(_,d,g){var b=C$1,$=ok.transition;try{ok.transition=null,C$1=1,Wk(_,d,g,b)}finally{ok.transition=$,C$1=b}return null}function Wk(_,d,g,b){do Hk();while(wk!==null);if(K&6)throw Error(p$2(327));g=_.finishedWork;var $=_.finishedLanes;if(g===null)return null;if(_.finishedWork=null,_.finishedLanes=0,g===_.current)throw Error(p$2(177));_.callbackNode=null,_.callbackPriority=0;var j=g.lanes|g.childLanes;if(Bc(_,j),_===Q&&(Y=Q=null,Z=0),!(g.subtreeFlags&2064)&&!(g.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),j=(g.flags&15990)!==0,g.subtreeFlags&15990||j){j=ok.transition,ok.transition=null;var _e=C$1;C$1=1;var et=K;K|=4,nk.current=null,Oj(_,g),dk(g,_),Oe(Df),dd=!!Cf,Df=Cf=null,_.current=g,hk(g),dc(),K=et,C$1=_e,ok.transition=j}else _.current=g;if(vk&&(vk=!1,wk=_,xk=$),j=_.pendingLanes,j===0&&(Ri=null),mc(g.stateNode),Dk(_,B()),d!==null)for(b=_.onRecoverableError,g=0;g<d.length;g++)$=d[g],b($.value,{componentStack:$.stack,digest:$.digest});if(Oi)throw Oi=!1,_=Pi,Pi=null,_;return xk&1&&_.tag!==0&&Hk(),j=_.pendingLanes,j&1?_===zk?yk++:(yk=0,zk=_):yk=0,jg(),null}function Hk(){if(wk!==null){var _=Dc(xk),d=ok.transition,g=C$1;try{if(ok.transition=null,C$1=16>_?16:_,wk===null)var b=!1;else{if(_=wk,wk=null,xk=0,K&6)throw Error(p$2(331));var $=K;for(K|=4,V=_.current;V!==null;){var j=V,_e=j.child;if(V.flags&16){var et=j.deletions;if(et!==null){for(var tt=0;tt<et.length;tt++){var nt=et[tt];for(V=nt;V!==null;){var it=V;switch(it.tag){case 0:case 11:case 15:Pj(8,it,j)}var rt=it.child;if(rt!==null)rt.return=it,V=rt;else for(;V!==null;){it=V;var st=it.sibling,ot=it.return;if(Sj(it),it===nt){V=null;break}if(st!==null){st.return=ot,V=st;break}V=ot}}}var at=j.alternate;if(at!==null){var ct=at.child;if(ct!==null){at.child=null;do{var ht=ct.sibling;ct.sibling=null,ct=ht}while(ct!==null)}}V=j}}if(j.subtreeFlags&2064&&_e!==null)_e.return=j,V=_e;else e:for(;V!==null;){if(j=V,j.flags&2048)switch(j.tag){case 0:case 11:case 15:Pj(9,j,j.return)}var ut=j.sibling;if(ut!==null){ut.return=j.return,V=ut;break e}V=j.return}}var dt=_.current;for(V=dt;V!==null;){_e=V;var ft=_e.child;if(_e.subtreeFlags&2064&&ft!==null)ft.return=_e,V=ft;else e:for(_e=dt;V!==null;){if(et=V,et.flags&2048)try{switch(et.tag){case 0:case 11:case 15:Qj(9,et)}}catch(pt){W(et,et.return,pt)}if(et===_e){V=null;break e}var mt=et.sibling;if(mt!==null){mt.return=et.return,V=mt;break e}V=et.return}}if(K=$,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,_)}catch{}b=!0}return b}finally{C$1=g,ok.transition=d}}return!1}function Xk(_,d,g){d=Ji(g,d),d=Ni(_,d,1),_=nh(_,d,1),d=R(),_!==null&&(Ac(_,1,d),Dk(_,d))}function W(_,d,g){if(_.tag===3)Xk(_,_,g);else for(;d!==null;){if(d.tag===3){Xk(d,_,g);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Ri===null||!Ri.has(b))){_=Ji(g,_),_=Qi(d,_,1),d=nh(d,_,1),_=R(),d!==null&&(Ac(d,1,_),Dk(d,_));break}}d=d.return}}function Ti(_,d,g){var b=_.pingCache;b!==null&&b.delete(d),d=R(),_.pingedLanes|=_.suspendedLanes&g,Q===_&&(Z&g)===g&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(_,0):rk|=g),Dk(_,d)}function Yk(_,d){d===0&&(_.mode&1?(d=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):d=1);var g=R();_=ih(_,d),_!==null&&(Ac(_,d,g),Dk(_,g))}function uj(_){var d=_.memoizedState,g=0;d!==null&&(g=d.retryLane),Yk(_,g)}function bk(_,d){var g=0;switch(_.tag){case 13:var b=_.stateNode,$=_.memoizedState;$!==null&&(g=$.retryLane);break;case 19:b=_.stateNode;break;default:throw Error(p$2(314))}b!==null&&b.delete(d),Yk(_,g)}var Vk;Vk=function(_,d,g){if(_!==null)if(_.memoizedProps!==d.pendingProps||Wf.current)dh=!0;else{if(!(_.lanes&g)&&!(d.flags&128))return dh=!1,yj(_,d,g);dh=!!(_.flags&131072)}else dh=!1,I&&d.flags&1048576&&ug(d,ng,d.index);switch(d.lanes=0,d.tag){case 2:var b=d.type;ij(_,d),_=d.pendingProps;var $=Yf(d,H.current);ch(d,g),$=Nh(null,d,b,_,$,g);var j=Sh();return d.flags|=1,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Zf(b)?(j=!0,cg(d)):j=!1,d.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,kh(d),$.updater=Ei,d.stateNode=$,$._reactInternals=d,Ii(d,b,_,g),d=jj(null,d,b,!0,j,g)):(d.tag=0,I&&j&&vg(d),Xi(null,d,$,g),d=d.child),d;case 16:b=d.elementType;e:{switch(ij(_,d),_=d.pendingProps,$=b._init,b=$(b._payload),d.type=b,$=d.tag=Zk(b),_=Ci(b,_),$){case 0:d=cj(null,d,b,_,g);break e;case 1:d=hj(null,d,b,_,g);break e;case 11:d=Yi(null,d,b,_,g);break e;case 14:d=$i(null,d,b,Ci(b.type,_),g);break e}throw Error(p$2(306,b,""))}return d;case 0:return b=d.type,$=d.pendingProps,$=d.elementType===b?$:Ci(b,$),cj(_,d,b,$,g);case 1:return b=d.type,$=d.pendingProps,$=d.elementType===b?$:Ci(b,$),hj(_,d,b,$,g);case 3:e:{if(kj(d),_===null)throw Error(p$2(387));b=d.pendingProps,j=d.memoizedState,$=j.element,lh(_,d),qh(d,b,null,g);var _e=d.memoizedState;if(b=_e.element,j.isDehydrated)if(j={element:b,isDehydrated:!1,cache:_e.cache,pendingSuspenseBoundaries:_e.pendingSuspenseBoundaries,transitions:_e.transitions},d.updateQueue.baseState=j,d.memoizedState=j,d.flags&256){$=Ji(Error(p$2(423)),d),d=lj(_,d,b,g,$);break e}else if(b!==$){$=Ji(Error(p$2(424)),d),d=lj(_,d,b,g,$);break e}else for(yg=Lf(d.stateNode.containerInfo.firstChild),xg=d,I=!0,zg=null,g=Vg(d,null,b,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Ig(),b===$){d=Zi(_,d,g);break e}Xi(_,d,b,g)}d=d.child}return d;case 5:return Ah(d),_===null&&Eg(d),b=d.type,$=d.pendingProps,j=_!==null?_.memoizedProps:null,_e=$.children,Ef(b,$)?_e=null:j!==null&&Ef(b,j)&&(d.flags|=32),gj(_,d),Xi(_,d,_e,g),d.child;case 6:return _===null&&Eg(d),null;case 13:return oj(_,d,g);case 4:return yh(d,d.stateNode.containerInfo),b=d.pendingProps,_===null?d.child=Ug(d,null,b,g):Xi(_,d,b,g),d.child;case 11:return b=d.type,$=d.pendingProps,$=d.elementType===b?$:Ci(b,$),Yi(_,d,b,$,g);case 7:return Xi(_,d,d.pendingProps,g),d.child;case 8:return Xi(_,d,d.pendingProps.children,g),d.child;case 12:return Xi(_,d,d.pendingProps.children,g),d.child;case 10:e:{if(b=d.type._context,$=d.pendingProps,j=d.memoizedProps,_e=$.value,G(Wg,b._currentValue),b._currentValue=_e,j!==null)if(He(j.value,_e)){if(j.children===$.children&&!Wf.current){d=Zi(_,d,g);break e}}else for(j=d.child,j!==null&&(j.return=d);j!==null;){var et=j.dependencies;if(et!==null){_e=j.child;for(var tt=et.firstContext;tt!==null;){if(tt.context===b){if(j.tag===1){tt=mh(-1,g&-g),tt.tag=2;var nt=j.updateQueue;if(nt!==null){nt=nt.shared;var it=nt.pending;it===null?tt.next=tt:(tt.next=it.next,it.next=tt),nt.pending=tt}}j.lanes|=g,tt=j.alternate,tt!==null&&(tt.lanes|=g),bh(j.return,g,d),et.lanes|=g;break}tt=tt.next}}else if(j.tag===10)_e=j.type===d.type?null:j.child;else if(j.tag===18){if(_e=j.return,_e===null)throw Error(p$2(341));_e.lanes|=g,et=_e.alternate,et!==null&&(et.lanes|=g),bh(_e,g,d),_e=j.sibling}else _e=j.child;if(_e!==null)_e.return=j;else for(_e=j;_e!==null;){if(_e===d){_e=null;break}if(j=_e.sibling,j!==null){j.return=_e.return,_e=j;break}_e=_e.return}j=_e}Xi(_,d,$.children,g),d=d.child}return d;case 9:return $=d.type,b=d.pendingProps.children,ch(d,g),$=eh($),b=b($),d.flags|=1,Xi(_,d,b,g),d.child;case 14:return b=d.type,$=Ci(b,d.pendingProps),$=Ci(b.type,$),$i(_,d,b,$,g);case 15:return bj(_,d,d.type,d.pendingProps,g);case 17:return b=d.type,$=d.pendingProps,$=d.elementType===b?$:Ci(b,$),ij(_,d),d.tag=1,Zf(b)?(_=!0,cg(d)):_=!1,ch(d,g),Gi(d,b,$),Ii(d,b,$,g),jj(null,d,b,!0,_,g);case 19:return xj(_,d,g);case 22:return dj(_,d,g)}throw Error(p$2(156,d.tag))};function Fk(_,d){return ac(_,d)}function $k(_,d,g,b){this.tag=_,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_,d,g,b){return new $k(_,d,g,b)}function aj(_){return _=_.prototype,!(!_||!_.isReactComponent)}function Zk(_){if(typeof _=="function")return aj(_)?1:0;if(_!=null){if(_=_.$$typeof,_===Da)return 11;if(_===Ga)return 14}return 2}function Pg(_,d){var g=_.alternate;return g===null?(g=Bg(_.tag,d,_.key,_.mode),g.elementType=_.elementType,g.type=_.type,g.stateNode=_.stateNode,g.alternate=_,_.alternate=g):(g.pendingProps=d,g.type=_.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=_.flags&14680064,g.childLanes=_.childLanes,g.lanes=_.lanes,g.child=_.child,g.memoizedProps=_.memoizedProps,g.memoizedState=_.memoizedState,g.updateQueue=_.updateQueue,d=_.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=_.sibling,g.index=_.index,g.ref=_.ref,g}function Rg(_,d,g,b,$,j){var _e=2;if(b=_,typeof _=="function")aj(_)&&(_e=1);else if(typeof _=="string")_e=5;else e:switch(_){case ya:return Tg(g.children,$,j,d);case za:_e=8,$|=8;break;case Aa:return _=Bg(12,g,d,$|2),_.elementType=Aa,_.lanes=j,_;case Ea:return _=Bg(13,g,d,$),_.elementType=Ea,_.lanes=j,_;case Fa:return _=Bg(19,g,d,$),_.elementType=Fa,_.lanes=j,_;case Ia:return pj(g,$,j,d);default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case Ba:_e=10;break e;case Ca:_e=9;break e;case Da:_e=11;break e;case Ga:_e=14;break e;case Ha:_e=16,b=null;break e}throw Error(p$2(130,_==null?_:typeof _,""))}return d=Bg(_e,g,d,$),d.elementType=_,d.type=b,d.lanes=j,d}function Tg(_,d,g,b){return _=Bg(7,_,b,d),_.lanes=g,_}function pj(_,d,g,b){return _=Bg(22,_,b,d),_.elementType=Ia,_.lanes=g,_.stateNode={isHidden:!1},_}function Qg(_,d,g){return _=Bg(6,_,null,d),_.lanes=g,_}function Sg(_,d,g){return d=Bg(4,_.children!==null?_.children:[],_.key,d),d.lanes=g,d.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},d}function al(_,d,g,b,$){this.tag=d,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=b,this.onRecoverableError=$,this.mutableSourceEagerHydrationData=null}function bl(_,d,g,b,$,j,_e,et,tt){return _=new al(_,d,g,et,tt),d===1?(d=1,j===!0&&(d|=8)):d=0,j=Bg(3,null,null,d),_.current=j,j.stateNode=_,j.memoizedState={element:b,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(j),_}function cl(_,d,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:b==null?null:""+b,children:_,containerInfo:d,implementation:g}}function dl(_){if(!_)return Vf;_=_._reactInternals;e:{if(Vb(_)!==_||_.tag!==1)throw Error(p$2(170));var d=_;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Zf(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(p$2(171))}if(_.tag===1){var g=_.type;if(Zf(g))return bg(_,g,d)}return d}function el(_,d,g,b,$,j,_e,et,tt){return _=bl(g,b,!0,_,$,j,_e,et,tt),_.context=dl(null),g=_.current,b=R(),$=yi(g),j=mh(b,$),j.callback=d??null,nh(g,j,$),_.current.lanes=$,Ac(_,$,b),Dk(_,b),_}function fl(_,d,g,b){var $=d.current,j=R(),_e=yi($);return g=dl(g),d.context===null?d.context=g:d.pendingContext=g,d=mh(j,_e),d.payload={element:_},b=b===void 0?null:b,b!==null&&(d.callback=b),_=nh($,d,_e),_!==null&&(gi(_,$,_e,j),oh(_,$,_e)),_e}function gl(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return _.child.stateNode;default:return _.child.stateNode}}function hl(_,d){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var g=_.retryLane;_.retryLane=g!==0&&g<d?g:d}}function il(_,d){hl(_,d),(_=_.alternate)&&hl(_,d)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(_){console.error(_)};function ll(_){this._internalRoot=_}ml.prototype.render=ll.prototype.render=function(_){var d=this._internalRoot;if(d===null)throw Error(p$2(409));fl(_,d,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var _=this._internalRoot;if(_!==null){this._internalRoot=null;var d=_.containerInfo;Rk(function(){fl(null,_,null,null)}),d[uf]=null}};function ml(_){this._internalRoot=_}ml.prototype.unstable_scheduleHydration=function(_){if(_){var d=Hc();_={blockedOn:null,target:_,priority:d};for(var g=0;g<Qc.length&&d!==0&&d<Qc[g].priority;g++);Qc.splice(g,0,_),g===0&&Vc(_)}};function nl(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)}function ol(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11&&(_.nodeType!==8||_.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(_,d,g,b,$){if($){if(typeof b=="function"){var j=b;b=function(){var nt=gl(_e);j.call(nt)}}var _e=el(d,b,_,0,null,!1,!1,"",pl);return _._reactRootContainer=_e,_[uf]=_e.current,sf(_.nodeType===8?_.parentNode:_),Rk(),_e}for(;$=_.lastChild;)_.removeChild($);if(typeof b=="function"){var et=b;b=function(){var nt=gl(tt);et.call(nt)}}var tt=bl(_,0,!1,null,null,!1,!1,"",pl);return _._reactRootContainer=tt,_[uf]=tt.current,sf(_.nodeType===8?_.parentNode:_),Rk(function(){fl(d,tt,g,b)}),tt}function rl(_,d,g,b,$){var j=g._reactRootContainer;if(j){var _e=j;if(typeof $=="function"){var et=$;$=function(){var tt=gl(_e);et.call(tt)}}fl(d,_e,_,$)}else _e=ql(g,d,_,$,b);return gl(_e)}Ec=function(_){switch(_.tag){case 3:var d=_.stateNode;if(d.current.memoizedState.isDehydrated){var g=tc(d.pendingLanes);g!==0&&(Cc(d,g|1),Dk(d,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var b=ih(_,1);if(b!==null){var $=R();gi(b,_,1,$)}}),il(_,1)}};Fc=function(_){if(_.tag===13){var d=ih(_,134217728);if(d!==null){var g=R();gi(d,_,134217728,g)}il(_,134217728)}};Gc=function(_){if(_.tag===13){var d=yi(_),g=ih(_,d);if(g!==null){var b=R();gi(g,_,d,b)}il(_,d)}};Hc=function(){return C$1};Ic=function(_,d){var g=C$1;try{return C$1=_,d()}finally{C$1=g}};yb=function(_,d,g){switch(d){case"input":if(bb(_,g),d=g.name,g.type==="radio"&&d!=null){for(g=_;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<g.length;d++){var b=g[d];if(b!==_&&b.form===_.form){var $=Db(b);if(!$)throw Error(p$2(90));Wa(b),bb(b,$)}}}break;case"textarea":ib(_,g);break;case"select":d=g.value,d!=null&&fb(_,!!g.multiple,d,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(_){return _=Zb(_),_===null?null:_.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(_,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(d))throw Error(p$2(200));return cl(_,d,null,g)};reactDom_production_min.createRoot=function(_,d){if(!nl(_))throw Error(p$2(299));var g=!1,b="",$=kl;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&($=d.onRecoverableError)),d=bl(_,1,!1,null,null,g,!1,b,$),_[uf]=d.current,sf(_.nodeType===8?_.parentNode:_),new ll(d)};reactDom_production_min.findDOMNode=function(_){if(_==null)return null;if(_.nodeType===1)return _;var d=_._reactInternals;if(d===void 0)throw typeof _.render=="function"?Error(p$2(188)):(_=Object.keys(_).join(","),Error(p$2(268,_)));return _=Zb(d),_=_===null?null:_.stateNode,_};reactDom_production_min.flushSync=function(_){return Rk(_)};reactDom_production_min.hydrate=function(_,d,g){if(!ol(d))throw Error(p$2(200));return rl(null,_,d,!0,g)};reactDom_production_min.hydrateRoot=function(_,d,g){if(!nl(_))throw Error(p$2(405));var b=g!=null&&g.hydratedSources||null,$=!1,j="",_e=kl;if(g!=null&&(g.unstable_strictMode===!0&&($=!0),g.identifierPrefix!==void 0&&(j=g.identifierPrefix),g.onRecoverableError!==void 0&&(_e=g.onRecoverableError)),d=el(d,null,_,1,g??null,$,!1,j,_e),_[uf]=d.current,sf(_),b)for(_=0;_<b.length;_++)g=b[_],$=g._getVersion,$=$(g._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[g,$]:d.mutableSourceEagerHydrationData.push(g,$);return new ml(d)};reactDom_production_min.render=function(_,d,g){if(!ol(d))throw Error(p$2(200));return rl(null,_,d,!1,g)};reactDom_production_min.unmountComponentAtNode=function(_){if(!ol(_))throw Error(p$2(40));return _._reactRootContainer?(Rk(function(){rl(null,null,_,!1,function(){_._reactRootContainer=null,_[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_,d,g,b){if(!ol(g))throw Error(p$2(200));if(_==null||_._reactInternals===void 0)throw Error(p$2(38));return rl(_,d,g,!1,b)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_){console.error(_)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;const ErrorBoundaryContext=reactExports.createContext(null),initialState={didCatch:!1,error:null};class ErrorBoundary extends reactExports.Component{constructor(d){super(d),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=initialState}static getDerivedStateFromError(d){return{didCatch:!0,error:d}}resetErrorBoundary(){const{error:d}=this.state;if(d!==null){for(var g,b,$=arguments.length,j=new Array($),_e=0;_e<$;_e++)j[_e]=arguments[_e];(g=(b=this.props).onReset)===null||g===void 0||g.call(b,{args:j,reason:"imperative-api"}),this.setState(initialState)}}componentDidCatch(d,g){var b,$;(b=($=this.props).onError)===null||b===void 0||b.call($,d,g)}componentDidUpdate(d,g){const{didCatch:b}=this.state,{resetKeys:$}=this.props;if(b&&g.error!==null&&hasArrayChanged(d.resetKeys,$)){var j,_e;(j=(_e=this.props).onReset)===null||j===void 0||j.call(_e,{next:$,prev:d.resetKeys,reason:"keys"}),this.setState(initialState)}}render(){const{children:d,fallbackRender:g,FallbackComponent:b,fallback:$}=this.props,{didCatch:j,error:_e}=this.state;let et=d;if(j){const tt={error:_e,resetErrorBoundary:this.resetErrorBoundary};if(typeof g=="function")et=g(tt);else if(b)et=reactExports.createElement(b,tt);else if($===null||reactExports.isValidElement($))et=$;else throw _e}return reactExports.createElement(ErrorBoundaryContext.Provider,{value:{didCatch:j,error:_e,resetErrorBoundary:this.resetErrorBoundary}},et)}}function hasArrayChanged(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _.length!==d.length||_.some((g,b)=>!Object.is(g,d[b]))}const e$1=Symbol(),t$2=Symbol(),r$3="a",n$1="w";let o=(_,d)=>new Proxy(_,d);const s=Object.getPrototypeOf,c=new WeakMap,l$1=_=>_&&(c.has(_)?c.get(_):s(_)===Object.prototype||s(_)===Array.prototype),f=_=>typeof _=="object"&&_!==null,i$1=_=>{if(Array.isArray(_))return Array.from(_);const d=Object.getOwnPropertyDescriptors(_);return Object.values(d).forEach(g=>{g.configurable=!0}),Object.create(s(_),d)},u$1=_=>_[t$2]||_,a=(_,d,g,b)=>{if(!l$1(_))return _;let $=b&&b.get(_);if(!$){const tt=u$1(_);$=(nt=>Object.values(Object.getOwnPropertyDescriptors(nt)).some(it=>!it.configurable&&!it.writable))(tt)?[tt,i$1(tt)]:[tt],b==null||b.set(_,$)}const[j,_e]=$;let et=g&&g.get(j);return et&&et[1].f===!!_e||(et=((tt,nt)=>{const it={f:nt};let rt=!1;const st=(at,ct)=>{if(!rt){let ht=it[r$3].get(tt);if(ht||(ht={},it[r$3].set(tt,ht)),at===n$1)ht[n$1]=!0;else{let ut=ht[at];ut||(ut=new Set,ht[at]=ut),ut.add(ct)}}},ot={get:(at,ct)=>ct===t$2?tt:(st("k",ct),a(Reflect.get(at,ct),it[r$3],it.c,it.t)),has:(at,ct)=>ct===e$1?(rt=!0,it[r$3].delete(tt),!0):(st("h",ct),Reflect.has(at,ct)),getOwnPropertyDescriptor:(at,ct)=>(st("o",ct),Reflect.getOwnPropertyDescriptor(at,ct)),ownKeys:at=>(st(n$1),Reflect.ownKeys(at))};return nt&&(ot.set=ot.deleteProperty=()=>!1),[ot,it]})(j,!!_e),et[1].p=o(_e||j,et[0]),g&&g.set(j,et)),et[1][r$3]=d,et[1].c=g,et[1].t=b,et[1].p},p$1=(_,d,g,b,$=Object.is)=>{if($(_,d))return!1;if(!f(_)||!f(d))return!0;const j=g.get(u$1(_));if(!j)return!0;if(b){const et=b.get(_);if(et&&et.n===d)return et.g;b.set(_,{n:d,g:!1})}let _e=null;try{for(const et of j.h||[])if(_e=Reflect.has(_,et)!==Reflect.has(d,et),_e)return _e;if(j[n$1]===!0){if(_e=((et,tt)=>{const nt=Reflect.ownKeys(et),it=Reflect.ownKeys(tt);return nt.length!==it.length||nt.some((rt,st)=>rt!==it[st])})(_,d),_e)return _e}else for(const et of j.o||[])if(_e=!!Reflect.getOwnPropertyDescriptor(_,et)!=!!Reflect.getOwnPropertyDescriptor(d,et),_e)return _e;for(const et of j.k||[])if(_e=p$1(_[et],d[et],g,b,$),_e)return _e;return _e===null&&(_e=!0),_e}finally{b&&b.set(_,{n:d,g:_e})}},y=_=>l$1(_)&&_[t$2]||null,h$1=(_,d=!0)=>{c.set(_,d)},w=(_,d,g)=>{const b=[],$=new WeakSet,j=(_e,et)=>{if($.has(_e))return;f(_e)&&$.add(_e);const tt=f(_e)&&d.get(u$1(_e));if(tt){var nt,it;if((nt=tt.h)==null||nt.forEach(st=>{const ot=`:has(${String(st)})`;b.push(et?[...et,ot]:[ot])}),tt[n$1]===!0){const st=":ownKeys";b.push(et?[...et,st]:[st])}else{var rt;(rt=tt.o)==null||rt.forEach(st=>{const ot=`:hasOwn(${String(st)})`;b.push(et?[...et,ot]:[ot])})}(it=tt.k)==null||it.forEach(st=>{g&&!("value"in(Object.getOwnPropertyDescriptor(_e,st)||{}))||j(_e[st],et?[...et,st]:[st])})}else et&&b.push(et)};return j(_),b},isObject$1=_=>typeof _=="object"&&_!==null,proxyStateMap=new WeakMap,refSet=new WeakSet,buildProxyFunction=(_=Object.is,d=(nt,it)=>new Proxy(nt,it),g=nt=>isObject$1(nt)&&!refSet.has(nt)&&(Array.isArray(nt)||!(Symbol.iterator in nt))&&!(nt instanceof WeakMap)&&!(nt instanceof WeakSet)&&!(nt instanceof Error)&&!(nt instanceof Number)&&!(nt instanceof Date)&&!(nt instanceof String)&&!(nt instanceof RegExp)&&!(nt instanceof ArrayBuffer),b=nt=>{switch(nt.status){case"fulfilled":return nt.value;case"rejected":throw nt.reason;default:throw nt}},$=new WeakMap,j=(nt,it,rt=b)=>{const st=$.get(nt);if((st==null?void 0:st[0])===it)return st[1];const ot=Array.isArray(nt)?[]:Object.create(Object.getPrototypeOf(nt));return h$1(ot,!0),$.set(nt,[it,ot]),Reflect.ownKeys(nt).forEach(at=>{if(Object.getOwnPropertyDescriptor(ot,at))return;const ct=Reflect.get(nt,at),{enumerable:ht}=Reflect.getOwnPropertyDescriptor(nt,at),ut={value:ct,enumerable:ht,configurable:!0};if(refSet.has(ct))h$1(ct,!1);else if(ct instanceof Promise)delete ut.value,ut.get=()=>rt(ct);else if(proxyStateMap.has(ct)){const[dt,ft]=proxyStateMap.get(ct);ut.value=j(dt,ft(),rt)}Object.defineProperty(ot,at,ut)}),Object.preventExtensions(ot)},_e=new WeakMap,et=[1,1],tt=nt=>{if(!isObject$1(nt))throw new Error("object required");const it=_e.get(nt);if(it)return it;let rt=et[0];const st=new Set,ot=(St,vt=++et[0])=>{rt!==vt&&(rt=vt,st.forEach(wt=>wt(St,vt)))};let at=et[1];const ct=(St=++et[1])=>(at!==St&&!st.size&&(at=St,ut.forEach(([vt])=>{const wt=vt[1](St);wt>rt&&(rt=wt)})),rt),ht=St=>(vt,wt)=>{const xt=[...vt];xt[1]=[St,...xt[1]],ot(xt,wt)},ut=new Map,dt=(St,vt)=>{if(st.size){const wt=vt[3](ht(St));ut.set(St,[vt,wt])}else ut.set(St,[vt])},ft=St=>{var vt;const wt=ut.get(St);wt&&(ut.delete(St),(vt=wt[1])==null||vt.call(wt))},mt=St=>(st.add(St),st.size===1&&ut.forEach(([wt,xt],kt)=>{const bt=wt[3](ht(kt));ut.set(kt,[wt,bt])}),()=>{st.delete(St),st.size===0&&ut.forEach(([wt,xt],kt)=>{xt&&(xt(),ut.set(kt,[wt]))})}),pt=Array.isArray(nt)?[]:Object.create(Object.getPrototypeOf(nt)),gt=d(pt,{deleteProperty(St,vt){const wt=Reflect.get(St,vt);ft(vt);const xt=Reflect.deleteProperty(St,vt);return xt&&ot(["delete",[vt],wt]),xt},set(St,vt,wt,xt){const kt=Reflect.has(St,vt),bt=Reflect.get(St,vt,xt);if(kt&&(_(bt,wt)||_e.has(wt)&&_(bt,_e.get(wt))))return!0;ft(vt),isObject$1(wt)&&(wt=y(wt)||wt);let Et=wt;if(wt instanceof Promise)wt.then(At=>{wt.status="fulfilled",wt.value=At,ot(["resolve",[vt],At])}).catch(At=>{wt.status="rejected",wt.reason=At,ot(["reject",[vt],At])});else{!proxyStateMap.has(wt)&&g(wt)&&(Et=tt(wt));const At=!refSet.has(Et)&&proxyStateMap.get(Et);At&&dt(vt,At)}return Reflect.set(St,vt,Et,xt),ot(["set",[vt],wt,bt]),!0}});_e.set(nt,gt);const yt=[pt,ct,j,mt];return proxyStateMap.set(gt,yt),Reflect.ownKeys(nt).forEach(St=>{const vt=Object.getOwnPropertyDescriptor(nt,St);"value"in vt&&(gt[St]=nt[St],delete vt.value,delete vt.writable),Object.defineProperty(pt,St,vt)}),gt})=>[tt,proxyStateMap,refSet,_,d,g,b,$,j,_e,et],[defaultProxyFunction]=buildProxyFunction();function proxy(_={}){return defaultProxyFunction(_)}function subscribe(_,d,g){const b=proxyStateMap.get(_);let $;const j=[],_e=b[3];let et=!1;const nt=_e(it=>{if(j.push(it),g){d(j.splice(0));return}$||($=Promise.resolve().then(()=>{$=void 0,et&&d(j.splice(0))}))});return et=!0,()=>{et=!1,nt()}}function snapshot(_,d){const g=proxyStateMap.get(_),[b,$,j]=g;return j(b,$(),d)}var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=reactExports;function h(_,d){return _===d&&(_!==0||1/_===1/d)||_!==_&&d!==d}var k=typeof Object.is=="function"?Object.is:h,l=e.useState,m=e.useEffect,n=e.useLayoutEffect,p=e.useDebugValue;function q(_,d){var g=d(),b=l({inst:{value:g,getSnapshot:d}}),$=b[0].inst,j=b[1];return n(function(){$.value=g,$.getSnapshot=d,r$2($)&&j({inst:$})},[_,g,d]),m(function(){return r$2($)&&j({inst:$}),_(function(){r$2($)&&j({inst:$})})},[_]),p(g),g}function r$2(_){var d=_.getSnapshot;_=_.value;try{var g=d();return!k(_,g)}catch{return!0}}function t$1(_,d){return d()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$1:q;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(shimExports),{use}=React,{useSyncExternalStore}=useSyncExternalStoreExports,useAffectedDebugValue=(_,d)=>{const g=reactExports.useRef();reactExports.useEffect(()=>{g.current=w(_,d,!0)}),reactExports.useDebugValue(g.current)},targetCache=new WeakMap;function useSnapshot(_,d){const g=d==null?void 0:d.sync,b=reactExports.useRef(),$=reactExports.useRef();let j=!0;const _e=useSyncExternalStore(reactExports.useCallback(nt=>{const it=subscribe(_,nt,g);return nt(),it},[_,g]),()=>{const nt=snapshot(_,use);try{if(!j&&b.current&&$.current&&!p$1(b.current,nt,$.current,new WeakMap))return b.current}catch{}return nt},()=>snapshot(_,use));j=!1;const et=new WeakMap;reactExports.useEffect(()=>{b.current=_e,$.current=et});const tt=reactExports.useMemo(()=>new WeakMap,[]);return a(_e,et,tt,targetCache)}function r$1(_){var d,g,b="";if(typeof _=="string"||typeof _=="number")b+=_;else if(typeof _=="object")if(Array.isArray(_))for(d=0;d<_.length;d++)_[d]&&(g=r$1(_[d]))&&(b&&(b+=" "),b+=g);else for(d in _)_[d]&&(b&&(b+=" "),b+=d);return b}function clsx$1(){for(var _,d,g=0,b="";g<arguments.length;)(_=arguments[g++])&&(d=r$1(_))&&(b&&(b+=" "),b+=d);return b}const falsyToString=_=>typeof _=="boolean"?"".concat(_):_===0?"0":_,cx=clsx$1,cva=(_,d)=>g=>{var b;if((d==null?void 0:d.variants)==null)return cx(_,g==null?void 0:g.class,g==null?void 0:g.className);const{variants:$,defaultVariants:j}=d,_e=Object.keys($).map(nt=>{const it=g==null?void 0:g[nt],rt=j==null?void 0:j[nt];if(it===null)return null;const st=falsyToString(it)||falsyToString(rt);return $[nt][st]}),et=g&&Object.entries(g).reduce((nt,it)=>{let[rt,st]=it;return st===void 0||(nt[rt]=st),nt},{}),tt=d==null||(b=d.compoundVariants)===null||b===void 0?void 0:b.reduce((nt,it)=>{let{class:rt,className:st,...ot}=it;return Object.entries(ot).every(at=>{let[ct,ht]=at;return Array.isArray(ht)?ht.includes({...j,...et}[ct]):{...j,...et}[ct]===ht})?[...nt,rt,st]:nt},[]);return cx(_,_e,tt,g==null?void 0:g.class,g==null?void 0:g.className)};function r(_){var d,g,b="";if(typeof _=="string"||typeof _=="number")b+=_;else if(typeof _=="object")if(Array.isArray(_)){var $=_.length;for(d=0;d<$;d++)_[d]&&(g=r(_[d]))&&(b&&(b+=" "),b+=g)}else for(g in _)_[g]&&(b&&(b+=" "),b+=g);return b}function clsx(){for(var _,d,g=0,b="",$=arguments.length;g<$;g++)(_=arguments[g])&&(d=r(_))&&(b&&(b+=" "),b+=d);return b}const CLASS_PART_SEPARATOR="-";function createClassUtils(_){const d=createClassMap(_),{conflictingClassGroups:g,conflictingClassGroupModifiers:b}=_;function $(_e){const et=_e.split(CLASS_PART_SEPARATOR);return et[0]===""&&et.length!==1&&et.shift(),getGroupRecursive(et,d)||getGroupIdForArbitraryProperty(_e)}function j(_e,et){const tt=g[_e]||[];return et&&b[_e]?[...tt,...b[_e]]:tt}return{getClassGroupId:$,getConflictingClassGroupIds:j}}function getGroupRecursive(_,d){var _e;if(_.length===0)return d.classGroupId;const g=_[0],b=d.nextPart.get(g),$=b?getGroupRecursive(_.slice(1),b):void 0;if($)return $;if(d.validators.length===0)return;const j=_.join(CLASS_PART_SEPARATOR);return(_e=d.validators.find(({validator:et})=>et(j)))==null?void 0:_e.classGroupId}const arbitraryPropertyRegex=/^\[(.+)\]$/;function getGroupIdForArbitraryProperty(_){if(arbitraryPropertyRegex.test(_)){const d=arbitraryPropertyRegex.exec(_)[1],g=d==null?void 0:d.substring(0,d.indexOf(":"));if(g)return"arbitrary.."+g}}function createClassMap(_){const{theme:d,prefix:g}=_,b={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(_.classGroups),g).forEach(([j,_e])=>{processClassesRecursively(_e,b,j,d)}),b}function processClassesRecursively(_,d,g,b){_.forEach($=>{if(typeof $=="string"){const j=$===""?d:getPart(d,$);j.classGroupId=g;return}if(typeof $=="function"){if(isThemeGetter($)){processClassesRecursively($(b),d,g,b);return}d.validators.push({validator:$,classGroupId:g});return}Object.entries($).forEach(([j,_e])=>{processClassesRecursively(_e,getPart(d,j),g,b)})})}function getPart(_,d){let g=_;return d.split(CLASS_PART_SEPARATOR).forEach(b=>{g.nextPart.has(b)||g.nextPart.set(b,{nextPart:new Map,validators:[]}),g=g.nextPart.get(b)}),g}function isThemeGetter(_){return _.isThemeGetter}function getPrefixedClassGroupEntries(_,d){return d?_.map(([g,b])=>{const $=b.map(j=>typeof j=="string"?d+j:typeof j=="object"?Object.fromEntries(Object.entries(j).map(([_e,et])=>[d+_e,et])):j);return[g,$]}):_}function createLruCache(_){if(_<1)return{get:()=>{},set:()=>{}};let d=0,g=new Map,b=new Map;function $(j,_e){g.set(j,_e),d++,d>_&&(d=0,b=g,g=new Map)}return{get(j){let _e=g.get(j);if(_e!==void 0)return _e;if((_e=b.get(j))!==void 0)return $(j,_e),_e},set(j,_e){g.has(j)?g.set(j,_e):$(j,_e)}}}const IMPORTANT_MODIFIER="!";function createSplitModifiers(_){const d=_.separator,g=d.length===1,b=d[0],$=d.length;return function(_e){const et=[];let tt=0,nt=0,it;for(let ct=0;ct<_e.length;ct++){let ht=_e[ct];if(tt===0){if(ht===b&&(g||_e.slice(ct,ct+$)===d)){et.push(_e.slice(nt,ct)),nt=ct+$;continue}if(ht==="/"){it=ct;continue}}ht==="["?tt++:ht==="]"&&tt--}const rt=et.length===0?_e:_e.substring(nt),st=rt.startsWith(IMPORTANT_MODIFIER),ot=st?rt.substring(1):rt,at=it&&it>nt?it-nt:void 0;return{modifiers:et,hasImportantModifier:st,baseClassName:ot,maybePostfixModifierPosition:at}}}function sortModifiers(_){if(_.length<=1)return _;const d=[];let g=[];return _.forEach(b=>{b[0]==="["?(d.push(...g.sort(),b),g=[]):g.push(b)}),d.push(...g.sort()),d}function createConfigUtils(_){return{cache:createLruCache(_.cacheSize),splitModifiers:createSplitModifiers(_),...createClassUtils(_)}}const SPLIT_CLASSES_REGEX=/\s+/;function mergeClassList(_,d){const{splitModifiers:g,getClassGroupId:b,getConflictingClassGroupIds:$}=d,j=new Set;return _.trim().split(SPLIT_CLASSES_REGEX).map(_e=>{const{modifiers:et,hasImportantModifier:tt,baseClassName:nt,maybePostfixModifierPosition:it}=g(_e);let rt=b(it?nt.substring(0,it):nt),st=!!it;if(!rt){if(!it)return{isTailwindClass:!1,originalClassName:_e};if(rt=b(nt),!rt)return{isTailwindClass:!1,originalClassName:_e};st=!1}const ot=sortModifiers(et).join(":");return{isTailwindClass:!0,modifierId:tt?ot+IMPORTANT_MODIFIER:ot,classGroupId:rt,originalClassName:_e,hasPostfixModifier:st}}).reverse().filter(_e=>{if(!_e.isTailwindClass)return!0;const{modifierId:et,classGroupId:tt,hasPostfixModifier:nt}=_e,it=et+tt;return j.has(it)?!1:(j.add(it),$(tt,nt).forEach(rt=>j.add(et+rt)),!0)}).reverse().map(_e=>_e.originalClassName).join(" ")}function twJoin(){let _=0,d,g,b="";for(;_<arguments.length;)(d=arguments[_++])&&(g=toValue(d))&&(b&&(b+=" "),b+=g);return b}function toValue(_){if(typeof _=="string")return _;let d,g="";for(let b=0;b<_.length;b++)_[b]&&(d=toValue(_[b]))&&(g&&(g+=" "),g+=d);return g}function createTailwindMerge(_,...d){let g,b,$,j=_e;function _e(tt){const nt=d.reduce((it,rt)=>rt(it),_());return g=createConfigUtils(nt),b=g.cache.get,$=g.cache.set,j=et,et(tt)}function et(tt){const nt=b(tt);if(nt)return nt;const it=mergeClassList(tt,g);return $(tt,it),it}return function(){return j(twJoin.apply(null,arguments))}}function fromTheme(_){const d=g=>g[_]||[];return d.isThemeGetter=!0,d}const arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function isLength(_){return isNumber$1(_)||stringLengths.has(_)||fractionRegex.test(_)}function isArbitraryLength(_){return getIsArbitraryValue(_,"length",isLengthOnly)}function isNumber$1(_){return!!_&&!Number.isNaN(Number(_))}function isArbitraryNumber(_){return getIsArbitraryValue(_,"number",isNumber$1)}function isInteger(_){return!!_&&Number.isInteger(Number(_))}function isPercent(_){return _.endsWith("%")&&isNumber$1(_.slice(0,-1))}function isArbitraryValue(_){return arbitraryValueRegex.test(_)}function isTshirtSize(_){return tshirtUnitRegex.test(_)}const sizeLabels=new Set(["length","size","percentage"]);function isArbitrarySize(_){return getIsArbitraryValue(_,sizeLabels,isNever)}function isArbitraryPosition(_){return getIsArbitraryValue(_,"position",isNever)}const imageLabels=new Set(["image","url"]);function isArbitraryImage(_){return getIsArbitraryValue(_,imageLabels,isImage)}function isArbitraryShadow(_){return getIsArbitraryValue(_,"",isShadow)}function isAny(){return!0}function getIsArbitraryValue(_,d,g){const b=arbitraryValueRegex.exec(_);return b?b[1]?typeof d=="string"?b[1]===d:d.has(b[1]):g(b[2]):!1}function isLengthOnly(_){return lengthUnitRegex.test(_)&&!colorFunctionRegex.test(_)}function isNever(){return!1}function isShadow(_){return shadowRegex.test(_)}function isImage(_){return imageRegex.test(_)}function getDefaultConfig(){const _=fromTheme("colors"),d=fromTheme("spacing"),g=fromTheme("blur"),b=fromTheme("brightness"),$=fromTheme("borderColor"),j=fromTheme("borderRadius"),_e=fromTheme("borderSpacing"),et=fromTheme("borderWidth"),tt=fromTheme("contrast"),nt=fromTheme("grayscale"),it=fromTheme("hueRotate"),rt=fromTheme("invert"),st=fromTheme("gap"),ot=fromTheme("gradientColorStops"),at=fromTheme("gradientColorStopPositions"),ct=fromTheme("inset"),ht=fromTheme("margin"),ut=fromTheme("opacity"),dt=fromTheme("padding"),ft=fromTheme("saturate"),mt=fromTheme("scale"),pt=fromTheme("sepia"),Ot=fromTheme("skew"),gt=fromTheme("space"),yt=fromTheme("translate"),St=()=>["auto","contain","none"],vt=()=>["auto","hidden","clip","visible","scroll"],wt=()=>["auto",isArbitraryValue,d],xt=()=>[isArbitraryValue,d],kt=()=>["",isLength,isArbitraryLength],bt=()=>["auto",isNumber$1,isArbitraryValue],Et=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],At=()=>["solid","dashed","dotted","double","none"],Tt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],_t=()=>["start","end","center","between","around","evenly","stretch"],Ct=()=>["","0",isArbitraryValue],Pt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Nt=()=>[isNumber$1,isArbitraryNumber],$t=()=>[isNumber$1,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:Nt(),borderColor:[_],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:xt(),borderWidth:kt(),contrast:Nt(),grayscale:Ct(),hueRotate:$t(),invert:Ct(),gap:xt(),gradientColorStops:[_],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:wt(),margin:wt(),opacity:Nt(),padding:xt(),saturate:Nt(),scale:Nt(),sepia:Ct(),skew:$t(),space:xt(),translate:xt()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":Pt()}],"break-before":[{"break-before":Pt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Et(),isArbitraryValue]}],overflow:[{overflow:vt()}],"overflow-x":[{"overflow-x":vt()}],"overflow-y":[{"overflow-y":vt()}],overscroll:[{overscroll:St()}],"overscroll-x":[{"overscroll-x":St()}],"overscroll-y":[{"overscroll-y":St()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[ct]}],"inset-x":[{"inset-x":[ct]}],"inset-y":[{"inset-y":[ct]}],start:[{start:[ct]}],end:[{end:[ct]}],top:[{top:[ct]}],right:[{right:[ct]}],bottom:[{bottom:[ct]}],left:[{left:[ct]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger,isArbitraryValue]}],basis:[{basis:wt()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:Ct()}],shrink:[{shrink:Ct()}],order:[{order:["first","last","none",isInteger,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":bt()}],"col-end":[{"col-end":bt()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":bt()}],"row-end":[{"row-end":bt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[st]}],"gap-x":[{"gap-x":[st]}],"gap-y":[{"gap-y":[st]}],"justify-content":[{justify:["normal",..._t()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",..._t(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[..._t(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[dt]}],px:[{px:[dt]}],py:[{py:[dt]}],ps:[{ps:[dt]}],pe:[{pe:[dt]}],pt:[{pt:[dt]}],pr:[{pr:[dt]}],pb:[{pb:[dt]}],pl:[{pl:[dt]}],m:[{m:[ht]}],mx:[{mx:[ht]}],my:[{my:[ht]}],ms:[{ms:[ht]}],me:[{me:[ht]}],mt:[{mt:[ht]}],mr:[{mr:[ht]}],mb:[{mb:[ht]}],ml:[{ml:[ht]}],"space-x":[{"space-x":[gt]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[gt]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,d]}],"min-w":[{"min-w":[isArbitraryValue,d,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,d,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,d,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,d,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,d,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,d,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$1,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[_]}],"placeholder-opacity":[{"placeholder-opacity":[ut]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[_]}],"text-opacity":[{"text-opacity":[ut]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...At(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[_]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:xt()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[ut]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Et(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[_]}],"gradient-from-pos":[{from:[at]}],"gradient-via-pos":[{via:[at]}],"gradient-to-pos":[{to:[at]}],"gradient-from":[{from:[ot]}],"gradient-via":[{via:[ot]}],"gradient-to":[{to:[ot]}],rounded:[{rounded:[j]}],"rounded-s":[{"rounded-s":[j]}],"rounded-e":[{"rounded-e":[j]}],"rounded-t":[{"rounded-t":[j]}],"rounded-r":[{"rounded-r":[j]}],"rounded-b":[{"rounded-b":[j]}],"rounded-l":[{"rounded-l":[j]}],"rounded-ss":[{"rounded-ss":[j]}],"rounded-se":[{"rounded-se":[j]}],"rounded-ee":[{"rounded-ee":[j]}],"rounded-es":[{"rounded-es":[j]}],"rounded-tl":[{"rounded-tl":[j]}],"rounded-tr":[{"rounded-tr":[j]}],"rounded-br":[{"rounded-br":[j]}],"rounded-bl":[{"rounded-bl":[j]}],"border-w":[{border:[et]}],"border-w-x":[{"border-x":[et]}],"border-w-y":[{"border-y":[et]}],"border-w-s":[{"border-s":[et]}],"border-w-e":[{"border-e":[et]}],"border-w-t":[{"border-t":[et]}],"border-w-r":[{"border-r":[et]}],"border-w-b":[{"border-b":[et]}],"border-w-l":[{"border-l":[et]}],"border-opacity":[{"border-opacity":[ut]}],"border-style":[{border:[...At(),"hidden"]}],"divide-x":[{"divide-x":[et]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[et]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[ut]}],"divide-style":[{divide:At()}],"border-color":[{border:[$]}],"border-color-x":[{"border-x":[$]}],"border-color-y":[{"border-y":[$]}],"border-color-t":[{"border-t":[$]}],"border-color-r":[{"border-r":[$]}],"border-color-b":[{"border-b":[$]}],"border-color-l":[{"border-l":[$]}],"divide-color":[{divide:[$]}],"outline-style":[{outline:["",...At()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[_]}],"ring-w":[{ring:kt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[_]}],"ring-opacity":[{"ring-opacity":[ut]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[_]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[ut]}],"mix-blend":[{"mix-blend":[...Tt(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Tt()}],filter:[{filter:["","none"]}],blur:[{blur:[g]}],brightness:[{brightness:[b]}],contrast:[{contrast:[tt]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[nt]}],"hue-rotate":[{"hue-rotate":[it]}],invert:[{invert:[rt]}],saturate:[{saturate:[ft]}],sepia:[{sepia:[pt]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[g]}],"backdrop-brightness":[{"backdrop-brightness":[b]}],"backdrop-contrast":[{"backdrop-contrast":[tt]}],"backdrop-grayscale":[{"backdrop-grayscale":[nt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[it]}],"backdrop-invert":[{"backdrop-invert":[rt]}],"backdrop-opacity":[{"backdrop-opacity":[ut]}],"backdrop-saturate":[{"backdrop-saturate":[ft]}],"backdrop-sepia":[{"backdrop-sepia":[pt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[_e]}],"border-spacing-x":[{"border-spacing-x":[_e]}],"border-spacing-y":[{"border-spacing-y":[_e]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:$t()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:$t()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[mt]}],"scale-x":[{"scale-x":[mt]}],"scale-y":[{"scale-y":[mt]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[yt]}],"translate-y":[{"translate-y":[yt]}],"skew-x":[{"skew-x":[Ot]}],"skew-y":[{"skew-y":[Ot]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",_]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[_]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":xt()}],"scroll-mx":[{"scroll-mx":xt()}],"scroll-my":[{"scroll-my":xt()}],"scroll-ms":[{"scroll-ms":xt()}],"scroll-me":[{"scroll-me":xt()}],"scroll-mt":[{"scroll-mt":xt()}],"scroll-mr":[{"scroll-mr":xt()}],"scroll-mb":[{"scroll-mb":xt()}],"scroll-ml":[{"scroll-ml":xt()}],"scroll-p":[{"scroll-p":xt()}],"scroll-px":[{"scroll-px":xt()}],"scroll-py":[{"scroll-py":xt()}],"scroll-ps":[{"scroll-ps":xt()}],"scroll-pe":[{"scroll-pe":xt()}],"scroll-pt":[{"scroll-pt":xt()}],"scroll-pr":[{"scroll-pr":xt()}],"scroll-pb":[{"scroll-pb":xt()}],"scroll-pl":[{"scroll-pl":xt()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[_,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[_,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const twMerge=createTailwindMerge(getDefaultConfig),STORAGE_VERSION=.1;function createStorageProxy(_,d){const g=proxy(getStoredValue(_,d));return subscribe(g,()=>{try{localStorage.setItem(_,JSON.stringify({...g,__version:STORAGE_VERSION}))}catch(b){console.error(`Could not persist state: ${b.message}`)}}),g}function getStoredValue(_,d){try{const g=localStorage.getItem(_);if(g){const b=JSON.parse(g);return b.__version>=STORAGE_VERSION?b:(localStorage.setItem(_,JSON.stringify(d)),d)}}catch{console.warn("Could not parse local storage value")}return d}function cn(..._){return twMerge(clsx(_))}const buttonVariants=cva("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/80",outline:"border bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",danger:"bg-danger text-danger-foreground hover:bg-danger/80"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:_,variant:d,size:g,...b},$)=>jsxRuntimeExports.jsx("button",{className:cn(buttonVariants({variant:d,size:g,className:_})),ref:$,...b}));Button.displayName="Button";const errorState=proxy({expanded:!1}),ErrorFallback=({error:_})=>{var $;const d=useSnapshot(errorState),g={message:"",stack:[]};_ instanceof Error&&(g.message=_.message,g.stack=(($=_.stack)==null?void 0:$.split(`
`))??[],g.stack=g.stack.filter(Boolean).slice(0,10));const b=()=>{errorState.expanded=!errorState.expanded};return jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:"border bg-accent rounded-md p-4 w-full max-w-[800px]",children:[jsxRuntimeExports.jsx("div",{className:"mb-4 text-4xl",children:"OOF"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{children:"Caught an error..."}),jsxRuntimeExports.jsx("div",{children:g.message})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{localStorage.clear(),window.location.reload()},children:"Clear state"}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{window.location.reload()},children:"Reload"})]})]}),jsxRuntimeExports.jsx(Button,{variant:"link",onClick:b,children:"View stack"}),g.stack.length>0&&d.expanded&&jsxRuntimeExports.jsx("div",{className:"border rounded py-2 mt-2 text-sm",children:g.stack.map(j=>jsxRuntimeExports.jsx("div",{className:"ml-2",children:j},j))})]})})},version="15.0.4",createExtendedExponentialRampToValueAutomationEvent=(_,d,g)=>({endTime:d,insertTime:g,type:"exponentialRampToValue",value:_}),createExtendedLinearRampToValueAutomationEvent=(_,d,g)=>({endTime:d,insertTime:g,type:"linearRampToValue",value:_}),createSetValueAutomationEvent=(_,d)=>({startTime:d,type:"setValue",value:_}),createSetValueCurveAutomationEvent=(_,d,g)=>({duration:g,startTime:d,type:"setValueCurve",values:_}),getTargetValueAtTime=(_,d,{startTime:g,target:b,timeConstant:$})=>b+(d-b)*Math.exp((g-_)/$),isExponentialRampToValueAutomationEvent=_=>_.type==="exponentialRampToValue",isLinearRampToValueAutomationEvent=_=>_.type==="linearRampToValue",isAnyRampToValueAutomationEvent=_=>isExponentialRampToValueAutomationEvent(_)||isLinearRampToValueAutomationEvent(_),isSetValueAutomationEvent=_=>_.type==="setValue",isSetValueCurveAutomationEvent=_=>_.type==="setValueCurve",getValueOfAutomationEventAtIndexAtTime=(_,d,g,b)=>{const $=_[d];return $===void 0?b:isAnyRampToValueAutomationEvent($)||isSetValueAutomationEvent($)?$.value:isSetValueCurveAutomationEvent($)?$.values[$.values.length-1]:getTargetValueAtTime(g,getValueOfAutomationEventAtIndexAtTime(_,d-1,$.startTime,b),$)},getEndTimeAndValueOfPreviousAutomationEvent=(_,d,g,b,$)=>g===void 0?[b.insertTime,$]:isAnyRampToValueAutomationEvent(g)?[g.endTime,g.value]:isSetValueAutomationEvent(g)?[g.startTime,g.value]:isSetValueCurveAutomationEvent(g)?[g.startTime+g.duration,g.values[g.values.length-1]]:[g.startTime,getValueOfAutomationEventAtIndexAtTime(_,d-1,g.startTime,$)],isCancelAndHoldAutomationEvent=_=>_.type==="cancelAndHold",isCancelScheduledValuesAutomationEvent=_=>_.type==="cancelScheduledValues",getEventTime=_=>isCancelAndHoldAutomationEvent(_)||isCancelScheduledValuesAutomationEvent(_)?_.cancelTime:isExponentialRampToValueAutomationEvent(_)||isLinearRampToValueAutomationEvent(_)?_.endTime:_.startTime,getExponentialRampValueAtTime=(_,d,g,{endTime:b,value:$})=>g===$?$:0<g&&0<$||g<0&&$<0?g*($/g)**((_-d)/(b-d)):0,getLinearRampValueAtTime=(_,d,g,{endTime:b,value:$})=>g+(_-d)/(b-d)*($-g),interpolateValue=(_,d)=>{const g=Math.floor(d),b=Math.ceil(d);return g===b?_[g]:(1-(d-g))*_[g]+(1-(b-d))*_[b]},getValueCurveValueAtTime=(_,{duration:d,startTime:g,values:b})=>{const $=(_-g)/d*(b.length-1);return interpolateValue(b,$)},isSetTargetAutomationEvent=_=>_.type==="setTarget";class AutomationEventList{constructor(d){this._automationEvents=[],this._currenTime=0,this._defaultValue=d}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(d){const g=getEventTime(d);if(isCancelAndHoldAutomationEvent(d)||isCancelScheduledValuesAutomationEvent(d)){const b=this._automationEvents.findIndex(j=>isCancelScheduledValuesAutomationEvent(d)&&isSetValueCurveAutomationEvent(j)?j.startTime+j.duration>=g:getEventTime(j)>=g),$=this._automationEvents[b];if(b!==-1&&(this._automationEvents=this._automationEvents.slice(0,b)),isCancelAndHoldAutomationEvent(d)){const j=this._automationEvents[this._automationEvents.length-1];if($!==void 0&&isAnyRampToValueAutomationEvent($)){if(j!==void 0&&isSetTargetAutomationEvent(j))throw new Error("The internal list is malformed.");const _e=j===void 0?$.insertTime:isSetValueCurveAutomationEvent(j)?j.startTime+j.duration:getEventTime(j),et=j===void 0?this._defaultValue:isSetValueCurveAutomationEvent(j)?j.values[j.values.length-1]:j.value,tt=isExponentialRampToValueAutomationEvent($)?getExponentialRampValueAtTime(g,_e,et,$):getLinearRampValueAtTime(g,_e,et,$),nt=isExponentialRampToValueAutomationEvent($)?createExtendedExponentialRampToValueAutomationEvent(tt,g,this._currenTime):createExtendedLinearRampToValueAutomationEvent(tt,g,this._currenTime);this._automationEvents.push(nt)}if(j!==void 0&&isSetTargetAutomationEvent(j)&&this._automationEvents.push(createSetValueAutomationEvent(this.getValue(g),g)),j!==void 0&&isSetValueCurveAutomationEvent(j)&&j.startTime+j.duration>g){const _e=g-j.startTime,et=(j.values.length-1)/j.duration,tt=Math.max(2,1+Math.ceil(_e*et)),nt=_e/(tt-1)*et,it=j.values.slice(0,tt);if(nt<1)for(let rt=1;rt<tt;rt+=1){const st=nt*rt%1;it[rt]=j.values[rt-1]*(1-st)+j.values[rt]*st}this._automationEvents[this._automationEvents.length-1]=createSetValueCurveAutomationEvent(it,j.startTime,_e)}}}else{const b=this._automationEvents.findIndex(_e=>getEventTime(_e)>g),$=b===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[b-1];if($!==void 0&&isSetValueCurveAutomationEvent($)&&getEventTime($)+$.duration>g)return!1;const j=isExponentialRampToValueAutomationEvent(d)?createExtendedExponentialRampToValueAutomationEvent(d.value,d.endTime,this._currenTime):isLinearRampToValueAutomationEvent(d)?createExtendedLinearRampToValueAutomationEvent(d.value,g,this._currenTime):d;if(b===-1)this._automationEvents.push(j);else{if(isSetValueCurveAutomationEvent(d)&&g+d.duration>getEventTime(this._automationEvents[b]))return!1;this._automationEvents.splice(b,0,j)}}return!0}flush(d){const g=this._automationEvents.findIndex(b=>getEventTime(b)>d);if(g>1){const b=this._automationEvents.slice(g-1),$=b[0];isSetTargetAutomationEvent($)&&b.unshift(createSetValueAutomationEvent(getValueOfAutomationEventAtIndexAtTime(this._automationEvents,g-2,$.startTime,this._defaultValue),$.startTime)),this._automationEvents=b}}getValue(d){if(this._automationEvents.length===0)return this._defaultValue;const g=this._automationEvents.findIndex(_e=>getEventTime(_e)>d),b=this._automationEvents[g],$=(g===-1?this._automationEvents.length:g)-1,j=this._automationEvents[$];if(j!==void 0&&isSetTargetAutomationEvent(j)&&(b===void 0||!isAnyRampToValueAutomationEvent(b)||b.insertTime>d))return getTargetValueAtTime(d,getValueOfAutomationEventAtIndexAtTime(this._automationEvents,$-1,j.startTime,this._defaultValue),j);if(j!==void 0&&isSetValueAutomationEvent(j)&&(b===void 0||!isAnyRampToValueAutomationEvent(b)))return j.value;if(j!==void 0&&isSetValueCurveAutomationEvent(j)&&(b===void 0||!isAnyRampToValueAutomationEvent(b)||j.startTime+j.duration>d))return d<j.startTime+j.duration?getValueCurveValueAtTime(d,j):j.values[j.values.length-1];if(j!==void 0&&isAnyRampToValueAutomationEvent(j)&&(b===void 0||!isAnyRampToValueAutomationEvent(b)))return j.value;if(b!==void 0&&isExponentialRampToValueAutomationEvent(b)){const[_e,et]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,$,j,b,this._defaultValue);return getExponentialRampValueAtTime(d,_e,et,b)}if(b!==void 0&&isLinearRampToValueAutomationEvent(b)){const[_e,et]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,$,j,b,this._defaultValue);return getLinearRampValueAtTime(d,_e,et,b)}return this._defaultValue}}const createCancelAndHoldAutomationEvent=_=>({cancelTime:_,type:"cancelAndHold"}),createCancelScheduledValuesAutomationEvent=_=>({cancelTime:_,type:"cancelScheduledValues"}),createExponentialRampToValueAutomationEvent=(_,d)=>({endTime:d,type:"exponentialRampToValue",value:_}),createLinearRampToValueAutomationEvent=(_,d)=>({endTime:d,type:"linearRampToValue",value:_}),createSetTargetAutomationEvent=(_,d,g)=>({startTime:d,target:_,timeConstant:g,type:"setTarget"}),createAbortError=()=>new DOMException("","AbortError"),createAddActiveInputConnectionToAudioNode=_=>(d,g,[b,$,j],_e)=>{_(d[$],[g,b,j],et=>et[0]===g&&et[1]===b,_e)},createAddAudioNodeConnections=_=>(d,g,b)=>{const $=[];for(let j=0;j<b.numberOfInputs;j+=1)$.push(new Set);_.set(d,{activeInputs:$,outputs:new Set,passiveInputs:new WeakMap,renderer:g})},createAddAudioParamConnections=_=>(d,g)=>{_.set(d,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:g})},ACTIVE_AUDIO_NODE_STORE=new WeakSet,AUDIO_NODE_CONNECTIONS_STORE=new WeakMap,AUDIO_NODE_STORE=new WeakMap,AUDIO_PARAM_CONNECTIONS_STORE=new WeakMap,AUDIO_PARAM_STORE=new WeakMap,CONTEXT_STORE=new WeakMap,EVENT_LISTENERS=new WeakMap,CYCLE_COUNTERS=new WeakMap,NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=new WeakMap,NODE_TO_PROCESSOR_MAPS=new WeakMap,handler={construct(){return handler}},isConstructible=_=>{try{const d=new Proxy(_,handler);new d}catch{return!1}return!0},IMPORT_STATEMENT_REGEX=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,splitImportStatements=(_,d)=>{const g=[];let b=_.replace(/^[\s]+/,""),$=b.match(IMPORT_STATEMENT_REGEX);for(;$!==null;){const j=$[1].slice(1,-1),_e=$[0].replace(/([\s]+)?;?$/,"").replace(j,new URL(j,d).toString());g.push(_e),b=b.slice($[0].length).replace(/^[\s]+/,""),$=b.match(IMPORT_STATEMENT_REGEX)}return[g.join(";"),b]},verifyParameterDescriptors=_=>{if(_!==void 0&&!Array.isArray(_))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},verifyProcessorCtor=_=>{if(!isConstructible(_))throw new TypeError("The given value for processorCtor should be a constructor.");if(_.prototype===null||typeof _.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},createAddAudioWorkletModule=(_,d,g,b,$,j,_e,et,tt,nt,it,rt,st)=>{let ot=0;return(at,ct,ht={credentials:"omit"})=>{const ut=it.get(at);if(ut!==void 0&&ut.has(ct))return Promise.resolve();const dt=nt.get(at);if(dt!==void 0){const pt=dt.get(ct);if(pt!==void 0)return pt}const ft=j(at),mt=ft.audioWorklet===void 0?$(ct).then(([pt,Ot])=>{const[gt,yt]=splitImportStatements(pt,Ot),St=`${gt};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${yt}
})})(window,'_AWGS')`;return g(St)}).then(()=>{const pt=st._AWGS.pop();if(pt===void 0)throw new SyntaxError;b(ft.currentTime,ft.sampleRate,()=>pt(class{},void 0,(Ot,gt)=>{if(Ot.trim()==="")throw d();const yt=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(ft);if(yt!==void 0){if(yt.has(Ot))throw d();verifyProcessorCtor(gt),verifyParameterDescriptors(gt.parameterDescriptors),yt.set(Ot,gt)}else verifyProcessorCtor(gt),verifyParameterDescriptors(gt.parameterDescriptors),NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(ft,new Map([[Ot,gt]]))},ft.sampleRate,void 0,void 0))}):Promise.all([$(ct),Promise.resolve(_(rt,rt))]).then(([[pt,Ot],gt])=>{const yt=ot+1;ot=yt;const[St,vt]=splitImportStatements(pt,Ot),bt=`${St};((AudioWorkletProcessor,registerProcessor)=>{${vt}
})(${gt?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${gt?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${gt?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${yt}',class extends AudioWorkletProcessor{process(){return !1}})`,Et=new Blob([bt],{type:"application/javascript; charset=utf-8"}),At=URL.createObjectURL(Et);return ft.audioWorklet.addModule(At,ht).then(()=>{if(et(ft))return ft;const Tt=_e(ft);return Tt.audioWorklet.addModule(At,ht).then(()=>Tt)}).then(Tt=>{if(tt===null)throw new SyntaxError;try{new tt(Tt,`__sac${yt}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(At))});return dt===void 0?nt.set(at,new Map([[ct,mt]])):dt.set(ct,mt),mt.then(()=>{const pt=it.get(at);pt===void 0?it.set(at,new Set([ct])):pt.add(ct)}).finally(()=>{const pt=nt.get(at);pt!==void 0&&pt.delete(ct)}),mt}},getValueForKey=(_,d)=>{const g=_.get(d);if(g===void 0)throw new Error("A value with the given key could not be found.");return g},pickElementFromSet=(_,d)=>{const g=Array.from(_).filter(d);if(g.length>1)throw Error("More than one element was found.");if(g.length===0)throw Error("No element was found.");const[b]=g;return _.delete(b),b},deletePassiveInputConnectionToAudioNode=(_,d,g,b)=>{const $=getValueForKey(_,d),j=pickElementFromSet($,_e=>_e[0]===g&&_e[1]===b);return $.size===0&&_.delete(d),j},getEventListenersOfAudioNode=_=>getValueForKey(EVENT_LISTENERS,_),setInternalStateToActive=_=>{if(ACTIVE_AUDIO_NODE_STORE.has(_))throw new Error("The AudioNode is already stored.");ACTIVE_AUDIO_NODE_STORE.add(_),getEventListenersOfAudioNode(_).forEach(d=>d(!0))},isAudioWorkletNode=_=>"port"in _,setInternalStateToPassive=_=>{if(!ACTIVE_AUDIO_NODE_STORE.has(_))throw new Error("The AudioNode is not stored.");ACTIVE_AUDIO_NODE_STORE.delete(_),getEventListenersOfAudioNode(_).forEach(d=>d(!1))},setInternalStateToPassiveWhenNecessary=(_,d)=>{!isAudioWorkletNode(_)&&d.every(g=>g.size===0)&&setInternalStateToPassive(_)},createAddConnectionToAudioNode=(_,d,g,b,$,j,_e,et,tt,nt,it,rt,st)=>{const ot=new WeakMap;return(at,ct,ht,ut,dt)=>{const{activeInputs:ft,passiveInputs:mt}=j(ct),{outputs:pt}=j(at),Ot=et(at),gt=yt=>{const St=tt(ct),vt=tt(at);if(yt){const wt=deletePassiveInputConnectionToAudioNode(mt,at,ht,ut);_(ft,at,wt,!1),!dt&&!rt(at)&&g(vt,St,ht,ut),st(ct)&&setInternalStateToActive(ct)}else{const wt=b(ft,at,ht,ut);d(mt,ut,wt,!1),!dt&&!rt(at)&&$(vt,St,ht,ut);const xt=_e(ct);if(xt===0)it(ct)&&setInternalStateToPassiveWhenNecessary(ct,ft);else{const kt=ot.get(ct);kt!==void 0&&clearTimeout(kt),ot.set(ct,setTimeout(()=>{it(ct)&&setInternalStateToPassiveWhenNecessary(ct,ft)},xt*1e3))}}};return nt(pt,[ct,ht,ut],yt=>yt[0]===ct&&yt[1]===ht&&yt[2]===ut,!0)?(Ot.add(gt),it(at)?_(ft,at,[ht,ut,gt],!0):d(mt,ut,[at,ht,gt],!0),!0):!1}},createAddPassiveInputConnectionToAudioNode=_=>(d,g,[b,$,j],_e)=>{const et=d.get(b);et===void 0?d.set(b,new Set([[$,g,j]])):_(et,[$,g,j],tt=>tt[0]===$&&tt[1]===g,_e)},createAddSilentConnection=_=>(d,g)=>{const b=_(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});g.connect(b).connect(d.destination);const $=()=>{g.removeEventListener("ended",$),g.disconnect(b),b.disconnect()};g.addEventListener("ended",$)},createAddUnrenderedAudioWorkletNode=_=>(d,g)=>{_(d).add(g)},DEFAULT_OPTIONS$j={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},createAnalyserNodeConstructor=(_,d,g,b,$,j)=>class extends _{constructor(et,tt){const nt=$(et),it={...DEFAULT_OPTIONS$j,...tt},rt=b(nt,it),st=j(nt)?d():null;super(et,!1,rt,st),this._nativeAnalyserNode=rt}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(et){this._nativeAnalyserNode.fftSize=et}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(et){const tt=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=et,!(et>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=tt,g()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(et){const tt=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=et,!(this._nativeAnalyserNode.maxDecibels>et))throw this._nativeAnalyserNode.minDecibels=tt,g()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(et){this._nativeAnalyserNode.smoothingTimeConstant=et}getByteFrequencyData(et){this._nativeAnalyserNode.getByteFrequencyData(et)}getByteTimeDomainData(et){this._nativeAnalyserNode.getByteTimeDomainData(et)}getFloatFrequencyData(et){this._nativeAnalyserNode.getFloatFrequencyData(et)}getFloatTimeDomainData(et){this._nativeAnalyserNode.getFloatTimeDomainData(et)}},isOwnedByContext=(_,d)=>_.context===d,createAnalyserNodeRendererFactory=(_,d,g)=>()=>{const b=new WeakMap,$=async(j,_e)=>{let et=d(j);if(!isOwnedByContext(et,_e)){const nt={channelCount:et.channelCount,channelCountMode:et.channelCountMode,channelInterpretation:et.channelInterpretation,fftSize:et.fftSize,maxDecibels:et.maxDecibels,minDecibels:et.minDecibels,smoothingTimeConstant:et.smoothingTimeConstant};et=_(_e,nt)}return b.set(_e,et),await g(j,_e,et),et};return{render(j,_e){const et=b.get(_e);return et!==void 0?Promise.resolve(et):$(j,_e)}}},testAudioBufferCopyChannelMethodsOutOfBoundsSupport=_=>{try{_.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},createIndexSizeError=()=>new DOMException("","IndexSizeError"),wrapAudioBufferGetChannelDataMethod=_=>{_.getChannelData=(d=>g=>{try{return d.call(_,g)}catch(b){throw b.code===12?createIndexSizeError():b}})(_.getChannelData)},DEFAULT_OPTIONS$i={numberOfChannels:1},createAudioBufferConstructor=(_,d,g,b,$,j,_e,et)=>{let tt=null;return class tn{constructor(it){if($===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:rt,numberOfChannels:st,sampleRate:ot}={...DEFAULT_OPTIONS$i,...it};tt===null&&(tt=new $(1,1,44100));const at=b!==null&&d(j,j)?new b({length:rt,numberOfChannels:st,sampleRate:ot}):tt.createBuffer(st,rt,ot);if(at.numberOfChannels===0)throw g();return typeof at.copyFromChannel!="function"?(_e(at),wrapAudioBufferGetChannelDataMethod(at)):d(testAudioBufferCopyChannelMethodsOutOfBoundsSupport,()=>testAudioBufferCopyChannelMethodsOutOfBoundsSupport(at))||et(at),_.add(at),at}static[Symbol.hasInstance](it){return it!==null&&typeof it=="object"&&Object.getPrototypeOf(it)===tn.prototype||_.has(it)}}},MOST_NEGATIVE_SINGLE_FLOAT=-34028234663852886e22,MOST_POSITIVE_SINGLE_FLOAT=-MOST_NEGATIVE_SINGLE_FLOAT,isActiveAudioNode=_=>ACTIVE_AUDIO_NODE_STORE.has(_),DEFAULT_OPTIONS$h={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},createAudioBufferSourceNodeConstructor=(_,d,g,b,$,j,_e,et)=>class extends _{constructor(nt,it){const rt=j(nt),st={...DEFAULT_OPTIONS$h,...it},ot=$(rt,st),at=_e(rt),ct=at?d():null;super(nt,!1,ot,ct),this._audioBufferSourceNodeRenderer=ct,this._isBufferNullified=!1,this._isBufferSet=st.buffer!==null,this._nativeAudioBufferSourceNode=ot,this._onended=null,this._playbackRate=g(this,at,ot.playbackRate,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(nt){if(this._nativeAudioBufferSourceNode.buffer=nt,nt!==null){if(this._isBufferSet)throw b();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(nt){this._nativeAudioBufferSourceNode.loop=nt}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(nt){this._nativeAudioBufferSourceNode.loopEnd=nt}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(nt){this._nativeAudioBufferSourceNode.loopStart=nt}get onended(){return this._onended}set onended(nt){const it=typeof nt=="function"?et(this,nt):null;this._nativeAudioBufferSourceNode.onended=it;const rt=this._nativeAudioBufferSourceNode.onended;this._onended=rt!==null&&rt===it?nt:rt}get playbackRate(){return this._playbackRate}start(nt=0,it=0,rt){if(this._nativeAudioBufferSourceNode.start(nt,it,rt),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=rt===void 0?[nt,it]:[nt,it,rt]),this.context.state!=="closed"){setInternalStateToActive(this);const st=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",st),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",st)}}stop(nt=0){this._nativeAudioBufferSourceNode.stop(nt),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=nt)}},createAudioBufferSourceNodeRendererFactory=(_,d,g,b,$)=>()=>{const j=new WeakMap;let _e=null,et=null;const tt=async(nt,it)=>{let rt=g(nt);const st=isOwnedByContext(rt,it);if(!st){const ot={buffer:rt.buffer,channelCount:rt.channelCount,channelCountMode:rt.channelCountMode,channelInterpretation:rt.channelInterpretation,loop:rt.loop,loopEnd:rt.loopEnd,loopStart:rt.loopStart,playbackRate:rt.playbackRate.value};rt=d(it,ot),_e!==null&&rt.start(..._e),et!==null&&rt.stop(et)}return j.set(it,rt),st?await _(it,nt.playbackRate,rt.playbackRate):await b(it,nt.playbackRate,rt.playbackRate),await $(nt,it,rt),rt};return{set start(nt){_e=nt},set stop(nt){et=nt},render(nt,it){const rt=j.get(it);return rt!==void 0?Promise.resolve(rt):tt(nt,it)}}},isAudioBufferSourceNode=_=>"playbackRate"in _,isBiquadFilterNode=_=>"frequency"in _&&"gain"in _,isConstantSourceNode=_=>"offset"in _,isGainNode=_=>!("frequency"in _)&&"gain"in _,isOscillatorNode=_=>"detune"in _&&"frequency"in _&&!("gain"in _),isStereoPannerNode=_=>"pan"in _,getAudioNodeConnections=_=>getValueForKey(AUDIO_NODE_CONNECTIONS_STORE,_),getAudioParamConnections=_=>getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE,_),deactivateActiveAudioNodeInputConnections=(_,d)=>{const{activeInputs:g}=getAudioNodeConnections(_);g.forEach($=>$.forEach(([j])=>{d.includes(_)||deactivateActiveAudioNodeInputConnections(j,[...d,_])}));const b=isAudioBufferSourceNode(_)?[_.playbackRate]:isAudioWorkletNode(_)?Array.from(_.parameters.values()):isBiquadFilterNode(_)?[_.Q,_.detune,_.frequency,_.gain]:isConstantSourceNode(_)?[_.offset]:isGainNode(_)?[_.gain]:isOscillatorNode(_)?[_.detune,_.frequency]:isStereoPannerNode(_)?[_.pan]:[];for(const $ of b){const j=getAudioParamConnections($);j!==void 0&&j.activeInputs.forEach(([_e])=>deactivateActiveAudioNodeInputConnections(_e,d))}isActiveAudioNode(_)&&setInternalStateToPassive(_)},deactivateAudioGraph=_=>{deactivateActiveAudioNodeInputConnections(_.destination,[])},isValidLatencyHint=_=>_===void 0||typeof _=="number"||typeof _=="string"&&(_==="balanced"||_==="interactive"||_==="playback"),createAudioContextConstructor=(_,d,g,b,$,j,_e,et,tt)=>class extends _{constructor(it={}){if(tt===null)throw new Error("Missing the native AudioContext constructor.");let rt;try{rt=new tt(it)}catch(at){throw at.code===12&&at.message==="sampleRate is not in range"?g():at}if(rt===null)throw b();if(!isValidLatencyHint(it.latencyHint))throw new TypeError(`The provided value '${it.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(it.sampleRate!==void 0&&rt.sampleRate!==it.sampleRate)throw g();super(rt,2);const{latencyHint:st}=it,{sampleRate:ot}=rt;if(this._baseLatency=typeof rt.baseLatency=="number"?rt.baseLatency:st==="balanced"?512/ot:st==="interactive"||st===void 0?256/ot:st==="playback"?1024/ot:Math.max(2,Math.min(128,Math.round(st*ot/128)))*128/ot,this._nativeAudioContext=rt,tt.name==="webkitAudioContext"?(this._nativeGainNode=rt.createGain(),this._nativeOscillatorNode=rt.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(rt.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,rt.state==="running"){this._state="suspended";const at=()=>{this._state==="suspended"&&(this._state=null),rt.removeEventListener("statechange",at)};rt.addEventListener("statechange",at)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw d()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),deactivateAudioGraph(this)}))}createMediaElementSource(it){return new $(this,{mediaElement:it})}createMediaStreamDestination(){return new j(this)}createMediaStreamSource(it){return new _e(this,{mediaStream:it})}createMediaStreamTrackSource(it){return new et(this,{mediaStreamTrack:it})}resume(){return this._state==="suspended"?new Promise((it,rt)=>{const st=()=>{this._nativeAudioContext.removeEventListener("statechange",st),this._nativeAudioContext.state==="running"?it():this.resume().then(it,rt)};this._nativeAudioContext.addEventListener("statechange",st)}):this._nativeAudioContext.resume().catch(it=>{throw it===void 0||it.code===15?d():it})}suspend(){return this._nativeAudioContext.suspend().catch(it=>{throw it===void 0?d():it})}},createAudioDestinationNodeConstructor=(_,d,g,b,$,j,_e,et)=>class extends _{constructor(nt,it){const rt=j(nt),st=_e(rt),ot=$(rt,it,st),at=st?d(et):null;super(nt,!1,ot,at),this._isNodeOfNativeOfflineAudioContext=st,this._nativeAudioDestinationNode=ot}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(nt){if(this._isNodeOfNativeOfflineAudioContext)throw b();if(nt>this._nativeAudioDestinationNode.maxChannelCount)throw g();this._nativeAudioDestinationNode.channelCount=nt}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(nt){if(this._isNodeOfNativeOfflineAudioContext)throw b();this._nativeAudioDestinationNode.channelCountMode=nt}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},createAudioDestinationNodeRenderer=_=>{const d=new WeakMap,g=async(b,$)=>{const j=$.destination;return d.set($,j),await _(b,$,j),j};return{render(b,$){const j=d.get($);return j!==void 0?Promise.resolve(j):g(b,$)}}},createAudioListenerFactory=(_,d,g,b,$,j,_e,et)=>(tt,nt)=>{const it=nt.listener,rt=()=>{const pt=new Float32Array(1),Ot=d(nt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),gt=_e(nt);let yt=!1,St=[0,0,-1,0,1,0],vt=[0,0,0];const wt=()=>{if(yt)return;yt=!0;const Et=b(nt,256,9,0);Et.onaudioprocess=({inputBuffer:At})=>{const Tt=[j(At,pt,0),j(At,pt,1),j(At,pt,2),j(At,pt,3),j(At,pt,4),j(At,pt,5)];Tt.some((Ct,Pt)=>Ct!==St[Pt])&&(it.setOrientation(...Tt),St=Tt);const _t=[j(At,pt,6),j(At,pt,7),j(At,pt,8)];_t.some((Ct,Pt)=>Ct!==vt[Pt])&&(it.setPosition(..._t),vt=_t)},Ot.connect(Et)},xt=Et=>At=>{At!==St[Et]&&(St[Et]=At,it.setOrientation(...St))},kt=Et=>At=>{At!==vt[Et]&&(vt[Et]=At,it.setPosition(...vt))},bt=(Et,At,Tt)=>{const _t=g(nt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:At});_t.connect(Ot,0,Et),_t.start(),Object.defineProperty(_t.offset,"defaultValue",{get(){return At}});const Ct=_({context:tt},gt,_t.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT);return et(Ct,"value",Pt=>()=>Pt.call(Ct),Pt=>Nt=>{try{Pt.call(Ct,Nt)}catch($t){if($t.code!==9)throw $t}wt(),gt&&Tt(Nt)}),Ct.cancelAndHoldAtTime=(Pt=>gt?()=>{throw $()}:(...Nt)=>{const $t=Pt.apply(Ct,Nt);return wt(),$t})(Ct.cancelAndHoldAtTime),Ct.cancelScheduledValues=(Pt=>gt?()=>{throw $()}:(...Nt)=>{const $t=Pt.apply(Ct,Nt);return wt(),$t})(Ct.cancelScheduledValues),Ct.exponentialRampToValueAtTime=(Pt=>gt?()=>{throw $()}:(...Nt)=>{const $t=Pt.apply(Ct,Nt);return wt(),$t})(Ct.exponentialRampToValueAtTime),Ct.linearRampToValueAtTime=(Pt=>gt?()=>{throw $()}:(...Nt)=>{const $t=Pt.apply(Ct,Nt);return wt(),$t})(Ct.linearRampToValueAtTime),Ct.setTargetAtTime=(Pt=>gt?()=>{throw $()}:(...Nt)=>{const $t=Pt.apply(Ct,Nt);return wt(),$t})(Ct.setTargetAtTime),Ct.setValueAtTime=(Pt=>gt?()=>{throw $()}:(...Nt)=>{const $t=Pt.apply(Ct,Nt);return wt(),$t})(Ct.setValueAtTime),Ct.setValueCurveAtTime=(Pt=>gt?()=>{throw $()}:(...Nt)=>{const $t=Pt.apply(Ct,Nt);return wt(),$t})(Ct.setValueCurveAtTime),Ct};return{forwardX:bt(0,0,xt(0)),forwardY:bt(1,0,xt(1)),forwardZ:bt(2,-1,xt(2)),positionX:bt(6,0,kt(0)),positionY:bt(7,0,kt(1)),positionZ:bt(8,0,kt(2)),upX:bt(3,0,xt(3)),upY:bt(4,1,xt(4)),upZ:bt(5,0,xt(5))}},{forwardX:st,forwardY:ot,forwardZ:at,positionX:ct,positionY:ht,positionZ:ut,upX:dt,upY:ft,upZ:mt}=it.forwardX===void 0?rt():it;return{get forwardX(){return st},get forwardY(){return ot},get forwardZ(){return at},get positionX(){return ct},get positionY(){return ht},get positionZ(){return ut},get upX(){return dt},get upY(){return ft},get upZ(){return mt}}},isAudioNode$1=_=>"context"in _,isAudioNodeOutputConnection=_=>isAudioNode$1(_[0]),insertElementInSet=(_,d,g,b)=>{for(const $ of _)if(g($)){if(b)return!1;throw Error("The set contains at least one similar element.")}return _.add(d),!0},addActiveInputConnectionToAudioParam=(_,d,[g,b],$)=>{insertElementInSet(_,[d,g,b],j=>j[0]===d&&j[1]===g,$)},addPassiveInputConnectionToAudioParam=(_,[d,g,b],$)=>{const j=_.get(d);j===void 0?_.set(d,new Set([[g,b]])):insertElementInSet(j,[g,b],_e=>_e[0]===g,$)},isNativeAudioNodeFaker=_=>"inputs"in _,connectNativeAudioNodeToNativeAudioNode=(_,d,g,b)=>{if(isNativeAudioNodeFaker(d)){const $=d.inputs[b];return _.connect($,g,0),[$,g,0]}return _.connect(d,g,b),[d,g,b]},deleteActiveInputConnection=(_,d,g)=>{for(const b of _)if(b[0]===d&&b[1]===g)return _.delete(b),b;return null},deleteActiveInputConnectionToAudioParam=(_,d,g)=>pickElementFromSet(_,b=>b[0]===d&&b[1]===g),deleteEventListenerOfAudioNode=(_,d)=>{if(!getEventListenersOfAudioNode(_).delete(d))throw new Error("Missing the expected event listener.")},deletePassiveInputConnectionToAudioParam=(_,d,g)=>{const b=getValueForKey(_,d),$=pickElementFromSet(b,j=>j[0]===g);return b.size===0&&_.delete(d),$},disconnectNativeAudioNodeFromNativeAudioNode=(_,d,g,b)=>{isNativeAudioNodeFaker(d)?_.disconnect(d.inputs[b],g,0):_.disconnect(d,g,b)},getNativeAudioNode=_=>getValueForKey(AUDIO_NODE_STORE,_),getNativeAudioParam=_=>getValueForKey(AUDIO_PARAM_STORE,_),isPartOfACycle=_=>CYCLE_COUNTERS.has(_),isPassiveAudioNode=_=>!ACTIVE_AUDIO_NODE_STORE.has(_),testAudioNodeDisconnectMethodSupport=(_,d)=>new Promise(g=>{if(d!==null)g(!0);else{const b=_.createScriptProcessor(256,1,1),$=_.createGain(),j=_.createBuffer(1,2,44100),_e=j.getChannelData(0);_e[0]=1,_e[1]=1;const et=_.createBufferSource();et.buffer=j,et.loop=!0,et.connect(b).connect(_.destination),et.connect($),et.disconnect($),b.onaudioprocess=tt=>{const nt=tt.inputBuffer.getChannelData(0);Array.prototype.some.call(nt,it=>it===1)?g(!0):g(!1),et.stop(),b.onaudioprocess=null,et.disconnect(b),b.disconnect(_.destination)},et.start()}}),visitEachAudioNodeOnce=(_,d)=>{const g=new Map;for(const b of _)for(const $ of b){const j=g.get($);g.set($,j===void 0?1:j+1)}g.forEach((b,$)=>d($,b))},isNativeAudioNode$1=_=>"context"in _,wrapAudioNodeDisconnectMethod=_=>{const d=new Map;_.connect=(g=>(b,$=0,j=0)=>{const _e=isNativeAudioNode$1(b)?g(b,$,j):g(b,$),et=d.get(b);return et===void 0?d.set(b,[{input:j,output:$}]):et.every(tt=>tt.input!==j||tt.output!==$)&&et.push({input:j,output:$}),_e})(_.connect.bind(_)),_.disconnect=(g=>(b,$,j)=>{if(g.apply(_),b===void 0)d.clear();else if(typeof b=="number")for(const[_e,et]of d){const tt=et.filter(nt=>nt.output!==b);tt.length===0?d.delete(_e):d.set(_e,tt)}else if(d.has(b))if($===void 0)d.delete(b);else{const _e=d.get(b);if(_e!==void 0){const et=_e.filter(tt=>tt.output!==$&&(tt.input!==j||j===void 0));et.length===0?d.delete(b):d.set(b,et)}}for(const[_e,et]of d)et.forEach(tt=>{isNativeAudioNode$1(_e)?_.connect(_e,tt.output,tt.input):_.connect(_e,tt.output)})})(_.disconnect)},addConnectionToAudioParamOfAudioContext=(_,d,g,b)=>{const{activeInputs:$,passiveInputs:j}=getAudioParamConnections(d),{outputs:_e}=getAudioNodeConnections(_),et=getEventListenersOfAudioNode(_),tt=nt=>{const it=getNativeAudioNode(_),rt=getNativeAudioParam(d);if(nt){const st=deletePassiveInputConnectionToAudioParam(j,_,g);addActiveInputConnectionToAudioParam($,_,st,!1),!b&&!isPartOfACycle(_)&&it.connect(rt,g)}else{const st=deleteActiveInputConnectionToAudioParam($,_,g);addPassiveInputConnectionToAudioParam(j,st,!1),!b&&!isPartOfACycle(_)&&it.disconnect(rt,g)}};return insertElementInSet(_e,[d,g],nt=>nt[0]===d&&nt[1]===g,!0)?(et.add(tt),isActiveAudioNode(_)?addActiveInputConnectionToAudioParam($,_,[g,tt],!0):addPassiveInputConnectionToAudioParam(j,[_,g,tt],!0),!0):!1},deleteInputConnectionOfAudioNode=(_,d,g,b)=>{const{activeInputs:$,passiveInputs:j}=getAudioNodeConnections(d),_e=deleteActiveInputConnection($[b],_,g);return _e===null?[deletePassiveInputConnectionToAudioNode(j,_,g,b)[2],!1]:[_e[2],!0]},deleteInputConnectionOfAudioParam=(_,d,g)=>{const{activeInputs:b,passiveInputs:$}=getAudioParamConnections(d),j=deleteActiveInputConnection(b,_,g);return j===null?[deletePassiveInputConnectionToAudioParam($,_,g)[1],!1]:[j[2],!0]},deleteInputsOfAudioNode=(_,d,g,b,$)=>{const[j,_e]=deleteInputConnectionOfAudioNode(_,g,b,$);if(j!==null&&(deleteEventListenerOfAudioNode(_,j),_e&&!d&&!isPartOfACycle(_)&&disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(_),getNativeAudioNode(g),b,$)),isActiveAudioNode(g)){const{activeInputs:et}=getAudioNodeConnections(g);setInternalStateToPassiveWhenNecessary(g,et)}},deleteInputsOfAudioParam=(_,d,g,b)=>{const[$,j]=deleteInputConnectionOfAudioParam(_,g,b);$!==null&&(deleteEventListenerOfAudioNode(_,$),j&&!d&&!isPartOfACycle(_)&&getNativeAudioNode(_).disconnect(getNativeAudioParam(g),b))},deleteAnyConnection=(_,d)=>{const g=getAudioNodeConnections(_),b=[];for(const $ of g.outputs)isAudioNodeOutputConnection($)?deleteInputsOfAudioNode(_,d,...$):deleteInputsOfAudioParam(_,d,...$),b.push($[0]);return g.outputs.clear(),b},deleteConnectionAtOutput=(_,d,g)=>{const b=getAudioNodeConnections(_),$=[];for(const j of b.outputs)j[1]===g&&(isAudioNodeOutputConnection(j)?deleteInputsOfAudioNode(_,d,...j):deleteInputsOfAudioParam(_,d,...j),$.push(j[0]),b.outputs.delete(j));return $},deleteConnectionToDestination=(_,d,g,b,$)=>{const j=getAudioNodeConnections(_);return Array.from(j.outputs).filter(_e=>_e[0]===g&&(b===void 0||_e[1]===b)&&($===void 0||_e[2]===$)).map(_e=>(isAudioNodeOutputConnection(_e)?deleteInputsOfAudioNode(_,d,..._e):deleteInputsOfAudioParam(_,d,..._e),j.outputs.delete(_e),_e[0]))},createAudioNodeConstructor=(_,d,g,b,$,j,_e,et,tt,nt,it,rt,st,ot,at,ct)=>class extends nt{constructor(ut,dt,ft,mt){super(ft),this._context=ut,this._nativeAudioNode=ft;const pt=it(ut);rt(pt)&&g(testAudioNodeDisconnectMethodSupport,()=>testAudioNodeDisconnectMethodSupport(pt,ct))!==!0&&wrapAudioNodeDisconnectMethod(ft),AUDIO_NODE_STORE.set(this,ft),EVENT_LISTENERS.set(this,new Set),ut.state!=="closed"&&dt&&setInternalStateToActive(this),_(this,mt,ft)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(ut){this._nativeAudioNode.channelCount=ut}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(ut){this._nativeAudioNode.channelCountMode=ut}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(ut){this._nativeAudioNode.channelInterpretation=ut}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(ut,dt=0,ft=0){if(dt<0||dt>=this._nativeAudioNode.numberOfOutputs)throw $();const mt=it(this._context),pt=at(mt);if(st(ut)||ot(ut))throw j();if(isAudioNode$1(ut)){const yt=getNativeAudioNode(ut);try{const vt=connectNativeAudioNodeToNativeAudioNode(this._nativeAudioNode,yt,dt,ft),wt=isPassiveAudioNode(this);(pt||wt)&&this._nativeAudioNode.disconnect(...vt),this.context.state!=="closed"&&!wt&&isPassiveAudioNode(ut)&&setInternalStateToActive(ut)}catch(vt){throw vt.code===12?j():vt}if(d(this,ut,dt,ft,pt)){const vt=tt([this],ut);visitEachAudioNodeOnce(vt,b(pt))}return ut}const Ot=getNativeAudioParam(ut);if(Ot.name==="playbackRate"&&Ot.maxValue===1024)throw _e();try{this._nativeAudioNode.connect(Ot,dt),(pt||isPassiveAudioNode(this))&&this._nativeAudioNode.disconnect(Ot,dt)}catch(yt){throw yt.code===12?j():yt}if(addConnectionToAudioParamOfAudioContext(this,ut,dt,pt)){const yt=tt([this],ut);visitEachAudioNodeOnce(yt,b(pt))}}disconnect(ut,dt,ft){let mt;const pt=it(this._context),Ot=at(pt);if(ut===void 0)mt=deleteAnyConnection(this,Ot);else if(typeof ut=="number"){if(ut<0||ut>=this.numberOfOutputs)throw $();mt=deleteConnectionAtOutput(this,Ot,ut)}else{if(dt!==void 0&&(dt<0||dt>=this.numberOfOutputs)||isAudioNode$1(ut)&&ft!==void 0&&(ft<0||ft>=ut.numberOfInputs))throw $();if(mt=deleteConnectionToDestination(this,Ot,ut,dt,ft),mt.length===0)throw j()}for(const gt of mt){const yt=tt([this],gt);visitEachAudioNodeOnce(yt,et)}}},createAudioParamFactory=(_,d,g,b,$,j,_e,et,tt,nt,it,rt,st)=>(ot,at,ct,ht=null,ut=null)=>{const dt=ct.value,ft=new AutomationEventList(dt),mt=at?b(ft):null,pt={get defaultValue(){return dt},get maxValue(){return ht===null?ct.maxValue:ht},get minValue(){return ut===null?ct.minValue:ut},get value(){return ct.value},set value(Ot){ct.value=Ot,pt.setValueAtTime(Ot,ot.context.currentTime)},cancelAndHoldAtTime(Ot){if(typeof ct.cancelAndHoldAtTime=="function")mt===null&&ft.flush(ot.context.currentTime),ft.add($(Ot)),ct.cancelAndHoldAtTime(Ot);else{const gt=Array.from(ft).pop();mt===null&&ft.flush(ot.context.currentTime),ft.add($(Ot));const yt=Array.from(ft).pop();ct.cancelScheduledValues(Ot),gt!==yt&&yt!==void 0&&(yt.type==="exponentialRampToValue"?ct.exponentialRampToValueAtTime(yt.value,yt.endTime):yt.type==="linearRampToValue"?ct.linearRampToValueAtTime(yt.value,yt.endTime):yt.type==="setValue"?ct.setValueAtTime(yt.value,yt.startTime):yt.type==="setValueCurve"&&ct.setValueCurveAtTime(yt.values,yt.startTime,yt.duration))}return pt},cancelScheduledValues(Ot){return mt===null&&ft.flush(ot.context.currentTime),ft.add(j(Ot)),ct.cancelScheduledValues(Ot),pt},exponentialRampToValueAtTime(Ot,gt){if(Ot===0)throw new RangeError;if(!Number.isFinite(gt)||gt<0)throw new RangeError;const yt=ot.context.currentTime;return mt===null&&ft.flush(yt),Array.from(ft).length===0&&(ft.add(nt(dt,yt)),ct.setValueAtTime(dt,yt)),ft.add(_e(Ot,gt)),ct.exponentialRampToValueAtTime(Ot,gt),pt},linearRampToValueAtTime(Ot,gt){const yt=ot.context.currentTime;return mt===null&&ft.flush(yt),Array.from(ft).length===0&&(ft.add(nt(dt,yt)),ct.setValueAtTime(dt,yt)),ft.add(et(Ot,gt)),ct.linearRampToValueAtTime(Ot,gt),pt},setTargetAtTime(Ot,gt,yt){return mt===null&&ft.flush(ot.context.currentTime),ft.add(tt(Ot,gt,yt)),ct.setTargetAtTime(Ot,gt,yt),pt},setValueAtTime(Ot,gt){return mt===null&&ft.flush(ot.context.currentTime),ft.add(nt(Ot,gt)),ct.setValueAtTime(Ot,gt),pt},setValueCurveAtTime(Ot,gt,yt){const St=Ot instanceof Float32Array?Ot:new Float32Array(Ot);if(rt!==null&&rt.name==="webkitAudioContext"){const vt=gt+yt,wt=ot.context.sampleRate,xt=Math.ceil(gt*wt),kt=Math.floor(vt*wt),bt=kt-xt,Et=new Float32Array(bt);for(let Tt=0;Tt<bt;Tt+=1){const _t=(St.length-1)/yt*((xt+Tt)/wt-gt),Ct=Math.floor(_t),Pt=Math.ceil(_t);Et[Tt]=Ct===Pt?St[Ct]:(1-(_t-Ct))*St[Ct]+(1-(Pt-_t))*St[Pt]}mt===null&&ft.flush(ot.context.currentTime),ft.add(it(Et,gt,yt)),ct.setValueCurveAtTime(Et,gt,yt);const At=kt/wt;At<vt&&st(pt,Et[Et.length-1],At),st(pt,St[St.length-1],vt)}else mt===null&&ft.flush(ot.context.currentTime),ft.add(it(St,gt,yt)),ct.setValueCurveAtTime(St,gt,yt);return pt}};return g.set(pt,ct),d.set(pt,ot),_(pt,mt),pt},createAudioParamRenderer=_=>({replay(d){for(const g of _)if(g.type==="exponentialRampToValue"){const{endTime:b,value:$}=g;d.exponentialRampToValueAtTime($,b)}else if(g.type==="linearRampToValue"){const{endTime:b,value:$}=g;d.linearRampToValueAtTime($,b)}else if(g.type==="setTarget"){const{startTime:b,target:$,timeConstant:j}=g;d.setTargetAtTime($,b,j)}else if(g.type==="setValue"){const{startTime:b,value:$}=g;d.setValueAtTime($,b)}else if(g.type==="setValueCurve"){const{duration:b,startTime:$,values:j}=g;d.setValueCurveAtTime(j,$,b)}else throw new Error("Can't apply an unknown automation.")}});class ReadOnlyMap{constructor(d){this._map=new Map(d)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(d,g=null){return this._map.forEach((b,$)=>d.call(g,b,$,this))}get(d){return this._map.get(d)}has(d){return this._map.has(d)}keys(){return this._map.keys()}values(){return this._map.values()}}const DEFAULT_OPTIONS$g={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},createAudioWorkletNodeConstructor=(_,d,g,b,$,j,_e,et,tt,nt,it,rt,st,ot)=>class extends d{constructor(ct,ht,ut){var dt;const ft=et(ct),mt=tt(ft),pt=it({...DEFAULT_OPTIONS$g,...ut});st(pt);const Ot=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(ft),gt=Ot==null?void 0:Ot.get(ht),yt=mt||ft.state!=="closed"?ft:(dt=_e(ft))!==null&&dt!==void 0?dt:ft,St=$(yt,mt?null:ct.baseLatency,nt,ht,gt,pt),vt=mt?b(ht,pt,gt):null;super(ct,!0,St,vt);const wt=[];St.parameters.forEach((kt,bt)=>{const Et=g(this,mt,kt);wt.push([bt,Et])}),this._nativeAudioWorkletNode=St,this._onprocessorerror=null,this._parameters=new ReadOnlyMap(wt),mt&&_(ft,this);const{activeInputs:xt}=j(this);rt(St,xt)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(ct){const ht=typeof ct=="function"?ot(this,ct):null;this._nativeAudioWorkletNode.onprocessorerror=ht;const ut=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=ut!==null&&ut===ht?ct:ut}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function copyFromChannel(_,d,g,b,$){if(typeof _.copyFromChannel=="function")d[g].byteLength===0&&(d[g]=new Float32Array(128)),_.copyFromChannel(d[g],b,$);else{const j=_.getChannelData(b);if(d[g].byteLength===0)d[g]=j.slice($,$+128);else{const _e=new Float32Array(j.buffer,$*Float32Array.BYTES_PER_ELEMENT,128);d[g].set(_e)}}}const copyToChannel=(_,d,g,b,$)=>{typeof _.copyToChannel=="function"?d[g].byteLength!==0&&_.copyToChannel(d[g],b,$):d[g].byteLength!==0&&_.getChannelData(b).set(d[g],$)},createNestedArrays=(_,d)=>{const g=[];for(let b=0;b<_;b+=1){const $=[],j=typeof d=="number"?d:d[b];for(let _e=0;_e<j;_e+=1)$.push(new Float32Array(128));g.push($)}return g},getAudioWorkletProcessor=(_,d)=>{const g=getValueForKey(NODE_TO_PROCESSOR_MAPS,_),b=getNativeAudioNode(d);return getValueForKey(g,b)},processBuffer=async(_,d,g,b,$,j,_e)=>{const et=d===null?Math.ceil(_.context.length/128)*128:d.length,tt=b.channelCount*b.numberOfInputs,nt=$.reduce((ht,ut)=>ht+ut,0),it=nt===0?null:g.createBuffer(nt,et,g.sampleRate);if(j===void 0)throw new Error("Missing the processor constructor.");const rt=getAudioNodeConnections(_),st=await getAudioWorkletProcessor(g,_),ot=createNestedArrays(b.numberOfInputs,b.channelCount),at=createNestedArrays(b.numberOfOutputs,$),ct=Array.from(_.parameters.keys()).reduce((ht,ut)=>({...ht,[ut]:new Float32Array(128)}),{});for(let ht=0;ht<et;ht+=128){if(b.numberOfInputs>0&&d!==null)for(let ut=0;ut<b.numberOfInputs;ut+=1)for(let dt=0;dt<b.channelCount;dt+=1)copyFromChannel(d,ot[ut],dt,dt,ht);j.parameterDescriptors!==void 0&&d!==null&&j.parameterDescriptors.forEach(({name:ut},dt)=>{copyFromChannel(d,ct,ut,tt+dt,ht)});for(let ut=0;ut<b.numberOfInputs;ut+=1)for(let dt=0;dt<$[ut];dt+=1)at[ut][dt].byteLength===0&&(at[ut][dt]=new Float32Array(128));try{const ut=ot.map((ft,mt)=>rt.activeInputs[mt].size===0?[]:ft),dt=_e(ht/g.sampleRate,g.sampleRate,()=>st.process(ut,at,ct));if(it!==null)for(let ft=0,mt=0;ft<b.numberOfOutputs;ft+=1){for(let pt=0;pt<$[ft];pt+=1)copyToChannel(it,at[ft],pt,mt+pt,ht);mt+=$[ft]}if(!dt)break}catch(ut){_.dispatchEvent(new ErrorEvent("processorerror",{colno:ut.colno,filename:ut.filename,lineno:ut.lineno,message:ut.message}));break}}return it},createAudioWorkletNodeRendererFactory=(_,d,g,b,$,j,_e,et,tt,nt,it,rt,st,ot,at,ct)=>(ht,ut,dt)=>{const ft=new WeakMap;let mt=null;const pt=async(Ot,gt)=>{let yt=it(Ot),St=null;const vt=isOwnedByContext(yt,gt),wt=Array.isArray(ut.outputChannelCount)?ut.outputChannelCount:Array.from(ut.outputChannelCount);if(rt===null){const xt=wt.reduce((At,Tt)=>At+Tt,0),kt=$(gt,{channelCount:Math.max(1,xt),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,xt)}),bt=[];for(let At=0;At<Ot.numberOfOutputs;At+=1)bt.push(b(gt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:wt[At]}));const Et=_e(gt,{channelCount:ut.channelCount,channelCountMode:ut.channelCountMode,channelInterpretation:ut.channelInterpretation,gain:1});Et.connect=d.bind(null,bt),Et.disconnect=tt.bind(null,bt),St=[kt,bt,Et]}else vt||(yt=new rt(gt,ht));if(ft.set(gt,St===null?yt:St[2]),St!==null){if(mt===null){if(dt===void 0)throw new Error("Missing the processor constructor.");if(st===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Tt=Ot.channelCount*Ot.numberOfInputs,_t=dt.parameterDescriptors===void 0?0:dt.parameterDescriptors.length,Ct=Tt+_t;mt=processBuffer(Ot,Ct===0?null:await(async()=>{const Nt=new st(Ct,Math.ceil(Ot.context.length/128)*128,gt.sampleRate),$t=[],Zt=[];for(let Lt=0;Lt<ut.numberOfInputs;Lt+=1)$t.push(_e(Nt,{channelCount:ut.channelCount,channelCountMode:ut.channelCountMode,channelInterpretation:ut.channelInterpretation,gain:1})),Zt.push($(Nt,{channelCount:ut.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:ut.channelCount}));const Ft=await Promise.all(Array.from(Ot.parameters.values()).map(async Lt=>{const Dt=j(Nt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Lt.value});return await ot(Nt,Lt,Dt.offset),Dt})),It=b(Nt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Tt+_t)});for(let Lt=0;Lt<ut.numberOfInputs;Lt+=1){$t[Lt].connect(Zt[Lt]);for(let Dt=0;Dt<ut.channelCount;Dt+=1)Zt[Lt].connect(It,Dt,Lt*ut.channelCount+Dt)}for(const[Lt,Dt]of Ft.entries())Dt.connect(It,0,Tt+Lt),Dt.start(0);return It.connect(Nt.destination),await Promise.all($t.map(Lt=>at(Ot,Nt,Lt))),ct(Nt)})(),gt,ut,wt,dt,nt)}const xt=await mt,kt=g(gt,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[bt,Et,At]=St;xt!==null&&(kt.buffer=xt,kt.start(0)),kt.connect(bt);for(let Tt=0,_t=0;Tt<Ot.numberOfOutputs;Tt+=1){const Ct=Et[Tt];for(let Pt=0;Pt<wt[Tt];Pt+=1)bt.connect(Ct,_t+Pt,Pt);_t+=wt[Tt]}return At}if(vt)for(const[xt,kt]of Ot.parameters.entries())await _(gt,kt,yt.parameters.get(xt));else for(const[xt,kt]of Ot.parameters.entries())await ot(gt,kt,yt.parameters.get(xt));return await at(Ot,gt,yt),yt};return{render(Ot,gt){et(gt,Ot);const yt=ft.get(gt);return yt!==void 0?Promise.resolve(yt):pt(Ot,gt)}}},createBaseAudioContextConstructor=(_,d,g,b,$,j,_e,et,tt,nt,it,rt,st,ot,at,ct,ht,ut,dt,ft)=>class extends at{constructor(pt,Ot){super(pt,Ot),this._nativeContext=pt,this._audioWorklet=_===void 0?void 0:{addModule:(gt,yt)=>_(this,gt,yt)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new d(this)}createBiquadFilter(){return new $(this)}createBuffer(pt,Ot,gt){return new g({length:Ot,numberOfChannels:pt,sampleRate:gt})}createBufferSource(){return new b(this)}createChannelMerger(pt=6){return new j(this,{numberOfInputs:pt})}createChannelSplitter(pt=6){return new _e(this,{numberOfOutputs:pt})}createConstantSource(){return new et(this)}createConvolver(){return new tt(this)}createDelay(pt=1){return new it(this,{maxDelayTime:pt})}createDynamicsCompressor(){return new rt(this)}createGain(){return new st(this)}createIIRFilter(pt,Ot){return new ot(this,{feedback:Ot,feedforward:pt})}createOscillator(){return new ct(this)}createPanner(){return new ht(this)}createPeriodicWave(pt,Ot,gt={disableNormalization:!1}){return new ut(this,{...gt,imag:Ot,real:pt})}createStereoPanner(){return new dt(this)}createWaveShaper(){return new ft(this)}decodeAudioData(pt,Ot,gt){return nt(this._nativeContext,pt).then(yt=>(typeof Ot=="function"&&Ot(yt),yt),yt=>{throw typeof gt=="function"&&gt(yt),yt})}},DEFAULT_OPTIONS$f={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},createBiquadFilterNodeConstructor=(_,d,g,b,$,j,_e,et)=>class extends _{constructor(nt,it){const rt=j(nt),st={...DEFAULT_OPTIONS$f,...it},ot=$(rt,st),at=_e(rt),ct=at?g():null;super(nt,!1,ot,ct),this._Q=d(this,at,ot.Q,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._detune=d(this,at,ot.detune,1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT),-1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT)),this._frequency=d(this,at,ot.frequency,nt.sampleRate/2,0),this._gain=d(this,at,ot.gain,40*Math.log10(MOST_POSITIVE_SINGLE_FLOAT),MOST_NEGATIVE_SINGLE_FLOAT),this._nativeBiquadFilterNode=ot,et(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(nt){this._nativeBiquadFilterNode.type=nt}getFrequencyResponse(nt,it,rt){try{this._nativeBiquadFilterNode.getFrequencyResponse(nt,it,rt)}catch(st){throw st.code===11?b():st}if(nt.length!==it.length||it.length!==rt.length)throw b()}},createBiquadFilterNodeRendererFactory=(_,d,g,b,$)=>()=>{const j=new WeakMap,_e=async(et,tt)=>{let nt=g(et);const it=isOwnedByContext(nt,tt);if(!it){const rt={Q:nt.Q.value,channelCount:nt.channelCount,channelCountMode:nt.channelCountMode,channelInterpretation:nt.channelInterpretation,detune:nt.detune.value,frequency:nt.frequency.value,gain:nt.gain.value,type:nt.type};nt=d(tt,rt)}return j.set(tt,nt),it?(await _(tt,et.Q,nt.Q),await _(tt,et.detune,nt.detune),await _(tt,et.frequency,nt.frequency),await _(tt,et.gain,nt.gain)):(await b(tt,et.Q,nt.Q),await b(tt,et.detune,nt.detune),await b(tt,et.frequency,nt.frequency),await b(tt,et.gain,nt.gain)),await $(et,tt,nt),nt};return{render(et,tt){const nt=j.get(tt);return nt!==void 0?Promise.resolve(nt):_e(et,tt)}}},createCacheTestResult=(_,d)=>(g,b)=>{const $=d.get(g);if($!==void 0)return $;const j=_.get(g);if(j!==void 0)return j;try{const _e=b();return _e instanceof Promise?(_.set(g,_e),_e.catch(()=>!1).then(et=>(_.delete(g),d.set(g,et),et))):(d.set(g,_e),_e)}catch{return d.set(g,!1),!1}},DEFAULT_OPTIONS$e={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},createChannelMergerNodeConstructor=(_,d,g,b,$)=>class extends _{constructor(_e,et){const tt=b(_e),nt={...DEFAULT_OPTIONS$e,...et},it=g(tt,nt),rt=$(tt)?d():null;super(_e,!1,it,rt)}},createChannelMergerNodeRendererFactory=(_,d,g)=>()=>{const b=new WeakMap,$=async(j,_e)=>{let et=d(j);if(!isOwnedByContext(et,_e)){const nt={channelCount:et.channelCount,channelCountMode:et.channelCountMode,channelInterpretation:et.channelInterpretation,numberOfInputs:et.numberOfInputs};et=_(_e,nt)}return b.set(_e,et),await g(j,_e,et),et};return{render(j,_e){const et=b.get(_e);return et!==void 0?Promise.resolve(et):$(j,_e)}}},DEFAULT_OPTIONS$d={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},createChannelSplitterNodeConstructor=(_,d,g,b,$,j)=>class extends _{constructor(et,tt){const nt=b(et),it=j({...DEFAULT_OPTIONS$d,...tt}),rt=g(nt,it),st=$(nt)?d():null;super(et,!1,rt,st)}},createChannelSplitterNodeRendererFactory=(_,d,g)=>()=>{const b=new WeakMap,$=async(j,_e)=>{let et=d(j);if(!isOwnedByContext(et,_e)){const nt={channelCount:et.channelCount,channelCountMode:et.channelCountMode,channelInterpretation:et.channelInterpretation,numberOfOutputs:et.numberOfOutputs};et=_(_e,nt)}return b.set(_e,et),await g(j,_e,et),et};return{render(j,_e){const et=b.get(_e);return et!==void 0?Promise.resolve(et):$(j,_e)}}},createConnectAudioParam=_=>(d,g,b)=>_(g,d,b),createConnectMultipleOutputs=_=>(d,g,b=0,$=0)=>{const j=d[b];if(j===void 0)throw _();return isNativeAudioNode$1(g)?j.connect(g,0,$):j.connect(g,0)},createConnectedNativeAudioBufferSourceNodeFactory=_=>(d,g)=>{const b=_(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),$=d.createBuffer(1,2,44100);return b.buffer=$,b.loop=!0,b.connect(g),b.start(),()=>{b.stop(),b.disconnect(g)}},DEFAULT_OPTIONS$c={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},createConstantSourceNodeConstructor=(_,d,g,b,$,j,_e)=>class extends _{constructor(tt,nt){const it=$(tt),rt={...DEFAULT_OPTIONS$c,...nt},st=b(it,rt),ot=j(it),at=ot?g():null;super(tt,!1,st,at),this._constantSourceNodeRenderer=at,this._nativeConstantSourceNode=st,this._offset=d(this,ot,st.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(tt){const nt=typeof tt=="function"?_e(this,tt):null;this._nativeConstantSourceNode.onended=nt;const it=this._nativeConstantSourceNode.onended;this._onended=it!==null&&it===nt?tt:it}start(tt=0){if(this._nativeConstantSourceNode.start(tt),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=tt),this.context.state!=="closed"){setInternalStateToActive(this);const nt=()=>{this._nativeConstantSourceNode.removeEventListener("ended",nt),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeConstantSourceNode.addEventListener("ended",nt)}}stop(tt=0){this._nativeConstantSourceNode.stop(tt),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=tt)}},createConstantSourceNodeRendererFactory=(_,d,g,b,$)=>()=>{const j=new WeakMap;let _e=null,et=null;const tt=async(nt,it)=>{let rt=g(nt);const st=isOwnedByContext(rt,it);if(!st){const ot={channelCount:rt.channelCount,channelCountMode:rt.channelCountMode,channelInterpretation:rt.channelInterpretation,offset:rt.offset.value};rt=d(it,ot),_e!==null&&rt.start(_e),et!==null&&rt.stop(et)}return j.set(it,rt),st?await _(it,nt.offset,rt.offset):await b(it,nt.offset,rt.offset),await $(nt,it,rt),rt};return{set start(nt){_e=nt},set stop(nt){et=nt},render(nt,it){const rt=j.get(it);return rt!==void 0?Promise.resolve(rt):tt(nt,it)}}},createConvertNumberToUnsignedLong=_=>d=>(_[0]=d,_[0]),DEFAULT_OPTIONS$b={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},createConvolverNodeConstructor=(_,d,g,b,$,j)=>class extends _{constructor(et,tt){const nt=b(et),it={...DEFAULT_OPTIONS$b,...tt},rt=g(nt,it),ot=$(nt)?d():null;super(et,!1,rt,ot),this._isBufferNullified=!1,this._nativeConvolverNode=rt,it.buffer!==null&&j(this,it.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(et){if(this._nativeConvolverNode.buffer=et,et===null&&this._nativeConvolverNode.buffer!==null){const tt=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=tt.createBuffer(1,1,tt.sampleRate),this._isBufferNullified=!0,j(this,0)}else this._isBufferNullified=!1,j(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(et){this._nativeConvolverNode.normalize=et}},createConvolverNodeRendererFactory=(_,d,g)=>()=>{const b=new WeakMap,$=async(j,_e)=>{let et=d(j);if(!isOwnedByContext(et,_e)){const nt={buffer:et.buffer,channelCount:et.channelCount,channelCountMode:et.channelCountMode,channelInterpretation:et.channelInterpretation,disableNormalization:!et.normalize};et=_(_e,nt)}return b.set(_e,et),isNativeAudioNodeFaker(et)?await g(j,_e,et.inputs[0]):await g(j,_e,et),et};return{render(j,_e){const et=b.get(_e);return et!==void 0?Promise.resolve(et):$(j,_e)}}},createCreateNativeOfflineAudioContext=(_,d)=>(g,b,$)=>{if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new d(g,b,$)}catch(j){throw j.name==="SyntaxError"?_():j}},createDataCloneError=()=>new DOMException("","DataCloneError"),detachArrayBuffer=_=>{const{port1:d,port2:g}=new MessageChannel;return new Promise(b=>{const $=()=>{g.onmessage=null,d.close(),g.close(),b()};g.onmessage=()=>$();try{d.postMessage(_,[_])}catch{}finally{$()}})},createDecodeAudioData=(_,d,g,b,$,j,_e,et,tt,nt,it)=>(rt,st)=>{const ot=_e(rt)?rt:j(rt);if($.has(st)){const at=g();return Promise.reject(at)}try{$.add(st)}catch{}return d(tt,()=>tt(ot))?ot.decodeAudioData(st).then(at=>(detachArrayBuffer(st).catch(()=>{}),d(et,()=>et(at))||it(at),_.add(at),at)):new Promise((at,ct)=>{const ht=async()=>{try{await detachArrayBuffer(st)}catch{}},ut=dt=>{ct(dt),ht()};try{ot.decodeAudioData(st,dt=>{typeof dt.copyFromChannel!="function"&&(nt(dt),wrapAudioBufferGetChannelDataMethod(dt)),_.add(dt),ht().then(()=>at(dt))},dt=>{ut(dt===null?b():dt)})}catch(dt){ut(dt)}})},createDecrementCycleCounter=(_,d,g,b,$,j,_e,et)=>(tt,nt)=>{const it=d.get(tt);if(it===void 0)throw new Error("Missing the expected cycle count.");const rt=j(tt.context),st=et(rt);if(it===nt){if(d.delete(tt),!st&&_e(tt)){const ot=b(tt),{outputs:at}=g(tt);for(const ct of at)if(isAudioNodeOutputConnection(ct)){const ht=b(ct[0]);_(ot,ht,ct[1],ct[2])}else{const ht=$(ct[0]);ot.connect(ht,ct[1])}}}else d.set(tt,it-nt)},DEFAULT_OPTIONS$a={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},createDelayNodeConstructor=(_,d,g,b,$,j,_e)=>class extends _{constructor(tt,nt){const it=$(tt),rt={...DEFAULT_OPTIONS$a,...nt},st=b(it,rt),ot=j(it),at=ot?g(rt.maxDelayTime):null;super(tt,!1,st,at),this._delayTime=d(this,ot,st.delayTime),_e(this,rt.maxDelayTime)}get delayTime(){return this._delayTime}},createDelayNodeRendererFactory=(_,d,g,b,$)=>j=>{const _e=new WeakMap,et=async(tt,nt)=>{let it=g(tt);const rt=isOwnedByContext(it,nt);if(!rt){const st={channelCount:it.channelCount,channelCountMode:it.channelCountMode,channelInterpretation:it.channelInterpretation,delayTime:it.delayTime.value,maxDelayTime:j};it=d(nt,st)}return _e.set(nt,it),rt?await _(nt,tt.delayTime,it.delayTime):await b(nt,tt.delayTime,it.delayTime),await $(tt,nt,it),it};return{render(tt,nt){const it=_e.get(nt);return it!==void 0?Promise.resolve(it):et(tt,nt)}}},createDeleteActiveInputConnectionToAudioNode=_=>(d,g,b,$)=>_(d[$],j=>j[0]===g&&j[1]===b),createDeleteUnrenderedAudioWorkletNode=_=>(d,g)=>{_(d).delete(g)},isDelayNode=_=>"delayTime"in _,createDetectCycles=(_,d,g)=>function b($,j){const _e=isAudioNode$1(j)?j:g(_,j);if(isDelayNode(_e))return[];if($[0]===_e)return[$];if($.includes(_e))return[];const{outputs:et}=d(_e);return Array.from(et).map(tt=>b([...$,_e],tt[0])).reduce((tt,nt)=>tt.concat(nt),[])},getOutputAudioNodeAtIndex=(_,d,g)=>{const b=d[g];if(b===void 0)throw _();return b},createDisconnectMultipleOutputs=_=>(d,g=void 0,b=void 0,$=0)=>g===void 0?d.forEach(j=>j.disconnect()):typeof g=="number"?getOutputAudioNodeAtIndex(_,d,g).disconnect():isNativeAudioNode$1(g)?b===void 0?d.forEach(j=>j.disconnect(g)):$===void 0?getOutputAudioNodeAtIndex(_,d,b).disconnect(g,0):getOutputAudioNodeAtIndex(_,d,b).disconnect(g,0,$):b===void 0?d.forEach(j=>j.disconnect(g)):getOutputAudioNodeAtIndex(_,d,b).disconnect(g,0),DEFAULT_OPTIONS$9={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},createDynamicsCompressorNodeConstructor=(_,d,g,b,$,j,_e,et)=>class extends _{constructor(nt,it){const rt=j(nt),st={...DEFAULT_OPTIONS$9,...it},ot=b(rt,st),at=_e(rt),ct=at?g():null;super(nt,!1,ot,ct),this._attack=d(this,at,ot.attack),this._knee=d(this,at,ot.knee),this._nativeDynamicsCompressorNode=ot,this._ratio=d(this,at,ot.ratio),this._release=d(this,at,ot.release),this._threshold=d(this,at,ot.threshold),et(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(nt){const it=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=nt,nt>2)throw this._nativeDynamicsCompressorNode.channelCount=it,$()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(nt){const it=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=nt,nt==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=it,$()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},createDynamicsCompressorNodeRendererFactory=(_,d,g,b,$)=>()=>{const j=new WeakMap,_e=async(et,tt)=>{let nt=g(et);const it=isOwnedByContext(nt,tt);if(!it){const rt={attack:nt.attack.value,channelCount:nt.channelCount,channelCountMode:nt.channelCountMode,channelInterpretation:nt.channelInterpretation,knee:nt.knee.value,ratio:nt.ratio.value,release:nt.release.value,threshold:nt.threshold.value};nt=d(tt,rt)}return j.set(tt,nt),it?(await _(tt,et.attack,nt.attack),await _(tt,et.knee,nt.knee),await _(tt,et.ratio,nt.ratio),await _(tt,et.release,nt.release),await _(tt,et.threshold,nt.threshold)):(await b(tt,et.attack,nt.attack),await b(tt,et.knee,nt.knee),await b(tt,et.ratio,nt.ratio),await b(tt,et.release,nt.release),await b(tt,et.threshold,nt.threshold)),await $(et,tt,nt),nt};return{render(et,tt){const nt=j.get(tt);return nt!==void 0?Promise.resolve(nt):_e(et,tt)}}},createEncodingError=()=>new DOMException("","EncodingError"),createEvaluateSource=_=>d=>new Promise((g,b)=>{if(_===null){b(new SyntaxError);return}const $=_.document.head;if($===null)b(new SyntaxError);else{const j=_.document.createElement("script"),_e=new Blob([d],{type:"application/javascript"}),et=URL.createObjectURL(_e),tt=_.onerror,nt=()=>{_.onerror=tt,URL.revokeObjectURL(et)};_.onerror=(it,rt,st,ot,at)=>{if(rt===et||rt===_.location.href&&st===1&&ot===1)return nt(),b(at),!1;if(tt!==null)return tt(it,rt,st,ot,at)},j.onerror=()=>{nt(),b(new SyntaxError)},j.onload=()=>{nt(),g()},j.src=et,j.type="module",$.appendChild(j)}}),createEventTargetConstructor=_=>class{constructor(g){this._nativeEventTarget=g,this._listeners=new WeakMap}addEventListener(g,b,$){if(b!==null){let j=this._listeners.get(b);j===void 0&&(j=_(this,b),typeof b=="function"&&this._listeners.set(b,j)),this._nativeEventTarget.addEventListener(g,j,$)}}dispatchEvent(g){return this._nativeEventTarget.dispatchEvent(g)}removeEventListener(g,b,$){const j=b===null?void 0:this._listeners.get(b);this._nativeEventTarget.removeEventListener(g,j===void 0?null:j,$)}},createExposeCurrentFrameAndCurrentTime=_=>(d,g,b)=>{Object.defineProperties(_,{currentFrame:{configurable:!0,get(){return Math.round(d*g)}},currentTime:{configurable:!0,get(){return d}}});try{return b()}finally{_!==null&&(delete _.currentFrame,delete _.currentTime)}},createFetchSource=_=>async d=>{try{const g=await fetch(d);if(g.ok)return[await g.text(),g.url]}catch{}throw _()},DEFAULT_OPTIONS$8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},createGainNodeConstructor=(_,d,g,b,$,j)=>class extends _{constructor(et,tt){const nt=$(et),it={...DEFAULT_OPTIONS$8,...tt},rt=b(nt,it),st=j(nt),ot=st?g():null;super(et,!1,rt,ot),this._gain=d(this,st,rt.gain,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get gain(){return this._gain}},createGainNodeRendererFactory=(_,d,g,b,$)=>()=>{const j=new WeakMap,_e=async(et,tt)=>{let nt=g(et);const it=isOwnedByContext(nt,tt);if(!it){const rt={channelCount:nt.channelCount,channelCountMode:nt.channelCountMode,channelInterpretation:nt.channelInterpretation,gain:nt.gain.value};nt=d(tt,rt)}return j.set(tt,nt),it?await _(tt,et.gain,nt.gain):await b(tt,et.gain,nt.gain),await $(et,tt,nt),nt};return{render(et,tt){const nt=j.get(tt);return nt!==void 0?Promise.resolve(nt):_e(et,tt)}}},createGetActiveAudioWorkletNodeInputs=(_,d)=>g=>d(_,g),createGetAudioNodeRenderer=_=>d=>{const g=_(d);if(g.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return g.renderer},createGetAudioNodeTailTime=_=>d=>{var g;return(g=_.get(d))!==null&&g!==void 0?g:0},createGetAudioParamRenderer=_=>d=>{const g=_(d);if(g.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return g.renderer},createGetBackupOfflineAudioContext=_=>d=>_.get(d),createInvalidStateError=()=>new DOMException("","InvalidStateError"),createGetNativeContext=_=>d=>{const g=_.get(d);if(g===void 0)throw createInvalidStateError();return g},createGetOrCreateBackupOfflineAudioContext=(_,d)=>g=>{let b=_.get(g);if(b!==void 0)return b;if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");return b=new d(1,1,44100),_.set(g,b),b},createGetUnrenderedAudioWorkletNodes=_=>d=>{const g=_.get(d);if(g===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return g},createInvalidAccessError=()=>new DOMException("","InvalidAccessError"),wrapIIRFilterNodeGetFrequencyResponseMethod=_=>{_.getFrequencyResponse=(d=>(g,b,$)=>{if(g.length!==b.length||b.length!==$.length)throw createInvalidAccessError();return d.call(_,g,b,$)})(_.getFrequencyResponse)},DEFAULT_OPTIONS$7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},createIIRFilterNodeConstructor=(_,d,g,b,$,j)=>class extends _{constructor(et,tt){const nt=b(et),it=$(nt),rt={...DEFAULT_OPTIONS$7,...tt},st=d(nt,it?null:et.baseLatency,rt),ot=it?g(rt.feedback,rt.feedforward):null;super(et,!1,st,ot),wrapIIRFilterNodeGetFrequencyResponseMethod(st),this._nativeIIRFilterNode=st,j(this,1)}getFrequencyResponse(et,tt,nt){return this._nativeIIRFilterNode.getFrequencyResponse(et,tt,nt)}},filterBuffer=(_,d,g,b,$,j,_e,et,tt,nt,it)=>{const rt=nt.length;let st=et;for(let ot=0;ot<rt;ot+=1){let at=g[0]*nt[ot];for(let ct=1;ct<$;ct+=1){const ht=st-ct&tt-1;at+=g[ct]*j[ht],at-=_[ct]*_e[ht]}for(let ct=$;ct<b;ct+=1)at+=g[ct]*j[st-ct&tt-1];for(let ct=$;ct<d;ct+=1)at-=_[ct]*_e[st-ct&tt-1];j[st]=nt[ot],_e[st]=at,st=st+1&tt-1,it[ot]=at}return st},filterFullBuffer=(_,d,g,b)=>{const $=g instanceof Float64Array?g:new Float64Array(g),j=b instanceof Float64Array?b:new Float64Array(b),_e=$.length,et=j.length,tt=Math.min(_e,et);if($[0]!==1){for(let at=0;at<_e;at+=1)j[at]/=$[0];for(let at=1;at<et;at+=1)$[at]/=$[0]}const nt=32,it=new Float32Array(nt),rt=new Float32Array(nt),st=d.createBuffer(_.numberOfChannels,_.length,_.sampleRate),ot=_.numberOfChannels;for(let at=0;at<ot;at+=1){const ct=_.getChannelData(at),ht=st.getChannelData(at);it.fill(0),rt.fill(0),filterBuffer($,_e,j,et,tt,it,rt,0,nt,ct,ht)}return st},createIIRFilterNodeRendererFactory=(_,d,g,b,$)=>(j,_e)=>{const et=new WeakMap;let tt=null;const nt=async(it,rt)=>{let st=null,ot=d(it);const at=isOwnedByContext(ot,rt);if(rt.createIIRFilter===void 0?st=_(rt,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):at||(ot=rt.createIIRFilter(_e,j)),et.set(rt,st===null?ot:st),st!==null){if(tt===null){if(g===null)throw new Error("Missing the native OfflineAudioContext constructor.");const ht=new g(it.context.destination.channelCount,it.context.length,rt.sampleRate);tt=(async()=>{await b(it,ht,ht.destination);const ut=await $(ht);return filterFullBuffer(ut,rt,j,_e)})()}const ct=await tt;return st.buffer=ct,st.start(0),st}return await b(it,rt,ot),ot};return{render(it,rt){const st=et.get(rt);return st!==void 0?Promise.resolve(st):nt(it,rt)}}},createIncrementCycleCounterFactory=(_,d,g,b,$,j)=>_e=>(et,tt)=>{const nt=_.get(et);if(nt===void 0){if(!_e&&j(et)){const it=b(et),{outputs:rt}=g(et);for(const st of rt)if(isAudioNodeOutputConnection(st)){const ot=b(st[0]);d(it,ot,st[1],st[2])}else{const ot=$(st[0]);it.disconnect(ot,st[1])}}_.set(et,tt)}else _.set(et,nt+tt)},createIsAnyAudioContext=(_,d)=>g=>{const b=_.get(g);return d(b)||d(g)},createIsAnyAudioNode=(_,d)=>g=>_.has(g)||d(g),createIsAnyAudioParam=(_,d)=>g=>_.has(g)||d(g),createIsAnyOfflineAudioContext=(_,d)=>g=>{const b=_.get(g);return d(b)||d(g)},createIsNativeAudioContext=_=>d=>_!==null&&d instanceof _,createIsNativeAudioNode=_=>d=>_!==null&&typeof _.AudioNode=="function"&&d instanceof _.AudioNode,createIsNativeAudioParam=_=>d=>_!==null&&typeof _.AudioParam=="function"&&d instanceof _.AudioParam,createIsNativeContext=(_,d)=>g=>_(g)||d(g),createIsNativeOfflineAudioContext=_=>d=>_!==null&&d instanceof _,createIsSecureContext=_=>_!==null&&_.isSecureContext,createIsSupportedPromise=async(_,d,g,b,$,j,_e,et,tt,nt,it,rt,st,ot,at,ct)=>_(d,d)&&_(g,g)&&_($,$)&&_(j,j)&&_(et,et)&&_(tt,tt)&&_(nt,nt)&&_(it,it)&&_(rt,rt)&&_(st,st)&&_(ot,ot)?(await Promise.all([_(b,b),_(_e,_e),_(at,at),_(ct,ct)])).every(ut=>ut):!1,createMediaElementAudioSourceNodeConstructor=(_,d,g,b)=>class extends _{constructor(j,_e){const et=g(j),tt=d(et,_e);if(b(et))throw TypeError();super(j,!0,tt,null),this._nativeMediaElementAudioSourceNode=tt}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},DEFAULT_OPTIONS$6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},createMediaStreamAudioDestinationNodeConstructor=(_,d,g,b)=>class extends _{constructor(j,_e){const et=g(j);if(b(et))throw new TypeError;const tt={...DEFAULT_OPTIONS$6,..._e},nt=d(et,tt);super(j,!1,nt,null),this._nativeMediaStreamAudioDestinationNode=nt}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},createMediaStreamAudioSourceNodeConstructor=(_,d,g,b)=>class extends _{constructor(j,_e){const et=g(j),tt=d(et,_e);if(b(et))throw new TypeError;super(j,!0,tt,null),this._nativeMediaStreamAudioSourceNode=tt}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},createMediaStreamTrackAudioSourceNodeConstructor=(_,d,g)=>class extends _{constructor($,j){const _e=g($),et=d(_e,j);super($,!0,et,null)}},createMinimalBaseAudioContextConstructor=(_,d,g,b,$,j)=>class extends g{constructor(et,tt){super(et),this._nativeContext=et,CONTEXT_STORE.set(this,et),b(et)&&$.set(et,new Set),this._destination=new _(this,tt),this._listener=d(this,et),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(et){const tt=typeof et=="function"?j(this,et):null;this._nativeContext.onstatechange=tt;const nt=this._nativeContext.onstatechange;this._onstatechange=nt!==null&&nt===tt?et:nt}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},testPromiseSupport=_=>{const d=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const g=_.decodeAudioData(d.buffer,()=>{});return g===void 0?!1:(g.catch(()=>{}),!0)}catch{}return!1},createMonitorConnections=(_,d)=>(g,b,$)=>{const j=new Set;return g.connect=(_e=>(et,tt=0,nt=0)=>{const it=j.size===0;if(d(et))return _e.call(g,et,tt,nt),_(j,[et,tt,nt],rt=>rt[0]===et&&rt[1]===tt&&rt[2]===nt,!0),it&&b(),et;_e.call(g,et,tt),_(j,[et,tt],rt=>rt[0]===et&&rt[1]===tt,!0),it&&b()})(g.connect),g.disconnect=(_e=>(et,tt,nt)=>{const it=j.size>0;if(et===void 0)_e.apply(g),j.clear();else if(typeof et=="number"){_e.call(g,et);for(const st of j)st[1]===et&&j.delete(st)}else{d(et)?_e.call(g,et,tt,nt):_e.call(g,et,tt);for(const st of j)st[0]===et&&(tt===void 0||st[1]===tt)&&(nt===void 0||st[2]===nt)&&j.delete(st)}const rt=j.size===0;it&&rt&&$()})(g.disconnect),g},assignNativeAudioNodeOption=(_,d,g)=>{const b=d[g];b!==void 0&&b!==_[g]&&(_[g]=b)},assignNativeAudioNodeOptions=(_,d)=>{assignNativeAudioNodeOption(_,d,"channelCount"),assignNativeAudioNodeOption(_,d,"channelCountMode"),assignNativeAudioNodeOption(_,d,"channelInterpretation")},testAnalyserNodeGetFloatTimeDomainDataMethodSupport=_=>typeof _.getFloatTimeDomainData=="function",wrapAnalyserNodeGetFloatTimeDomainDataMethod=_=>{_.getFloatTimeDomainData=d=>{const g=new Uint8Array(d.length);_.getByteTimeDomainData(g);const b=Math.max(g.length,_.fftSize);for(let $=0;$<b;$+=1)d[$]=(g[$]-128)*.0078125;return d}},createNativeAnalyserNodeFactory=(_,d)=>(g,b)=>{const $=g.createAnalyser();if(assignNativeAudioNodeOptions($,b),!(b.maxDecibels>b.minDecibels))throw d();return assignNativeAudioNodeOption($,b,"fftSize"),assignNativeAudioNodeOption($,b,"maxDecibels"),assignNativeAudioNodeOption($,b,"minDecibels"),assignNativeAudioNodeOption($,b,"smoothingTimeConstant"),_(testAnalyserNodeGetFloatTimeDomainDataMethodSupport,()=>testAnalyserNodeGetFloatTimeDomainDataMethodSupport($))||wrapAnalyserNodeGetFloatTimeDomainDataMethod($),$},createNativeAudioBufferConstructor=_=>_===null?null:_.hasOwnProperty("AudioBuffer")?_.AudioBuffer:null,assignNativeAudioNodeAudioParamValue=(_,d,g)=>{const b=d[g];b!==void 0&&b!==_[g].value&&(_[g].value=b)},wrapAudioBufferSourceNodeStartMethodConsecutiveCalls=_=>{_.start=(d=>{let g=!1;return(b=0,$=0,j)=>{if(g)throw createInvalidStateError();d.call(_,b,$,j),g=!0}})(_.start)},wrapAudioScheduledSourceNodeStartMethodNegativeParameters=_=>{_.start=(d=>(g=0,b=0,$)=>{if(typeof $=="number"&&$<0||b<0||g<0)throw new RangeError("The parameters can't be negative.");d.call(_,g,b,$)})(_.start)},wrapAudioScheduledSourceNodeStopMethodNegativeParameters=_=>{_.stop=(d=>(g=0)=>{if(g<0)throw new RangeError("The parameter can't be negative.");d.call(_,g)})(_.stop)},createNativeAudioBufferSourceNodeFactory=(_,d,g,b,$,j,_e,et,tt,nt,it)=>(rt,st)=>{const ot=rt.createBufferSource();return assignNativeAudioNodeOptions(ot,st),assignNativeAudioNodeAudioParamValue(ot,st,"playbackRate"),assignNativeAudioNodeOption(ot,st,"buffer"),assignNativeAudioNodeOption(ot,st,"loop"),assignNativeAudioNodeOption(ot,st,"loopEnd"),assignNativeAudioNodeOption(ot,st,"loopStart"),d(g,()=>g(rt))||wrapAudioBufferSourceNodeStartMethodConsecutiveCalls(ot),d(b,()=>b(rt))||tt(ot),d($,()=>$(rt))||nt(ot,rt),d(j,()=>j(rt))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(ot),d(_e,()=>_e(rt))||it(ot,rt),d(et,()=>et(rt))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(ot),_(rt,ot),ot},createNativeAudioContextConstructor=_=>_===null?null:_.hasOwnProperty("AudioContext")?_.AudioContext:_.hasOwnProperty("webkitAudioContext")?_.webkitAudioContext:null,createNativeAudioDestinationNodeFactory=(_,d)=>(g,b,$)=>{const j=g.destination;if(j.channelCount!==b)try{j.channelCount=b}catch{}$&&j.channelCountMode!=="explicit"&&(j.channelCountMode="explicit"),j.maxChannelCount===0&&Object.defineProperty(j,"maxChannelCount",{value:b});const _e=_(g,{channelCount:b,channelCountMode:j.channelCountMode,channelInterpretation:j.channelInterpretation,gain:1});return d(_e,"channelCount",et=>()=>et.call(_e),et=>tt=>{et.call(_e,tt);try{j.channelCount=tt}catch(nt){if(tt>j.maxChannelCount)throw nt}}),d(_e,"channelCountMode",et=>()=>et.call(_e),et=>tt=>{et.call(_e,tt),j.channelCountMode=tt}),d(_e,"channelInterpretation",et=>()=>et.call(_e),et=>tt=>{et.call(_e,tt),j.channelInterpretation=tt}),Object.defineProperty(_e,"maxChannelCount",{get:()=>j.maxChannelCount}),_e.connect(j),_e},createNativeAudioWorkletNodeConstructor=_=>_===null?null:_.hasOwnProperty("AudioWorkletNode")?_.AudioWorkletNode:null,testClonabilityOfAudioWorkletNodeOptions=_=>{const{port1:d}=new MessageChannel;try{d.postMessage(_)}finally{d.close()}},createNativeAudioWorkletNodeFactory=(_,d,g,b,$)=>(j,_e,et,tt,nt,it)=>{if(et!==null)try{const rt=new et(j,tt,it),st=new Map;let ot=null;if(Object.defineProperties(rt,{channelCount:{get:()=>it.channelCount,set:()=>{throw _()}},channelCountMode:{get:()=>"explicit",set:()=>{throw _()}},onprocessorerror:{get:()=>ot,set:at=>{typeof ot=="function"&&rt.removeEventListener("processorerror",ot),ot=typeof at=="function"?at:null,typeof ot=="function"&&rt.addEventListener("processorerror",ot)}}}),rt.addEventListener=(at=>(...ct)=>{if(ct[0]==="processorerror"){const ht=typeof ct[1]=="function"?ct[1]:typeof ct[1]=="object"&&ct[1]!==null&&typeof ct[1].handleEvent=="function"?ct[1].handleEvent:null;if(ht!==null){const ut=st.get(ct[1]);ut!==void 0?ct[1]=ut:(ct[1]=dt=>{dt.type==="error"?(Object.defineProperties(dt,{type:{value:"processorerror"}}),ht(dt)):ht(new ErrorEvent(ct[0],{...dt}))},st.set(ht,ct[1]))}}return at.call(rt,"error",ct[1],ct[2]),at.call(rt,...ct)})(rt.addEventListener),rt.removeEventListener=(at=>(...ct)=>{if(ct[0]==="processorerror"){const ht=st.get(ct[1]);ht!==void 0&&(st.delete(ct[1]),ct[1]=ht)}return at.call(rt,"error",ct[1],ct[2]),at.call(rt,ct[0],ct[1],ct[2])})(rt.removeEventListener),it.numberOfOutputs!==0){const at=g(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return rt.connect(at).connect(j.destination),$(rt,()=>at.disconnect(),()=>at.connect(j.destination))}return rt}catch(rt){throw rt.code===11?b():rt}if(nt===void 0)throw b();return testClonabilityOfAudioWorkletNodeOptions(it),d(j,_e,nt,it)},computeBufferSize=(_,d)=>_===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(_*d))))),cloneAudioWorkletNodeOptions=_=>new Promise((d,g)=>{const{port1:b,port2:$}=new MessageChannel;b.onmessage=({data:j})=>{b.close(),$.close(),d(j)},b.onmessageerror=({data:j})=>{b.close(),$.close(),g(j)},$.postMessage(_)}),createAudioWorkletProcessorPromise=async(_,d)=>{const g=await cloneAudioWorkletNodeOptions(d);return new _(g)},createAudioWorkletProcessor=(_,d,g,b)=>{let $=NODE_TO_PROCESSOR_MAPS.get(_);$===void 0&&($=new WeakMap,NODE_TO_PROCESSOR_MAPS.set(_,$));const j=createAudioWorkletProcessorPromise(g,b);return $.set(d,j),j},createNativeAudioWorkletNodeFakerFactory=(_,d,g,b,$,j,_e,et,tt,nt,it,rt,st)=>(ot,at,ct,ht)=>{if(ht.numberOfInputs===0&&ht.numberOfOutputs===0)throw tt();const ut=Array.isArray(ht.outputChannelCount)?ht.outputChannelCount:Array.from(ht.outputChannelCount);if(ut.some(Mt=>Mt<1))throw tt();if(ut.length!==ht.numberOfOutputs)throw d();if(ht.channelCountMode!=="explicit")throw tt();const dt=ht.channelCount*ht.numberOfInputs,ft=ut.reduce((Mt,Qt)=>Mt+Qt,0),mt=ct.parameterDescriptors===void 0?0:ct.parameterDescriptors.length;if(dt+mt>6||ft>6)throw tt();const pt=new MessageChannel,Ot=[],gt=[];for(let Mt=0;Mt<ht.numberOfInputs;Mt+=1)Ot.push(_e(ot,{channelCount:ht.channelCount,channelCountMode:ht.channelCountMode,channelInterpretation:ht.channelInterpretation,gain:1})),gt.push($(ot,{channelCount:ht.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:ht.channelCount}));const yt=[];if(ct.parameterDescriptors!==void 0)for(const{defaultValue:Mt,maxValue:Qt,minValue:zt,name:qt}of ct.parameterDescriptors){const Vt=j(ot,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ht.parameterData[qt]!==void 0?ht.parameterData[qt]:Mt===void 0?0:Mt});Object.defineProperties(Vt.offset,{defaultValue:{get:()=>Mt===void 0?0:Mt},maxValue:{get:()=>Qt===void 0?MOST_POSITIVE_SINGLE_FLOAT:Qt},minValue:{get:()=>zt===void 0?MOST_NEGATIVE_SINGLE_FLOAT:zt}}),yt.push(Vt)}const St=b(ot,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,dt+mt)}),vt=computeBufferSize(at,ot.sampleRate),wt=et(ot,vt,dt+mt,Math.max(1,ft)),xt=$(ot,{channelCount:Math.max(1,ft),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,ft)}),kt=[];for(let Mt=0;Mt<ht.numberOfOutputs;Mt+=1)kt.push(b(ot,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:ut[Mt]}));for(let Mt=0;Mt<ht.numberOfInputs;Mt+=1){Ot[Mt].connect(gt[Mt]);for(let Qt=0;Qt<ht.channelCount;Qt+=1)gt[Mt].connect(St,Qt,Mt*ht.channelCount+Qt)}const bt=new ReadOnlyMap(ct.parameterDescriptors===void 0?[]:ct.parameterDescriptors.map(({name:Mt},Qt)=>{const zt=yt[Qt];return zt.connect(St,0,dt+Qt),zt.start(0),[Mt,zt.offset]}));St.connect(wt);let Et=ht.channelInterpretation,At=null;const Tt=ht.numberOfOutputs===0?[wt]:kt,_t={get bufferSize(){return vt},get channelCount(){return ht.channelCount},set channelCount(Mt){throw g()},get channelCountMode(){return ht.channelCountMode},set channelCountMode(Mt){throw g()},get channelInterpretation(){return Et},set channelInterpretation(Mt){for(const Qt of Ot)Qt.channelInterpretation=Mt;Et=Mt},get context(){return wt.context},get inputs(){return Ot},get numberOfInputs(){return ht.numberOfInputs},get numberOfOutputs(){return ht.numberOfOutputs},get onprocessorerror(){return At},set onprocessorerror(Mt){typeof At=="function"&&_t.removeEventListener("processorerror",At),At=typeof Mt=="function"?Mt:null,typeof At=="function"&&_t.addEventListener("processorerror",At)},get parameters(){return bt},get port(){return pt.port2},addEventListener(...Mt){return wt.addEventListener(Mt[0],Mt[1],Mt[2])},connect:_.bind(null,Tt),disconnect:nt.bind(null,Tt),dispatchEvent(...Mt){return wt.dispatchEvent(Mt[0])},removeEventListener(...Mt){return wt.removeEventListener(Mt[0],Mt[1],Mt[2])}},Ct=new Map;pt.port1.addEventListener=(Mt=>(...Qt)=>{if(Qt[0]==="message"){const zt=typeof Qt[1]=="function"?Qt[1]:typeof Qt[1]=="object"&&Qt[1]!==null&&typeof Qt[1].handleEvent=="function"?Qt[1].handleEvent:null;if(zt!==null){const qt=Ct.get(Qt[1]);qt!==void 0?Qt[1]=qt:(Qt[1]=Vt=>{it(ot.currentTime,ot.sampleRate,()=>zt(Vt))},Ct.set(zt,Qt[1]))}}return Mt.call(pt.port1,Qt[0],Qt[1],Qt[2])})(pt.port1.addEventListener),pt.port1.removeEventListener=(Mt=>(...Qt)=>{if(Qt[0]==="message"){const zt=Ct.get(Qt[1]);zt!==void 0&&(Ct.delete(Qt[1]),Qt[1]=zt)}return Mt.call(pt.port1,Qt[0],Qt[1],Qt[2])})(pt.port1.removeEventListener);let Pt=null;Object.defineProperty(pt.port1,"onmessage",{get:()=>Pt,set:Mt=>{typeof Pt=="function"&&pt.port1.removeEventListener("message",Pt),Pt=typeof Mt=="function"?Mt:null,typeof Pt=="function"&&(pt.port1.addEventListener("message",Pt),pt.port1.start())}}),ct.prototype.port=pt.port1;let Nt=null;createAudioWorkletProcessor(ot,_t,ct,ht).then(Mt=>Nt=Mt);const Zt=createNestedArrays(ht.numberOfInputs,ht.channelCount),Ft=createNestedArrays(ht.numberOfOutputs,ut),It=ct.parameterDescriptors===void 0?[]:ct.parameterDescriptors.reduce((Mt,{name:Qt})=>({...Mt,[Qt]:new Float32Array(128)}),{});let Lt=!0;const Dt=()=>{ht.numberOfOutputs>0&&wt.disconnect(xt);for(let Mt=0,Qt=0;Mt<ht.numberOfOutputs;Mt+=1){const zt=kt[Mt];for(let qt=0;qt<ut[Mt];qt+=1)xt.disconnect(zt,Qt+qt,qt);Qt+=ut[Mt]}},Rt=new Map;wt.onaudioprocess=({inputBuffer:Mt,outputBuffer:Qt})=>{if(Nt!==null){const zt=rt(_t);for(let qt=0;qt<vt;qt+=128){for(let Vt=0;Vt<ht.numberOfInputs;Vt+=1)for(let Xt=0;Xt<ht.channelCount;Xt+=1)copyFromChannel(Mt,Zt[Vt],Xt,Xt,qt);ct.parameterDescriptors!==void 0&&ct.parameterDescriptors.forEach(({name:Vt},Xt)=>{copyFromChannel(Mt,It,Vt,dt+Xt,qt)});for(let Vt=0;Vt<ht.numberOfInputs;Vt+=1)for(let Xt=0;Xt<ut[Vt];Xt+=1)Ft[Vt][Xt].byteLength===0&&(Ft[Vt][Xt]=new Float32Array(128));try{const Vt=Zt.map((Ht,Kt)=>{if(zt[Kt].size>0)return Rt.set(Kt,vt/128),Ht;const en=Rt.get(Kt);return en===void 0?[]:(Ht.every(sn=>sn.every(on=>on===0))&&(en===1?Rt.delete(Kt):Rt.set(Kt,en-1)),Ht)});Lt=it(ot.currentTime+qt/ot.sampleRate,ot.sampleRate,()=>Nt.process(Vt,Ft,It));for(let Ht=0,Kt=0;Ht<ht.numberOfOutputs;Ht+=1){for(let Jt=0;Jt<ut[Ht];Jt+=1)copyToChannel(Qt,Ft[Ht],Jt,Kt+Jt,qt);Kt+=ut[Ht]}}catch(Vt){Lt=!1,_t.dispatchEvent(new ErrorEvent("processorerror",{colno:Vt.colno,filename:Vt.filename,lineno:Vt.lineno,message:Vt.message}))}if(!Lt){for(let Vt=0;Vt<ht.numberOfInputs;Vt+=1){Ot[Vt].disconnect(gt[Vt]);for(let Xt=0;Xt<ht.channelCount;Xt+=1)gt[qt].disconnect(St,Xt,Vt*ht.channelCount+Xt)}if(ct.parameterDescriptors!==void 0){const Vt=ct.parameterDescriptors.length;for(let Xt=0;Xt<Vt;Xt+=1){const Ht=yt[Xt];Ht.disconnect(St,0,dt+Xt),Ht.stop()}}St.disconnect(wt),wt.onaudioprocess=null,Ut?Dt():Wt();break}}}};let Ut=!1;const Bt=_e(ot,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),jt=()=>wt.connect(Bt).connect(ot.destination),Wt=()=>{wt.disconnect(Bt),Bt.disconnect()},Gt=()=>{if(Lt){Wt(),ht.numberOfOutputs>0&&wt.connect(xt);for(let Mt=0,Qt=0;Mt<ht.numberOfOutputs;Mt+=1){const zt=kt[Mt];for(let qt=0;qt<ut[Mt];qt+=1)xt.connect(zt,Qt+qt,qt);Qt+=ut[Mt]}}Ut=!0},Yt=()=>{Lt&&(jt(),Dt()),Ut=!1};return jt(),st(_t,Gt,Yt)},createNativeBiquadFilterNode=(_,d)=>{const g=_.createBiquadFilter();return assignNativeAudioNodeOptions(g,d),assignNativeAudioNodeAudioParamValue(g,d,"Q"),assignNativeAudioNodeAudioParamValue(g,d,"detune"),assignNativeAudioNodeAudioParamValue(g,d,"frequency"),assignNativeAudioNodeAudioParamValue(g,d,"gain"),assignNativeAudioNodeOption(g,d,"type"),g},createNativeChannelMergerNodeFactory=(_,d)=>(g,b)=>{const $=g.createChannelMerger(b.numberOfInputs);return _!==null&&_.name==="webkitAudioContext"&&d(g,$),assignNativeAudioNodeOptions($,b),$},wrapChannelSplitterNode=_=>{const d=_.numberOfOutputs;Object.defineProperty(_,"channelCount",{get:()=>d,set:g=>{if(g!==d)throw createInvalidStateError()}}),Object.defineProperty(_,"channelCountMode",{get:()=>"explicit",set:g=>{if(g!=="explicit")throw createInvalidStateError()}}),Object.defineProperty(_,"channelInterpretation",{get:()=>"discrete",set:g=>{if(g!=="discrete")throw createInvalidStateError()}})},createNativeChannelSplitterNode=(_,d)=>{const g=_.createChannelSplitter(d.numberOfOutputs);return assignNativeAudioNodeOptions(g,d),wrapChannelSplitterNode(g),g},createNativeConstantSourceNodeFactory=(_,d,g,b,$)=>(j,_e)=>{if(j.createConstantSource===void 0)return g(j,_e);const et=j.createConstantSource();return assignNativeAudioNodeOptions(et,_e),assignNativeAudioNodeAudioParamValue(et,_e,"offset"),d(b,()=>b(j))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(et),d($,()=>$(j))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(et),_(j,et),et},interceptConnections=(_,d)=>(_.connect=d.connect.bind(d),_.disconnect=d.disconnect.bind(d),_),createNativeConstantSourceNodeFakerFactory=(_,d,g,b)=>($,{offset:j,..._e})=>{const et=$.createBuffer(1,2,44100),tt=d($,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),nt=g($,{..._e,gain:j}),it=et.getChannelData(0);it[0]=1,it[1]=1,tt.buffer=et,tt.loop=!0;const rt={get bufferSize(){},get channelCount(){return nt.channelCount},set channelCount(at){nt.channelCount=at},get channelCountMode(){return nt.channelCountMode},set channelCountMode(at){nt.channelCountMode=at},get channelInterpretation(){return nt.channelInterpretation},set channelInterpretation(at){nt.channelInterpretation=at},get context(){return nt.context},get inputs(){return[]},get numberOfInputs(){return tt.numberOfInputs},get numberOfOutputs(){return nt.numberOfOutputs},get offset(){return nt.gain},get onended(){return tt.onended},set onended(at){tt.onended=at},addEventListener(...at){return tt.addEventListener(at[0],at[1],at[2])},dispatchEvent(...at){return tt.dispatchEvent(at[0])},removeEventListener(...at){return tt.removeEventListener(at[0],at[1],at[2])},start(at=0){tt.start.call(tt,at)},stop(at=0){tt.stop.call(tt,at)}},st=()=>tt.connect(nt),ot=()=>tt.disconnect(nt);return _($,tt),b(interceptConnections(rt,nt),st,ot)},createNativeConvolverNodeFactory=(_,d)=>(g,b)=>{const $=g.createConvolver();if(assignNativeAudioNodeOptions($,b),b.disableNormalization===$.normalize&&($.normalize=!b.disableNormalization),assignNativeAudioNodeOption($,b,"buffer"),b.channelCount>2||(d($,"channelCount",j=>()=>j.call($),j=>_e=>{if(_e>2)throw _();return j.call($,_e)}),b.channelCountMode==="max"))throw _();return d($,"channelCountMode",j=>()=>j.call($),j=>_e=>{if(_e==="max")throw _();return j.call($,_e)}),$},createNativeDelayNode=(_,d)=>{const g=_.createDelay(d.maxDelayTime);return assignNativeAudioNodeOptions(g,d),assignNativeAudioNodeAudioParamValue(g,d,"delayTime"),g},createNativeDynamicsCompressorNodeFactory=_=>(d,g)=>{const b=d.createDynamicsCompressor();if(assignNativeAudioNodeOptions(b,g),g.channelCount>2||g.channelCountMode==="max")throw _();return assignNativeAudioNodeAudioParamValue(b,g,"attack"),assignNativeAudioNodeAudioParamValue(b,g,"knee"),assignNativeAudioNodeAudioParamValue(b,g,"ratio"),assignNativeAudioNodeAudioParamValue(b,g,"release"),assignNativeAudioNodeAudioParamValue(b,g,"threshold"),b},createNativeGainNode=(_,d)=>{const g=_.createGain();return assignNativeAudioNodeOptions(g,d),assignNativeAudioNodeAudioParamValue(g,d,"gain"),g},createNativeIIRFilterNodeFactory=_=>(d,g,b)=>{if(d.createIIRFilter===void 0)return _(d,g,b);const $=d.createIIRFilter(b.feedforward,b.feedback);return assignNativeAudioNodeOptions($,b),$};function divide(_,d){const g=d[0]*d[0]+d[1]*d[1];return[(_[0]*d[0]+_[1]*d[1])/g,(_[1]*d[0]-_[0]*d[1])/g]}function multiply(_,d){return[_[0]*d[0]-_[1]*d[1],_[0]*d[1]+_[1]*d[0]]}function evaluatePolynomial(_,d){let g=[0,0];for(let b=_.length-1;b>=0;b-=1)g=multiply(g,d),g[0]+=_[b];return g}const createNativeIIRFilterNodeFakerFactory=(_,d,g,b)=>($,j,{channelCount:_e,channelCountMode:et,channelInterpretation:tt,feedback:nt,feedforward:it})=>{const rt=computeBufferSize(j,$.sampleRate),st=nt instanceof Float64Array?nt:new Float64Array(nt),ot=it instanceof Float64Array?it:new Float64Array(it),at=st.length,ct=ot.length,ht=Math.min(at,ct);if(at===0||at>20)throw b();if(st[0]===0)throw d();if(ct===0||ct>20)throw b();if(ot[0]===0)throw d();if(st[0]!==1){for(let yt=0;yt<ct;yt+=1)ot[yt]/=st[0];for(let yt=1;yt<at;yt+=1)st[yt]/=st[0]}const ut=g($,rt,_e,_e);ut.channelCount=_e,ut.channelCountMode=et,ut.channelInterpretation=tt;const dt=32,ft=[],mt=[],pt=[];for(let yt=0;yt<_e;yt+=1){ft.push(0);const St=new Float32Array(dt),vt=new Float32Array(dt);St.fill(0),vt.fill(0),mt.push(St),pt.push(vt)}ut.onaudioprocess=yt=>{const St=yt.inputBuffer,vt=yt.outputBuffer,wt=St.numberOfChannels;for(let xt=0;xt<wt;xt+=1){const kt=St.getChannelData(xt),bt=vt.getChannelData(xt);ft[xt]=filterBuffer(st,at,ot,ct,ht,mt[xt],pt[xt],ft[xt],dt,kt,bt)}};const Ot=$.sampleRate/2;return interceptConnections({get bufferSize(){return rt},get channelCount(){return ut.channelCount},set channelCount(yt){ut.channelCount=yt},get channelCountMode(){return ut.channelCountMode},set channelCountMode(yt){ut.channelCountMode=yt},get channelInterpretation(){return ut.channelInterpretation},set channelInterpretation(yt){ut.channelInterpretation=yt},get context(){return ut.context},get inputs(){return[ut]},get numberOfInputs(){return ut.numberOfInputs},get numberOfOutputs(){return ut.numberOfOutputs},addEventListener(...yt){return ut.addEventListener(yt[0],yt[1],yt[2])},dispatchEvent(...yt){return ut.dispatchEvent(yt[0])},getFrequencyResponse(yt,St,vt){if(yt.length!==St.length||St.length!==vt.length)throw _();const wt=yt.length;for(let xt=0;xt<wt;xt+=1){const kt=-Math.PI*(yt[xt]/Ot),bt=[Math.cos(kt),Math.sin(kt)],Et=evaluatePolynomial(ot,bt),At=evaluatePolynomial(st,bt),Tt=divide(Et,At);St[xt]=Math.sqrt(Tt[0]*Tt[0]+Tt[1]*Tt[1]),vt[xt]=Math.atan2(Tt[1],Tt[0])}},removeEventListener(...yt){return ut.removeEventListener(yt[0],yt[1],yt[2])}},ut)},createNativeMediaElementAudioSourceNode=(_,d)=>_.createMediaElementSource(d.mediaElement),createNativeMediaStreamAudioDestinationNode=(_,d)=>{const g=_.createMediaStreamDestination();return assignNativeAudioNodeOptions(g,d),g.numberOfOutputs===1&&Object.defineProperty(g,"numberOfOutputs",{get:()=>0}),g},createNativeMediaStreamAudioSourceNode=(_,{mediaStream:d})=>{const g=d.getAudioTracks();g.sort((j,_e)=>j.id<_e.id?-1:j.id>_e.id?1:0);const b=g.slice(0,1),$=_.createMediaStreamSource(new MediaStream(b));return Object.defineProperty($,"mediaStream",{value:d}),$},createNativeMediaStreamTrackAudioSourceNodeFactory=(_,d)=>(g,{mediaStreamTrack:b})=>{if(typeof g.createMediaStreamTrackSource=="function")return g.createMediaStreamTrackSource(b);const $=new MediaStream([b]),j=g.createMediaStreamSource($);if(b.kind!=="audio")throw _();if(d(g))throw new TypeError;return j},createNativeOfflineAudioContextConstructor=_=>_===null?null:_.hasOwnProperty("OfflineAudioContext")?_.OfflineAudioContext:_.hasOwnProperty("webkitOfflineAudioContext")?_.webkitOfflineAudioContext:null,createNativeOscillatorNodeFactory=(_,d,g,b,$,j)=>(_e,et)=>{const tt=_e.createOscillator();return assignNativeAudioNodeOptions(tt,et),assignNativeAudioNodeAudioParamValue(tt,et,"detune"),assignNativeAudioNodeAudioParamValue(tt,et,"frequency"),et.periodicWave!==void 0?tt.setPeriodicWave(et.periodicWave):assignNativeAudioNodeOption(tt,et,"type"),d(g,()=>g(_e))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(tt),d(b,()=>b(_e))||j(tt,_e),d($,()=>$(_e))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(tt),_(_e,tt),tt},createNativePannerNodeFactory=_=>(d,g)=>{const b=d.createPanner();return b.orientationX===void 0?_(d,g):(assignNativeAudioNodeOptions(b,g),assignNativeAudioNodeAudioParamValue(b,g,"orientationX"),assignNativeAudioNodeAudioParamValue(b,g,"orientationY"),assignNativeAudioNodeAudioParamValue(b,g,"orientationZ"),assignNativeAudioNodeAudioParamValue(b,g,"positionX"),assignNativeAudioNodeAudioParamValue(b,g,"positionY"),assignNativeAudioNodeAudioParamValue(b,g,"positionZ"),assignNativeAudioNodeOption(b,g,"coneInnerAngle"),assignNativeAudioNodeOption(b,g,"coneOuterAngle"),assignNativeAudioNodeOption(b,g,"coneOuterGain"),assignNativeAudioNodeOption(b,g,"distanceModel"),assignNativeAudioNodeOption(b,g,"maxDistance"),assignNativeAudioNodeOption(b,g,"panningModel"),assignNativeAudioNodeOption(b,g,"refDistance"),assignNativeAudioNodeOption(b,g,"rolloffFactor"),b)},createNativePannerNodeFakerFactory=(_,d,g,b,$,j,_e,et,tt,nt)=>(it,{coneInnerAngle:rt,coneOuterAngle:st,coneOuterGain:ot,distanceModel:at,maxDistance:ct,orientationX:ht,orientationY:ut,orientationZ:dt,panningModel:ft,positionX:mt,positionY:pt,positionZ:Ot,refDistance:gt,rolloffFactor:yt,...St})=>{const vt=it.createPanner();if(St.channelCount>2||St.channelCountMode==="max")throw _e();assignNativeAudioNodeOptions(vt,St);const wt={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},xt=g(it,{...wt,channelInterpretation:"speakers",numberOfInputs:6}),kt=b(it,{...St,gain:1}),bt=b(it,{...wt,gain:1}),Et=b(it,{...wt,gain:0}),At=b(it,{...wt,gain:0}),Tt=b(it,{...wt,gain:0}),_t=b(it,{...wt,gain:0}),Ct=b(it,{...wt,gain:0}),Pt=$(it,256,6,1),Nt=j(it,{...wt,curve:new Float32Array([1,1]),oversample:"none"});let $t=[ht,ut,dt],Zt=[mt,pt,Ot];const Ft=new Float32Array(1);Pt.onaudioprocess=({inputBuffer:Rt})=>{const Ut=[tt(Rt,Ft,0),tt(Rt,Ft,1),tt(Rt,Ft,2)];Ut.some((jt,Wt)=>jt!==$t[Wt])&&(vt.setOrientation(...Ut),$t=Ut);const Bt=[tt(Rt,Ft,3),tt(Rt,Ft,4),tt(Rt,Ft,5)];Bt.some((jt,Wt)=>jt!==Zt[Wt])&&(vt.setPosition(...Bt),Zt=Bt)},Object.defineProperty(Et.gain,"defaultValue",{get:()=>0}),Object.defineProperty(At.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Tt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_t.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Ct.gain,"defaultValue",{get:()=>0});const It={get bufferSize(){},get channelCount(){return vt.channelCount},set channelCount(Rt){if(Rt>2)throw _e();kt.channelCount=Rt,vt.channelCount=Rt},get channelCountMode(){return vt.channelCountMode},set channelCountMode(Rt){if(Rt==="max")throw _e();kt.channelCountMode=Rt,vt.channelCountMode=Rt},get channelInterpretation(){return vt.channelInterpretation},set channelInterpretation(Rt){kt.channelInterpretation=Rt,vt.channelInterpretation=Rt},get coneInnerAngle(){return vt.coneInnerAngle},set coneInnerAngle(Rt){vt.coneInnerAngle=Rt},get coneOuterAngle(){return vt.coneOuterAngle},set coneOuterAngle(Rt){vt.coneOuterAngle=Rt},get coneOuterGain(){return vt.coneOuterGain},set coneOuterGain(Rt){if(Rt<0||Rt>1)throw d();vt.coneOuterGain=Rt},get context(){return vt.context},get distanceModel(){return vt.distanceModel},set distanceModel(Rt){vt.distanceModel=Rt},get inputs(){return[kt]},get maxDistance(){return vt.maxDistance},set maxDistance(Rt){if(Rt<0)throw new RangeError;vt.maxDistance=Rt},get numberOfInputs(){return vt.numberOfInputs},get numberOfOutputs(){return vt.numberOfOutputs},get orientationX(){return bt.gain},get orientationY(){return Et.gain},get orientationZ(){return At.gain},get panningModel(){return vt.panningModel},set panningModel(Rt){vt.panningModel=Rt},get positionX(){return Tt.gain},get positionY(){return _t.gain},get positionZ(){return Ct.gain},get refDistance(){return vt.refDistance},set refDistance(Rt){if(Rt<0)throw new RangeError;vt.refDistance=Rt},get rolloffFactor(){return vt.rolloffFactor},set rolloffFactor(Rt){if(Rt<0)throw new RangeError;vt.rolloffFactor=Rt},addEventListener(...Rt){return kt.addEventListener(Rt[0],Rt[1],Rt[2])},dispatchEvent(...Rt){return kt.dispatchEvent(Rt[0])},removeEventListener(...Rt){return kt.removeEventListener(Rt[0],Rt[1],Rt[2])}};rt!==It.coneInnerAngle&&(It.coneInnerAngle=rt),st!==It.coneOuterAngle&&(It.coneOuterAngle=st),ot!==It.coneOuterGain&&(It.coneOuterGain=ot),at!==It.distanceModel&&(It.distanceModel=at),ct!==It.maxDistance&&(It.maxDistance=ct),ht!==It.orientationX.value&&(It.orientationX.value=ht),ut!==It.orientationY.value&&(It.orientationY.value=ut),dt!==It.orientationZ.value&&(It.orientationZ.value=dt),ft!==It.panningModel&&(It.panningModel=ft),mt!==It.positionX.value&&(It.positionX.value=mt),pt!==It.positionY.value&&(It.positionY.value=pt),Ot!==It.positionZ.value&&(It.positionZ.value=Ot),gt!==It.refDistance&&(It.refDistance=gt),yt!==It.rolloffFactor&&(It.rolloffFactor=yt),($t[0]!==1||$t[1]!==0||$t[2]!==0)&&vt.setOrientation(...$t),(Zt[0]!==0||Zt[1]!==0||Zt[2]!==0)&&vt.setPosition(...Zt);const Lt=()=>{kt.connect(vt),_(kt,Nt,0,0),Nt.connect(bt).connect(xt,0,0),Nt.connect(Et).connect(xt,0,1),Nt.connect(At).connect(xt,0,2),Nt.connect(Tt).connect(xt,0,3),Nt.connect(_t).connect(xt,0,4),Nt.connect(Ct).connect(xt,0,5),xt.connect(Pt).connect(it.destination)},Dt=()=>{kt.disconnect(vt),et(kt,Nt,0,0),Nt.disconnect(bt),bt.disconnect(xt),Nt.disconnect(Et),Et.disconnect(xt),Nt.disconnect(At),At.disconnect(xt),Nt.disconnect(Tt),Tt.disconnect(xt),Nt.disconnect(_t),_t.disconnect(xt),Nt.disconnect(Ct),Ct.disconnect(xt),xt.disconnect(Pt),Pt.disconnect(it.destination)};return nt(interceptConnections(It,vt),Lt,Dt)},createNativePeriodicWaveFactory=_=>(d,{disableNormalization:g,imag:b,real:$})=>{const j=b instanceof Float32Array?b:new Float32Array(b),_e=$ instanceof Float32Array?$:new Float32Array($),et=d.createPeriodicWave(_e,j,{disableNormalization:g});if(Array.from(b).length<2)throw _();return et},createNativeScriptProcessorNode=(_,d,g,b)=>_.createScriptProcessor(d,g,b),createNativeStereoPannerNodeFactory=(_,d)=>(g,b)=>{const $=b.channelCountMode;if($==="clamped-max")throw d();if(g.createStereoPanner===void 0)return _(g,b);const j=g.createStereoPanner();return assignNativeAudioNodeOptions(j,b),assignNativeAudioNodeAudioParamValue(j,b,"pan"),Object.defineProperty(j,"channelCountMode",{get:()=>$,set:_e=>{if(_e!==$)throw d()}}),j},createNativeStereoPannerNodeFakerFactory=(_,d,g,b,$,j)=>{const et=new Float32Array([1,1]),tt=Math.PI/2,nt={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},it={...nt,oversample:"none"},rt=(at,ct,ht,ut)=>{const dt=new Float32Array(16385),ft=new Float32Array(16385);for(let St=0;St<16385;St+=1){const vt=St/16384*tt;dt[St]=Math.cos(vt),ft[St]=Math.sin(vt)}const mt=g(at,{...nt,gain:0}),pt=b(at,{...it,curve:dt}),Ot=b(at,{...it,curve:et}),gt=g(at,{...nt,gain:0}),yt=b(at,{...it,curve:ft});return{connectGraph(){ct.connect(mt),ct.connect(Ot.inputs===void 0?Ot:Ot.inputs[0]),ct.connect(gt),Ot.connect(ht),ht.connect(pt.inputs===void 0?pt:pt.inputs[0]),ht.connect(yt.inputs===void 0?yt:yt.inputs[0]),pt.connect(mt.gain),yt.connect(gt.gain),mt.connect(ut,0,0),gt.connect(ut,0,1)},disconnectGraph(){ct.disconnect(mt),ct.disconnect(Ot.inputs===void 0?Ot:Ot.inputs[0]),ct.disconnect(gt),Ot.disconnect(ht),ht.disconnect(pt.inputs===void 0?pt:pt.inputs[0]),ht.disconnect(yt.inputs===void 0?yt:yt.inputs[0]),pt.disconnect(mt.gain),yt.disconnect(gt.gain),mt.disconnect(ut,0,0),gt.disconnect(ut,0,1)}}},st=(at,ct,ht,ut)=>{const dt=new Float32Array(16385),ft=new Float32Array(16385),mt=new Float32Array(16385),pt=new Float32Array(16385),Ot=Math.floor(16385/2);for(let Tt=0;Tt<16385;Tt+=1)if(Tt>Ot){const _t=(Tt-Ot)/(16384-Ot)*tt;dt[Tt]=Math.cos(_t),ft[Tt]=Math.sin(_t),mt[Tt]=0,pt[Tt]=1}else{const _t=Tt/(16384-Ot)*tt;dt[Tt]=1,ft[Tt]=0,mt[Tt]=Math.cos(_t),pt[Tt]=Math.sin(_t)}const gt=d(at,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),yt=g(at,{...nt,gain:0}),St=b(at,{...it,curve:dt}),vt=g(at,{...nt,gain:0}),wt=b(at,{...it,curve:ft}),xt=b(at,{...it,curve:et}),kt=g(at,{...nt,gain:0}),bt=b(at,{...it,curve:mt}),Et=g(at,{...nt,gain:0}),At=b(at,{...it,curve:pt});return{connectGraph(){ct.connect(gt),ct.connect(xt.inputs===void 0?xt:xt.inputs[0]),gt.connect(yt,0),gt.connect(vt,0),gt.connect(kt,1),gt.connect(Et,1),xt.connect(ht),ht.connect(St.inputs===void 0?St:St.inputs[0]),ht.connect(wt.inputs===void 0?wt:wt.inputs[0]),ht.connect(bt.inputs===void 0?bt:bt.inputs[0]),ht.connect(At.inputs===void 0?At:At.inputs[0]),St.connect(yt.gain),wt.connect(vt.gain),bt.connect(kt.gain),At.connect(Et.gain),yt.connect(ut,0,0),kt.connect(ut,0,0),vt.connect(ut,0,1),Et.connect(ut,0,1)},disconnectGraph(){ct.disconnect(gt),ct.disconnect(xt.inputs===void 0?xt:xt.inputs[0]),gt.disconnect(yt,0),gt.disconnect(vt,0),gt.disconnect(kt,1),gt.disconnect(Et,1),xt.disconnect(ht),ht.disconnect(St.inputs===void 0?St:St.inputs[0]),ht.disconnect(wt.inputs===void 0?wt:wt.inputs[0]),ht.disconnect(bt.inputs===void 0?bt:bt.inputs[0]),ht.disconnect(At.inputs===void 0?At:At.inputs[0]),St.disconnect(yt.gain),wt.disconnect(vt.gain),bt.disconnect(kt.gain),At.disconnect(Et.gain),yt.disconnect(ut,0,0),kt.disconnect(ut,0,0),vt.disconnect(ut,0,1),Et.disconnect(ut,0,1)}}},ot=(at,ct,ht,ut,dt)=>{if(ct===1)return rt(at,ht,ut,dt);if(ct===2)return st(at,ht,ut,dt);throw $()};return(at,{channelCount:ct,channelCountMode:ht,pan:ut,...dt})=>{if(ht==="max")throw $();const ft=_(at,{...dt,channelCount:1,channelCountMode:ht,numberOfInputs:2}),mt=g(at,{...dt,channelCount:ct,channelCountMode:ht,gain:1}),pt=g(at,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:ut});let{connectGraph:Ot,disconnectGraph:gt}=ot(at,ct,mt,pt,ft);Object.defineProperty(pt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(pt.gain,"maxValue",{get:()=>1}),Object.defineProperty(pt.gain,"minValue",{get:()=>-1});const yt={get bufferSize(){},get channelCount(){return mt.channelCount},set channelCount(xt){mt.channelCount!==xt&&(St&&gt(),{connectGraph:Ot,disconnectGraph:gt}=ot(at,xt,mt,pt,ft),St&&Ot()),mt.channelCount=xt},get channelCountMode(){return mt.channelCountMode},set channelCountMode(xt){if(xt==="clamped-max"||xt==="max")throw $();mt.channelCountMode=xt},get channelInterpretation(){return mt.channelInterpretation},set channelInterpretation(xt){mt.channelInterpretation=xt},get context(){return mt.context},get inputs(){return[mt]},get numberOfInputs(){return mt.numberOfInputs},get numberOfOutputs(){return mt.numberOfOutputs},get pan(){return pt.gain},addEventListener(...xt){return mt.addEventListener(xt[0],xt[1],xt[2])},dispatchEvent(...xt){return mt.dispatchEvent(xt[0])},removeEventListener(...xt){return mt.removeEventListener(xt[0],xt[1],xt[2])}};let St=!1;const vt=()=>{Ot(),St=!0},wt=()=>{gt(),St=!1};return j(interceptConnections(yt,ft),vt,wt)}},createNativeWaveShaperNodeFactory=(_,d,g,b,$,j,_e)=>(et,tt)=>{const nt=et.createWaveShaper();if(j!==null&&j.name==="webkitAudioContext"&&et.createGain().gain.automationRate===void 0)return g(et,tt);assignNativeAudioNodeOptions(nt,tt);const it=tt.curve===null||tt.curve instanceof Float32Array?tt.curve:new Float32Array(tt.curve);if(it!==null&&it.length<2)throw d();assignNativeAudioNodeOption(nt,{curve:it},"curve"),assignNativeAudioNodeOption(nt,tt,"oversample");let rt=null,st=!1;return _e(nt,"curve",ct=>()=>ct.call(nt),ct=>ht=>(ct.call(nt,ht),st&&(b(ht)&&rt===null?rt=_(et,nt):!b(ht)&&rt!==null&&(rt(),rt=null)),ht)),$(nt,()=>{st=!0,b(nt.curve)&&(rt=_(et,nt))},()=>{st=!1,rt!==null&&(rt(),rt=null)})},createNativeWaveShaperNodeFakerFactory=(_,d,g,b,$)=>(j,{curve:_e,oversample:et,...tt})=>{const nt=j.createWaveShaper(),it=j.createWaveShaper();assignNativeAudioNodeOptions(nt,tt),assignNativeAudioNodeOptions(it,tt);const rt=g(j,{...tt,gain:1}),st=g(j,{...tt,gain:-1}),ot=g(j,{...tt,gain:1}),at=g(j,{...tt,gain:-1});let ct=null,ht=!1,ut=null;const dt={get bufferSize(){},get channelCount(){return nt.channelCount},set channelCount(pt){rt.channelCount=pt,st.channelCount=pt,nt.channelCount=pt,ot.channelCount=pt,it.channelCount=pt,at.channelCount=pt},get channelCountMode(){return nt.channelCountMode},set channelCountMode(pt){rt.channelCountMode=pt,st.channelCountMode=pt,nt.channelCountMode=pt,ot.channelCountMode=pt,it.channelCountMode=pt,at.channelCountMode=pt},get channelInterpretation(){return nt.channelInterpretation},set channelInterpretation(pt){rt.channelInterpretation=pt,st.channelInterpretation=pt,nt.channelInterpretation=pt,ot.channelInterpretation=pt,it.channelInterpretation=pt,at.channelInterpretation=pt},get context(){return nt.context},get curve(){return ut},set curve(pt){if(pt!==null&&pt.length<2)throw d();if(pt===null)nt.curve=pt,it.curve=pt;else{const Ot=pt.length,gt=new Float32Array(Ot+2-Ot%2),yt=new Float32Array(Ot+2-Ot%2);gt[0]=pt[0],yt[0]=-pt[Ot-1];const St=Math.ceil((Ot+1)/2),vt=(Ot+1)/2-1;for(let wt=1;wt<St;wt+=1){const xt=wt/St*vt,kt=Math.floor(xt),bt=Math.ceil(xt);gt[wt]=kt===bt?pt[kt]:(1-(xt-kt))*pt[kt]+(1-(bt-xt))*pt[bt],yt[wt]=kt===bt?-pt[Ot-1-kt]:-((1-(xt-kt))*pt[Ot-1-kt])-(1-(bt-xt))*pt[Ot-1-bt]}gt[St]=Ot%2===1?pt[St-1]:(pt[St-2]+pt[St-1])/2,nt.curve=gt,it.curve=yt}ut=pt,ht&&(b(ut)&&ct===null?ct=_(j,rt):ct!==null&&(ct(),ct=null))},get inputs(){return[rt]},get numberOfInputs(){return nt.numberOfInputs},get numberOfOutputs(){return nt.numberOfOutputs},get oversample(){return nt.oversample},set oversample(pt){nt.oversample=pt,it.oversample=pt},addEventListener(...pt){return rt.addEventListener(pt[0],pt[1],pt[2])},dispatchEvent(...pt){return rt.dispatchEvent(pt[0])},removeEventListener(...pt){return rt.removeEventListener(pt[0],pt[1],pt[2])}};_e!==null&&(dt.curve=_e instanceof Float32Array?_e:new Float32Array(_e)),et!==dt.oversample&&(dt.oversample=et);const ft=()=>{rt.connect(nt).connect(ot),rt.connect(st).connect(it).connect(at).connect(ot),ht=!0,b(ut)&&(ct=_(j,rt))},mt=()=>{rt.disconnect(nt),nt.disconnect(ot),rt.disconnect(st),st.disconnect(it),it.disconnect(at),at.disconnect(ot),ht=!1,ct!==null&&(ct(),ct=null)};return $(interceptConnections(dt,ot),ft,mt)},createNotSupportedError=()=>new DOMException("","NotSupportedError"),DEFAULT_OPTIONS$5={numberOfChannels:1},createOfflineAudioContextConstructor=(_,d,g,b,$)=>class extends _{constructor(_e,et,tt){let nt;if(typeof _e=="number"&&et!==void 0&&tt!==void 0)nt={length:et,numberOfChannels:_e,sampleRate:tt};else if(typeof _e=="object")nt=_e;else throw new Error("The given parameters are not valid.");const{length:it,numberOfChannels:rt,sampleRate:st}={...DEFAULT_OPTIONS$5,...nt},ot=b(rt,it,st);d(testPromiseSupport,()=>testPromiseSupport(ot))||ot.addEventListener("statechange",(()=>{let at=0;const ct=ht=>{this._state==="running"&&(at>0?(ot.removeEventListener("statechange",ct),ht.stopImmediatePropagation(),this._waitForThePromiseToSettle(ht)):at+=1)};return ct})()),super(ot,rt),this._length=it,this._nativeOfflineAudioContext=ot,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(g()):(this._state="running",$(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,deactivateAudioGraph(this)}))}_waitForThePromiseToSettle(_e){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(_e):setTimeout(()=>this._waitForThePromiseToSettle(_e))}},DEFAULT_OPTIONS$4={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},createOscillatorNodeConstructor=(_,d,g,b,$,j,_e)=>class extends _{constructor(tt,nt){const it=$(tt),rt={...DEFAULT_OPTIONS$4,...nt},st=g(it,rt),ot=j(it),at=ot?b():null,ct=tt.sampleRate/2;super(tt,!1,st,at),this._detune=d(this,ot,st.detune,153600,-153600),this._frequency=d(this,ot,st.frequency,ct,-ct),this._nativeOscillatorNode=st,this._onended=null,this._oscillatorNodeRenderer=at,this._oscillatorNodeRenderer!==null&&rt.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=rt.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(tt){const nt=typeof tt=="function"?_e(this,tt):null;this._nativeOscillatorNode.onended=nt;const it=this._nativeOscillatorNode.onended;this._onended=it!==null&&it===nt?tt:it}get type(){return this._nativeOscillatorNode.type}set type(tt){this._nativeOscillatorNode.type=tt,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(tt){this._nativeOscillatorNode.setPeriodicWave(tt),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=tt)}start(tt=0){if(this._nativeOscillatorNode.start(tt),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=tt),this.context.state!=="closed"){setInternalStateToActive(this);const nt=()=>{this._nativeOscillatorNode.removeEventListener("ended",nt),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeOscillatorNode.addEventListener("ended",nt)}}stop(tt=0){this._nativeOscillatorNode.stop(tt),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=tt)}},createOscillatorNodeRendererFactory=(_,d,g,b,$)=>()=>{const j=new WeakMap;let _e=null,et=null,tt=null;const nt=async(it,rt)=>{let st=g(it);const ot=isOwnedByContext(st,rt);if(!ot){const at={channelCount:st.channelCount,channelCountMode:st.channelCountMode,channelInterpretation:st.channelInterpretation,detune:st.detune.value,frequency:st.frequency.value,periodicWave:_e===null?void 0:_e,type:st.type};st=d(rt,at),et!==null&&st.start(et),tt!==null&&st.stop(tt)}return j.set(rt,st),ot?(await _(rt,it.detune,st.detune),await _(rt,it.frequency,st.frequency)):(await b(rt,it.detune,st.detune),await b(rt,it.frequency,st.frequency)),await $(it,rt,st),st};return{set periodicWave(it){_e=it},set start(it){et=it},set stop(it){tt=it},render(it,rt){const st=j.get(rt);return st!==void 0?Promise.resolve(st):nt(it,rt)}}},DEFAULT_OPTIONS$3={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},createPannerNodeConstructor=(_,d,g,b,$,j,_e)=>class extends _{constructor(tt,nt){const it=$(tt),rt={...DEFAULT_OPTIONS$3,...nt},st=g(it,rt),ot=j(it),at=ot?b():null;super(tt,!1,st,at),this._nativePannerNode=st,this._orientationX=d(this,ot,st.orientationX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationY=d(this,ot,st.orientationY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationZ=d(this,ot,st.orientationZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionX=d(this,ot,st.positionX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionY=d(this,ot,st.positionY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionZ=d(this,ot,st.positionZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),_e(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(tt){this._nativePannerNode.coneInnerAngle=tt}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(tt){this._nativePannerNode.coneOuterAngle=tt}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(tt){this._nativePannerNode.coneOuterGain=tt}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(tt){this._nativePannerNode.distanceModel=tt}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(tt){this._nativePannerNode.maxDistance=tt}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(tt){this._nativePannerNode.panningModel=tt}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(tt){this._nativePannerNode.refDistance=tt}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(tt){this._nativePannerNode.rolloffFactor=tt}},createPannerNodeRendererFactory=(_,d,g,b,$,j,_e,et,tt,nt)=>()=>{const it=new WeakMap;let rt=null;const st=async(ot,at)=>{let ct=null,ht=j(ot);const ut={channelCount:ht.channelCount,channelCountMode:ht.channelCountMode,channelInterpretation:ht.channelInterpretation},dt={...ut,coneInnerAngle:ht.coneInnerAngle,coneOuterAngle:ht.coneOuterAngle,coneOuterGain:ht.coneOuterGain,distanceModel:ht.distanceModel,maxDistance:ht.maxDistance,panningModel:ht.panningModel,refDistance:ht.refDistance,rolloffFactor:ht.rolloffFactor},ft=isOwnedByContext(ht,at);if("bufferSize"in ht)ct=b(at,{...ut,gain:1});else if(!ft){const mt={...dt,orientationX:ht.orientationX.value,orientationY:ht.orientationY.value,orientationZ:ht.orientationZ.value,positionX:ht.positionX.value,positionY:ht.positionY.value,positionZ:ht.positionZ.value};ht=$(at,mt)}if(it.set(at,ct===null?ht:ct),ct!==null){if(rt===null){if(_e===null)throw new Error("Missing the native OfflineAudioContext constructor.");const wt=new _e(6,ot.context.length,at.sampleRate),xt=d(wt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});xt.connect(wt.destination),rt=(async()=>{const kt=await Promise.all([ot.orientationX,ot.orientationY,ot.orientationZ,ot.positionX,ot.positionY,ot.positionZ].map(async(bt,Et)=>{const At=g(wt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Et===0?1:0});return await et(wt,bt,At.offset),At}));for(let bt=0;bt<6;bt+=1)kt[bt].connect(xt,0,bt),kt[bt].start(0);return nt(wt)})()}const mt=await rt,pt=b(at,{...ut,gain:1});await tt(ot,at,pt);const Ot=[];for(let wt=0;wt<mt.numberOfChannels;wt+=1)Ot.push(mt.getChannelData(wt));let gt=[Ot[0][0],Ot[1][0],Ot[2][0]],yt=[Ot[3][0],Ot[4][0],Ot[5][0]],St=b(at,{...ut,gain:1}),vt=$(at,{...dt,orientationX:gt[0],orientationY:gt[1],orientationZ:gt[2],positionX:yt[0],positionY:yt[1],positionZ:yt[2]});pt.connect(St).connect(vt.inputs[0]),vt.connect(ct);for(let wt=128;wt<mt.length;wt+=128){const xt=[Ot[0][wt],Ot[1][wt],Ot[2][wt]],kt=[Ot[3][wt],Ot[4][wt],Ot[5][wt]];if(xt.some((bt,Et)=>bt!==gt[Et])||kt.some((bt,Et)=>bt!==yt[Et])){gt=xt,yt=kt;const bt=wt/at.sampleRate;St.gain.setValueAtTime(0,bt),St=b(at,{...ut,gain:0}),vt=$(at,{...dt,orientationX:gt[0],orientationY:gt[1],orientationZ:gt[2],positionX:yt[0],positionY:yt[1],positionZ:yt[2]}),St.gain.setValueAtTime(1,bt),pt.connect(St).connect(vt.inputs[0]),vt.connect(ct)}}return ct}return ft?(await _(at,ot.orientationX,ht.orientationX),await _(at,ot.orientationY,ht.orientationY),await _(at,ot.orientationZ,ht.orientationZ),await _(at,ot.positionX,ht.positionX),await _(at,ot.positionY,ht.positionY),await _(at,ot.positionZ,ht.positionZ)):(await et(at,ot.orientationX,ht.orientationX),await et(at,ot.orientationY,ht.orientationY),await et(at,ot.orientationZ,ht.orientationZ),await et(at,ot.positionX,ht.positionX),await et(at,ot.positionY,ht.positionY),await et(at,ot.positionZ,ht.positionZ)),isNativeAudioNodeFaker(ht)?await tt(ot,at,ht.inputs[0]):await tt(ot,at,ht),ht};return{render(ot,at){const ct=it.get(at);return ct!==void 0?Promise.resolve(ct):st(ot,at)}}},DEFAULT_OPTIONS$2={disableNormalization:!1},createPeriodicWaveConstructor=(_,d,g,b)=>class nn{constructor(j,_e){const et=d(j),tt=b({...DEFAULT_OPTIONS$2,..._e}),nt=_(et,tt);return g.add(nt),nt}static[Symbol.hasInstance](j){return j!==null&&typeof j=="object"&&Object.getPrototypeOf(j)===nn.prototype||g.has(j)}},createRenderAutomation=(_,d)=>(g,b,$)=>(_(b).replay($),d(b,g,$)),createRenderInputsOfAudioNode=(_,d,g)=>async(b,$,j)=>{const _e=_(b);await Promise.all(_e.activeInputs.map((et,tt)=>Array.from(et).map(async([nt,it])=>{const st=await d(nt).render(nt,$),ot=b.context.destination;!g(nt)&&(b!==ot||!g(b))&&st.connect(j,it,tt)})).reduce((et,tt)=>[...et,...tt],[]))},createRenderInputsOfAudioParam=(_,d,g)=>async(b,$,j)=>{const _e=d(b);await Promise.all(Array.from(_e.activeInputs).map(async([et,tt])=>{const it=await _(et).render(et,$);g(et)||it.connect(j,tt)}))},createRenderNativeOfflineAudioContext=(_,d,g,b)=>$=>_(testPromiseSupport,()=>testPromiseSupport($))?Promise.resolve(_(b,b)).then(j=>{if(!j){const _e=g($,512,0,1);$.oncomplete=()=>{_e.onaudioprocess=null,_e.disconnect()},_e.onaudioprocess=()=>$.currentTime,_e.connect($.destination)}return $.startRendering()}):new Promise(j=>{const _e=d($,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});$.oncomplete=et=>{_e.disconnect(),j(et.renderedBuffer)},_e.connect($.destination),$.startRendering()}),createSetActiveAudioWorkletNodeInputs=_=>(d,g)=>{_.set(d,g)},createSetAudioNodeTailTime=_=>(d,g)=>_.set(d,g),createStartRendering=(_,d,g,b,$,j,_e,et)=>(tt,nt)=>g(tt).render(tt,nt).then(()=>Promise.all(Array.from(b(nt)).map(it=>g(it).render(it,nt)))).then(()=>$(nt)).then(it=>(typeof it.copyFromChannel!="function"?(_e(it),wrapAudioBufferGetChannelDataMethod(it)):d(j,()=>j(it))||et(it),_.add(it),it)),DEFAULT_OPTIONS$1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},createStereoPannerNodeConstructor=(_,d,g,b,$,j)=>class extends _{constructor(et,tt){const nt=$(et),it={...DEFAULT_OPTIONS$1,...tt},rt=g(nt,it),st=j(nt),ot=st?b():null;super(et,!1,rt,ot),this._pan=d(this,st,rt.pan)}get pan(){return this._pan}},createStereoPannerNodeRendererFactory=(_,d,g,b,$)=>()=>{const j=new WeakMap,_e=async(et,tt)=>{let nt=g(et);const it=isOwnedByContext(nt,tt);if(!it){const rt={channelCount:nt.channelCount,channelCountMode:nt.channelCountMode,channelInterpretation:nt.channelInterpretation,pan:nt.pan.value};nt=d(tt,rt)}return j.set(tt,nt),it?await _(tt,et.pan,nt.pan):await b(tt,et.pan,nt.pan),isNativeAudioNodeFaker(nt)?await $(et,tt,nt.inputs[0]):await $(et,tt,nt),nt};return{render(et,tt){const nt=j.get(tt);return nt!==void 0?Promise.resolve(nt):_e(et,tt)}}},createTestAudioBufferConstructorSupport=_=>()=>{if(_===null)return!1;try{new _({length:1,sampleRate:44100})}catch{return!1}return!0},createTestAudioBufferCopyChannelMethodsSubarraySupport=_=>()=>{if(_===null)return!1;const g=new _(1,1,44100).createBuffer(1,1,44100);if(g.copyToChannel===void 0)return!0;const b=new Float32Array(2);try{g.copyFromChannel(b,0,0)}catch{return!1}return!0},createTestAudioContextCloseMethodSupport=_=>()=>{if(_===null)return!1;if(_.prototype!==void 0&&_.prototype.close!==void 0)return!0;const d=new _,g=d.close!==void 0;try{d.close()}catch{}return g},createTestAudioContextDecodeAudioDataMethodTypeErrorSupport=_=>()=>{if(_===null)return Promise.resolve(!1);const d=new _(1,1,44100);return new Promise(g=>{let b=!0;const $=_e=>{b&&(b=!1,d.startRendering(),g(_e instanceof TypeError))};let j;try{j=d.decodeAudioData(null,()=>{},$)}catch(_e){$(_e)}j!==void 0&&j.catch($)})},createTestAudioContextOptionsSupport=_=>()=>{if(_===null)return!1;let d;try{d=new _({latencyHint:"balanced"})}catch{return!1}return d.close(),!0},createTestAudioNodeConnectMethodSupport=_=>()=>{if(_===null)return!1;const g=new _(1,1,44100).createGain(),b=g.connect(g)===g;return g.disconnect(g),b},createTestAudioWorkletProcessorNoOutputsSupport=(_,d)=>async()=>{if(_===null)return!0;if(d===null)return!1;const g=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),b=new MessageChannel,$=new d(1,128,44100),j=URL.createObjectURL(g);let _e=!1;try{await $.audioWorklet.addModule(j);const et=new _($,"a",{numberOfOutputs:0}),tt=$.createOscillator();await new Promise(nt=>{et.port.onmessage=()=>nt(),et.port.postMessage(b.port2,[b.port2])}),et.port.onmessage=()=>_e=!0,tt.connect(et),tt.start(0),await $.startRendering(),_e=await new Promise(nt=>{b.port1.onmessage=({data:it})=>nt(it===1),b.port1.postMessage(0)})}catch{}finally{b.port1.close(),URL.revokeObjectURL(j)}return _e},createTestAudioWorkletProcessorPostMessageSupport=(_,d)=>async()=>{if(_===null)return!0;if(d===null)return!1;const g=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),b=new d(1,128,44100),$=URL.createObjectURL(g);let j=!1,_e=!1;try{await b.audioWorklet.addModule($);const et=new _(b,"a",{numberOfOutputs:0}),tt=b.createOscillator();et.port.onmessage=()=>j=!0,et.onprocessorerror=()=>_e=!0,tt.connect(et),tt.start(0),await b.startRendering(),await new Promise(nt=>setTimeout(nt))}catch{}finally{URL.revokeObjectURL($)}return j&&!_e},createTestChannelMergerNodeChannelCountSupport=_=>()=>{if(_===null)return!1;const g=new _(1,1,44100).createChannelMerger();if(g.channelCountMode==="max")return!0;try{g.channelCount=2}catch{return!0}return!1},createTestConstantSourceNodeAccurateSchedulingSupport=_=>()=>{if(_===null)return!1;const d=new _(1,1,44100);return d.createConstantSource===void 0?!0:d.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY},createTestConvolverNodeBufferReassignabilitySupport=_=>()=>{if(_===null)return!1;const d=new _(1,1,44100),g=d.createConvolver();g.buffer=d.createBuffer(1,1,d.sampleRate);try{g.buffer=d.createBuffer(1,1,d.sampleRate)}catch{return!1}return!0},createTestConvolverNodeChannelCountSupport=_=>()=>{if(_===null)return!1;const g=new _(1,1,44100).createConvolver();try{g.channelCount=1}catch{return!1}return!0},createTestIsSecureContextSupport=_=>()=>_!==null&&_.hasOwnProperty("isSecureContext"),createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport=_=>()=>{if(_===null)return!1;const d=new _;try{return d.createMediaStreamSource(new MediaStream),!1}catch{return!0}finally{d.close()}},createTestOfflineAudioContextCurrentTimeSupport=(_,d)=>()=>{if(d===null)return Promise.resolve(!1);const g=new d(1,1,44100),b=_(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise($=>{g.oncomplete=()=>{b.disconnect(),$(g.currentTime!==0)},g.startRendering()})},createTestStereoPannerNodeDefaultValueSupport=_=>()=>{if(_===null)return Promise.resolve(!1);const d=new _(1,1,44100);if(d.createStereoPanner===void 0||d.createConstantSource===void 0)return Promise.resolve(!0);const g=d.createConstantSource(),b=d.createStereoPanner();return g.channelCount=1,g.offset.value=1,b.channelCount=1,g.start(),g.connect(b).connect(d.destination),d.startRendering().then($=>$.getChannelData(0)[0]!==1)},createUnknownError=()=>new DOMException("","UnknownError"),DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},createWaveShaperNodeConstructor=(_,d,g,b,$,j,_e)=>class extends _{constructor(tt,nt){const it=$(tt),rt={...DEFAULT_OPTIONS,...nt},st=g(it,rt),at=j(it)?b():null;super(tt,!0,st,at),this._isCurveNullified=!1,this._nativeWaveShaperNode=st,_e(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(tt){if(tt===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(tt.length<2)throw d();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=tt}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(tt){this._nativeWaveShaperNode.oversample=tt}},createWaveShaperNodeRendererFactory=(_,d,g)=>()=>{const b=new WeakMap,$=async(j,_e)=>{let et=d(j);if(!isOwnedByContext(et,_e)){const nt={channelCount:et.channelCount,channelCountMode:et.channelCountMode,channelInterpretation:et.channelInterpretation,curve:et.curve,oversample:et.oversample};et=_(_e,nt)}return b.set(_e,et),isNativeAudioNodeFaker(et)?await g(j,_e,et.inputs[0]):await g(j,_e,et),et};return{render(j,_e){const et=b.get(_e);return et!==void 0?Promise.resolve(et):$(j,_e)}}},createWindow=()=>typeof window>"u"?null:window,createWrapAudioBufferCopyChannelMethods=(_,d)=>g=>{g.copyFromChannel=(b,$,j=0)=>{const _e=_(j),et=_($);if(et>=g.numberOfChannels)throw d();const tt=g.length,nt=g.getChannelData(et),it=b.length;for(let rt=_e<0?-_e:0;rt+_e<tt&&rt<it;rt+=1)b[rt]=nt[rt+_e]},g.copyToChannel=(b,$,j=0)=>{const _e=_(j),et=_($);if(et>=g.numberOfChannels)throw d();const tt=g.length,nt=g.getChannelData(et),it=b.length;for(let rt=_e<0?-_e:0;rt+_e<tt&&rt<it;rt+=1)nt[rt+_e]=b[rt]}},createWrapAudioBufferCopyChannelMethodsOutOfBounds=_=>d=>{d.copyFromChannel=(g=>(b,$,j=0)=>{const _e=_(j),et=_($);if(_e<d.length)return g.call(d,b,et,_e)})(d.copyFromChannel),d.copyToChannel=(g=>(b,$,j=0)=>{const _e=_(j),et=_($);if(_e<d.length)return g.call(d,b,et,_e)})(d.copyToChannel)},createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer=_=>(d,g)=>{const b=g.createBuffer(1,1,44100);d.buffer===null&&(d.buffer=b),_(d,"buffer",$=>()=>{const j=$.call(d);return j===b?null:j},$=>j=>$.call(d,j===null?b:j))},createWrapChannelMergerNode=(_,d)=>(g,b)=>{b.channelCount=1,b.channelCountMode="explicit",Object.defineProperty(b,"channelCount",{get:()=>1,set:()=>{throw _()}}),Object.defineProperty(b,"channelCountMode",{get:()=>"explicit",set:()=>{throw _()}});const $=g.createBufferSource();d(b,()=>{const et=b.numberOfInputs;for(let tt=0;tt<et;tt+=1)$.connect(b,0,tt)},()=>$.disconnect(b))},getFirstSample=(_,d,g)=>_.copyFromChannel===void 0?_.getChannelData(g)[0]:(_.copyFromChannel(d,g),d[0]),isDCCurve=_=>{if(_===null)return!1;const d=_.length;return d%2!==0?_[Math.floor(d/2)]!==0:_[d/2-1]+_[d/2]!==0},overwriteAccessors=(_,d,g,b)=>{let $=_;for(;!$.hasOwnProperty(d);)$=Object.getPrototypeOf($);const{get:j,set:_e}=Object.getOwnPropertyDescriptor($,d);Object.defineProperty(_,d,{get:g(j),set:b(_e)})},sanitizeAudioWorkletNodeOptions=_=>({..._,outputChannelCount:_.outputChannelCount!==void 0?_.outputChannelCount:_.numberOfInputs===1&&_.numberOfOutputs===1?[_.channelCount]:Array.from({length:_.numberOfOutputs},()=>1)}),sanitizeChannelSplitterOptions=_=>({..._,channelCount:_.numberOfOutputs}),sanitizePeriodicWaveOptions=_=>{const{imag:d,real:g}=_;return d===void 0?g===void 0?{..._,imag:[0,0],real:[0,0]}:{..._,imag:Array.from(g,()=>0),real:g}:g===void 0?{..._,imag:d,real:Array.from(d,()=>0)}:{..._,imag:d,real:g}},setValueAtTimeUntilPossible=(_,d,g)=>{try{_.setValueAtTime(d,g)}catch(b){if(b.code!==9)throw b;setValueAtTimeUntilPossible(_,d,g+1e-7)}},testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport=_=>{const d=_.createBufferSource();d.start();try{d.start()}catch{return!0}return!1},testAudioBufferSourceNodeStartMethodOffsetClampingSupport=_=>{const d=_.createBufferSource(),g=_.createBuffer(1,1,44100);d.buffer=g;try{d.start(0,1)}catch{return!1}return!0},testAudioBufferSourceNodeStopMethodNullifiedBufferSupport=_=>{const d=_.createBufferSource();d.start();try{d.stop()}catch{return!1}return!0},testAudioScheduledSourceNodeStartMethodNegativeParametersSupport=_=>{const d=_.createOscillator();try{d.start(-1)}catch(g){return g instanceof RangeError}return!1},testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=_=>{const d=_.createBuffer(1,1,44100),g=_.createBufferSource();g.buffer=d,g.start(),g.stop();try{return g.stop(),!0}catch{return!1}},testAudioScheduledSourceNodeStopMethodNegativeParametersSupport=_=>{const d=_.createOscillator();try{d.stop(-1)}catch(g){return g instanceof RangeError}return!1},testAudioWorkletNodeOptionsClonability=_=>{const{port1:d,port2:g}=new MessageChannel;try{d.postMessage(_)}finally{d.close(),g.close()}},testDomExceptionConstructorSupport=()=>{try{new DOMException}catch{return!1}return!0},testTransferablesSupport=()=>new Promise(_=>{const d=new ArrayBuffer(0),{port1:g,port2:b}=new MessageChannel;g.onmessage=({data:$})=>_($!==null),b.postMessage(d,[d])}),wrapAudioBufferSourceNodeStartMethodOffsetClamping=_=>{_.start=(d=>(g=0,b=0,$)=>{const j=_.buffer,_e=j===null?b:Math.min(j.duration,b);j!==null&&_e>j.duration-.5/_.context.sampleRate?d.call(_,g,0,0):d.call(_,g,_e,$)})(_.start)},wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=(_,d)=>{const g=d.createGain();_.connect(g);const b=($=>()=>{$.call(_,g),_.removeEventListener("ended",b)})(_.disconnect);_.addEventListener("ended",b),interceptConnections(_,g),_.stop=($=>{let j=!1;return(_e=0)=>{if(j)try{$.call(_,_e)}catch{g.gain.setValueAtTime(0,_e)}else $.call(_,_e),j=!0}})(_.stop)},wrapEventListener=(_,d)=>g=>{const b={value:_};return Object.defineProperties(g,{currentTarget:b,target:b}),typeof d=="function"?d.call(_,g):d.handleEvent.call(_,g)},addActiveInputConnectionToAudioNode=createAddActiveInputConnectionToAudioNode(insertElementInSet),addPassiveInputConnectionToAudioNode=createAddPassiveInputConnectionToAudioNode(insertElementInSet),deleteActiveInputConnectionToAudioNode=createDeleteActiveInputConnectionToAudioNode(pickElementFromSet),audioNodeTailTimeStore=new WeakMap,getAudioNodeTailTime=createGetAudioNodeTailTime(audioNodeTailTimeStore),cacheTestResult=createCacheTestResult(new Map,new WeakMap),window$1=createWindow(),createNativeAnalyserNode=createNativeAnalyserNodeFactory(cacheTestResult,createIndexSizeError),getAudioNodeRenderer=createGetAudioNodeRenderer(getAudioNodeConnections),renderInputsOfAudioNode=createRenderInputsOfAudioNode(getAudioNodeConnections,getAudioNodeRenderer,isPartOfACycle),createAnalyserNodeRenderer=createAnalyserNodeRendererFactory(createNativeAnalyserNode,getNativeAudioNode,renderInputsOfAudioNode),getNativeContext=createGetNativeContext(CONTEXT_STORE),nativeOfflineAudioContextConstructor=createNativeOfflineAudioContextConstructor(window$1),isNativeOfflineAudioContext=createIsNativeOfflineAudioContext(nativeOfflineAudioContextConstructor),audioParamAudioNodeStore=new WeakMap,eventTargetConstructor=createEventTargetConstructor(wrapEventListener),nativeAudioContextConstructor=createNativeAudioContextConstructor(window$1),isNativeAudioContext=createIsNativeAudioContext(nativeAudioContextConstructor),isNativeAudioNode=createIsNativeAudioNode(window$1),isNativeAudioParam=createIsNativeAudioParam(window$1),nativeAudioWorkletNodeConstructor=createNativeAudioWorkletNodeConstructor(window$1),audioNodeConstructor=createAudioNodeConstructor(createAddAudioNodeConnections(AUDIO_NODE_CONNECTIONS_STORE),createAddConnectionToAudioNode(addActiveInputConnectionToAudioNode,addPassiveInputConnectionToAudioNode,connectNativeAudioNodeToNativeAudioNode,deleteActiveInputConnectionToAudioNode,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getAudioNodeTailTime,getEventListenersOfAudioNode,getNativeAudioNode,insertElementInSet,isActiveAudioNode,isPartOfACycle,isPassiveAudioNode),cacheTestResult,createIncrementCycleCounterFactory(CYCLE_COUNTERS,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,isActiveAudioNode),createIndexSizeError,createInvalidAccessError,createNotSupportedError,createDecrementCycleCounter(connectNativeAudioNodeToNativeAudioNode,CYCLE_COUNTERS,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,getNativeContext,isActiveAudioNode,isNativeOfflineAudioContext),createDetectCycles(audioParamAudioNodeStore,getAudioNodeConnections,getValueForKey),eventTargetConstructor,getNativeContext,isNativeAudioContext,isNativeAudioNode,isNativeAudioParam,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor),analyserNodeConstructor=createAnalyserNodeConstructor(audioNodeConstructor,createAnalyserNodeRenderer,createIndexSizeError,createNativeAnalyserNode,getNativeContext,isNativeOfflineAudioContext),audioBufferStore=new WeakSet,nativeAudioBufferConstructor=createNativeAudioBufferConstructor(window$1),convertNumberToUnsignedLong=createConvertNumberToUnsignedLong(new Uint32Array(1)),wrapAudioBufferCopyChannelMethods=createWrapAudioBufferCopyChannelMethods(convertNumberToUnsignedLong,createIndexSizeError),wrapAudioBufferCopyChannelMethodsOutOfBounds=createWrapAudioBufferCopyChannelMethodsOutOfBounds(convertNumberToUnsignedLong),audioBufferConstructor=createAudioBufferConstructor(audioBufferStore,cacheTestResult,createNotSupportedError,nativeAudioBufferConstructor,nativeOfflineAudioContextConstructor,createTestAudioBufferConstructorSupport(nativeAudioBufferConstructor),wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),addSilentConnection=createAddSilentConnection(createNativeGainNode),renderInputsOfAudioParam=createRenderInputsOfAudioParam(getAudioNodeRenderer,getAudioParamConnections,isPartOfACycle),connectAudioParam=createConnectAudioParam(renderInputsOfAudioParam),createNativeAudioBufferSourceNode=createNativeAudioBufferSourceNodeFactory(addSilentConnection,cacheTestResult,testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,testAudioBufferSourceNodeStartMethodOffsetClampingSupport,testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioBufferSourceNodeStartMethodOffsetClamping,createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer(overwriteAccessors),wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),renderAutomation=createRenderAutomation(createGetAudioParamRenderer(getAudioParamConnections),renderInputsOfAudioParam),createAudioBufferSourceNodeRenderer=createAudioBufferSourceNodeRendererFactory(connectAudioParam,createNativeAudioBufferSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),createAudioParam=createAudioParamFactory(createAddAudioParamConnections(AUDIO_PARAM_CONNECTIONS_STORE),audioParamAudioNodeStore,AUDIO_PARAM_STORE,createAudioParamRenderer,createCancelAndHoldAutomationEvent,createCancelScheduledValuesAutomationEvent,createExponentialRampToValueAutomationEvent,createLinearRampToValueAutomationEvent,createSetTargetAutomationEvent,createSetValueAutomationEvent,createSetValueCurveAutomationEvent,nativeAudioContextConstructor,setValueAtTimeUntilPossible),audioBufferSourceNodeConstructor=createAudioBufferSourceNodeConstructor(audioNodeConstructor,createAudioBufferSourceNodeRenderer,createAudioParam,createInvalidStateError,createNativeAudioBufferSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),audioDestinationNodeConstructor=createAudioDestinationNodeConstructor(audioNodeConstructor,createAudioDestinationNodeRenderer,createIndexSizeError,createInvalidStateError,createNativeAudioDestinationNodeFactory(createNativeGainNode,overwriteAccessors),getNativeContext,isNativeOfflineAudioContext,renderInputsOfAudioNode),createBiquadFilterNodeRenderer=createBiquadFilterNodeRendererFactory(connectAudioParam,createNativeBiquadFilterNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),setAudioNodeTailTime=createSetAudioNodeTailTime(audioNodeTailTimeStore),biquadFilterNodeConstructor=createBiquadFilterNodeConstructor(audioNodeConstructor,createAudioParam,createBiquadFilterNodeRenderer,createInvalidAccessError,createNativeBiquadFilterNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),monitorConnections=createMonitorConnections(insertElementInSet,isNativeAudioNode),wrapChannelMergerNode=createWrapChannelMergerNode(createInvalidStateError,monitorConnections),createNativeChannelMergerNode=createNativeChannelMergerNodeFactory(nativeAudioContextConstructor,wrapChannelMergerNode),createChannelMergerNodeRenderer=createChannelMergerNodeRendererFactory(createNativeChannelMergerNode,getNativeAudioNode,renderInputsOfAudioNode),channelMergerNodeConstructor=createChannelMergerNodeConstructor(audioNodeConstructor,createChannelMergerNodeRenderer,createNativeChannelMergerNode,getNativeContext,isNativeOfflineAudioContext),createChannelSplitterNodeRenderer=createChannelSplitterNodeRendererFactory(createNativeChannelSplitterNode,getNativeAudioNode,renderInputsOfAudioNode),channelSplitterNodeConstructor=createChannelSplitterNodeConstructor(audioNodeConstructor,createChannelSplitterNodeRenderer,createNativeChannelSplitterNode,getNativeContext,isNativeOfflineAudioContext,sanitizeChannelSplitterOptions),createNativeConstantSourceNodeFaker=createNativeConstantSourceNodeFakerFactory(addSilentConnection,createNativeAudioBufferSourceNode,createNativeGainNode,monitorConnections),createNativeConstantSourceNode=createNativeConstantSourceNodeFactory(addSilentConnection,cacheTestResult,createNativeConstantSourceNodeFaker,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport),createConstantSourceNodeRenderer=createConstantSourceNodeRendererFactory(connectAudioParam,createNativeConstantSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),constantSourceNodeConstructor=createConstantSourceNodeConstructor(audioNodeConstructor,createAudioParam,createConstantSourceNodeRenderer,createNativeConstantSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createNativeConvolverNode=createNativeConvolverNodeFactory(createNotSupportedError,overwriteAccessors),createConvolverNodeRenderer=createConvolverNodeRendererFactory(createNativeConvolverNode,getNativeAudioNode,renderInputsOfAudioNode),convolverNodeConstructor=createConvolverNodeConstructor(audioNodeConstructor,createConvolverNodeRenderer,createNativeConvolverNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createDelayNodeRenderer=createDelayNodeRendererFactory(connectAudioParam,createNativeDelayNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),delayNodeConstructor=createDelayNodeConstructor(audioNodeConstructor,createAudioParam,createDelayNodeRenderer,createNativeDelayNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativeDynamicsCompressorNode=createNativeDynamicsCompressorNodeFactory(createNotSupportedError),createDynamicsCompressorNodeRenderer=createDynamicsCompressorNodeRendererFactory(connectAudioParam,createNativeDynamicsCompressorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),dynamicsCompressorNodeConstructor=createDynamicsCompressorNodeConstructor(audioNodeConstructor,createAudioParam,createDynamicsCompressorNodeRenderer,createNativeDynamicsCompressorNode,createNotSupportedError,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createGainNodeRenderer=createGainNodeRendererFactory(connectAudioParam,createNativeGainNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),gainNodeConstructor=createGainNodeConstructor(audioNodeConstructor,createAudioParam,createGainNodeRenderer,createNativeGainNode,getNativeContext,isNativeOfflineAudioContext),createNativeIIRFilterNodeFaker=createNativeIIRFilterNodeFakerFactory(createInvalidAccessError,createInvalidStateError,createNativeScriptProcessorNode,createNotSupportedError),renderNativeOfflineAudioContext=createRenderNativeOfflineAudioContext(cacheTestResult,createNativeGainNode,createNativeScriptProcessorNode,createTestOfflineAudioContextCurrentTimeSupport(createNativeGainNode,nativeOfflineAudioContextConstructor)),createIIRFilterNodeRenderer=createIIRFilterNodeRendererFactory(createNativeAudioBufferSourceNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderInputsOfAudioNode,renderNativeOfflineAudioContext),createNativeIIRFilterNode=createNativeIIRFilterNodeFactory(createNativeIIRFilterNodeFaker),iIRFilterNodeConstructor=createIIRFilterNodeConstructor(audioNodeConstructor,createNativeIIRFilterNode,createIIRFilterNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createAudioListener=createAudioListenerFactory(createAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeScriptProcessorNode,createNotSupportedError,getFirstSample,isNativeOfflineAudioContext,overwriteAccessors),unrenderedAudioWorkletNodeStore=new WeakMap,minimalBaseAudioContextConstructor=createMinimalBaseAudioContextConstructor(audioDestinationNodeConstructor,createAudioListener,eventTargetConstructor,isNativeOfflineAudioContext,unrenderedAudioWorkletNodeStore,wrapEventListener),createNativeOscillatorNode=createNativeOscillatorNodeFactory(addSilentConnection,cacheTestResult,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),createOscillatorNodeRenderer=createOscillatorNodeRendererFactory(connectAudioParam,createNativeOscillatorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),oscillatorNodeConstructor=createOscillatorNodeConstructor(audioNodeConstructor,createAudioParam,createNativeOscillatorNode,createOscillatorNodeRenderer,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createConnectedNativeAudioBufferSourceNode=createConnectedNativeAudioBufferSourceNodeFactory(createNativeAudioBufferSourceNode),createNativeWaveShaperNodeFaker=createNativeWaveShaperNodeFakerFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeGainNode,isDCCurve,monitorConnections),createNativeWaveShaperNode=createNativeWaveShaperNodeFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeWaveShaperNodeFaker,isDCCurve,monitorConnections,nativeAudioContextConstructor,overwriteAccessors),createNativePannerNodeFaker=createNativePannerNodeFakerFactory(connectNativeAudioNodeToNativeAudioNode,createInvalidStateError,createNativeChannelMergerNode,createNativeGainNode,createNativeScriptProcessorNode,createNativeWaveShaperNode,createNotSupportedError,disconnectNativeAudioNodeFromNativeAudioNode,getFirstSample,monitorConnections),createNativePannerNode=createNativePannerNodeFactory(createNativePannerNodeFaker),createPannerNodeRenderer=createPannerNodeRendererFactory(connectAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeGainNode,createNativePannerNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),pannerNodeConstructor=createPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativePannerNode,createPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativePeriodicWave=createNativePeriodicWaveFactory(createIndexSizeError),periodicWaveConstructor=createPeriodicWaveConstructor(createNativePeriodicWave,getNativeContext,new WeakSet,sanitizePeriodicWaveOptions),nativeStereoPannerNodeFakerFactory=createNativeStereoPannerNodeFakerFactory(createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeGainNode,createNativeWaveShaperNode,createNotSupportedError,monitorConnections),createNativeStereoPannerNode=createNativeStereoPannerNodeFactory(nativeStereoPannerNodeFakerFactory,createNotSupportedError),createStereoPannerNodeRenderer=createStereoPannerNodeRendererFactory(connectAudioParam,createNativeStereoPannerNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),stereoPannerNodeConstructor=createStereoPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativeStereoPannerNode,createStereoPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext),createWaveShaperNodeRenderer=createWaveShaperNodeRendererFactory(createNativeWaveShaperNode,getNativeAudioNode,renderInputsOfAudioNode),waveShaperNodeConstructor=createWaveShaperNodeConstructor(audioNodeConstructor,createInvalidStateError,createNativeWaveShaperNode,createWaveShaperNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),isSecureContext=createIsSecureContext(window$1),exposeCurrentFrameAndCurrentTime=createExposeCurrentFrameAndCurrentTime(window$1),backupOfflineAudioContextStore=new WeakMap,getOrCreateBackupOfflineAudioContext=createGetOrCreateBackupOfflineAudioContext(backupOfflineAudioContextStore,nativeOfflineAudioContextConstructor),addAudioWorkletModule=isSecureContext?createAddAudioWorkletModule(cacheTestResult,createNotSupportedError,createEvaluateSource(window$1),exposeCurrentFrameAndCurrentTime,createFetchSource(createAbortError),getNativeContext,getOrCreateBackupOfflineAudioContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,new WeakMap,new WeakMap,createTestAudioWorkletProcessorPostMessageSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),window$1):void 0,isNativeContext=createIsNativeContext(isNativeAudioContext,isNativeOfflineAudioContext),decodeAudioData=createDecodeAudioData(audioBufferStore,cacheTestResult,createDataCloneError,createEncodingError,new WeakSet,getNativeContext,isNativeContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,testPromiseSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),baseAudioContextConstructor=createBaseAudioContextConstructor(addAudioWorkletModule,analyserNodeConstructor,audioBufferConstructor,audioBufferSourceNodeConstructor,biquadFilterNodeConstructor,channelMergerNodeConstructor,channelSplitterNodeConstructor,constantSourceNodeConstructor,convolverNodeConstructor,decodeAudioData,delayNodeConstructor,dynamicsCompressorNodeConstructor,gainNodeConstructor,iIRFilterNodeConstructor,minimalBaseAudioContextConstructor,oscillatorNodeConstructor,pannerNodeConstructor,periodicWaveConstructor,stereoPannerNodeConstructor,waveShaperNodeConstructor),mediaElementAudioSourceNodeConstructor=createMediaElementAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaElementAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioDestinationNodeConstructor=createMediaStreamAudioDestinationNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioDestinationNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioSourceNodeConstructor=createMediaStreamAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),createNativeMediaStreamTrackAudioSourceNode=createNativeMediaStreamTrackAudioSourceNodeFactory(createInvalidStateError,isNativeOfflineAudioContext),mediaStreamTrackAudioSourceNodeConstructor=createMediaStreamTrackAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamTrackAudioSourceNode,getNativeContext),audioContextConstructor=createAudioContextConstructor(baseAudioContextConstructor,createInvalidStateError,createNotSupportedError,createUnknownError,mediaElementAudioSourceNodeConstructor,mediaStreamAudioDestinationNodeConstructor,mediaStreamAudioSourceNodeConstructor,mediaStreamTrackAudioSourceNodeConstructor,nativeAudioContextConstructor),getUnrenderedAudioWorkletNodes=createGetUnrenderedAudioWorkletNodes(unrenderedAudioWorkletNodeStore),addUnrenderedAudioWorkletNode=createAddUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),connectMultipleOutputs=createConnectMultipleOutputs(createIndexSizeError),deleteUnrenderedAudioWorkletNode=createDeleteUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),disconnectMultipleOutputs=createDisconnectMultipleOutputs(createIndexSizeError),activeAudioWorkletNodeInputsStore=new WeakMap,getActiveAudioWorkletNodeInputs=createGetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore,getValueForKey),createNativeAudioWorkletNodeFaker=createNativeAudioWorkletNodeFakerFactory(connectMultipleOutputs,createIndexSizeError,createInvalidStateError,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,createNativeScriptProcessorNode,createNotSupportedError,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getActiveAudioWorkletNodeInputs,monitorConnections),createNativeAudioWorkletNode=createNativeAudioWorkletNodeFactory(createInvalidStateError,createNativeAudioWorkletNodeFaker,createNativeGainNode,createNotSupportedError,monitorConnections),createAudioWorkletNodeRenderer=createAudioWorkletNodeRendererFactory(connectAudioParam,connectMultipleOutputs,createNativeAudioBufferSourceNode,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,deleteUnrenderedAudioWorkletNode,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getNativeAudioNode,nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),getBackupOfflineAudioContext=createGetBackupOfflineAudioContext(backupOfflineAudioContextStore),setActiveAudioWorkletNodeInputs=createSetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore),audioWorkletNodeConstructor=isSecureContext?createAudioWorkletNodeConstructor(addUnrenderedAudioWorkletNode,audioNodeConstructor,createAudioParam,createAudioWorkletNodeRenderer,createNativeAudioWorkletNode,getAudioNodeConnections,getBackupOfflineAudioContext,getNativeContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,sanitizeAudioWorkletNodeOptions,setActiveAudioWorkletNodeInputs,testAudioWorkletNodeOptionsClonability,wrapEventListener):void 0,createNativeOfflineAudioContext=createCreateNativeOfflineAudioContext(createNotSupportedError,nativeOfflineAudioContextConstructor),startRendering=createStartRendering(audioBufferStore,cacheTestResult,getAudioNodeRenderer,getUnrenderedAudioWorkletNodes,renderNativeOfflineAudioContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),offlineAudioContextConstructor=createOfflineAudioContextConstructor(baseAudioContextConstructor,cacheTestResult,createInvalidStateError,createNativeOfflineAudioContext,startRendering),isAnyAudioContext=createIsAnyAudioContext(CONTEXT_STORE,isNativeAudioContext),isAnyAudioNode=createIsAnyAudioNode(AUDIO_NODE_STORE,isNativeAudioNode),isAnyAudioParam=createIsAnyAudioParam(AUDIO_PARAM_STORE,isNativeAudioParam),isAnyOfflineAudioContext=createIsAnyOfflineAudioContext(CONTEXT_STORE,isNativeOfflineAudioContext),isSupported=()=>createIsSupportedPromise(cacheTestResult,createTestAudioBufferCopyChannelMethodsSubarraySupport(nativeOfflineAudioContextConstructor),createTestAudioContextCloseMethodSupport(nativeAudioContextConstructor),createTestAudioContextDecodeAudioDataMethodTypeErrorSupport(nativeOfflineAudioContextConstructor),createTestAudioContextOptionsSupport(nativeAudioContextConstructor),createTestAudioNodeConnectMethodSupport(nativeOfflineAudioContextConstructor),createTestAudioWorkletProcessorNoOutputsSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),createTestChannelMergerNodeChannelCountSupport(nativeOfflineAudioContextConstructor),createTestConstantSourceNodeAccurateSchedulingSupport(nativeOfflineAudioContextConstructor),createTestConvolverNodeBufferReassignabilitySupport(nativeOfflineAudioContextConstructor),createTestConvolverNodeChannelCountSupport(nativeOfflineAudioContextConstructor),testDomExceptionConstructorSupport,createTestIsSecureContextSupport(window$1),createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport(nativeAudioContextConstructor),createTestStereoPannerNodeDefaultValueSupport(nativeOfflineAudioContextConstructor),testTransferablesSupport);function isUndef(_){return _===void 0}function isDefined(_){return _!==void 0}function isFunction(_){return typeof _=="function"}function isNumber(_){return typeof _=="number"}function isObject(_){return Object.prototype.toString.call(_)==="[object Object]"&&_.constructor===Object}function isBoolean(_){return typeof _=="boolean"}function isArray(_){return Array.isArray(_)}function isString(_){return typeof _=="string"}function isNote(_){return isString(_)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(_)}function assert(_,d){if(!_)throw new Error(d)}function assertRange(_,d,g=1/0){if(!(d<=_&&_<=g))throw new RangeError(`Value must be within [${d}, ${g}], got: ${_}`)}function assertContextRunning(_){!_.isOffline&&_.state!=="running"&&warn('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let isInsideScheduledCallback=!1,printedScheduledWarning=!1;function enterScheduledCallback(_){isInsideScheduledCallback=_}function assertUsedScheduleTime(_){isUndef(_)&&isInsideScheduledCallback&&!printedScheduledWarning&&(printedScheduledWarning=!0,warn("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let defaultLogger=console;function setLogger(_){defaultLogger=_}function log(..._){defaultLogger.log(..._)}function warn(..._){defaultLogger.warn(..._)}const Debug=Object.freeze(Object.defineProperty({__proto__:null,assert,assertContextRunning,assertRange,assertUsedScheduleTime,enterScheduledCallback,log,setLogger,warn},Symbol.toStringTag,{value:"Module"}));function createAudioContext(_){return new audioContextConstructor(_)}function createOfflineAudioContext(_,d,g){return new offlineAudioContextConstructor(_,d,g)}const theWindow=typeof self=="object"?self:null,hasAudioContext=theWindow&&(theWindow.hasOwnProperty("AudioContext")||theWindow.hasOwnProperty("webkitAudioContext"));function createAudioWorkletNode(_,d,g){return assert(isDefined(audioWorkletNodeConstructor),"AudioWorkletNode only works in a secure context (https or localhost)"),new(_ instanceof(theWindow==null?void 0:theWindow.BaseAudioContext)?theWindow==null?void 0:theWindow.AudioWorkletNode:audioWorkletNodeConstructor)(_,d,g)}var __assign=function(){return __assign=Object.assign||function(d){for(var g,b=1,$=arguments.length;b<$;b++){g=arguments[b];for(var j in g)Object.prototype.hasOwnProperty.call(g,j)&&(d[j]=g[j])}return d},__assign.apply(this,arguments)};function __rest(_,d){var g={};for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&d.indexOf(b)<0&&(g[b]=_[b]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var $=0,b=Object.getOwnPropertySymbols(_);$<b.length;$++)d.indexOf(b[$])<0&&Object.prototype.propertyIsEnumerable.call(_,b[$])&&(g[b[$]]=_[b[$]]);return g}function __decorate(_,d,g,b){var $=arguments.length,j=$<3?d:b===null?b=Object.getOwnPropertyDescriptor(d,g):b,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(_,d,g,b);else for(var et=_.length-1;et>=0;et--)(_e=_[et])&&(j=($<3?_e(j):$>3?_e(d,g,j):_e(d,g))||j);return $>3&&j&&Object.defineProperty(d,g,j),j}function __awaiter(_,d,g,b){function $(j){return j instanceof g?j:new g(function(_e){_e(j)})}return new(g||(g=Promise))(function(j,_e){function et(it){try{nt(b.next(it))}catch(rt){_e(rt)}}function tt(it){try{nt(b.throw(it))}catch(rt){_e(rt)}}function nt(it){it.done?j(it.value):$(it.value).then(et,tt)}nt((b=b.apply(_,d||[])).next())})}function __spreadArray(_,d,g){if(g||arguments.length===2)for(var b=0,$=d.length,j;b<$;b++)(j||!(b in d))&&(j||(j=Array.prototype.slice.call(d,0,b)),j[b]=d[b]);return _.concat(j||Array.prototype.slice.call(d))}typeof SuppressedError=="function"&&SuppressedError;class Ticker{constructor(d,g,b,$){this._callback=d,this._type=g,this._minimumUpdateInterval=Math.max(128/($||44100),.001),this.updateInterval=b,this._createClock()}_createWorker(){const d=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),g=URL.createObjectURL(d),b=new Worker(g);b.onmessage=this._callback.bind(this),this._worker=b}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(d){var g;this._updateInterval=Math.max(d,this._minimumUpdateInterval),this._type==="worker"&&((g=this._worker)===null||g===void 0||g.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(d){this._disposeClock(),this._type=d,this._createClock()}dispose(){this._disposeClock()}}function isAudioParam(_){return isAnyAudioParam(_)}function isAudioNode(_){return isAnyAudioNode(_)}function isOfflineAudioContext(_){return isAnyOfflineAudioContext(_)}function isAudioContext(_){return isAnyAudioContext(_)}function isAudioBuffer(_){return _ instanceof audioBufferConstructor}function noCopy(_,d){return _==="value"||isAudioParam(d)||isAudioNode(d)||isAudioBuffer(d)}function deepMerge(_,...d){if(!d.length)return _;const g=d.shift();if(isObject(_)&&isObject(g))for(const b in g)noCopy(b,g[b])?_[b]=g[b]:isObject(g[b])?(_[b]||Object.assign(_,{[b]:{}}),deepMerge(_[b],g[b])):Object.assign(_,{[b]:g[b]});return deepMerge(_,...d)}function deepEquals(_,d){return _.length===d.length&&_.every((g,b)=>d[b]===g)}function optionsFromArguments(_,d,g=[],b){const $={},j=Array.from(d);if(isObject(j[0])&&b&&!Reflect.has(j[0],b)&&(Object.keys(j[0]).some(et=>Reflect.has(_,et))||(deepMerge($,{[b]:j[0]}),g.splice(g.indexOf(b),1),j.shift())),j.length===1&&isObject(j[0]))deepMerge($,j[0]);else for(let _e=0;_e<g.length;_e++)isDefined(j[_e])&&($[g[_e]]=j[_e]);return deepMerge(_,$)}function getDefaultsFromInstance(_){return _.constructor.getDefaults()}function defaultArg(_,d){return isUndef(_)?d:_}function omitFromObject(_,d){return d.forEach(g=>{Reflect.has(_,g)&&delete _[g]}),_}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */let Tone$1=class{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...d){(this.debug||theWindow&&this.toString()===theWindow.TONE_DEBUG_CLASS)&&log(this,...d)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}};Tone$1.version=version;const EPSILON=1e-6;function GT(_,d){return _>d+EPSILON}function GTE(_,d){return GT(_,d)||EQ(_,d)}function LT(_,d){return _+EPSILON<d}function EQ(_,d){return Math.abs(_-d)<EPSILON}function clamp$2(_,d,g){return Math.max(Math.min(_,g),d)}class Timeline extends Tone$1{constructor(){super(),this.name="Timeline",this._timeline=[];const d=optionsFromArguments(Timeline.getDefaults(),arguments,["memory"]);this.memory=d.memory,this.increasing=d.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(d){if(assert(Reflect.has(d,"time"),"Timeline: events must have a time attribute"),d.time=d.time.valueOf(),this.increasing&&this.length){const g=this._timeline[this.length-1];assert(GTE(d.time,g.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(d)}else{const g=this._search(d.time);this._timeline.splice(g+1,0,d)}if(this.length>this.memory){const g=this.length-this.memory;this._timeline.splice(0,g)}return this}remove(d){const g=this._timeline.indexOf(d);return g!==-1&&this._timeline.splice(g,1),this}get(d,g="time"){const b=this._search(d,g);return b!==-1?this._timeline[b]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(d,g="time"){const b=this._search(d,g);return b+1<this._timeline.length?this._timeline[b+1]:null}getBefore(d){const g=this._timeline.length;if(g>0&&this._timeline[g-1].time<d)return this._timeline[g-1];const b=this._search(d);return b-1>=0?this._timeline[b-1]:null}cancel(d){if(this._timeline.length>1){let g=this._search(d);if(g>=0)if(EQ(this._timeline[g].time,d)){for(let b=g;b>=0&&EQ(this._timeline[b].time,d);b--)g=b;this._timeline=this._timeline.slice(0,g)}else this._timeline=this._timeline.slice(0,g+1);else this._timeline=[]}else this._timeline.length===1&&GTE(this._timeline[0].time,d)&&(this._timeline=[]);return this}cancelBefore(d){const g=this._search(d);return g>=0&&(this._timeline=this._timeline.slice(g+1)),this}previousEvent(d){const g=this._timeline.indexOf(d);return g>0?this._timeline[g-1]:null}_search(d,g="time"){if(this._timeline.length===0)return-1;let b=0;const $=this._timeline.length;let j=$;if($>0&&this._timeline[$-1][g]<=d)return $-1;for(;b<j;){let _e=Math.floor(b+(j-b)/2);const et=this._timeline[_e],tt=this._timeline[_e+1];if(EQ(et[g],d)){for(let nt=_e;nt<this._timeline.length;nt++){const it=this._timeline[nt];if(EQ(it[g],d))_e=nt;else break}return _e}else{if(LT(et[g],d)&&GT(tt[g],d))return _e;GT(et[g],d)?j=_e:b=_e+1}}return-1}_iterate(d,g=0,b=this._timeline.length-1){this._timeline.slice(g,b+1).forEach(d)}forEach(d){return this._iterate(d),this}forEachBefore(d,g){const b=this._search(d);return b!==-1&&this._iterate(g,0,b),this}forEachAfter(d,g){const b=this._search(d);return this._iterate(g,b+1),this}forEachBetween(d,g,b){let $=this._search(d),j=this._search(g);return $!==-1&&j!==-1?(this._timeline[$].time!==d&&($+=1),this._timeline[j].time===g&&(j-=1),this._iterate(b,$,j)):$===-1&&this._iterate(b,0,j),this}forEachFrom(d,g){let b=this._search(d);for(;b>=0&&this._timeline[b].time>=d;)b--;return this._iterate(g,b+1),this}forEachAtTime(d,g){const b=this._search(d);if(b!==-1&&EQ(this._timeline[b].time,d)){let $=b;for(let j=b;j>=0&&EQ(this._timeline[j].time,d);j--)$=j;this._iterate(j=>{g(j)},$,b)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const notifyNewContext=[];function onContextInit(_){notifyNewContext.push(_)}function initializeContext(_){notifyNewContext.forEach(d=>d(_))}const notifyCloseContext=[];function onContextClose(_){notifyCloseContext.push(_)}function closeContext(_){notifyCloseContext.forEach(d=>d(_))}class Emitter extends Tone$1{constructor(){super(...arguments),this.name="Emitter"}on(d,g){return d.split(/\W+/).forEach($=>{isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty($)||(this._events[$]=[]),this._events[$].push(g)}),this}once(d,g){const b=(...$)=>{g(...$),this.off(d,b)};return this.on(d,b),this}off(d,g){return d.split(/\W+/).forEach($=>{if(isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty($))if(isUndef(g))this._events[$]=[];else{const j=this._events[$];for(let _e=j.length-1;_e>=0;_e--)j[_e]===g&&j.splice(_e,1)}}),this}emit(d,...g){if(this._events&&this._events.hasOwnProperty(d)){const b=this._events[d].slice(0);for(let $=0,j=b.length;$<j;$++)b[$].apply(this,g)}return this}static mixin(d){["on","once","off","emit"].forEach(g=>{const b=Object.getOwnPropertyDescriptor(Emitter.prototype,g);Object.defineProperty(d.prototype,g,b)})}dispose(){return super.dispose(),this._events=void 0,this}}class BaseContext extends Emitter{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Context extends BaseContext{constructor(){var d,g;super(),this.name="Context",this._constants=new Map,this._timeouts=new Timeline,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const b=optionsFromArguments(Context.getDefaults(),arguments,["context"]);b.context?(this._context=b.context,this._latencyHint=((d=arguments[0])===null||d===void 0?void 0:d.latencyHint)||""):(this._context=createAudioContext({latencyHint:b.latencyHint}),this._latencyHint=b.latencyHint),this._ticker=new Ticker(this.emit.bind(this,"tick"),b.clockSource,b.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((g=arguments[0])===null||g===void 0)&&g.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=b.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(initializeContext(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(d,g,b){return this._context.createBuffer(d,g,b)}createChannelMerger(d){return this._context.createChannelMerger(d)}createChannelSplitter(d){return this._context.createChannelSplitter(d)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(d){return this._context.createDelay(d)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(d,g){return this._context.createIIRFilter(d,g)}createPanner(){return this._context.createPanner()}createPeriodicWave(d,g,b){return this._context.createPeriodicWave(d,g,b)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(d){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(d)}createMediaElementSource(d){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(d)}createMediaStreamDestination(){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(d){return this._context.decodeAudioData(d)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(d){assert(!this._initialized,"The listener cannot be set after initialization."),this._listener=d}get transport(){return this.initialize(),this._transport}set transport(d){assert(!this._initialized,"The transport cannot be set after initialization."),this._transport=d}get draw(){return this.initialize(),this._draw}set draw(d){assert(!this._initialized,"Draw cannot be set after initialization."),this._draw=d}get destination(){return this.initialize(),this._destination}set destination(d){assert(!this._initialized,"The destination cannot be set after initialization."),this._destination=d}createAudioWorkletNode(d,g){return createAudioWorkletNode(this.rawContext,d,g)}addAudioWorkletModule(d){return __awaiter(this,void 0,void 0,function*(){assert(isDefined(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(d)),yield this._workletPromise})}workletsAreReady(){return __awaiter(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(d){this._ticker.updateInterval=d}get clockSource(){return this._ticker.type}set clockSource(d){this._ticker.type=d}get lookAhead(){return this._lookAhead}set lookAhead(d){this._lookAhead=d,this.updateInterval=d?d/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return isAudioContext(this._context)?this._context.resume():Promise.resolve()}close(){return __awaiter(this,void 0,void 0,function*(){isAudioContext(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&closeContext(this)})}getConstant(d){if(this._constants.has(d))return this._constants.get(d);{const g=this._context.createBuffer(1,128,this._context.sampleRate),b=g.getChannelData(0);for(let j=0;j<b.length;j++)b[j]=d;const $=this._context.createBufferSource();return $.channelCount=1,$.channelCountMode="explicit",$.buffer=g,$.loop=!0,$.start(0),this._constants.set(d,$),$}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(d=>this._constants[d].disconnect()),this.close(),this}_timeoutLoop(){const d=this.now();let g=this._timeouts.peek();for(;this._timeouts.length&&g&&g.time<=d;)g.callback(),this._timeouts.shift(),g=this._timeouts.peek()}setTimeout(d,g){this._timeoutIds++;const b=this.now();return this._timeouts.add({callback:d,id:this._timeoutIds,time:b+g}),this._timeoutIds}clearTimeout(d){return this._timeouts.forEach(g=>{g.id===d&&this._timeouts.remove(g)}),this}clearInterval(d){return this.clearTimeout(d)}setInterval(d,g){const b=++this._timeoutIds,$=()=>{const j=this.now();this._timeouts.add({callback:()=>{d(),$()},id:b,time:j+g})};return $(),b}}class DummyContext extends BaseContext{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(d,g,b){return{}}createChannelMerger(d){return{}}createChannelSplitter(d){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(d){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(d,g){return{}}createPanner(){return{}}createPeriodicWave(d,g,b){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(d){return{}}createMediaElementSource(d){return{}}createMediaStreamDestination(){return{}}decodeAudioData(d){return Promise.resolve({})}createAudioWorkletNode(d,g){return{}}get rawContext(){return{}}addAudioWorkletModule(d){return __awaiter(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(d,g){return 0}clearTimeout(d){return this}setInterval(d,g){return 0}clearInterval(d){return this}getConstant(d){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(d){}get destination(){return{}}set destination(d){}now(){return 0}immediate(){return 0}}function readOnly$1(_,d){isArray(d)?d.forEach(g=>readOnly$1(_,g)):Object.defineProperty(_,d,{enumerable:!0,writable:!1})}function writable(_,d){isArray(d)?d.forEach(g=>writable(_,g)):Object.defineProperty(_,d,{writable:!0})}const noOp=()=>{};class ToneAudioBuffer extends Tone$1{constructor(){super(),this.name="ToneAudioBuffer",this.onload=noOp;const d=optionsFromArguments(ToneAudioBuffer.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=d.reverse,this.onload=d.onload,isString(d.url)?this.load(d.url).catch(d.onerror):d.url&&this.set(d.url)}static getDefaults(){return{onerror:noOp,onload:noOp,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:getContext().sampleRate}set(d){return d instanceof ToneAudioBuffer?d.loaded?this._buffer=d.get():d.onload=()=>{this.set(d),this.onload(this)}:this._buffer=d,this._reversed&&this._reverse(),this}get(){return this._buffer}load(d){return __awaiter(this,void 0,void 0,function*(){const g=ToneAudioBuffer.load(d).then(b=>{this.set(b),this.onload(this)});ToneAudioBuffer.downloads.push(g);try{yield g}finally{const b=ToneAudioBuffer.downloads.indexOf(g);ToneAudioBuffer.downloads.splice(b,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(d){const g=isArray(d)&&d[0].length>0,b=g?d.length:1,$=g?d[0].length:d.length,j=getContext(),_e=j.createBuffer(b,$,j.sampleRate),et=!g&&b===1?[d]:d;for(let tt=0;tt<b;tt++)_e.copyToChannel(et[tt],tt);return this._buffer=_e,this}toMono(d){if(isNumber(d))this.fromArray(this.toArray(d));else{let g=new Float32Array(this.length);const b=this.numberOfChannels;for(let $=0;$<b;$++){const j=this.toArray($);for(let _e=0;_e<j.length;_e++)g[_e]+=j[_e]}g=g.map($=>$/b),this.fromArray(g)}return this}toArray(d){if(isNumber(d))return this.getChannelData(d);if(this.numberOfChannels===1)return this.toArray(0);{const g=[];for(let b=0;b<this.numberOfChannels;b++)g[b]=this.getChannelData(b);return g}}getChannelData(d){return this._buffer?this._buffer.getChannelData(d):new Float32Array(0)}slice(d,g=this.duration){assert(this.loaded,"Buffer is not loaded");const b=Math.floor(d*this.sampleRate),$=Math.floor(g*this.sampleRate);assert(b<$,"The start time must be less than the end time");const j=$-b,_e=getContext().createBuffer(this.numberOfChannels,j,this.sampleRate);for(let et=0;et<this.numberOfChannels;et++)_e.copyToChannel(this.getChannelData(et).subarray(b,$),et);return new ToneAudioBuffer(_e)}_reverse(){if(this.loaded)for(let d=0;d<this.numberOfChannels;d++)this.getChannelData(d).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(d){this._reversed!==d&&(this._reversed=d,this._reverse())}static fromArray(d){return new ToneAudioBuffer().fromArray(d)}static fromUrl(d){return __awaiter(this,void 0,void 0,function*(){return yield new ToneAudioBuffer().load(d)})}static load(d){return __awaiter(this,void 0,void 0,function*(){const g=d.match(/\[([^\]\[]+\|.+)\]$/);if(g){const tt=g[1].split("|");let nt=tt[0];for(const it of tt)if(ToneAudioBuffer.supportsType(it)){nt=it;break}d=d.replace(g[0],nt)}const b=ToneAudioBuffer.baseUrl===""||ToneAudioBuffer.baseUrl.endsWith("/")?ToneAudioBuffer.baseUrl:ToneAudioBuffer.baseUrl+"/",$=document.createElement("a");$.href=b+d,$.pathname=($.pathname+$.hash).split("/").map(encodeURIComponent).join("/");const j=yield fetch($.href);if(!j.ok)throw new Error(`could not load url: ${d}`);const _e=yield j.arrayBuffer();return yield getContext().decodeAudioData(_e)})}static supportsType(d){const g=d.split("."),b=g[g.length-1];return document.createElement("audio").canPlayType("audio/"+b)!==""}static loaded(){return __awaiter(this,void 0,void 0,function*(){for(yield Promise.resolve();ToneAudioBuffer.downloads.length;)yield ToneAudioBuffer.downloads[0]})}}ToneAudioBuffer.baseUrl="";ToneAudioBuffer.downloads=[];class OfflineContext extends Context{constructor(){super({clockSource:"offline",context:isOfflineAudioContext(arguments[0])?arguments[0]:createOfflineAudioContext(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:isOfflineAudioContext(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=isOfflineAudioContext(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(d){return __awaiter(this,void 0,void 0,function*(){let g=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,g++;const b=Math.floor(this.sampleRate/128);d&&g%b===0&&(yield new Promise($=>setTimeout($,1)))}})}render(){return __awaiter(this,arguments,void 0,function*(d=!0){yield this.workletsAreReady(),yield this._renderClock(d);const g=yield this._context.startRendering();return new ToneAudioBuffer(g)})}close(){return Promise.resolve()}}const dummyContext=new DummyContext;let globalContext=dummyContext;function getContext(){return globalContext===dummyContext&&hasAudioContext&&setContext(new Context),globalContext}function setContext(_,d=!1){d&&globalContext.dispose(),isAudioContext(_)?globalContext=new Context(_):isOfflineAudioContext(_)?globalContext=new OfflineContext(_):globalContext=_}function start(){return globalContext.resume()}if(theWindow&&!theWindow.TONE_SILENCE_LOGGING){const d=` * Tone.js v${version} * `;console.log(`%c${d}`,"background: #000; color: #fff")}function dbToGain(_){return Math.pow(10,_/20)}function gainToDb(_){return 20*(Math.log(_)/Math.LN10)}function intervalToFrequencyRatio(_){return Math.pow(2,_/12)}let A4=440;function getA4(){return A4}function setA4(_){A4=_}function ftom(_){return Math.round(ftomf(_))}function ftomf(_){return 69+12*Math.log2(_/A4)}function mtof(_){return A4*Math.pow(2,(_-69)/12)}class TimeBaseClass extends Tone$1{constructor(d,g,b){super(),this.defaultUnits="s",this._val=g,this._units=b,this.context=d,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:d=>this._frequencyToUnits(parseFloat(d)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:d=>this._ticksToUnits(parseInt(d,10)),regexp:/^(\d+)i$/i},m:{method:d=>this._beatsToUnits(parseInt(d,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(d,g)=>{const b=parseInt(d,10),$=g==="."?1.5:1;return b===1?this._beatsToUnits(this._getTimeSignature())*$:this._beatsToUnits(4/b)*$},regexp:/^(\d+)n(\.?)$/i},number:{method:d=>this._expressions[this.defaultUnits].method.call(this,d),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:d=>this._secondsToUnits(parseFloat(d)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:d=>parseInt(d,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:d=>{const g=parseInt(d,10);return this._beatsToUnits(8/(Math.floor(g)*3))},regexp:/^(\d+)t$/i},tr:{method:(d,g,b)=>{let $=0;return d&&d!=="0"&&($+=this._beatsToUnits(this._getTimeSignature()*parseFloat(d))),g&&g!=="0"&&($+=this._beatsToUnits(parseFloat(g))),b&&b!=="0"&&($+=this._beatsToUnits(parseFloat(b)/4)),$},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof TimeBaseClass&&this.fromType(this._val),isUndef(this._val))return this._noArg();if(isString(this._val)&&isUndef(this._units)){for(const d in this._expressions)if(this._expressions[d].regexp.test(this._val.trim())){this._units=d;break}}else if(isObject(this._val)){let d=0;for(const g in this._val)if(isDefined(this._val[g])){const b=this._val[g],$=new this.constructor(this.context,g).valueOf()*b;d+=$}return d}if(isDefined(this._units)){const d=this._expressions[this._units],g=this._val.toString().trim().match(d.regexp);return g?d.method.apply(this,g.slice(1)):d.method.call(this,this._val)}else return isString(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(d){return 1/d}_beatsToUnits(d){return 60/this._getBpm()*d}_secondsToUnits(d){return d}_ticksToUnits(d){return d*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(d){switch(this._units=void 0,this.defaultUnits){case"s":this._val=d.toSeconds();break;case"i":this._val=d.toTicks();break;case"hz":this._val=d.toFrequency();break;case"midi":this._val=d.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class TimeClass extends TimeBaseClass{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:d=>this._now()+new this.constructor(this.context,d).valueOf(),regexp:/^\+(.+)/},quantize:{method:d=>{const g=new TimeClass(this.context,d).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(g))},regexp:/^@(.+)/}})}quantize(d,g=1){const b=new this.constructor(this.context,d).valueOf(),$=this.valueOf(),et=Math.round($/b)*b-$;return $+et*g}toNotation(){const d=this.toSeconds(),g=["1m"];for(let j=1;j<9;j++){const _e=Math.pow(2,j);g.push(_e+"n."),g.push(_e+"n"),g.push(_e+"t")}g.push("0");let b=g[0],$=new TimeClass(this.context,g[0]).toSeconds();return g.forEach(j=>{const _e=new TimeClass(this.context,j).toSeconds();Math.abs(_e-d)<Math.abs($-d)&&(b=j,$=_e)}),b}toBarsBeatsSixteenths(){const d=this._beatsToUnits(1);let g=this.valueOf()/d;g=parseFloat(g.toFixed(4));const b=Math.floor(g/this._getTimeSignature());let $=g%1*4;g=Math.floor(g)%this._getTimeSignature();const j=$.toString();return j.length>3&&($=parseFloat(parseFloat(j).toFixed(3))),[b,g,$].join(":")}toTicks(){const d=this._beatsToUnits(1);return this.valueOf()/d*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return ftom(this.toFrequency())}_now(){return this.context.now()}}function Time(_,d){return new TimeClass(getContext(),_,d)}class FrequencyClass extends TimeClass{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return getA4()}static set A4(d){setA4(d)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(d){return this.defaultUnits==="midi"?d:FrequencyClass.mtof(d)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(d,g){const $=noteToScaleIndex[d.toLowerCase()]+(parseInt(g,10)+1)*12;return this.defaultUnits==="midi"?$:FrequencyClass.mtof($)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(d,g,b){let $=1;return d&&d!=="0"&&($*=this._beatsToUnits(this._getTimeSignature()*parseFloat(d))),g&&g!=="0"&&($*=this._beatsToUnits(parseFloat(g))),b&&b!=="0"&&($*=this._beatsToUnits(parseFloat(b)/4)),$}}})}transpose(d){return new FrequencyClass(this.context,this.valueOf()*intervalToFrequencyRatio(d))}harmonize(d){return d.map(g=>this.transpose(g))}toMidi(){return ftom(this.valueOf())}toNote(){const d=this.toFrequency(),g=Math.log2(d/FrequencyClass.A4);let b=Math.round(12*g)+57;const $=Math.floor(b/12);return $<0&&(b+=-12*$),scaleIndexToNote[b%12]+$.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const d=this._beatsToUnits(1),g=this.valueOf()/d;return Math.floor(g*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(d){return d}_ticksToUnits(d){return 1/(d*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(d){return 1/super._beatsToUnits(d)}_secondsToUnits(d){return 1/d}static mtof(d){return mtof(d)}static ftom(d){return ftom(d)}}const noteToScaleIndex={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},scaleIndexToNote=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Frequency(_,d){return new FrequencyClass(getContext(),_,d)}class TransportTimeClass extends TimeClass{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function TransportTime(_,d){return new TransportTimeClass(getContext(),_,d)}class ToneWithContext extends Tone$1{constructor(){super();const d=optionsFromArguments(ToneWithContext.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=d.context}static getDefaults(){return{context:getContext()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(d){return assertUsedScheduleTime(d),new TimeClass(this.context,d).toSeconds()}toFrequency(d){return new FrequencyClass(this.context,d).toFrequency()}toTicks(d){return new TransportTimeClass(this.context,d).toTicks()}_getPartialProperties(d){const g=this.get();return Object.keys(g).forEach(b=>{isUndef(d[b])&&delete g[b]}),g}get(){const d=getDefaultsFromInstance(this);return Object.keys(d).forEach(g=>{if(Reflect.has(this,g)){const b=this[g];isDefined(b)&&isDefined(b.value)&&isDefined(b.setValueAtTime)?d[g]=b.value:b instanceof ToneWithContext?d[g]=b._getPartialProperties(d[g]):isArray(b)||isNumber(b)||isString(b)||isBoolean(b)?d[g]=b:delete d[g]}}),d}set(d){return Object.keys(d).forEach(g=>{Reflect.has(this,g)&&isDefined(this[g])&&(this[g]&&isDefined(this[g].value)&&isDefined(this[g].setValueAtTime)?this[g].value!==d[g]&&(this[g].value=d[g]):this[g]instanceof ToneWithContext?this[g].set(d[g]):this[g]=d[g])}),this}}class StateTimeline extends Timeline{constructor(d="stopped"){super(),this.name="StateTimeline",this._initial=d,this.setStateAtTime(this._initial,0)}getValueAtTime(d){const g=this.get(d);return g!==null?g.state:this._initial}setStateAtTime(d,g,b){return assertRange(g,0),this.add(Object.assign({},b,{state:d,time:g})),this}getLastState(d,g){const b=this._search(g);for(let $=b;$>=0;$--){const j=this._timeline[$];if(j.state===d)return j}}getNextState(d,g){const b=this._search(g);if(b!==-1)for(let $=b;$<this._timeline.length;$++){const j=this._timeline[$];if(j.state===d)return j}}}class Param extends ToneWithContext{constructor(){const d=optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"]);for(super(d),this.name="Param",this.overridden=!1,this._minOutput=1e-7,assert(isDefined(d.param)&&(isAudioParam(d.param)||d.param instanceof Param),"param must be an AudioParam");!isAudioParam(d.param);)d.param=d.param._param;this._swappable=isDefined(d.swappable)?d.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=d.param,this.input.connect(this._param)):this._param=this.input=d.param,this._events=new Timeline(1e3),this._initialValue=this._param.defaultValue,this.units=d.units,this.convert=d.convert,this._minValue=d.minValue,this._maxValue=d.maxValue,isDefined(d.value)&&d.value!==this._toType(this._initialValue)&&this.setValueAtTime(d.value,0)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{convert:!0,units:"number"})}get value(){const d=this.now();return this.getValueAtTime(d)}set value(d){this.cancelScheduledValues(this.now()),this.setValueAtTime(d,this.now())}get minValue(){return isDefined(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return isDefined(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(d,g){return this.units===g}_assertRange(d){return isDefined(this.maxValue)&&isDefined(this.minValue)&&assertRange(d,this._fromType(this.minValue),this._fromType(this.maxValue)),d}_fromType(d){return this.convert&&!this.overridden?this._is(d,"time")?this.toSeconds(d):this._is(d,"decibels")?dbToGain(d):this._is(d,"frequency")?this.toFrequency(d):d:this.overridden?0:d}_toType(d){return this.convert&&this.units==="decibels"?gainToDb(d):d}setValueAtTime(d,g){const b=this.toSeconds(g),$=this._fromType(d);return assert(isFinite($)&&isFinite(b),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(d)}, ${JSON.stringify(g)}`),this._assertRange($),this.log(this.units,"setValueAtTime",d,b),this._events.add({time:b,type:"setValueAtTime",value:$}),this._param.setValueAtTime($,b),this}getValueAtTime(d){const g=Math.max(this.toSeconds(d),0),b=this._events.getAfter(g),$=this._events.get(g);let j=this._initialValue;if($===null)j=this._initialValue;else if($.type==="setTargetAtTime"&&(b===null||b.type==="setValueAtTime")){const _e=this._events.getBefore($.time);let et;_e===null?et=this._initialValue:et=_e.value,$.type==="setTargetAtTime"&&(j=this._exponentialApproach($.time,et,$.value,$.constant,g))}else if(b===null)j=$.value;else if(b.type==="linearRampToValueAtTime"||b.type==="exponentialRampToValueAtTime"){let _e=$.value;if($.type==="setTargetAtTime"){const et=this._events.getBefore($.time);et===null?_e=this._initialValue:_e=et.value}b.type==="linearRampToValueAtTime"?j=this._linearInterpolate($.time,_e,b.time,b.value,g):j=this._exponentialInterpolate($.time,_e,b.time,b.value,g)}else j=$.value;return this._toType(j)}setRampPoint(d){d=this.toSeconds(d);let g=this.getValueAtTime(d);return this.cancelAndHoldAtTime(d),this._fromType(g)===0&&(g=this._toType(this._minOutput)),this.setValueAtTime(g,d),this}linearRampToValueAtTime(d,g){const b=this._fromType(d),$=this.toSeconds(g);return assert(isFinite(b)&&isFinite($),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(d)}, ${JSON.stringify(g)}`),this._assertRange(b),this._events.add({time:$,type:"linearRampToValueAtTime",value:b}),this.log(this.units,"linearRampToValueAtTime",d,$),this._param.linearRampToValueAtTime(b,$),this}exponentialRampToValueAtTime(d,g){let b=this._fromType(d);b=EQ(b,0)?this._minOutput:b,this._assertRange(b);const $=this.toSeconds(g);return assert(isFinite(b)&&isFinite($),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(d)}, ${JSON.stringify(g)}`),this._events.add({time:$,type:"exponentialRampToValueAtTime",value:b}),this.log(this.units,"exponentialRampToValueAtTime",d,$),this._param.exponentialRampToValueAtTime(b,$),this}exponentialRampTo(d,g,b){return b=this.toSeconds(b),this.setRampPoint(b),this.exponentialRampToValueAtTime(d,b+this.toSeconds(g)),this}linearRampTo(d,g,b){return b=this.toSeconds(b),this.setRampPoint(b),this.linearRampToValueAtTime(d,b+this.toSeconds(g)),this}targetRampTo(d,g,b){return b=this.toSeconds(b),this.setRampPoint(b),this.exponentialApproachValueAtTime(d,b,g),this}exponentialApproachValueAtTime(d,g,b){g=this.toSeconds(g),b=this.toSeconds(b);const $=Math.log(b+1)/Math.log(200);return this.setTargetAtTime(d,g,$),this.cancelAndHoldAtTime(g+b*.9),this.linearRampToValueAtTime(d,g+b),this}setTargetAtTime(d,g,b){const $=this._fromType(d);assert(isFinite(b)&&b>0,"timeConstant must be a number greater than 0");const j=this.toSeconds(g);return this._assertRange($),assert(isFinite($)&&isFinite(j),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(d)}, ${JSON.stringify(g)}`),this._events.add({constant:b,time:j,type:"setTargetAtTime",value:$}),this.log(this.units,"setTargetAtTime",d,j,b),this._param.setTargetAtTime($,j,b),this}setValueCurveAtTime(d,g,b,$=1){b=this.toSeconds(b),g=this.toSeconds(g);const j=this._fromType(d[0])*$;this.setValueAtTime(this._toType(j),g);const _e=b/(d.length-1);for(let et=1;et<d.length;et++){const tt=this._fromType(d[et])*$;this.linearRampToValueAtTime(this._toType(tt),g+et*_e)}return this}cancelScheduledValues(d){const g=this.toSeconds(d);return assert(isFinite(g),`Invalid argument to cancelScheduledValues: ${JSON.stringify(d)}`),this._events.cancel(g),this._param.cancelScheduledValues(g),this.log(this.units,"cancelScheduledValues",g),this}cancelAndHoldAtTime(d){const g=this.toSeconds(d),b=this._fromType(this.getValueAtTime(g));assert(isFinite(g),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(d)}`),this.log(this.units,"cancelAndHoldAtTime",g,"value="+b);const $=this._events.get(g),j=this._events.getAfter(g);return $&&EQ($.time,g)?j?(this._param.cancelScheduledValues(j.time),this._events.cancel(j.time)):(this._param.cancelAndHoldAtTime(g),this._events.cancel(g+this.sampleTime)):j&&(this._param.cancelScheduledValues(j.time),this._events.cancel(j.time),j.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(b),g):j.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(b),g)),this._events.add({time:g,type:"setValueAtTime",value:b}),this._param.setValueAtTime(b,g),this}rampTo(d,g=.1,b){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(d,g,b):this.linearRampTo(d,g,b),this}apply(d){const g=this.context.currentTime;d.setValueAtTime(this.getValueAtTime(g),g);const b=this._events.get(g);if(b&&b.type==="setTargetAtTime"){const $=this._events.getAfter(b.time),j=$?$.time:g+2,_e=(j-g)/10;for(let et=g;et<j;et+=_e)d.linearRampToValueAtTime(this.getValueAtTime(et),et)}return this._events.forEachAfter(this.context.currentTime,$=>{$.type==="cancelScheduledValues"?d.cancelScheduledValues($.time):$.type==="setTargetAtTime"?d.setTargetAtTime($.value,$.time,$.constant):d[$.type]($.value,$.time)}),this}setParam(d){assert(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const g=this.input;return g.disconnect(this._param),this.apply(d),this._param=d,g.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(d,g,b,$,j){return b+(g-b)*Math.exp(-(j-d)/$)}_linearInterpolate(d,g,b,$,j){return g+($-g)*((j-d)/(b-d))}_exponentialInterpolate(d,g,b,$,j){return g*Math.pow($/g,(j-d)/(b-d))}}class ToneAudioNode extends ToneWithContext{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return isDefined(this.input)?isAudioParam(this.input)||this.input instanceof Param?1:this.input.numberOfInputs:0}get numberOfOutputs(){return isDefined(this.output)?this.output.numberOfOutputs:0}_isAudioNode(d){return isDefined(d)&&(d instanceof ToneAudioNode||isAudioNode(d))}_getInternalNodes(){const d=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&d.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&d.push(this.output),d}_setChannelProperties(d){this._getInternalNodes().forEach(b=>{b.channelCount=d.channelCount,b.channelCountMode=d.channelCountMode,b.channelInterpretation=d.channelInterpretation})}_getChannelProperties(){const d=this._getInternalNodes();assert(d.length>0,"ToneAudioNode does not have any internal nodes");const g=d[0];return{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(d){const g=this._getChannelProperties();this._setChannelProperties(Object.assign(g,{channelCount:d}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(d){const g=this._getChannelProperties();this._setChannelProperties(Object.assign(g,{channelCountMode:d}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(d){const g=this._getChannelProperties();this._setChannelProperties(Object.assign(g,{channelInterpretation:d}))}connect(d,g=0,b=0){return connect(this,d,g,b),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return warn("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(d,g=0,b=0){return disconnect(this,d,g,b),this}chain(...d){return connectSeries(this,...d),this}fan(...d){return d.forEach(g=>this.connect(g)),this}dispose(){return super.dispose(),isDefined(this.input)&&(this.input instanceof ToneAudioNode?this.input.dispose():isAudioNode(this.input)&&this.input.disconnect()),isDefined(this.output)&&(this.output instanceof ToneAudioNode?this.output.dispose():isAudioNode(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function connectSeries(..._){const d=_.shift();_.reduce((g,b)=>(g instanceof ToneAudioNode?g.connect(b):isAudioNode(g)&&connect(g,b),b),d)}function connect(_,d,g=0,b=0){for(assert(isDefined(_),"Cannot connect from undefined node"),assert(isDefined(d),"Cannot connect to undefined node"),(d instanceof ToneAudioNode||isAudioNode(d))&&assert(d.numberOfInputs>0,"Cannot connect to node with no inputs"),assert(_.numberOfOutputs>0,"Cannot connect from node with no outputs");d instanceof ToneAudioNode||d instanceof Param;)isDefined(d.input)&&(d=d.input);for(;_ instanceof ToneAudioNode;)isDefined(_.output)&&(_=_.output);isAudioParam(d)?_.connect(d,g):_.connect(d,g,b)}function disconnect(_,d,g=0,b=0){if(isDefined(d))for(;d instanceof ToneAudioNode;)d=d.input;for(;!isAudioNode(_);)isDefined(_.output)&&(_=_.output);isAudioParam(d)?_.disconnect(d,g):isAudioNode(d)?_.disconnect(d,g,b):_.disconnect()}function fanIn(..._){const d=_.pop();isDefined(d)&&_.forEach(g=>connect(g,d))}class Gain extends ToneAudioNode{constructor(){const d=optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"]);super(d),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Param({context:this.context,convert:d.convert,param:this._gainNode.gain,units:d.units,value:d.gain,minValue:d.minValue,maxValue:d.maxValue}),readOnly$1(this,"gain")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class OneShotSource extends ToneAudioNode{constructor(d){super(d),this.onended=noOp,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Gain({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(g){const b=this.toSeconds(g);return this._startTime!==-1&&b>=this._startTime&&(this._stopTime===-1||b<=this._stopTime)?"started":"stopped"},this._fadeIn=d.fadeIn,this._fadeOut=d.fadeOut,this._curve=d.curve,this.onended=d.onended}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:noOp})}_startGain(d,g=1){assert(this._startTime===-1,"Source cannot be started more than once");const b=this.toSeconds(this._fadeIn);return this._startTime=d+b,this._startTime=Math.max(this._startTime,this.context.currentTime),b>0?(this._gainNode.gain.setValueAtTime(0,d),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(g,d+b):this._gainNode.gain.exponentialApproachValueAtTime(g,d,b)):this._gainNode.gain.setValueAtTime(g,d),this}stop(d){return this.log("stop",d),this._stopGain(this.toSeconds(d)),this}_stopGain(d){assert(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const g=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(d)+g,this._stopTime=Math.max(this._stopTime,this.now()),g>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,g,d):this._gainNode.gain.targetRampTo(0,g,d):(this._gainNode.gain.cancelAndHoldAtTime(d),this._gainNode.gain.setValueAtTime(0,d)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const b=this._curve==="exponential"?g*2:0;this._stopSource(this.now()+b),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==noOp&&(this.onended(this),this.onended=noOp,!this.context.isOffline)){const d=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(d):setTimeout(d,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),assert(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=noOp,this}}class ToneConstantSource extends OneShotSource{constructor(){const d=optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"]);super(d),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),connect(this._source,this._gainNode),this.offset=new Param({context:this.context,convert:d.convert,param:this._source.offset,units:d.units,value:d.offset,minValue:d.minValue,maxValue:d.maxValue})}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{convert:!0,offset:1,units:"number"})}start(d){const g=this.toSeconds(d);return this.log("start",g),this._startGain(g),this._source.start(g),this}_stopSource(d){this._source.stop(d)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Signal extends ToneAudioNode{constructor(){const d=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);super(d),this.name="Signal",this.override=!0,this.output=this._constantSource=new ToneConstantSource({context:this.context,convert:d.convert,offset:d.value,units:d.units,minValue:d.minValue,maxValue:d.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,units:"number",value:0})}connect(d,g=0,b=0){return connectSignal(this,d,g,b),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(d,g){return this._param.setValueAtTime(d,g),this}getValueAtTime(d){return this._param.getValueAtTime(d)}setRampPoint(d){return this._param.setRampPoint(d),this}linearRampToValueAtTime(d,g){return this._param.linearRampToValueAtTime(d,g),this}exponentialRampToValueAtTime(d,g){return this._param.exponentialRampToValueAtTime(d,g),this}exponentialRampTo(d,g,b){return this._param.exponentialRampTo(d,g,b),this}linearRampTo(d,g,b){return this._param.linearRampTo(d,g,b),this}targetRampTo(d,g,b){return this._param.targetRampTo(d,g,b),this}exponentialApproachValueAtTime(d,g,b){return this._param.exponentialApproachValueAtTime(d,g,b),this}setTargetAtTime(d,g,b){return this._param.setTargetAtTime(d,g,b),this}setValueCurveAtTime(d,g,b,$){return this._param.setValueCurveAtTime(d,g,b,$),this}cancelScheduledValues(d){return this._param.cancelScheduledValues(d),this}cancelAndHoldAtTime(d){return this._param.cancelAndHoldAtTime(d),this}rampTo(d,g,b){return this._param.rampTo(d,g,b),this}get value(){return this._param.value}set value(d){this._param.value=d}get convert(){return this._param.convert}set convert(d){this._param.convert=d}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(d){this._param.overridden=d}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(d){return this._param.apply(d),this}}function connectSignal(_,d,g,b){(d instanceof Param||isAudioParam(d)||d instanceof Signal&&d.override)&&(d.cancelScheduledValues(0),d.setValueAtTime(0,0),d instanceof Signal&&(d.overridden=!0)),connect(_,d,g,b)}class TickParam extends Param{constructor(){const d=optionsFromArguments(TickParam.getDefaults(),arguments,["value"]);super(d),this.name="TickParam",this._events=new Timeline(1/0),this._multiplier=1,this._multiplier=d.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(d.value)}),this.setValueAtTime(d.value,0)}static getDefaults(){return Object.assign(Param.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(d,g,b){g=this.toSeconds(g),this.setRampPoint(g);const $=this._fromType(d),j=this._events.get(g),_e=Math.round(Math.max(1/b,1));for(let et=0;et<=_e;et++){const tt=b*et+g,nt=this._exponentialApproach(j.time,j.value,$,b,tt);this.linearRampToValueAtTime(this._toType(nt),tt)}return this}setValueAtTime(d,g){const b=this.toSeconds(g);super.setValueAtTime(d,g);const $=this._events.get(b),j=this._events.previousEvent($),_e=this._getTicksUntilEvent(j,b);return $.ticks=Math.max(_e,0),this}linearRampToValueAtTime(d,g){const b=this.toSeconds(g);super.linearRampToValueAtTime(d,g);const $=this._events.get(b),j=this._events.previousEvent($),_e=this._getTicksUntilEvent(j,b);return $.ticks=Math.max(_e,0),this}exponentialRampToValueAtTime(d,g){g=this.toSeconds(g);const b=this._fromType(d),$=this._events.get(g),j=Math.round(Math.max((g-$.time)*10,1)),_e=(g-$.time)/j;for(let et=0;et<=j;et++){const tt=_e*et+$.time,nt=this._exponentialInterpolate($.time,$.value,g,b,tt);this.linearRampToValueAtTime(this._toType(nt),tt)}return this}_getTicksUntilEvent(d,g){if(d===null)d={ticks:0,time:0,type:"setValueAtTime",value:0};else if(isUndef(d.ticks)){const _e=this._events.previousEvent(d);d.ticks=this._getTicksUntilEvent(_e,d.time)}const b=this._fromType(this.getValueAtTime(d.time));let $=this._fromType(this.getValueAtTime(g));const j=this._events.get(g);return j&&j.time===g&&j.type==="setValueAtTime"&&($=this._fromType(this.getValueAtTime(g-this.sampleTime))),.5*(g-d.time)*(b+$)+d.ticks}getTicksAtTime(d){const g=this.toSeconds(d),b=this._events.get(g);return Math.max(this._getTicksUntilEvent(b,g),0)}getDurationOfTicks(d,g){const b=this.toSeconds(g),$=this.getTicksAtTime(g);return this.getTimeOfTick($+d)-b}getTimeOfTick(d){const g=this._events.get(d,"ticks"),b=this._events.getAfter(d,"ticks");if(g&&g.ticks===d)return g.time;if(g&&b&&b.type==="linearRampToValueAtTime"&&g.value!==b.value){const $=this._fromType(this.getValueAtTime(g.time)),_e=(this._fromType(this.getValueAtTime(b.time))-$)/(b.time-g.time),et=Math.sqrt(Math.pow($,2)-2*_e*(g.ticks-d)),tt=(-$+et)/_e,nt=(-$-et)/_e;return(tt>0?tt:nt)+g.time}else return g?g.value===0?1/0:g.time+(d-g.ticks)/g.value:d/this._initialValue}ticksToTime(d,g){return this.getDurationOfTicks(d,g)}timeToTicks(d,g){const b=this.toSeconds(g),$=this.toSeconds(d),j=this.getTicksAtTime(b);return this.getTicksAtTime(b+$)-j}_fromType(d){return this.units==="bpm"&&this.multiplier?1/(60/d/this.multiplier):super._fromType(d)}_toType(d){return this.units==="bpm"&&this.multiplier?d/this.multiplier*60:super._toType(d)}get multiplier(){return this._multiplier}set multiplier(d){const g=this.value;this._multiplier=d,this.cancelScheduledValues(0),this.setValueAtTime(g,0)}}class TickSignal extends Signal{constructor(){const d=optionsFromArguments(TickSignal.getDefaults(),arguments,["value"]);super(d),this.name="TickSignal",this.input=this._param=new TickParam({context:this.context,convert:d.convert,multiplier:d.multiplier,param:this._constantSource.offset,units:d.units,value:d.value})}static getDefaults(){return Object.assign(Signal.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(d,g){return this._param.ticksToTime(d,g)}timeToTicks(d,g){return this._param.timeToTicks(d,g)}getTimeOfTick(d){return this._param.getTimeOfTick(d)}getDurationOfTicks(d,g){return this._param.getDurationOfTicks(d,g)}getTicksAtTime(d){return this._param.getTicksAtTime(d)}get multiplier(){return this._param.multiplier}set multiplier(d){this._param.multiplier=d}dispose(){return super.dispose(),this._param.dispose(),this}}class TickSource extends ToneWithContext{constructor(){const d=optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"]);super(d),this.name="TickSource",this._state=new StateTimeline,this._tickOffset=new Timeline,this._ticksAtTime=new Timeline,this._secondsAtTime=new Timeline,this.frequency=new TickSignal({context:this.context,units:d.units,value:d.frequency}),readOnly$1(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ToneWithContext.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(d,g){const b=this.toSeconds(d);return this._state.getValueAtTime(b)!=="started"&&(this._state.setStateAtTime("started",b),isDefined(g)&&this.setTicksAtTime(g,b),this._ticksAtTime.cancel(b),this._secondsAtTime.cancel(b)),this}stop(d){const g=this.toSeconds(d);if(this._state.getValueAtTime(g)==="stopped"){const b=this._state.get(g);b&&b.time>0&&(this._tickOffset.cancel(b.time),this._state.cancel(b.time))}return this._state.cancel(g),this._state.setStateAtTime("stopped",g),this.setTicksAtTime(0,g),this._ticksAtTime.cancel(g),this._secondsAtTime.cancel(g),this}pause(d){const g=this.toSeconds(d);return this._state.getValueAtTime(g)==="started"&&(this._state.setStateAtTime("paused",g),this._ticksAtTime.cancel(g),this._secondsAtTime.cancel(g)),this}cancel(d){return d=this.toSeconds(d),this._state.cancel(d),this._tickOffset.cancel(d),this._ticksAtTime.cancel(d),this._secondsAtTime.cancel(d),this}getTicksAtTime(d){const g=this.toSeconds(d),b=this._state.getLastState("stopped",g),$=this._ticksAtTime.get(g),j={state:"paused",time:g};this._state.add(j);let _e=$||b,et=$?$.ticks:0,tt=null;return this._state.forEachBetween(_e.time,g+this.sampleTime,nt=>{let it=_e.time;const rt=this._tickOffset.get(nt.time);rt&&rt.time>=_e.time&&(et=rt.ticks,it=rt.time),_e.state==="started"&&nt.state!=="started"&&(et+=this.frequency.getTicksAtTime(nt.time)-this.frequency.getTicksAtTime(it),nt.time!==j.time&&(tt={state:nt.state,time:nt.time,ticks:et})),_e=nt}),this._state.remove(j),tt&&this._ticksAtTime.add(tt),et}get ticks(){return this.getTicksAtTime(this.now())}set ticks(d){this.setTicksAtTime(d,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(d){const g=this.now(),b=this.frequency.timeToTicks(d,g);this.setTicksAtTime(b,g)}getSecondsAtTime(d){d=this.toSeconds(d);const g=this._state.getLastState("stopped",d),b={state:"paused",time:d};this._state.add(b);const $=this._secondsAtTime.get(d);let j=$||g,_e=$?$.seconds:0,et=null;return this._state.forEachBetween(j.time,d+this.sampleTime,tt=>{let nt=j.time;const it=this._tickOffset.get(tt.time);it&&it.time>=j.time&&(_e=it.seconds,nt=it.time),j.state==="started"&&tt.state!=="started"&&(_e+=tt.time-nt,tt.time!==b.time&&(et={state:tt.state,time:tt.time,seconds:_e})),j=tt}),this._state.remove(b),et&&this._secondsAtTime.add(et),_e}setTicksAtTime(d,g){return g=this.toSeconds(g),this._tickOffset.cancel(g),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(d,g),ticks:d,time:g}),this._ticksAtTime.cancel(g),this._secondsAtTime.cancel(g),this}getStateAtTime(d){return d=this.toSeconds(d),this._state.getValueAtTime(d)}getTimeOfTick(d,g=this.now()){const b=this._tickOffset.get(g),$=this._state.get(g),j=Math.max(b.time,$.time),_e=this.frequency.getTicksAtTime(j)+d-b.ticks;return this.frequency.getTimeOfTick(_e)}forEachTickBetween(d,g,b){let $=this._state.get(d);this._state.forEachBetween(d,g,_e=>{$&&$.state==="started"&&_e.state!=="started"&&this.forEachTickBetween(Math.max($.time,d),_e.time-this.sampleTime,b),$=_e});let j=null;if($&&$.state==="started"){const _e=Math.max($.time,d),et=this.frequency.getTicksAtTime(_e),tt=this.frequency.getTicksAtTime($.time),nt=et-tt;let it=Math.ceil(nt)-nt;it=EQ(it,1)?0:it;let rt=this.frequency.getTimeOfTick(et+it);for(;rt<g;){try{b(rt,Math.round(this.getTicksAtTime(rt)))}catch(st){j=st;break}rt+=this.frequency.getDurationOfTicks(1,rt)}}if(j)throw j;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Clock extends ToneWithContext{constructor(){const d=optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"]);super(d),this.name="Clock",this.callback=noOp,this._lastUpdate=0,this._state=new StateTimeline("stopped"),this._boundLoop=this._loop.bind(this),this.callback=d.callback,this._tickSource=new TickSource({context:this.context,frequency:d.frequency,units:d.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,readOnly$1(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(d,g){assertContextRunning(this.context);const b=this.toSeconds(d);return this.log("start",b),this._state.getValueAtTime(b)!=="started"&&(this._state.setStateAtTime("started",b),this._tickSource.start(b,g),b<this._lastUpdate&&this.emit("start",b,g)),this}stop(d){const g=this.toSeconds(d);return this.log("stop",g),this._state.cancel(g),this._state.setStateAtTime("stopped",g),this._tickSource.stop(g),g<this._lastUpdate&&this.emit("stop",g),this}pause(d){const g=this.toSeconds(d);return this._state.getValueAtTime(g)==="started"&&(this._state.setStateAtTime("paused",g),this._tickSource.pause(g),g<this._lastUpdate&&this.emit("pause",g)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(d){this._tickSource.ticks=d}get seconds(){return this._tickSource.seconds}set seconds(d){this._tickSource.seconds=d}getSecondsAtTime(d){return this._tickSource.getSecondsAtTime(d)}setTicksAtTime(d,g){return this._tickSource.setTicksAtTime(d,g),this}getTimeOfTick(d,g=this.now()){return this._tickSource.getTimeOfTick(d,g)}getTicksAtTime(d){return this._tickSource.getTicksAtTime(d)}nextTickTime(d,g){const b=this.toSeconds(g),$=this.getTicksAtTime(b);return this._tickSource.getTimeOfTick($+d,b)}_loop(){const d=this._lastUpdate,g=this.now();this._lastUpdate=g,this.log("loop",d,g),d!==g&&(this._state.forEachBetween(d,g,b=>{switch(b.state){case"started":const $=this._tickSource.getTicksAtTime(b.time);this.emit("start",b.time,$);break;case"stopped":b.time!==0&&this.emit("stop",b.time);break;case"paused":this.emit("pause",b.time);break}}),this._tickSource.forEachTickBetween(d,g,(b,$)=>{this.callback(b,$)}))}getStateAtTime(d){const g=this.toSeconds(d);return this._state.getValueAtTime(g)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Emitter.mixin(Clock);class Delay extends ToneAudioNode{constructor(){const d=optionsFromArguments(Delay.getDefaults(),arguments,["delayTime","maxDelay"]);super(d),this.name="Delay";const g=this.toSeconds(d.maxDelay);this._maxDelay=Math.max(g,this.toSeconds(d.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(g),this.delayTime=new Param({context:this.context,param:this._delayNode.delayTime,units:"time",value:d.delayTime,minValue:0,maxValue:this.maxDelay}),readOnly$1(this,"delayTime")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Volume extends ToneAudioNode{constructor(){const d=optionsFromArguments(Volume.getDefaults(),arguments,["volume"]);super(d),this.name="Volume",this.input=this.output=new Gain({context:this.context,gain:d.volume,units:"decibels"}),this.volume=this.output.gain,readOnly$1(this,"volume"),this._unmutedVolume=d.volume,this.mute=d.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(d){!this.mute&&d?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!d&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class DestinationClass extends ToneAudioNode{constructor(){const d=optionsFromArguments(DestinationClass.getDefaults(),arguments);super(d),this.name="Destination",this.input=new Volume({context:this.context}),this.output=new Gain({context:this.context}),this.volume=this.input.volume,connectSeries(this.input,this.output,this.context.rawContext.destination),this.mute=d.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(d){this.input.mute=d}chain(...d){return this.input.disconnect(),d.unshift(this.input),d.push(this.output),connectSeries(...d),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}onContextInit(_=>{_.destination=new DestinationClass({context:_})});onContextClose(_=>{_.destination.dispose()});class ListenerClass extends ToneAudioNode{constructor(){super(...arguments),this.name="Listener",this.positionX=new Param({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Param({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Param({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Param({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Param({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Param({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Param({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Param({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Param({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}onContextInit(_=>{_.listener=new ListenerClass({context:_})});onContextClose(_=>{_.listener.dispose()});function Offline(_,d){return __awaiter(this,arguments,void 0,function*(g,b,$=2,j=getContext().sampleRate){const _e=getContext(),et=new OfflineContext($,b,j);setContext(et),yield g(et);const tt=et.render();setContext(_e);const nt=yield tt;return new ToneAudioBuffer(nt)})}class ToneAudioBuffers extends Tone$1{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const d=optionsFromArguments(ToneAudioBuffers.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=d.baseUrl,Object.keys(d.urls).forEach(g=>{this._loadingCount++;const b=d.urls[g];this.add(g,b,this._bufferLoaded.bind(this,d.onload),d.onerror)})}static getDefaults(){return{baseUrl:"",onerror:noOp,onload:noOp,urls:{}}}has(d){return this._buffers.has(d.toString())}get(d){return assert(this.has(d),`ToneAudioBuffers has no buffer named: ${d}`),this._buffers.get(d.toString())}_bufferLoaded(d){this._loadingCount--,this._loadingCount===0&&d&&d()}get loaded(){return Array.from(this._buffers).every(([d,g])=>g.loaded)}add(d,g,b=noOp,$=noOp){return isString(g)?(this.baseUrl&&g.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(d.toString(),new ToneAudioBuffer(this.baseUrl+g,b,$))):this._buffers.set(d.toString(),new ToneAudioBuffer(g,b,$)),this}dispose(){return super.dispose(),this._buffers.forEach(d=>d.dispose()),this._buffers.clear(),this}}class MidiClass extends FrequencyClass{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(d){return ftom(super._frequencyToUnits(d))}_ticksToUnits(d){return ftom(super._ticksToUnits(d))}_beatsToUnits(d){return ftom(super._beatsToUnits(d))}_secondsToUnits(d){return ftom(super._secondsToUnits(d))}toMidi(){return this.valueOf()}toFrequency(){return mtof(this.toMidi())}transpose(d){return new MidiClass(this.context,this.toMidi()+d)}}function Midi(_,d){return new MidiClass(getContext(),_,d)}class TicksClass extends TransportTimeClass{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(d){return this._getPPQ()*d}_secondsToUnits(d){return Math.floor(d/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(d){return d}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function Ticks(_,d){return new TicksClass(getContext(),_,d)}class DrawClass extends ToneWithContext{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Timeline,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(d,g){return this._events.add({callback:d,time:this.toSeconds(g)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(d){return this._events.cancel(this.toSeconds(d)),this}_drawLoop(){const d=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=d;){const g=this._events.shift();g&&d-g.time<=this.expiration&&g.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}onContextInit(_=>{_.draw=new DrawClass({context:_})});onContextClose(_=>{_.draw.dispose()});class IntervalTimeline extends Tone$1{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(d){assert(isDefined(d.time),"Events must have a time property"),assert(isDefined(d.duration),"Events must have a duration parameter"),d.time=d.time.valueOf();let g=new IntervalNode(d.time,d.time+d.duration,d);for(this._root===null?this._root=g:this._root.insert(g),this._length++;g!==null;)g.updateHeight(),g.updateMax(),this._rebalance(g),g=g.parent;return this}remove(d){if(this._root!==null){const g=[];this._root.search(d.time,g);for(const b of g)if(b.event===d){this._removeNode(b),this._length--;break}}return this}get length(){return this._length}cancel(d){return this.forEachFrom(d,g=>this.remove(g)),this}_setRoot(d){this._root=d,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(d,g){d.parent!==null?(d.isLeftChild()?d.parent.left=g:d.parent.right=g,this._rebalance(d.parent)):this._setRoot(g)}_removeNode(d){if(d.left===null&&d.right===null)this._replaceNodeInParent(d,null);else if(d.right===null)this._replaceNodeInParent(d,d.left);else if(d.left===null)this._replaceNodeInParent(d,d.right);else{const g=d.getBalance();let b,$=null;if(g>0)if(d.left.right===null)b=d.left,b.right=d.right,$=b;else{for(b=d.left.right;b.right!==null;)b=b.right;b.parent&&(b.parent.right=b.left,$=b.parent,b.left=d.left,b.right=d.right)}else if(d.right.left===null)b=d.right,b.left=d.left,$=b;else{for(b=d.right.left;b.left!==null;)b=b.left;b.parent&&(b.parent.left=b.right,$=b.parent,b.left=d.left,b.right=d.right)}d.parent!==null?d.isLeftChild()?d.parent.left=b:d.parent.right=b:this._setRoot(b),$&&this._rebalance($)}d.dispose()}_rotateLeft(d){const g=d.parent,b=d.isLeftChild(),$=d.right;$&&(d.right=$.left,$.left=d),g!==null?b?g.left=$:g.right=$:this._setRoot($)}_rotateRight(d){const g=d.parent,b=d.isLeftChild(),$=d.left;$&&(d.left=$.right,$.right=d),g!==null?b?g.left=$:g.right=$:this._setRoot($)}_rebalance(d){const g=d.getBalance();g>1&&d.left?d.left.getBalance()<0?this._rotateLeft(d.left):this._rotateRight(d):g<-1&&d.right&&(d.right.getBalance()>0?this._rotateRight(d.right):this._rotateLeft(d))}get(d){if(this._root!==null){const g=[];if(this._root.search(d,g),g.length>0){let b=g[0];for(let $=1;$<g.length;$++)g[$].low>b.low&&(b=g[$]);return b.event}}return null}forEach(d){if(this._root!==null){const g=[];this._root.traverse(b=>g.push(b)),g.forEach(b=>{b.event&&d(b.event)})}return this}forEachAtTime(d,g){if(this._root!==null){const b=[];this._root.search(d,b),b.forEach($=>{$.event&&g($.event)})}return this}forEachFrom(d,g){if(this._root!==null){const b=[];this._root.searchAfter(d,b),b.forEach($=>{$.event&&g($.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(d=>d.dispose()),this._root=null,this}}class IntervalNode{constructor(d,g,b){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=b,this.low=d,this.high=g,this.max=this.high}insert(d){d.low<=this.low?this.left===null?this.left=d:this.left.insert(d):this.right===null?this.right=d:this.right.insert(d)}search(d,g){d>this.max||(this.left!==null&&this.left.search(d,g),this.low<=d&&this.high>d&&g.push(this),!(this.low>d)&&this.right!==null&&this.right.search(d,g))}searchAfter(d,g){this.low>=d&&(g.push(this),this.left!==null&&this.left.searchAfter(d,g)),this.right!==null&&this.right.searchAfter(d,g)}traverse(d){d(this),this.left!==null&&this.left.traverse(d),this.right!==null&&this.right.traverse(d)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let d=0;return this.left!==null&&this.right!==null?d=this.left.height-this.right.height:this.left!==null?d=this.left.height+1:this.right!==null&&(d=-(this.right.height+1)),d}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(d){this._left=d,d!==null&&(d.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(d){this._right=d,d!==null&&(d.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}const Units=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class TimelineValue extends Tone$1{constructor(d){super(),this.name="TimelineValue",this._timeline=new Timeline({memory:10}),this._initialValue=d}set(d,g){return this._timeline.add({value:d,time:g}),this}get(d){const g=this._timeline.get(d);return g?g.value:this._initialValue}}class SignalOperator extends ToneAudioNode{constructor(){super(optionsFromArguments(SignalOperator.getDefaults(),arguments,["context"]))}connect(d,g=0,b=0){return connectSignal(this,d,g,b),this}}class WaveShaper extends SignalOperator{constructor(){const d=optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]);super(d),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,isArray(d.mapping)||d.mapping instanceof Float32Array?this.curve=Float32Array.from(d.mapping):isFunction(d.mapping)&&this.setMap(d.mapping,d.length)}static getDefaults(){return Object.assign(Signal.getDefaults(),{length:1024})}setMap(d,g=1024){const b=new Float32Array(g);for(let $=0,j=g;$<j;$++){const _e=$/(j-1)*2-1;b[$]=d(_e,$)}return this.curve=b,this}get curve(){return this._shaper.curve}set curve(d){this._shaper.curve=d}get oversample(){return this._shaper.oversample}set oversample(d){const g=["none","2x","4x"].some(b=>b.includes(d));assert(g,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=d}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Pow extends SignalOperator{constructor(){const d=optionsFromArguments(Pow.getDefaults(),arguments,["value"]);super(d),this.name="Pow",this._exponentScaler=this.input=this.output=new WaveShaper({context:this.context,mapping:this._expFunc(d.value),length:8192}),this._exponent=d.value}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{value:1})}_expFunc(d){return g=>Math.pow(Math.abs(g),d)}get value(){return this._exponent}set value(d){this._exponent=d,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class TransportEvent{constructor(d,g){this.id=TransportEvent._eventId++,this._remainderTime=0;const b=Object.assign(TransportEvent.getDefaults(),g);this.transport=d,this.callback=b.callback,this._once=b.once,this.time=Math.floor(b.time),this._remainderTime=b.time-this.time}static getDefaults(){return{callback:noOp,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(d){if(this.callback){const g=this.transport.bpm.getDurationOfTicks(1,d);this.callback(d+this._remainderTime*g),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}TransportEvent._eventId=0;class TransportRepeatEvent extends TransportEvent{constructor(d,g){super(d,g),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const b=Object.assign(TransportRepeatEvent.getDefaults(),g);this.duration=b.duration,this._interval=b.interval,this._nextTick=b.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},TransportEvent.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(d){this._createEvents(d),super.invoke(d)}_createEvent(){return LT(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()):-1}_createEvents(d){LT(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()))}_restart(d){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const g=this.transport.getTicksAtTime(d);GT(g,this.time)&&(this._nextTick=this.floatTime+Math.ceil((g-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class TransportClass extends ToneWithContext{constructor(){const d=optionsFromArguments(TransportClass.getDefaults(),arguments);super(d),this.name="Transport",this._loop=new TimelineValue(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Timeline,this._repeatedEvents=new IntervalTimeline,this._syncedSignals=[],this._swingAmount=0,this._ppq=d.ppq,this._clock=new Clock({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=d.ppq,this.bpm.setValueAtTime(d.bpm,0),readOnly$1(this,"bpm"),this._timeSignature=d.timeSignature,this._swingTicks=d.ppq/2}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(d,g){if(this._loop.get(d)&&g>=this._loopEnd&&(this.emit("loopEnd",d),this._clock.setTicksAtTime(this._loopStart,d),g=this._loopStart,this.emit("loopStart",d,this._clock.getSecondsAtTime(d)),this.emit("loop",d)),this._swingAmount>0&&g%this._ppq!==0&&g%(this._swingTicks*2)!==0){const b=g%(this._swingTicks*2)/(this._swingTicks*2),$=Math.sin(b*Math.PI)*this._swingAmount;d+=new TicksClass(this.context,this._swingTicks*2/3).toSeconds()*$}enterScheduledCallback(!0),this._timeline.forEachAtTime(g,b=>b.invoke(d)),enterScheduledCallback(!1)}schedule(d,g){const b=new TransportEvent(this,{callback:d,time:new TransportTimeClass(this.context,g).toTicks()});return this._addEvent(b,this._timeline)}scheduleRepeat(d,g,b,$=1/0){const j=new TransportRepeatEvent(this,{callback:d,duration:new TimeClass(this.context,$).toTicks(),interval:new TimeClass(this.context,g).toTicks(),time:new TransportTimeClass(this.context,b).toTicks()});return this._addEvent(j,this._repeatedEvents)}scheduleOnce(d,g){const b=new TransportEvent(this,{callback:d,once:!0,time:new TransportTimeClass(this.context,g).toTicks()});return this._addEvent(b,this._timeline)}clear(d){if(this._scheduledEvents.hasOwnProperty(d)){const g=this._scheduledEvents[d.toString()];g.timeline.remove(g.event),g.event.dispose(),delete this._scheduledEvents[d.toString()]}return this}_addEvent(d,g){return this._scheduledEvents[d.id.toString()]={event:d,timeline:g},g.add(d),d.id}cancel(d=0){const g=this.toTicks(d);return this._timeline.forEachFrom(g,b=>this.clear(b.id)),this._repeatedEvents.forEachFrom(g,b=>this.clear(b.id)),this}_bindClockEvents(){this._clock.on("start",(d,g)=>{g=new TicksClass(this.context,g).toSeconds(),this.emit("start",d,g)}),this._clock.on("stop",d=>{this.emit("stop",d)}),this._clock.on("pause",d=>{this.emit("pause",d)})}get state(){return this._clock.getStateAtTime(this.now())}start(d,g){this.context.resume();let b;return isDefined(g)&&(b=this.toTicks(g)),this._clock.start(d,b),this}stop(d){return this._clock.stop(d),this}pause(d){return this._clock.pause(d),this}toggle(d){return d=this.toSeconds(d),this._clock.getStateAtTime(d)!=="started"?this.start(d):this.stop(d),this}get timeSignature(){return this._timeSignature}set timeSignature(d){isArray(d)&&(d=d[0]/d[1]*4),this._timeSignature=d}get loopStart(){return new TimeClass(this.context,this._loopStart,"i").toSeconds()}set loopStart(d){this._loopStart=this.toTicks(d)}get loopEnd(){return new TimeClass(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(d){this._loopEnd=this.toTicks(d)}get loop(){return this._loop.get(this.now())}set loop(d){this._loop.set(d,this.now())}setLoopPoints(d,g){return this.loopStart=d,this.loopEnd=g,this}get swing(){return this._swingAmount}set swing(d){this._swingAmount=d}get swingSubdivision(){return new TicksClass(this.context,this._swingTicks).toNotation()}set swingSubdivision(d){this._swingTicks=this.toTicks(d)}get position(){const d=this.now(),g=this._clock.getTicksAtTime(d);return new TicksClass(this.context,g).toBarsBeatsSixteenths()}set position(d){const g=this.toTicks(d);this.ticks=g}get seconds(){return this._clock.seconds}set seconds(d){const g=this.now(),b=this._clock.frequency.timeToTicks(d,g);this.ticks=b}get progress(){if(this.loop){const d=this.now();return(this._clock.getTicksAtTime(d)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(d){if(this._clock.ticks!==d){const g=this.now();if(this.state==="started"){const b=this._clock.getTicksAtTime(g),$=this._clock.frequency.getDurationOfTicks(Math.ceil(b)-b,g),j=g+$;this.emit("stop",j),this._clock.setTicksAtTime(d,j),this.emit("start",j,this._clock.getSecondsAtTime(j))}else this.emit("ticks",g),this._clock.setTicksAtTime(d,g)}}getTicksAtTime(d){return this._clock.getTicksAtTime(d)}getSecondsAtTime(d){return this._clock.getSecondsAtTime(d)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(d){this._clock.frequency.multiplier=d}nextSubdivision(d){if(d=this.toTicks(d),this.state!=="started")return 0;{const g=this.now(),b=this.getTicksAtTime(g),$=d-b%d;return this._clock.nextTickTime($,g)}}syncSignal(d,g){const b=this.now();let $=this.bpm,j=1/(60/$.getValueAtTime(b)/this.PPQ),_e=[];if(d.units==="time"){const tt=.015625/j,nt=new Gain(tt),it=new Pow(-1),rt=new Gain(tt);$.chain(nt,it,rt),$=rt,j=1/j,_e=[nt,it,rt]}g||(d.getValueAtTime(b)!==0?g=d.getValueAtTime(b)/j:g=0);const et=new Gain(g);return $.connect(et),et.connect(d._param),_e.push(et),this._syncedSignals.push({initial:d.value,nodes:_e,signal:d}),d.value=0,this}unsyncSignal(d){for(let g=this._syncedSignals.length-1;g>=0;g--){const b=this._syncedSignals[g];b.signal===d&&(b.nodes.forEach($=>$.dispose()),b.signal.value=b.initial,this._syncedSignals.splice(g,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),writable(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Emitter.mixin(TransportClass);onContextInit(_=>{_.transport=new TransportClass({context:_})});onContextClose(_=>{_.transport.dispose()});class Source extends ToneAudioNode{constructor(d){super(d),this.input=void 0,this._state=new StateTimeline("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=noOp,this._syncedStop=noOp,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Volume({context:this.context,mute:d.mute,volume:d.volume}),this.volume=this._volume.volume,readOnly$1(this,"volume"),this.onstop=d.onstop}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,onstop:noOp,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(d){this._volume.mute=d}_clampToCurrentTime(d){return this._synced?d:Math.max(d,this.context.currentTime)}start(d,g,b){let $=isUndef(d)&&this._synced?this.context.transport.seconds:this.toSeconds(d);if($=this._clampToCurrentTime($),!this._synced&&this._state.getValueAtTime($)==="started")assert(GT($,this._state.get($).time),"Start time must be strictly greater than previous start time"),this._state.cancel($),this._state.setStateAtTime("started",$),this.log("restart",$),this.restart($,g,b);else if(this.log("start",$),this._state.setStateAtTime("started",$),this._synced){const j=this._state.get($);j&&(j.offset=this.toSeconds(defaultArg(g,0)),j.duration=b?this.toSeconds(b):void 0);const _e=this.context.transport.schedule(et=>{this._start(et,g,b)},$);this._scheduled.push(_e),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>$&&this._syncedStart(this.now(),this.context.transport.seconds)}else assertContextRunning(this.context),this._start($,g,b);return this}stop(d){let g=isUndef(d)&&this._synced?this.context.transport.seconds:this.toSeconds(d);if(g=this._clampToCurrentTime(g),this._state.getValueAtTime(g)==="started"||isDefined(this._state.getNextState("started",g))){if(this.log("stop",g),!this._synced)this._stop(g);else{const b=this.context.transport.schedule(this._stop.bind(this),g);this._scheduled.push(b)}this._state.cancel(g),this._state.setStateAtTime("stopped",g)}return this}restart(d,g,b){return d=this.toSeconds(d),this._state.getValueAtTime(d)==="started"&&(this._state.cancel(d),this._restart(d,g,b)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(d,g)=>{if(GT(g,0)){const b=this._state.get(g);if(b&&b.state==="started"&&b.time!==g){const $=g-this.toSeconds(b.time);let j;b.duration&&(j=this.toSeconds(b.duration)-$),this._start(d,this.toSeconds(b.offset)+$,j)}}},this._syncedStop=d=>{const g=this.context.transport.getSecondsAtTime(Math.max(d-this.sampleTime,0));this._state.getValueAtTime(g)==="started"&&this._stop(d)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(d=>this.context.transport.clear(d)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=noOp,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ToneBufferSource extends OneShotSource{constructor(){const d=optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"]);super(d),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,connect(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Param({context:this.context,param:this._source.playbackRate,units:"positive",value:d.playbackRate}),this.loop=d.loop,this.loopStart=d.loopStart,this.loopEnd=d.loopEnd,this._buffer=new ToneAudioBuffer(d.url,d.onload,d.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{url:new ToneAudioBuffer,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(d){this._fadeIn=d}get fadeOut(){return this._fadeOut}set fadeOut(d){this._fadeOut=d}get curve(){return this._curve}set curve(d){this._curve=d}start(d,g,b,$=1){assert(this.buffer.loaded,"buffer is either not set or not loaded");const j=this.toSeconds(d);this._startGain(j,$),this.loop?g=defaultArg(g,this.loopStart):g=defaultArg(g,0);let _e=Math.max(this.toSeconds(g),0);if(this.loop){const et=this.toSeconds(this.loopEnd)||this.buffer.duration,tt=this.toSeconds(this.loopStart),nt=et-tt;GTE(_e,et)&&(_e=(_e-tt)%nt+tt),EQ(_e,this.buffer.duration)&&(_e=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,LT(_e,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(j,_e)),isDefined(b)){let et=this.toSeconds(b);et=Math.max(et,0),this.stop(j+et)}return this}_stopSource(d){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(d)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(d){this._source.loopStart=this.toSeconds(d)}get loopEnd(){return this._source.loopEnd}set loopEnd(d){this._source.loopEnd=this.toSeconds(d)}get buffer(){return this._buffer}set buffer(d){this._buffer.set(d)}get loop(){return this._source.loop}set loop(d){this._source.loop=d,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Noise extends Source{constructor(){const d=optionsFromArguments(Noise.getDefaults(),arguments,["type"]);super(d),this.name="Noise",this._source=null,this._playbackRate=d.playbackRate,this.type=d.type,this._fadeIn=d.fadeIn,this._fadeOut=d.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(d){if(assert(d in _noiseBuffers,"Noise: invalid type: "+d),this._type!==d&&(this._type=d,this.state==="started")){const g=this.now();this._stop(g),this._start(g)}}get playbackRate(){return this._playbackRate}set playbackRate(d){this._playbackRate=d,this._source&&(this._source.playbackRate.value=d)}_start(d){const g=_noiseBuffers[this._type];this._source=new ToneBufferSource({url:g,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(d),Math.random()*(g.duration-.001))}_stop(d){this._source&&(this._source.stop(this.toSeconds(d)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(d){this._fadeIn=d,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(d){this._fadeOut=d,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(d){this._stop(d),this._start(d)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const BUFFER_LENGTH=44100*5,NUM_CHANNELS=2,_noiseCache={brown:null,pink:null,white:null},_noiseBuffers={get brown(){if(!_noiseCache.brown){const _=[];for(let d=0;d<NUM_CHANNELS;d++){const g=new Float32Array(BUFFER_LENGTH);_[d]=g;let b=0;for(let $=0;$<BUFFER_LENGTH;$++){const j=Math.random()*2-1;g[$]=(b+.02*j)/1.02,b=g[$],g[$]*=3.5}}_noiseCache.brown=new ToneAudioBuffer().fromArray(_)}return _noiseCache.brown},get pink(){if(!_noiseCache.pink){const _=[];for(let d=0;d<NUM_CHANNELS;d++){const g=new Float32Array(BUFFER_LENGTH);_[d]=g;let b,$,j,_e,et,tt,nt;b=$=j=_e=et=tt=nt=0;for(let it=0;it<BUFFER_LENGTH;it++){const rt=Math.random()*2-1;b=.99886*b+rt*.0555179,$=.99332*$+rt*.0750759,j=.969*j+rt*.153852,_e=.8665*_e+rt*.3104856,et=.55*et+rt*.5329522,tt=-.7616*tt-rt*.016898,g[it]=b+$+j+_e+et+tt+nt+rt*.5362,g[it]*=.11,nt=rt*.115926}}_noiseCache.pink=new ToneAudioBuffer().fromArray(_)}return _noiseCache.pink},get white(){if(!_noiseCache.white){const _=[];for(let d=0;d<NUM_CHANNELS;d++){const g=new Float32Array(BUFFER_LENGTH);_[d]=g;for(let b=0;b<BUFFER_LENGTH;b++)g[b]=Math.random()*2-1}_noiseCache.white=new ToneAudioBuffer().fromArray(_)}return _noiseCache.white}};class UserMedia extends ToneAudioNode{constructor(){const d=optionsFromArguments(UserMedia.getDefaults(),arguments,["volume"]);super(d),this.name="UserMedia",this._volume=this.output=new Volume({context:this.context,volume:d.volume}),this.volume=this._volume.volume,readOnly$1(this,"volume"),this.mute=d.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}open(d){return __awaiter(this,void 0,void 0,function*(){assert(UserMedia.supported,"UserMedia is not supported"),this.state==="started"&&this.close();const g=yield UserMedia.enumerateDevices();isNumber(d)?this._device=g[d]:(this._device=g.find(j=>j.label===d||j.deviceId===d),!this._device&&g.length>0&&(this._device=g[0]),assert(isDefined(this._device),`No matching device ${d}`));const b={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(b.audio.deviceId=this._device.deviceId);const $=yield navigator.mediaDevices.getUserMedia(b);if(!this._stream){this._stream=$;const j=this.context.createMediaStreamSource($);connect(j,this.output),this._mediaStream=j}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(d=>{d.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return __awaiter(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(g=>g.kind==="audioinput")})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){if(this._device)return this._device.deviceId}get groupId(){if(this._device)return this._device.groupId}get label(){if(this._device)return this._device.label}get mute(){return this._volume.mute}set mute(d){this._volume.mute=d}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return isDefined(navigator.mediaDevices)&&isDefined(navigator.mediaDevices.getUserMedia)}}function generateWaveform(_,d){return __awaiter(this,void 0,void 0,function*(){const g=d/_.context.sampleRate,b=new OfflineContext(1,g,_.context.sampleRate);return new _.constructor(Object.assign(_.get(),{frequency:2/g,detune:0,context:b})).toDestination().start(0),(yield b.render()).getChannelData(0)})}class ToneOscillatorNode extends OneShotSource{constructor(){const d=optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"]);super(d),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],connect(this._oscillator,this._gainNode),this.type=d.type,this.frequency=new Param({context:this.context,param:this._oscillator.frequency,units:"frequency",value:d.frequency}),this.detune=new Param({context:this.context,param:this._oscillator.detune,units:"cents",value:d.detune}),readOnly$1(this,["frequency","detune"])}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(d){const g=this.toSeconds(d);return this.log("start",g),this._startGain(g),this._oscillator.start(g),this}_stopSource(d){this._oscillator.stop(d)}setPeriodicWave(d){return this._oscillator.setPeriodicWave(d),this}get type(){return this._oscillator.type}set type(d){this._oscillator.type=d}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Oscillator extends Source{constructor(){const d=optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"]);super(d),this.name="Oscillator",this._oscillator=null,this.frequency=new Signal({context:this.context,units:"frequency",value:d.frequency}),readOnly$1(this,"frequency"),this.detune=new Signal({context:this.context,units:"cents",value:d.detune}),readOnly$1(this,"detune"),this._partials=d.partials,this._partialCount=d.partialCount,this._type=d.type,d.partialCount&&d.type!=="custom"&&(this._type=this.baseType+d.partialCount.toString()),this.phase=d.phase}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(d){const g=this.toSeconds(d),b=new ToneOscillatorNode({context:this.context,onended:()=>this.onstop(this)});this._oscillator=b,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(g)}_stop(d){const g=this.toSeconds(d);this._oscillator&&this._oscillator.stop(g)}_restart(d){const g=this.toSeconds(d);return this.log("restart",g),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(g),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Oscillator._periodicWaveCache.find(g=>g.phase===this._phase&&deepEquals(g.partials,this._partials));{const d=Oscillator._periodicWaveCache.find(g=>g.type===this._type&&g.phase===this._phase);return this._partialCount=d?d.partialCount:this._partialCount,d}}get type(){return this._type}set type(d){this._type=d;const g=["sine","square","sawtooth","triangle"].indexOf(d)!==-1;if(this._phase===0&&g)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=d);else{const b=this._getCachedPeriodicWave();if(isDefined(b)){const{partials:$,wave:j}=b;this._wave=j,this._partials=$,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[$,j]=this._getRealImaginary(d,this._phase),_e=this.context.createPeriodicWave($,j);this._wave=_e,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Oscillator._periodicWaveCache.push({imag:j,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:$,type:this._type,wave:this._wave}),Oscillator._periodicWaveCache.length>100&&Oscillator._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(d){this.partialCount&&this._type!=="custom"&&d!=="custom"?this.type=d+this.partialCount:this.type=d}get partialCount(){return this._partialCount}set partialCount(d){assertRange(d,0);let g=this._type;const b=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(b&&(g=b[1]),this._type!=="custom")d===0?this.type=g:this.type=g+d.toString();else{const $=new Float32Array(d);this._partials.forEach((j,_e)=>$[_e]=j),this._partials=Array.from($),this.type=this._type}}_getRealImaginary(d,g){let $=2048;const j=new Float32Array($),_e=new Float32Array($);let et=1;if(d==="custom"){if(et=this._partials.length+1,this._partialCount=this._partials.length,$=et,this._partials.length===0)return[j,_e]}else{const tt=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(d);tt?(et=parseInt(tt[2],10)+1,this._partialCount=parseInt(tt[2],10),d=tt[1],et=Math.max(et,2),$=et):this._partialCount=0,this._partials=[]}for(let tt=1;tt<$;++tt){const nt=2/(tt*Math.PI);let it;switch(d){case"sine":it=tt<=et?1:0,this._partials[tt-1]=it;break;case"square":it=tt&1?2*nt:0,this._partials[tt-1]=it;break;case"sawtooth":it=nt*(tt&1?1:-1),this._partials[tt-1]=it;break;case"triangle":tt&1?it=2*(nt*nt)*(tt-1>>1&1?-1:1):it=0,this._partials[tt-1]=it;break;case"custom":it=this._partials[tt-1];break;default:throw new TypeError("Oscillator: invalid type: "+d)}it!==0?(j[tt]=-it*Math.sin(g*tt),_e[tt]=it*Math.cos(g*tt)):(j[tt]=0,_e[tt]=0)}return[j,_e]}_inverseFFT(d,g,b){let $=0;const j=d.length;for(let _e=0;_e<j;_e++)$+=d[_e]*Math.cos(_e*b)+g[_e]*Math.sin(_e*b);return $}getInitialValue(){const[d,g]=this._getRealImaginary(this._type,0);let b=0;const $=Math.PI*2,j=32;for(let _e=0;_e<j;_e++)b=Math.max(this._inverseFFT(d,g,_e/j*$),b);return clamp$2(-this._inverseFFT(d,g,this._phase)/b,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(d){this._partials=d,this._partialCount=this._partials.length,d.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(d){this._phase=d*Math.PI/180,this.type=this._type}asArray(){return __awaiter(this,arguments,void 0,function*(d=1024){return generateWaveform(this,d)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Oscillator._periodicWaveCache=[];class AudioToGain extends SignalOperator{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new WaveShaper({context:this.context,mapping:d=>(d+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Multiply extends Signal{constructor(){const d=optionsFromArguments(Multiply.getDefaults(),arguments,["value"]);super(d),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Gain({context:this.context,minValue:d.minValue,maxValue:d.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(d.value,0)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class AMOscillator extends Source{constructor(){const d=optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);super(d),this.name="AMOscillator",this._modulationScale=new AudioToGain({context:this.context}),this._modulationNode=new Gain({context:this.context}),this._carrier=new Oscillator({context:this.context,detune:d.detune,frequency:d.frequency,onstop:()=>this.onstop(this),phase:d.phase,type:d.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Oscillator({context:this.context,phase:d.phase,type:d.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:d.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),readOnly$1(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(d){this._modulator.start(d),this._carrier.start(d)}_stop(d){this._modulator.stop(d),this._carrier.stop(d)}_restart(d){this._modulator.restart(d),this._carrier.restart(d)}get type(){return this._carrier.type}set type(d){this._carrier.type=d}get baseType(){return this._carrier.baseType}set baseType(d){this._carrier.baseType=d}get partialCount(){return this._carrier.partialCount}set partialCount(d){this._carrier.partialCount=d}get modulationType(){return this._modulator.type}set modulationType(d){this._modulator.type=d}get phase(){return this._carrier.phase}set phase(d){this._carrier.phase=d,this._modulator.phase=d}get partials(){return this._carrier.partials}set partials(d){this._carrier.partials=d}asArray(){return __awaiter(this,arguments,void 0,function*(d=1024){return generateWaveform(this,d)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class FMOscillator extends Source{constructor(){const d=optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);super(d),this.name="FMOscillator",this._modulationNode=new Gain({context:this.context,gain:0}),this._carrier=new Oscillator({context:this.context,detune:d.detune,frequency:0,onstop:()=>this.onstop(this),phase:d.phase,type:d.type}),this.detune=this._carrier.detune,this.frequency=new Signal({context:this.context,units:"frequency",value:d.frequency}),this._modulator=new Oscillator({context:this.context,phase:d.phase,type:d.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:d.harmonicity}),this.modulationIndex=new Multiply({context:this.context,units:"positive",value:d.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),readOnly$1(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(d){this._modulator.start(d),this._carrier.start(d)}_stop(d){this._modulator.stop(d),this._carrier.stop(d)}_restart(d){return this._modulator.restart(d),this._carrier.restart(d),this}get type(){return this._carrier.type}set type(d){this._carrier.type=d}get baseType(){return this._carrier.baseType}set baseType(d){this._carrier.baseType=d}get partialCount(){return this._carrier.partialCount}set partialCount(d){this._carrier.partialCount=d}get modulationType(){return this._modulator.type}set modulationType(d){this._modulator.type=d}get phase(){return this._carrier.phase}set phase(d){this._carrier.phase=d,this._modulator.phase=d}get partials(){return this._carrier.partials}set partials(d){this._carrier.partials=d}asArray(){return __awaiter(this,arguments,void 0,function*(d=1024){return generateWaveform(this,d)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class PulseOscillator extends Source{constructor(){const d=optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"]);super(d),this.name="PulseOscillator",this._widthGate=new Gain({context:this.context,gain:0}),this._thresh=new WaveShaper({context:this.context,mapping:g=>g<=0?-1:1}),this.width=new Signal({context:this.context,units:"audioRange",value:d.width}),this._triangle=new Oscillator({context:this.context,detune:d.detune,frequency:d.frequency,onstop:()=>this.onstop(this),phase:d.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),readOnly$1(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(d){d=this.toSeconds(d),this._triangle.start(d),this._widthGate.gain.setValueAtTime(1,d)}_stop(d){d=this.toSeconds(d),this._triangle.stop(d),this._widthGate.gain.cancelScheduledValues(d),this._widthGate.gain.setValueAtTime(0,d)}_restart(d){this._triangle.restart(d),this._widthGate.gain.cancelScheduledValues(d),this._widthGate.gain.setValueAtTime(1,d)}get phase(){return this._triangle.phase}set phase(d){this._triangle.phase=d}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(d){this._triangle.type=d}asArray(){return __awaiter(this,arguments,void 0,function*(d=1024){return generateWaveform(this,d)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class FatOscillator extends Source{constructor(){const d=optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"]);super(d),this.name="FatOscillator",this._oscillators=[],this.frequency=new Signal({context:this.context,units:"frequency",value:d.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:d.detune}),this._spread=d.spread,this._type=d.type,this._phase=d.phase,this._partials=d.partials,this._partialCount=d.partialCount,this.count=d.count,readOnly$1(this,["frequency","detune"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(d){d=this.toSeconds(d),this._forEach(g=>g.start(d))}_stop(d){d=this.toSeconds(d),this._forEach(g=>g.stop(d))}_restart(d){this._forEach(g=>g.restart(d))}_forEach(d){for(let g=0;g<this._oscillators.length;g++)d(this._oscillators[g],g)}get type(){return this._type}set type(d){this._type=d,this._forEach(g=>g.type=d)}get spread(){return this._spread}set spread(d){if(this._spread=d,this._oscillators.length>1){const g=-d/2,b=d/(this._oscillators.length-1);this._forEach(($,j)=>$.detune.value=g+b*j)}}get count(){return this._oscillators.length}set count(d){if(assertRange(d,1),this._oscillators.length!==d){this._forEach(g=>g.dispose()),this._oscillators=[];for(let g=0;g<d;g++){const b=new Oscillator({context:this.context,volume:-6-d*1.1,type:this._type,phase:this._phase+g/d*360,partialCount:this._partialCount,onstop:g===0?()=>this.onstop(this):noOp});this.type==="custom"&&(b.partials=this._partials),this.frequency.connect(b.frequency),this.detune.connect(b.detune),b.detune.overridden=!1,b.connect(this.output),this._oscillators[g]=b}this.spread=this._spread,this.state==="started"&&this._forEach(g=>g.start())}}get phase(){return this._phase}set phase(d){this._phase=d,this._forEach((g,b)=>g.phase=this._phase+b/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(d){this._forEach(g=>g.baseType=d),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(d){this._partials=d,this._partialCount=this._partials.length,d.length&&(this._type="custom",this._forEach(g=>g.partials=d))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(d){this._partialCount=d,this._forEach(g=>g.partialCount=d),this._type=this._oscillators[0].type}asArray(){return __awaiter(this,arguments,void 0,function*(d=1024){return generateWaveform(this,d)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(d=>d.dispose()),this}}class PWMOscillator extends Source{constructor(){const d=optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"]);super(d),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Multiply({context:this.context,value:2}),this._pulse=new PulseOscillator({context:this.context,frequency:d.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Oscillator({context:this.context,detune:d.detune,frequency:d.frequency,onstop:()=>this.onstop(this),phase:d.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),readOnly$1(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(d){d=this.toSeconds(d),this._modulator.start(d),this._pulse.start(d)}_stop(d){d=this.toSeconds(d),this._modulator.stop(d),this._pulse.stop(d)}_restart(d){this._modulator.restart(d),this._pulse.restart(d)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(d){this._modulator.phase=d}asArray(){return __awaiter(this,arguments,void 0,function*(d=1024){return generateWaveform(this,d)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const OmniOscillatorSourceMap={am:AMOscillator,fat:FatOscillator,fm:FMOscillator,oscillator:Oscillator,pulse:PulseOscillator,pwm:PWMOscillator};class OmniOscillator extends Source{constructor(){const d=optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"]);super(d),this.name="OmniOscillator",this.frequency=new Signal({context:this.context,units:"frequency",value:d.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:d.detune}),readOnly$1(this,["frequency","detune"]),this.set(d)}static getDefaults(){return Object.assign(Oscillator.getDefaults(),FMOscillator.getDefaults(),AMOscillator.getDefaults(),FatOscillator.getDefaults(),PulseOscillator.getDefaults(),PWMOscillator.getDefaults())}_start(d){this._oscillator.start(d)}_stop(d){this._oscillator.stop(d)}_restart(d){return this._oscillator.restart(d),this}get type(){let d="";return["am","fm","fat"].some(g=>this._sourceType===g)&&(d=this._sourceType),d+this._oscillator.type}set type(d){d.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=d.substr(2)):d.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=d.substr(2)):d.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=d.substr(3)):d==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):d==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=d)}get partials(){return this._oscillator.partials}set partials(d){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=d)}get partialCount(){return this._oscillator.partialCount}set partialCount(d){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=d)}set(d){return Reflect.has(d,"type")&&d.type&&(this.type=d.type),super.set(d),this}_createNewOscillator(d){if(d!==this._sourceType){this._sourceType=d;const g=OmniOscillatorSourceMap[d],b=this.now();if(this._oscillator){const $=this._oscillator;$.stop(b),this.context.setTimeout(()=>$.dispose(),this.blockTime)}this._oscillator=new g({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(b)}}get phase(){return this._oscillator.phase}set phase(d){this._oscillator.phase=d}get sourceType(){return this._sourceType}set sourceType(d){let g="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(g=this._oscillator.type),d==="fm"?this.type="fm"+g:d==="am"?this.type="am"+g:d==="fat"?this.type="fat"+g:d==="oscillator"?this.type=g:d==="pulse"?this.type="pulse":d==="pwm"&&(this.type="pwm")}_getOscType(d,g){return d instanceof OmniOscillatorSourceMap[g]}get baseType(){return this._oscillator.baseType}set baseType(d){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&d!=="pulse"&&d!=="pwm"&&(this._oscillator.baseType=d)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(d){this._getOscType(this._oscillator,"fat")&&isNumber(d)&&(this._oscillator.count=d)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(d){this._getOscType(this._oscillator,"fat")&&isNumber(d)&&(this._oscillator.spread=d)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(d){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&isString(d)&&(this._oscillator.modulationType=d)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return __awaiter(this,arguments,void 0,function*(d=1024){return generateWaveform(this,d)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Add extends Signal{constructor(){super(optionsFromArguments(Add.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Gain({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,connectSeries(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Scale extends SignalOperator{constructor(){const d=optionsFromArguments(Scale.getDefaults(),arguments,["min","max"]);super(d),this.name="Scale",this._mult=this.input=new Multiply({context:this.context,value:d.max-d.min}),this._add=this.output=new Add({context:this.context,value:d.min}),this._min=d.min,this._max=d.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(d){this._min=d,this._setRange()}get max(){return this._max}set max(d){this._max=d,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Zero extends SignalOperator{constructor(){super(optionsFromArguments(Zero.getDefaults(),arguments)),this.name="Zero",this._gain=new Gain({context:this.context}),this.output=this._gain,this.input=void 0,connect(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),disconnect(this.context.getConstant(0),this._gain),this}}class LFO extends ToneAudioNode{constructor(){const d=optionsFromArguments(LFO.getDefaults(),arguments,["frequency","min","max"]);super(d),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Param.prototype._fromType,this._toType=Param.prototype._toType,this._is=Param.prototype._is,this._clampValue=Param.prototype._clampValue,this._oscillator=new Oscillator(d),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Gain({context:this.context,gain:d.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Signal({context:this.context,units:"audioRange",value:0}),this._zeros=new Zero({context:this.context}),this._a2g=new AudioToGain({context:this.context}),this._scaler=this.output=new Scale({context:this.context,max:d.max,min:d.min}),this.units=d.units,this.min=d.min,this.max=d.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),readOnly$1(this,["amplitude","frequency"]),this.phase=d.phase}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(d){return d=this.toSeconds(d),this._stoppedSignal.setValueAtTime(0,d),this._oscillator.start(d),this}stop(d){return d=this.toSeconds(d),this._stoppedSignal.setValueAtTime(this._stoppedValue,d),this._oscillator.stop(d),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(d){d=this._fromType(d),this._scaler.min=d}get max(){return this._toType(this._scaler.max)}set max(d){d=this._fromType(d),this._scaler.max=d}get type(){return this._oscillator.type}set type(d){this._oscillator.type=d,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(d){this._oscillator.partials=d,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(d){this._oscillator.phase=d,this._setStoppedValue()}get units(){return this._units}set units(d){const g=this.min,b=this.max;this._units=d,this.min=g,this.max=b}get state(){return this._oscillator.state}connect(d,g,b){return(d instanceof Param||d instanceof Signal)&&(this.convert=d.convert,this.units=d.units),connectSignal(this,d,g,b),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function range(_,d=1/0){const g=new WeakMap;return function(b,$){Reflect.defineProperty(b,$,{configurable:!0,enumerable:!0,get:function(){return g.get(this)},set:function(j){assertRange(j,_,d),g.set(this,j)}})}}function timeRange(_,d=1/0){const g=new WeakMap;return function(b,$){Reflect.defineProperty(b,$,{configurable:!0,enumerable:!0,get:function(){return g.get(this)},set:function(j){assertRange(this.toSeconds(j),_,d),g.set(this,j)}})}}class Player extends Source{constructor(){const d=optionsFromArguments(Player.getDefaults(),arguments,["url","onload"]);super(d),this.name="Player",this._activeSources=new Set,this._buffer=new ToneAudioBuffer({onload:this._onload.bind(this,d.onload),onerror:d.onerror,reverse:d.reverse,url:d.url}),this.autostart=d.autostart,this._loop=d.loop,this._loopStart=d.loopStart,this._loopEnd=d.loopEnd,this._playbackRate=d.playbackRate,this.fadeIn=d.fadeIn,this.fadeOut=d.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1,reverse:!1})}load(d){return __awaiter(this,void 0,void 0,function*(){return yield this._buffer.load(d),this._onload(),this})}_onload(d=noOp){d(),this.autostart&&this.start()}_onSourceEnd(d){this.onstop(this),this._activeSources.delete(d),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(d,g,b){return super.start(d,g,b),this}_start(d,g,b){this._loop?g=defaultArg(g,this._loopStart):g=defaultArg(g,0);const $=this.toSeconds(g),j=b;b=defaultArg(b,Math.max(this._buffer.duration-$,0));let _e=this.toSeconds(b);_e=_e/this._playbackRate,d=this.toSeconds(d);const et=new ToneBufferSource({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(d+_e),this._state.setStateAtTime("stopped",d+_e,{implicitEnd:!0})),this._activeSources.add(et),this._loop&&isUndef(j)?et.start(d,$):et.start(d,$,_e-this.toSeconds(this.fadeOut))}_stop(d){const g=this.toSeconds(d);this._activeSources.forEach(b=>b.stop(g))}restart(d,g,b){return super.restart(d,g,b),this}_restart(d,g,b){var $;($=[...this._activeSources].pop())===null||$===void 0||$.stop(d),this._start(d,g,b)}seek(d,g){const b=this.toSeconds(g);if(this._state.getValueAtTime(b)==="started"){const $=this.toSeconds(d);this._stop(b),this._start(b,$)}return this}setLoopPoints(d,g){return this.loopStart=d,this.loopEnd=g,this}get loopStart(){return this._loopStart}set loopStart(d){this._loopStart=d,this.buffer.loaded&&assertRange(this.toSeconds(d),0,this.buffer.duration),this._activeSources.forEach(g=>{g.loopStart=d})}get loopEnd(){return this._loopEnd}set loopEnd(d){this._loopEnd=d,this.buffer.loaded&&assertRange(this.toSeconds(d),0,this.buffer.duration),this._activeSources.forEach(g=>{g.loopEnd=d})}get buffer(){return this._buffer}set buffer(d){this._buffer.set(d)}get loop(){return this._loop}set loop(d){if(this._loop!==d&&(this._loop=d,this._activeSources.forEach(g=>{g.loop=d}),d)){const g=this._state.getNextState("stopped",this.now());g&&this._state.cancel(g.time)}}get playbackRate(){return this._playbackRate}set playbackRate(d){this._playbackRate=d;const g=this.now(),b=this._state.getNextState("stopped",g);b&&b.implicitEnd&&(this._state.cancel(b.time),this._activeSources.forEach($=>$.cancelStop())),this._activeSources.forEach($=>{$.playbackRate.setValueAtTime(d,g)})}get reverse(){return this._buffer.reverse}set reverse(d){this._buffer.reverse=d}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(d=>d.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}__decorate([timeRange(0)],Player.prototype,"fadeIn",void 0);__decorate([timeRange(0)],Player.prototype,"fadeOut",void 0);class Players extends ToneAudioNode{constructor(){const d=optionsFromArguments(Players.getDefaults(),arguments,["urls","onload"],"urls");super(d),this.name="Players",this.input=void 0,this._players=new Map,this._volume=this.output=new Volume({context:this.context,volume:d.volume}),this.volume=this._volume.volume,readOnly$1(this,"volume"),this._buffers=new ToneAudioBuffers({urls:d.urls,onload:d.onload,baseUrl:d.baseUrl,onerror:d.onerror}),this.mute=d.mute,this._fadeIn=d.fadeIn,this._fadeOut=d.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:noOp,onerror:noOp,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(d){this._volume.mute=d}get fadeIn(){return this._fadeIn}set fadeIn(d){this._fadeIn=d,this._players.forEach(g=>{g.fadeIn=d})}get fadeOut(){return this._fadeOut}set fadeOut(d){this._fadeOut=d,this._players.forEach(g=>{g.fadeOut=d})}get state(){return Array.from(this._players).some(([g,b])=>b.state==="started")?"started":"stopped"}has(d){return this._buffers.has(d)}player(d){if(assert(this.has(d),`No Player with the name ${d} exists on this object`),!this._players.has(d)){const g=new Player({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(d)}).connect(this.output);this._players.set(d,g)}return this._players.get(d)}get loaded(){return this._buffers.loaded}add(d,g,b){return assert(!this._buffers.has(d),"A buffer with that name already exists on this object"),this._buffers.add(d,g,b),this}stopAll(d){return this._players.forEach(g=>g.stop(d)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(d=>d.dispose()),this._buffers.dispose(),this}}class GrainPlayer extends Source{constructor(){const d=optionsFromArguments(GrainPlayer.getDefaults(),arguments,["url","onload"]);super(d),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[],this.buffer=new ToneAudioBuffer({onload:d.onload,onerror:d.onerror,reverse:d.reverse,url:d.url}),this._clock=new Clock({context:this.context,callback:this._tick.bind(this),frequency:1/d.grainSize}),this._playbackRate=d.playbackRate,this._grainSize=d.grainSize,this._overlap=d.overlap,this.detune=d.detune,this.overlap=d.overlap,this.loop=d.loop,this.playbackRate=d.playbackRate,this.grainSize=d.grainSize,this.loopStart=d.loopStart,this.loopEnd=d.loopEnd,this.reverse=d.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(Source.getDefaults(),{onload:noOp,onerror:noOp,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(d,g,b){g=defaultArg(g,0),g=this.toSeconds(g),d=this.toSeconds(d);const $=1/this._clock.frequency.getValueAtTime(d);this._clock.start(d,g/$),b&&this.stop(d+this.toSeconds(b))}restart(d,g,b){return super.restart(d,g,b),this}_restart(d,g,b){this._stop(d),this._start(d,g,b)}_stop(d){this._clock.stop(d)}_onstop(d){this._activeSources.forEach(g=>{g.fadeOut=0,g.stop(d)}),this.onstop(this)}_tick(d){const g=this._clock.getTicksAtTime(d),b=g*this._grainSize;if(this.log("offset",b),!this.loop&&b>this.buffer.duration){this.stop(d);return}const $=b<this._overlap?0:this._overlap,j=new ToneBufferSource({context:this.context,url:this.buffer,fadeIn:$,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:intervalToFrequencyRatio(this.detune/100)}).connect(this.output);j.start(d,this._grainSize*g),j.stop(d+this._grainSize/this.playbackRate),this._activeSources.push(j),j.onended=()=>{const _e=this._activeSources.indexOf(j);_e!==-1&&this._activeSources.splice(_e,1)}}get playbackRate(){return this._playbackRate}set playbackRate(d){assertRange(d,.001),this._playbackRate=d,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(d){this.buffer.loaded&&assertRange(this.toSeconds(d),0,this.buffer.duration),this._loopStart=this.toSeconds(d)}get loopEnd(){return this._loopEnd}set loopEnd(d){this.buffer.loaded&&assertRange(this.toSeconds(d),0,this.buffer.duration),this._loopEnd=this.toSeconds(d)}get reverse(){return this.buffer.reverse}set reverse(d){this.buffer.reverse=d}get grainSize(){return this._grainSize}set grainSize(d){this._grainSize=this.toSeconds(d),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(d){const g=this.toSeconds(d);assertRange(g,0),this._overlap=g}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(d=>d.dispose()),this}}class Abs extends SignalOperator{constructor(){super(...arguments),this.name="Abs",this._abs=new WaveShaper({context:this.context,mapping:d=>Math.abs(d)<.001?0:Math.abs(d)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class GainToAudio extends SignalOperator{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new WaveShaper({context:this.context,mapping:d=>Math.abs(d)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Negate extends SignalOperator{constructor(){super(...arguments),this.name="Negate",this._multiply=new Multiply({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class Subtract extends Signal{constructor(){super(optionsFromArguments(Subtract.getDefaults(),arguments,["value"])),this.override=!1,this.name="Subtract",this._sum=new Gain({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new Negate({context:this.context}),this.subtrahend=this._param,connectSeries(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class GreaterThanZero extends SignalOperator{constructor(){super(optionsFromArguments(GreaterThanZero.getDefaults(),arguments)),this.name="GreaterThanZero",this._thresh=this.output=new WaveShaper({context:this.context,length:127,mapping:d=>d<=0?0:1}),this._scale=this.input=new Multiply({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class GreaterThan extends Signal{constructor(){const d=optionsFromArguments(GreaterThan.getDefaults(),arguments,["value"]);super(d),this.name="GreaterThan",this.override=!1,this._subtract=this.input=new Subtract({context:this.context,value:d.value}),this._gtz=this.output=new GreaterThanZero({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,readOnly$1(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class ScaleExp extends Scale{constructor(){const d=optionsFromArguments(ScaleExp.getDefaults(),arguments,["min","max","exponent"]);super(d),this.name="ScaleExp",this.input=this._exp=new Pow({context:this.context,value:d.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(Scale.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(d){this._exp.value=d}dispose(){return super.dispose(),this._exp.dispose(),this}}class SyncedSignal extends Signal{constructor(){const d=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);super(d),this.name="SyncedSignal",this.override=!1,this._lastVal=d.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new ToneConstantSource({context:this.context,offset:d.value,units:d.units}).start(0),this.setValueAtTime(d.value,0)}_onTick(d){const g=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==g&&(this._lastVal=g,this._constantSource.offset.setValueAtTime(g,d))}_anchorValue(d){const g=super.getValueAtTime(this.context.transport.seconds);this._lastVal=g,this._constantSource.offset.cancelAndHoldAtTime(d),this._constantSource.offset.setValueAtTime(g,d)}getValueAtTime(d){const g=new TransportTimeClass(this.context,d).toSeconds();return super.getValueAtTime(g)}setValueAtTime(d,g){const b=new TransportTimeClass(this.context,g).toSeconds();return super.setValueAtTime(d,b),this}linearRampToValueAtTime(d,g){const b=new TransportTimeClass(this.context,g).toSeconds();return super.linearRampToValueAtTime(d,b),this}exponentialRampToValueAtTime(d,g){const b=new TransportTimeClass(this.context,g).toSeconds();return super.exponentialRampToValueAtTime(d,b),this}setTargetAtTime(d,g,b){const $=new TransportTimeClass(this.context,g).toSeconds();return super.setTargetAtTime(d,$,b),this}cancelScheduledValues(d){const g=new TransportTimeClass(this.context,d).toSeconds();return super.cancelScheduledValues(g),this}setValueCurveAtTime(d,g,b,$){const j=new TransportTimeClass(this.context,g).toSeconds();return b=this.toSeconds(b),super.setValueCurveAtTime(d,j,b,$),this}cancelAndHoldAtTime(d){const g=new TransportTimeClass(this.context,d).toSeconds();return super.cancelAndHoldAtTime(g),this}setRampPoint(d){const g=new TransportTimeClass(this.context,d).toSeconds();return super.setRampPoint(g),this}exponentialRampTo(d,g,b){const $=new TransportTimeClass(this.context,b).toSeconds();return super.exponentialRampTo(d,g,$),this}linearRampTo(d,g,b){const $=new TransportTimeClass(this.context,b).toSeconds();return super.linearRampTo(d,g,$),this}targetRampTo(d,g,b){const $=new TransportTimeClass(this.context,b).toSeconds();return super.targetRampTo(d,g,$),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class Envelope extends ToneAudioNode{constructor(){const d=optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"]);super(d),this.name="Envelope",this._sig=new Signal({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=d.attack,this.decay=d.decay,this.sustain=d.sustain,this.release=d.release,this.attackCurve=d.attackCurve,this.releaseCurve=d.releaseCurve,this.decayCurve=d.decayCurve}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(d,g){if(isString(d))return d;{let b;for(b in EnvelopeCurves)if(EnvelopeCurves[b][g]===d)return b;return d}}_setCurve(d,g,b){if(isString(b)&&Reflect.has(EnvelopeCurves,b)){const $=EnvelopeCurves[b];isObject($)?d!=="_decayCurve"&&(this[d]=$[g]):this[d]=$}else if(isArray(b)&&d!=="_decayCurve")this[d]=b;else throw new Error("Envelope: invalid curve: "+b)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(d){this._setCurve("_attackCurve","In",d)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(d){this._setCurve("_releaseCurve","Out",d)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(d){this._setCurve("_decayCurve","Out",d)}triggerAttack(d,g=1){this.log("triggerAttack",d,g),d=this.toSeconds(d);let $=this.toSeconds(this.attack);const j=this.toSeconds(this.decay),_e=this.getValueAtTime(d);if(_e>0){const et=1/$;$=(1-_e)/et}if($<this.sampleTime)this._sig.cancelScheduledValues(d),this._sig.setValueAtTime(g,d);else if(this._attackCurve==="linear")this._sig.linearRampTo(g,$,d);else if(this._attackCurve==="exponential")this._sig.targetRampTo(g,$,d);else{this._sig.cancelAndHoldAtTime(d);let et=this._attackCurve;for(let tt=1;tt<et.length;tt++)if(et[tt-1]<=_e&&_e<=et[tt]){et=this._attackCurve.slice(tt),et[0]=_e;break}this._sig.setValueCurveAtTime(et,d,$,g)}if(j&&this.sustain<1){const et=g*this.sustain,tt=d+$;this.log("decay",tt),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(et,j+tt):this._sig.exponentialApproachValueAtTime(et,tt,j)}return this}triggerRelease(d){this.log("triggerRelease",d),d=this.toSeconds(d);const g=this.getValueAtTime(d);if(g>0){const b=this.toSeconds(this.release);b<this.sampleTime?this._sig.setValueAtTime(0,d):this._releaseCurve==="linear"?this._sig.linearRampTo(0,b,d):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,b,d):(assert(isArray(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(d),this._sig.setValueCurveAtTime(this._releaseCurve,d,b,g))}return this}getValueAtTime(d){return this._sig.getValueAtTime(d)}triggerAttackRelease(d,g,b=1){return g=this.toSeconds(g),this.triggerAttack(g,b),this.triggerRelease(g+this.toSeconds(d)),this}cancel(d){return this._sig.cancelScheduledValues(this.toSeconds(d)),this}connect(d,g=0,b=0){return connectSignal(this,d,g,b),this}asArray(){return __awaiter(this,arguments,void 0,function*(d=1024){const g=d/this.context.sampleRate,b=new OfflineContext(1,g,this.context.sampleRate),$=this.toSeconds(this.attack)+this.toSeconds(this.decay),j=$+this.toSeconds(this.release),_e=j*.1,et=j+_e,tt=new this.constructor(Object.assign(this.get(),{attack:g*this.toSeconds(this.attack)/et,decay:g*this.toSeconds(this.decay)/et,release:g*this.toSeconds(this.release)/et,context:b}));return tt._sig.toDestination(),tt.triggerAttackRelease(g*($+_e)/et,0),(yield b.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}__decorate([timeRange(0)],Envelope.prototype,"attack",void 0);__decorate([timeRange(0)],Envelope.prototype,"decay",void 0);__decorate([range(0,1)],Envelope.prototype,"sustain",void 0);__decorate([timeRange(0)],Envelope.prototype,"release",void 0);const EnvelopeCurves=(()=>{let d,g;const b=[];for(d=0;d<128;d++)b[d]=Math.sin(d/(128-1)*(Math.PI/2));const $=[],j=6.4;for(d=0;d<128-1;d++){g=d/(128-1);const st=Math.sin(g*(Math.PI*2)*j-Math.PI/2)+1;$[d]=st/10+g*.83}$[128-1]=1;const _e=[],et=5;for(d=0;d<128;d++)_e[d]=Math.ceil(d/(128-1)*et)/et;const tt=[];for(d=0;d<128;d++)g=d/(128-1),tt[d]=.5*(1-Math.cos(Math.PI*g));const nt=[];for(d=0;d<128;d++){g=d/(128-1);const st=Math.pow(g,3)*4+.2,ot=Math.cos(st*Math.PI*2*g);nt[d]=Math.abs(ot*(1-g))}function it(st){const ot=new Array(st.length);for(let at=0;at<st.length;at++)ot[at]=1-st[at];return ot}function rt(st){return st.slice(0).reverse()}return{bounce:{In:it(nt),Out:nt},cosine:{In:b,Out:rt(b)},exponential:"exponential",linear:"linear",ripple:{In:$,Out:it($)},sine:{In:tt,Out:it(tt)},step:{In:_e,Out:it(_e)}}})();class Instrument extends ToneAudioNode{constructor(){const d=optionsFromArguments(Instrument.getDefaults(),arguments);super(d),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=g=>this._original_triggerRelease(g),this._volume=this.output=new Volume({context:this.context,volume:d.volume}),this.volume=this._volume.volume,readOnly$1(this,"volume")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let d=!1;return this._synced||(this._synced=!0,d=!0),d}_syncMethod(d,g){const b=this["_original_"+d]=this[d];this[d]=(...$)=>{const j=$[g],_e=this.context.transport.schedule(et=>{$[g]=et,b.apply(this,$)},j);this._scheduledEvents.push(_e)}}unsync(){return this._scheduledEvents.forEach(d=>this.context.transport.clear(d)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(d,g,b,$){const j=this.toSeconds(b),_e=this.toSeconds(g);return this.triggerAttack(d,j,$),this.triggerRelease(j+_e),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Monophonic extends Instrument{constructor(){const d=optionsFromArguments(Monophonic.getDefaults(),arguments);super(d),this.portamento=d.portamento,this.onsilence=d.onsilence}static getDefaults(){return Object.assign(Instrument.getDefaults(),{detune:0,onsilence:noOp,portamento:0})}triggerAttack(d,g,b=1){this.log("triggerAttack",d,g,b);const $=this.toSeconds(g);return this._triggerEnvelopeAttack($,b),this.setNote(d,$),this}triggerRelease(d){this.log("triggerRelease",d);const g=this.toSeconds(d);return this._triggerEnvelopeRelease(g),this}setNote(d,g){const b=this.toSeconds(g),$=d instanceof FrequencyClass?d.toFrequency():d;if(this.portamento>0&&this.getLevelAtTime(b)>.05){const j=this.toSeconds(this.portamento);this.frequency.exponentialRampTo($,j,b)}else this.frequency.setValueAtTime($,b);return this}}__decorate([timeRange(0)],Monophonic.prototype,"portamento",void 0);class AmplitudeEnvelope extends Envelope{constructor(){super(optionsFromArguments(AmplitudeEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Gain({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}let Synth$1=class rn extends Monophonic{constructor(){const d=optionsFromArguments(rn.getDefaults(),arguments);super(d),this.name="Synth",this.oscillator=new OmniOscillator(Object.assign({context:this.context,detune:d.detune,onstop:()=>this.onsilence(this)},d.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},d.envelope)),this.oscillator.chain(this.envelope,this.output),readOnly$1(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(d,g){if(this.envelope.triggerAttack(d,g),this.oscillator.start(d),this.envelope.sustain===0){const b=this.toSeconds(this.envelope.attack),$=this.toSeconds(this.envelope.decay);this.oscillator.stop(d+b+$)}}_triggerEnvelopeRelease(d){this.envelope.triggerRelease(d),this.oscillator.stop(d+this.toSeconds(this.envelope.release))}getLevelAtTime(d){return d=this.toSeconds(d),this.envelope.getValueAtTime(d)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}};class ModulationSynth extends Monophonic{constructor(){const d=optionsFromArguments(ModulationSynth.getDefaults(),arguments);super(d),this.name="ModulationSynth",this._carrier=new Synth$1({context:this.context,oscillator:d.oscillator,envelope:d.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Synth$1({context:this.context,oscillator:d.modulation,envelope:d.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Signal({context:this.context,units:"frequency"}),this.detune=new Signal({context:this.context,value:d.detune,units:"cents"}),this.harmonicity=new Multiply({context:this.context,value:d.harmonicity,minValue:0}),this._modulationNode=new Gain({context:this.context,gain:0}),readOnly$1(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{harmonicity:3,oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(d,g){this._carrier._triggerEnvelopeAttack(d,g),this._modulator._triggerEnvelopeAttack(d,g)}_triggerEnvelopeRelease(d){return this._carrier._triggerEnvelopeRelease(d),this._modulator._triggerEnvelopeRelease(d),this}getLevelAtTime(d){return d=this.toSeconds(d),this.envelope.getValueAtTime(d)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class AMSynth extends ModulationSynth{constructor(){super(optionsFromArguments(AMSynth.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new AudioToGain({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class BiquadFilter extends ToneAudioNode{constructor(){const d=optionsFromArguments(BiquadFilter.getDefaults(),arguments,["frequency","type"]);super(d),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Param({context:this.context,units:"number",value:d.Q,param:this._filter.Q}),this.frequency=new Param({context:this.context,units:"frequency",value:d.frequency,param:this._filter.frequency}),this.detune=new Param({context:this.context,units:"cents",value:d.detune,param:this._filter.detune}),this.gain=new Param({context:this.context,units:"decibels",convert:!1,value:d.gain,param:this._filter.gain}),this.type=d.type}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(d){assert(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(d)!==-1,`Invalid filter type: ${d}`),this._filter.type=d}getFrequencyResponse(d=128){const g=new Float32Array(d);for(let _e=0;_e<d;_e++){const tt=Math.pow(_e/d,2)*(2e4-20)+20;g[_e]=tt}const b=new Float32Array(d),$=new Float32Array(d),j=this.context.createBiquadFilter();return j.type=this.type,j.Q.value=this.Q.value,j.frequency.value=this.frequency.value,j.gain.value=this.gain.value,j.getFrequencyResponse(g,b,$),b}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Filter extends ToneAudioNode{constructor(){const d=optionsFromArguments(Filter.getDefaults(),arguments,["frequency","type","rolloff"]);super(d),this.name="Filter",this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._filters=[],this._filters=[],this.Q=new Signal({context:this.context,units:"positive",value:d.Q}),this.frequency=new Signal({context:this.context,units:"frequency",value:d.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:d.detune}),this.gain=new Signal({context:this.context,units:"decibels",convert:!1,value:d.gain}),this._type=d.type,this.rolloff=d.rolloff,readOnly$1(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(d){assert(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(d)!==-1,`Invalid filter type: ${d}`),this._type=d,this._filters.forEach(b=>b.type=d)}get rolloff(){return this._rolloff}set rolloff(d){const g=isNumber(d)?d:parseInt(d,10),b=[-12,-24,-48,-96];let $=b.indexOf(g);assert($!==-1,`rolloff can only be ${b.join(", ")}`),$+=1,this._rolloff=g,this.input.disconnect(),this._filters.forEach(j=>j.disconnect()),this._filters=new Array($);for(let j=0;j<$;j++){const _e=new BiquadFilter({context:this.context});_e.type=this._type,this.frequency.connect(_e.frequency),this.detune.connect(_e.detune),this.Q.connect(_e.Q),this.gain.connect(_e.gain),this._filters[j]=_e}this._internalChannels=this._filters,connectSeries(this.input,...this._internalChannels,this.output)}getFrequencyResponse(d=128){const g=new BiquadFilter({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),b=new Float32Array(d).map(()=>1);return this._filters.forEach(()=>{g.getFrequencyResponse(d).forEach((j,_e)=>b[_e]*=j)}),g.dispose(),b}dispose(){return super.dispose(),this._filters.forEach(d=>{d.dispose()}),writable(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class FrequencyEnvelope extends Envelope{constructor(){const d=optionsFromArguments(FrequencyEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"]);super(d),this.name="FrequencyEnvelope",this._octaves=d.octaves,this._baseFrequency=this.toFrequency(d.baseFrequency),this._exponent=this.input=new Pow({context:this.context,value:d.exponent}),this._scale=this.output=new Scale({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Envelope.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(d){const g=this.toFrequency(d);assertRange(g,0),this._baseFrequency=g,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(d){this._octaves=d,this._scale.max=this._baseFrequency*Math.pow(2,d)}get exponent(){return this._exponent.value}set exponent(d){this._exponent.value=d}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class MonoSynth extends Monophonic{constructor(){const d=optionsFromArguments(MonoSynth.getDefaults(),arguments);super(d),this.name="MonoSynth",this.oscillator=new OmniOscillator(Object.assign(d.oscillator,{context:this.context,detune:d.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Filter(Object.assign(d.filter,{context:this.context})),this.filterEnvelope=new FrequencyEnvelope(Object.assign(d.filterEnvelope,{context:this.context})),this.envelope=new AmplitudeEnvelope(Object.assign(d.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),readOnly$1(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(omitFromObject(Filter.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(omitFromObject(FrequencyEnvelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),Object.keys(Source.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(d,g=1){if(this.envelope.triggerAttack(d,g),this.filterEnvelope.triggerAttack(d),this.oscillator.start(d),this.envelope.sustain===0){const b=this.toSeconds(this.envelope.attack),$=this.toSeconds(this.envelope.decay);this.oscillator.stop(d+b+$)}}_triggerEnvelopeRelease(d){this.envelope.triggerRelease(d),this.filterEnvelope.triggerRelease(d),this.oscillator.stop(d+this.toSeconds(this.envelope.release))}getLevelAtTime(d){return d=this.toSeconds(d),this.envelope.getValueAtTime(d)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class DuoSynth extends Monophonic{constructor(){const d=optionsFromArguments(DuoSynth.getDefaults(),arguments);super(d),this.name="DuoSynth",this.voice0=new MonoSynth(Object.assign(d.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new MonoSynth(Object.assign(d.voice1,{context:this.context})),this.harmonicity=new Multiply({context:this.context,units:"positive",value:d.harmonicity}),this._vibrato=new LFO({frequency:d.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new Gain({context:this.context,units:"normalRange",gain:d.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Signal({context:this.context,units:"frequency",value:440}),this.detune=new Signal({context:this.context,units:"cents",value:d.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),readOnly$1(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(d){return d=this.toSeconds(d),this.voice0.envelope.getValueAtTime(d)+this.voice1.envelope.getValueAtTime(d)}static getDefaults(){return deepMerge(Monophonic.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:deepMerge(omitFromObject(MonoSynth.getDefaults(),Object.keys(Monophonic.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:deepMerge(omitFromObject(MonoSynth.getDefaults(),Object.keys(Monophonic.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(d,g){this.voice0._triggerEnvelopeAttack(d,g),this.voice1._triggerEnvelopeAttack(d,g)}_triggerEnvelopeRelease(d){return this.voice0._triggerEnvelopeRelease(d),this.voice1._triggerEnvelopeRelease(d),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class FMSynth extends ModulationSynth{constructor(){const d=optionsFromArguments(FMSynth.getDefaults(),arguments);super(d),this.name="FMSynth",this.modulationIndex=new Multiply({context:this.context,value:d.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(ModulationSynth.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const inharmRatios=[1,1.483,1.932,2.546,2.63,3.897];class MetalSynth extends Monophonic{constructor(){const d=optionsFromArguments(MetalSynth.getDefaults(),arguments);super(d),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new Signal({context:this.context,units:"cents",value:d.detune}),this.frequency=new Signal({context:this.context,units:"frequency"}),this._amplitude=new Gain({context:this.context,gain:0}).connect(this.output),this._highpass=new Filter({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let g=0;g<inharmRatios.length;g++){const b=new FMOscillator({context:this.context,harmonicity:d.harmonicity,modulationIndex:d.modulationIndex,modulationType:"square",onstop:g===0?()=>this.onsilence(this):noOp,type:"square"});b.connect(this._highpass),this._oscillators[g]=b;const $=new Multiply({context:this.context,value:inharmRatios[g]});this._freqMultipliers[g]=$,this.frequency.chain($,b.frequency),this.detune.connect(b.detune)}this._filterFreqScaler=new Scale({context:this.context,max:7e3,min:this.toFrequency(d.resonance)}),this.envelope=new Envelope({attack:d.envelope.attack,attackCurve:"linear",context:this.context,decay:d.envelope.decay,release:d.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=d.octaves,this.octaves=d.octaves}static getDefaults(){return deepMerge(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(d,g=1){return this.envelope.triggerAttack(d,g),this._oscillators.forEach(b=>b.start(d)),this.envelope.sustain===0&&this._oscillators.forEach(b=>{b.stop(d+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(d){return this.envelope.triggerRelease(d),this._oscillators.forEach(g=>g.stop(d+this.toSeconds(this.envelope.release))),this}getLevelAtTime(d){return d=this.toSeconds(d),this.envelope.getValueAtTime(d)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(d){this._oscillators.forEach(g=>g.modulationIndex.value=d)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(d){this._oscillators.forEach(g=>g.harmonicity.value=d)}get resonance(){return this._filterFreqScaler.min}set resonance(d){this._filterFreqScaler.min=this.toFrequency(d),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(d){this._octaves=d,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,d)}dispose(){return super.dispose(),this._oscillators.forEach(d=>d.dispose()),this._freqMultipliers.forEach(d=>d.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class MembraneSynth extends Synth$1{constructor(){const d=optionsFromArguments(MembraneSynth.getDefaults(),arguments);super(d),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=d.pitchDecay,this.octaves=d.octaves,readOnly$1(this,["oscillator","envelope"])}static getDefaults(){return deepMerge(Monophonic.getDefaults(),Synth$1.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(d,g){const b=this.toSeconds(g),$=this.toFrequency(d instanceof FrequencyClass?d.toFrequency():d),j=$*this.octaves;return this.oscillator.frequency.setValueAtTime(j,b),this.oscillator.frequency.exponentialRampToValueAtTime($,b+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}__decorate([range(0)],MembraneSynth.prototype,"octaves",void 0);__decorate([timeRange(0)],MembraneSynth.prototype,"pitchDecay",void 0);class NoiseSynth extends Instrument{constructor(){const d=optionsFromArguments(NoiseSynth.getDefaults(),arguments);super(d),this.name="NoiseSynth",this.noise=new Noise(Object.assign({context:this.context},d.noise)),this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},d.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Instrument.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(omitFromObject(Noise.getDefaults(),Object.keys(Source.getDefaults())),{type:"white"})})}triggerAttack(d,g=1){return d=this.toSeconds(d),this.envelope.triggerAttack(d,g),this.noise.start(d),this.envelope.sustain===0&&this.noise.stop(d+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(d){return d=this.toSeconds(d),this.envelope.triggerRelease(d),this.noise.stop(d+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(d,g,b=1){return g=this.toSeconds(g),d=this.toSeconds(d),this.triggerAttack(g,b),this.triggerRelease(g+d),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const workletContext=new Set;function addToWorklet(_){workletContext.add(_)}function registerProcessor(_,d){const g=`registerProcessor("${_}", ${d})`;workletContext.add(g)}function getWorkletGlobalScope(){return Array.from(workletContext).join(`
`)}class ToneAudioWorklet extends ToneAudioNode{constructor(d){super(d),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=noOp;const g=URL.createObjectURL(new Blob([getWorkletGlobalScope()],{type:"text/javascript"})),b=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(g).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(b,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const toneAudioWorkletProcessor=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;addToWorklet(toneAudioWorkletProcessor);const singleIOProcess=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;addToWorklet(singleIOProcess);const delayLine=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;addToWorklet(delayLine);const workletName$1="feedback-comb-filter",feedbackCombFilter=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;registerProcessor(workletName$1,feedbackCombFilter);class FeedbackCombFilter extends ToneAudioWorklet{constructor(){const d=optionsFromArguments(FeedbackCombFilter.getDefaults(),arguments,["delayTime","resonance"]);super(d),this.name="FeedbackCombFilter",this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.delayTime=new Param({context:this.context,value:d.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new Param({context:this.context,value:d.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),readOnly$1(this,["resonance","delayTime"])}_audioWorkletName(){return workletName$1}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{delayTime:.1,resonance:.5})}onReady(d){connectSeries(this.input,d,this.output);const g=d.parameters.get("delayTime");this.delayTime.setParam(g);const b=d.parameters.get("feedback");this.resonance.setParam(b)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class OnePoleFilter extends ToneAudioNode{constructor(){const d=optionsFromArguments(OnePoleFilter.getDefaults(),arguments,["frequency","type"]);super(d),this.name="OnePoleFilter",this._frequency=d.frequency,this._type=d.type,this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const d=this._filter,g=this.toFrequency(this._frequency),b=1/(2*Math.PI*g);if(this._type==="lowpass"){const $=1/(b*this.context.sampleRate),j=$-1;this._filter=this.context.createIIRFilter([$,0],[1,j])}else{const $=1/(b*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,$])}this.input.chain(this._filter,this.output),d&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(d),d.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(d){this._frequency=d,this._createFilter()}get type(){return this._type}set type(d){this._type=d,this._createFilter()}getFrequencyResponse(d=128){const g=new Float32Array(d);for(let j=0;j<d;j++){const et=Math.pow(j/d,2)*(2e4-20)+20;g[j]=et}const b=new Float32Array(d),$=new Float32Array(d);return this._filter.getFrequencyResponse(g,b,$),b}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class LowpassCombFilter extends ToneAudioNode{constructor(){const d=optionsFromArguments(LowpassCombFilter.getDefaults(),arguments,["delayTime","resonance","dampening"]);super(d),this.name="LowpassCombFilter",this._combFilter=this.output=new FeedbackCombFilter({context:this.context,delayTime:d.delayTime,resonance:d.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new OnePoleFilter({context:this.context,frequency:d.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(d){this._lowpass.frequency=d}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class PluckSynth extends Instrument{constructor(){const d=optionsFromArguments(PluckSynth.getDefaults(),arguments);super(d),this.name="PluckSynth",this._noise=new Noise({context:this.context,type:"pink"}),this.attackNoise=d.attackNoise,this._lfcf=new LowpassCombFilter({context:this.context,dampening:d.dampening,resonance:d.resonance}),this.resonance=d.resonance,this.release=d.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return deepMerge(Instrument.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(d){this._lfcf.dampening=d}triggerAttack(d,g){const b=this.toFrequency(d);g=this.toSeconds(g);const $=1/b;return this._lfcf.delayTime.setValueAtTime($,g),this._noise.start(g),this._noise.stop(g+$*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(g),this._lfcf.resonance.setValueAtTime(this.resonance,g),this}triggerRelease(d){return this._lfcf.resonance.linearRampTo(0,this.release,d),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class PolySynth extends Instrument{constructor(){const d=optionsFromArguments(PolySynth.getDefaults(),arguments,["voice","options"]);super(d),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=$=>this.releaseAll($),assert(!isNumber(d.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const g=d.voice.getDefaults();this.options=Object.assign(g,d.options),this.voice=d.voice,this.maxPolyphony=d.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const b=this._voices.indexOf(this._dummyVoice);this._voices.splice(b,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Instrument.getDefaults(),{maxPolyphony:32,options:{},voice:Synth$1})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(d){this._availableVoices.push(d);const g=this._activeVoices.findIndex(b=>b.voice===d);this._activeVoices.splice(g,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const d=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return assert(d instanceof Monophonic,"Voice must extend Monophonic class"),d.connect(this.output),this._voices.push(d),d}else warn("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const d=this._availableVoices.shift(),g=this._voices.indexOf(d);this._voices.splice(g,1),this.context.isOffline||d.dispose()}}_triggerAttack(d,g,b){d.forEach($=>{const j=new MidiClass(this.context,$).toMidi(),_e=this._getNextAvailableVoice();_e&&(_e.triggerAttack($,g,b),this._activeVoices.push({midi:j,voice:_e,released:!1}),this.log("triggerAttack",$,g))})}_triggerRelease(d,g){d.forEach(b=>{const $=new MidiClass(this.context,b).toMidi(),j=this._activeVoices.find(({midi:_e,released:et})=>_e===$&&!et);j&&(j.voice.triggerRelease(g),j.released=!0,this.log("triggerRelease",b,g))})}_scheduleEvent(d,g,b,$){assert(!this.disposed,"Synth was already disposed"),b<=this.now()?d==="attack"?this._triggerAttack(g,b,$):this._triggerRelease(g,b):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(d,g,b,$)},b-this.now())}triggerAttack(d,g,b){Array.isArray(d)||(d=[d]);const $=this.toSeconds(g);return this._scheduleEvent("attack",d,$,b),this}triggerRelease(d,g){Array.isArray(d)||(d=[d]);const b=this.toSeconds(g);return this._scheduleEvent("release",d,b),this}triggerAttackRelease(d,g,b,$){const j=this.toSeconds(b);if(this.triggerAttack(d,j,$),isArray(g)){assert(isArray(d),"If the duration is an array, the notes must also be an array"),d=d;for(let _e=0;_e<d.length;_e++){const et=g[Math.min(_e,g.length-1)],tt=this.toSeconds(et);assert(tt>0,"The duration must be greater than 0"),this.triggerRelease(d[_e],j+tt)}}else{const _e=this.toSeconds(g);assert(_e>0,"The duration must be greater than 0"),this.triggerRelease(d,j+_e)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(d){const g=omitFromObject(d,["onsilence","context"]);return this.options=deepMerge(this.options,g),this._voices.forEach(b=>b.set(g)),this._dummyVoice.set(g),this}get(){return this._dummyVoice.get()}releaseAll(d){const g=this.toSeconds(d);return this._activeVoices.forEach(({voice:b})=>{b.triggerRelease(g)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(d=>d.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Sampler extends Instrument{constructor(){const d=optionsFromArguments(Sampler.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(d),this.name="Sampler",this._activeSources=new Map;const g={};Object.keys(d.urls).forEach(b=>{const $=parseInt(b,10);if(assert(isNote(b)||isNumber($)&&isFinite($),`url key is neither a note or midi pitch: ${b}`),isNote(b)){const j=new FrequencyClass(this.context,b).toMidi();g[j]=d.urls[b]}else isNumber($)&&isFinite($)&&(g[$]=d.urls[$])}),this._buffers=new ToneAudioBuffers({urls:g,onload:d.onload,baseUrl:d.baseUrl,onerror:d.onerror}),this.attack=d.attack,this.release=d.release,this.curve=d.curve,this._buffers.loaded&&Promise.resolve().then(d.onload)}static getDefaults(){return Object.assign(Instrument.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:noOp,onerror:noOp,release:.1,urls:{}})}_findClosest(d){let b=0;for(;b<96;){if(this._buffers.has(d+b))return-b;if(this._buffers.has(d-b))return b;b++}throw new Error(`No available buffers for note: ${d}`)}triggerAttack(d,g,b=1){return this.log("triggerAttack",d,g,b),Array.isArray(d)||(d=[d]),d.forEach($=>{const j=ftomf(new FrequencyClass(this.context,$).toFrequency()),_e=Math.round(j),et=j-_e,tt=this._findClosest(_e),nt=_e-tt,it=this._buffers.get(nt),rt=intervalToFrequencyRatio(tt+et),st=new ToneBufferSource({url:it,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:rt}).connect(this.output);st.start(g,0,it.duration/rt,b),isArray(this._activeSources.get(_e))||this._activeSources.set(_e,[]),this._activeSources.get(_e).push(st),st.onended=()=>{if(this._activeSources&&this._activeSources.has(_e)){const ot=this._activeSources.get(_e),at=ot.indexOf(st);at!==-1&&ot.splice(at,1)}}}),this}triggerRelease(d,g){return this.log("triggerRelease",d,g),Array.isArray(d)||(d=[d]),d.forEach(b=>{const $=new FrequencyClass(this.context,b).toMidi();if(this._activeSources.has($)&&this._activeSources.get($).length){const j=this._activeSources.get($);g=this.toSeconds(g),j.forEach(_e=>{_e.stop(g)}),this._activeSources.set($,[])}}),this}releaseAll(d){const g=this.toSeconds(d);return this._activeSources.forEach(b=>{for(;b.length;)b.shift().stop(g)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(d,g,b,$=1){const j=this.toSeconds(b);return this.triggerAttack(d,j,$),isArray(g)?(assert(isArray(d),"notes must be an array when duration is array"),d.forEach((_e,et)=>{const tt=g[Math.min(et,g.length-1)];this.triggerRelease(_e,j+this.toSeconds(tt))})):this.triggerRelease(d,j+this.toSeconds(g)),this}add(d,g,b){if(assert(isNote(d)||isFinite(d),`note must be a pitch or midi: ${d}`),isNote(d)){const $=new FrequencyClass(this.context,d).toMidi();this._buffers.add($,g,b)}else this._buffers.add(d,g,b);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(d=>{d.forEach(g=>g.dispose())}),this._activeSources.clear(),this}}__decorate([timeRange(0)],Sampler.prototype,"attack",void 0);__decorate([timeRange(0)],Sampler.prototype,"release",void 0);class ToneEvent extends ToneWithContext{constructor(){const d=optionsFromArguments(ToneEvent.getDefaults(),arguments,["callback","value"]);super(d),this.name="ToneEvent",this._state=new StateTimeline("stopped"),this._startOffset=0,this._loop=d.loop,this.callback=d.callback,this.value=d.value,this._loopStart=this.toTicks(d.loopStart),this._loopEnd=this.toTicks(d.loopEnd),this._playbackRate=d.playbackRate,this._probability=d.probability,this._humanize=d.humanize,this.mute=d.mute,this._playbackRate=d.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(d=-1){this._state.forEachFrom(d,g=>{let b;if(g.state==="started"){g.id!==-1&&this.context.transport.clear(g.id);const $=g.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||isNumber(this._loop)&&this._loop>1){b=1/0,isNumber(this._loop)&&(b=this._loop*this._getLoopDuration());const j=this._state.getAfter($);j!==null&&(b=Math.min(b,j.time-$)),b!==1/0&&(b=new TicksClass(this.context,b));const _e=new TicksClass(this.context,this._getLoopDuration());g.id=this.context.transport.scheduleRepeat(this._tick.bind(this),_e,new TicksClass(this.context,$),b)}else g.id=this.context.transport.schedule(this._tick.bind(this),new TicksClass(this.context,$))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(d){this._startOffset=d}get probability(){return this._probability}set probability(d){this._probability=d}get humanize(){return this._humanize}set humanize(d){this._humanize=d}start(d){const g=this.toTicks(d);return this._state.getValueAtTime(g)==="stopped"&&(this._state.add({id:-1,state:"started",time:g}),this._rescheduleEvents(g)),this}stop(d){this.cancel(d);const g=this.toTicks(d);if(this._state.getValueAtTime(g)==="started"){this._state.setStateAtTime("stopped",g,{id:-1});const b=this._state.getBefore(g);let $=g;b!==null&&($=b.time),this._rescheduleEvents($)}return this}cancel(d){d=defaultArg(d,-1/0);const g=this.toTicks(d);return this._state.forEachFrom(g,b=>{this.context.transport.clear(b.id)}),this._state.cancel(g),this}_tick(d){const g=this.context.transport.getTicksAtTime(d);if(!this.mute&&this._state.getValueAtTime(g)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let b=.02;isBoolean(this.humanize)||(b=this.toSeconds(this.humanize)),d+=(Math.random()*2-1)*b}this.callback(d,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(d){this._loop=d,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(d){this._playbackRate=d,this._rescheduleEvents()}get loopEnd(){return new TicksClass(this.context,this._loopEnd).toSeconds()}set loopEnd(d){this._loopEnd=this.toTicks(d),this._loop&&this._rescheduleEvents()}get loopStart(){return new TicksClass(this.context,this._loopStart).toSeconds()}set loopStart(d){this._loopStart=this.toTicks(d),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const d=this.context.transport.ticks,g=this._state.get(d);if(g!==null&&g.state==="started"){const b=this._getLoopDuration();return(d-g.time)%b/b}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Loop extends ToneWithContext{constructor(){const d=optionsFromArguments(Loop.getDefaults(),arguments,["callback","interval"]);super(d),this.name="Loop",this._event=new ToneEvent({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:d.interval,playbackRate:d.playbackRate,probability:d.probability,humanize:d.humanize}),this.callback=d.callback,this.iterations=d.iterations}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{interval:"4n",callback:noOp,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(d){return this._event.start(d),this}stop(d){return this._event.stop(d),this}cancel(d){return this._event.cancel(d),this}_tick(d){this.callback(d)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(d){this._event.loopEnd=d}get playbackRate(){return this._event.playbackRate}set playbackRate(d){this._event.playbackRate=d}get humanize(){return this._event.humanize}set humanize(d){this._event.humanize=d}get probability(){return this._event.probability}set probability(d){this._event.probability=d}get mute(){return this._event.mute}set mute(d){this._event.mute=d}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(d){d===1/0?this._event.loop=!0:this._event.loop=d}dispose(){return super.dispose(),this._event.dispose(),this}}class Part extends ToneEvent{constructor(){const d=optionsFromArguments(Part.getDefaults(),arguments,["callback","events"]);super(d),this.name="Part",this._state=new StateTimeline("stopped"),this._events=new Set,this._state.increasing=!0,d.events.forEach(g=>{isArray(g)?this.add(g[0],g[1]):this.add(g)})}static getDefaults(){return Object.assign(ToneEvent.getDefaults(),{events:[]})}start(d,g){const b=this.toTicks(d);if(this._state.getValueAtTime(b)!=="started"){g=defaultArg(g,this._loop?this._loopStart:0),this._loop?g=defaultArg(g,this._loopStart):g=defaultArg(g,0);const $=this.toTicks(g);this._state.add({id:-1,offset:$,state:"started",time:b}),this._forEach(j=>{this._startNote(j,b,$)})}return this}_startNote(d,g,b){g-=b,this._loop?d.startOffset>=this._loopStart&&d.startOffset<this._loopEnd?(d.startOffset<b&&(g+=this._getLoopDuration()),d.start(new TicksClass(this.context,g))):d.startOffset<this._loopStart&&d.startOffset>=b&&(d.loop=!1,d.start(new TicksClass(this.context,g))):d.startOffset>=b&&d.start(new TicksClass(this.context,g))}get startOffset(){return this._startOffset}set startOffset(d){this._startOffset=d,this._forEach(g=>{g.startOffset+=this._startOffset})}stop(d){const g=this.toTicks(d);return this._state.cancel(g),this._state.setStateAtTime("stopped",g),this._forEach(b=>{b.stop(d)}),this}at(d,g){const b=new TransportTimeClass(this.context,d).toTicks(),$=new TicksClass(this.context,1).toSeconds(),j=this._events.values();let _e=j.next();for(;!_e.done;){const et=_e.value;if(Math.abs(b-et.startOffset)<$)return isDefined(g)&&(et.value=g),et;_e=j.next()}return isDefined(g)?(this.add(d,g),this.at(d)):null}add(d,g){d instanceof Object&&Reflect.has(d,"time")&&(g=d,d=g.time);const b=this.toTicks(d);let $;return g instanceof ToneEvent?($=g,$.callback=this._tick.bind(this)):$=new ToneEvent({callback:this._tick.bind(this),context:this.context,value:g}),$.startOffset=b,$.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add($),this._restartEvent($),this}_restartEvent(d){this._state.forEach(g=>{g.state==="started"?this._startNote(d,g.time,g.offset):d.stop(new TicksClass(this.context,g.time))})}remove(d,g){return isObject(d)&&d.hasOwnProperty("time")&&(g=d,d=g.time),d=this.toTicks(d),this._events.forEach(b=>{b.startOffset===d&&(isUndef(g)||isDefined(g)&&b.value===g)&&(this._events.delete(b),b.dispose())}),this}clear(){return this._forEach(d=>d.dispose()),this._events.clear(),this}cancel(d){return this._forEach(g=>g.cancel(d)),this._state.cancel(this.toTicks(d)),this}_forEach(d){return this._events&&this._events.forEach(g=>{g instanceof Part?g._forEach(d):d(g)}),this}_setAll(d,g){this._forEach(b=>{b[d]=g})}_tick(d,g){this.mute||this.callback(d,g)}_testLoopBoundries(d){this._loop&&(d.startOffset<this._loopStart||d.startOffset>=this._loopEnd)?d.cancel(0):d.state==="stopped"&&this._restartEvent(d)}get probability(){return this._probability}set probability(d){this._probability=d,this._setAll("probability",d)}get humanize(){return this._humanize}set humanize(d){this._humanize=d,this._setAll("humanize",d)}get loop(){return this._loop}set loop(d){this._loop=d,this._forEach(g=>{g.loopStart=this.loopStart,g.loopEnd=this.loopEnd,g.loop=d,this._testLoopBoundries(g)})}get loopEnd(){return new TicksClass(this.context,this._loopEnd).toSeconds()}set loopEnd(d){this._loopEnd=this.toTicks(d),this._loop&&this._forEach(g=>{g.loopEnd=d,this._testLoopBoundries(g)})}get loopStart(){return new TicksClass(this.context,this._loopStart).toSeconds()}set loopStart(d){this._loopStart=this.toTicks(d),this._loop&&this._forEach(g=>{g.loopStart=this.loopStart,this._testLoopBoundries(g)})}get playbackRate(){return this._playbackRate}set playbackRate(d){this._playbackRate=d,this._setAll("playbackRate",d)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*upPatternGen(_){let d=0;for(;d<_;)d=clamp$2(d,0,_-1),yield d,d++}function*downPatternGen(_){let d=_-1;for(;d>=0;)d=clamp$2(d,0,_-1),yield d,d--}function*infiniteGen(_,d){for(;;)yield*d(_)}function*alternatingGenerator(_,d){let g=d?0:_-1;for(;;)g=clamp$2(g,0,_-1),yield g,d?(g++,g>=_-1&&(d=!1)):(g--,g<=0&&(d=!0))}function*jumpUp(_){let d=0,g=0;for(;d<_;)d=clamp$2(d,0,_-1),yield d,g++,d+=g%2?2:-1}function*jumpDown(_){let d=_-1,g=0;for(;d>=0;)d=clamp$2(d,0,_-1),yield d,g++,d+=g%2?-2:1}function*randomGen(_){for(;;)yield Math.floor(Math.random()*_)}function*randomOnce(_){const d=[];for(let g=0;g<_;g++)d.push(g);for(;d.length>0;){const g=d.splice(Math.floor(d.length*Math.random()),1);yield clamp$2(g[0],0,_-1)}}function*randomWalk(_){let d=Math.floor(Math.random()*_);for(;;)d===0?d++:d===_-1||Math.random()<.5?d--:d++,yield d}function*PatternGenerator(_,d="up",g=0){switch(assert(_>=1,"The number of values must be at least one"),d){case"up":yield*infiniteGen(_,upPatternGen);case"down":yield*infiniteGen(_,downPatternGen);case"upDown":yield*alternatingGenerator(_,!0);case"downUp":yield*alternatingGenerator(_,!1);case"alternateUp":yield*infiniteGen(_,jumpUp);case"alternateDown":yield*infiniteGen(_,jumpDown);case"random":yield*randomGen(_);case"randomOnce":yield*infiniteGen(_,randomOnce);case"randomWalk":yield*randomWalk(_)}}class Pattern extends Loop{constructor(){const d=optionsFromArguments(Pattern.getDefaults(),arguments,["callback","values","pattern"]);super(d),this.name="Pattern",this.callback=d.callback,this._values=d.values,this._pattern=PatternGenerator(d.values.length,d.pattern),this._type=d.pattern}static getDefaults(){return Object.assign(Loop.getDefaults(),{pattern:"up",values:[],callback:noOp})}_tick(d){const g=this._pattern.next();this._index=g.value,this._value=this._values[g.value],this.callback(d,this._value)}get values(){return this._values}set values(d){this._values=d,this.pattern=this._type}get value(){return this._value}get index(){return this._index}get pattern(){return this._type}set pattern(d){this._type=d,this._pattern=PatternGenerator(this._values.length,this._type)}}class Sequence extends ToneEvent{constructor(){const d=optionsFromArguments(Sequence.getDefaults(),arguments,["callback","events","subdivision"]);super(d),this.name="Sequence",this._part=new Part({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[],this._subdivision=this.toTicks(d.subdivision),this.events=d.events,this.loop=d.loop,this.loopStart=d.loopStart,this.loopEnd=d.loopEnd,this.playbackRate=d.playbackRate,this.probability=d.probability,this.humanize=d.humanize,this.mute=d.mute,this.playbackRate=d.playbackRate}static getDefaults(){return Object.assign(omitFromObject(ToneEvent.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(d,g){g!==null&&!this.mute&&this.callback(d,g)}get events(){return this._events}set events(d){this.clear(),this._eventsArray=d,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(d,g){return this._part.start(d,g&&this._indexTime(g)),this}stop(d){return this._part.stop(d),this}get subdivision(){return new TicksClass(this.context,this._subdivision).toSeconds()}_createSequence(d){return new Proxy(d,{get:(g,b)=>g[b],set:(g,b,$)=>(isString(b)&&isFinite(parseInt(b,10))&&isArray($)?g[b]=this._createSequence($):g[b]=$,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(d,g,b){d.forEach(($,j)=>{const _e=j*g+b;if(isArray($))this._rescheduleSequence($,g/$.length,_e);else{const et=new TicksClass(this.context,_e,"i").toSeconds();this._part.add(et,$)}})}_indexTime(d){return new TicksClass(this.context,d*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(d){this._part.loop=d}get loopStart(){return this._loopStart}set loopStart(d){this._loopStart=d,this._part.loopStart=this._indexTime(d)}get loopEnd(){return this._loopEnd}set loopEnd(d){this._loopEnd=d,d===0?this._part.loopEnd=this._indexTime(this._eventsArray.length):this._part.loopEnd=this._indexTime(d)}get startOffset(){return this._part.startOffset}set startOffset(d){this._part.startOffset=d}get playbackRate(){return this._part.playbackRate}set playbackRate(d){this._part.playbackRate=d}get probability(){return this._part.probability}set probability(d){this._part.probability=d}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(d){this._part.humanize=d}get length(){return this._part.length}}class CrossFade extends ToneAudioNode{constructor(){const d=optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]);super(d),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new GainToAudio({context:this.context}),this.a=new Gain({context:this.context,gain:0}),this.b=new Gain({context:this.context,gain:0}),this.output=new Gain({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new Signal({context:this.context,units:"normalRange",value:d.fade}),readOnly$1(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",connect(this._split,this.a.gain,0),connect(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Effect extends ToneAudioNode{constructor(d){super(d),this.name="Effect",this._dryWet=new CrossFade({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Gain({context:this.context}),this.effectReturn=new Gain({context:this.context}),this.input=new Gain({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(d.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],readOnly$1(this,"wet")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}connectEffect(d){return this._internalChannels.push(d),this.effectSend.chain(d,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class LFOEffect extends Effect{constructor(d){super(d),this.name="LFOEffect",this._lfo=new LFO({context:this.context,frequency:d.frequency,amplitude:d.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=d.type,readOnly$1(this,["frequency","depth"])}static getDefaults(){return Object.assign(Effect.getDefaults(),{frequency:1,type:"sine",depth:1})}start(d){return this._lfo.start(d),this}stop(d){return this._lfo.stop(d),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(d){this._lfo.type=d}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class AutoFilter extends LFOEffect{constructor(){const d=optionsFromArguments(AutoFilter.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);super(d),this.name="AutoFilter",this.filter=new Filter(Object.assign(d.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=d.octaves,this.baseFrequency=d.baseFrequency}static getDefaults(){return Object.assign(LFOEffect.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(d){this._lfo.min=this.toFrequency(d),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(d){this._octaves=d,this._lfo.max=this._lfo.min*Math.pow(2,d)}dispose(){return super.dispose(),this.filter.dispose(),this}}class Panner extends ToneAudioNode{constructor(){const d=optionsFromArguments(Panner.getDefaults(),arguments,["pan"]);super(d),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Param({context:this.context,param:this._panner.pan,value:d.pan,minValue:-1,maxValue:1}),this._panner.channelCount=d.channelCount,this._panner.channelCountMode="explicit",readOnly$1(this,"pan")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class AutoPanner extends LFOEffect{constructor(){const d=optionsFromArguments(AutoPanner.getDefaults(),arguments,["frequency"]);super(d),this.name="AutoPanner",this._panner=new Panner({context:this.context,channelCount:d.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(LFOEffect.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class Follower extends ToneAudioNode{constructor(){const d=optionsFromArguments(Follower.getDefaults(),arguments,["smoothing"]);super(d),this.name="Follower",this._abs=this.input=new Abs({context:this.context}),this._lowpass=this.output=new OnePoleFilter({context:this.context,frequency:1/this.toSeconds(d.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=d.smoothing}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(d){this._smoothing=d,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class AutoWah extends Effect{constructor(){const d=optionsFromArguments(AutoWah.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);super(d),this.name="AutoWah",this._follower=new Follower({context:this.context,smoothing:d.follower}),this._sweepRange=new ScaleExp({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(d.baseFrequency),this._octaves=d.octaves,this._inputBoost=new Gain({context:this.context}),this._bandpass=new Filter({context:this.context,rolloff:-48,frequency:0,Q:d.Q}),this._peaking=new Filter({context:this.context,type:"peaking"}),this._peaking.gain.value=d.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=d.sensitivity,readOnly$1(this,["gain","Q"])}static getDefaults(){return Object.assign(Effect.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(d){this._octaves=d,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(d){this._follower.smoothing=d}get baseFrequency(){return this._baseFrequency}set baseFrequency(d){this._baseFrequency=this.toFrequency(d),this._setSweepRange()}get sensitivity(){return gainToDb(1/this._inputBoost.gain.value)}set sensitivity(d){this._inputBoost.gain.value=1/dbToGain(d)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const workletName="bit-crusher",bitCrusherWorklet=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;registerProcessor(workletName,bitCrusherWorklet);class BitCrusher extends Effect{constructor(){const d=optionsFromArguments(BitCrusher.getDefaults(),arguments,["bits"]);super(d),this.name="BitCrusher",this._bitCrusherWorklet=new BitCrusherWorklet({context:this.context,bits:d.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(Effect.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class BitCrusherWorklet extends ToneAudioWorklet{constructor(){const d=optionsFromArguments(BitCrusherWorklet.getDefaults(),arguments);super(d),this.name="BitCrusherWorklet",this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.bits=new Param({context:this.context,value:d.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(ToneAudioWorklet.getDefaults(),{bits:12})}_audioWorkletName(){return workletName}onReady(d){connectSeries(this.input,d,this.output);const g=d.parameters.get("bits");this.bits.setParam(g)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class Chebyshev extends Effect{constructor(){const d=optionsFromArguments(Chebyshev.getDefaults(),arguments,["order"]);super(d),this.name="Chebyshev",this._shaper=new WaveShaper({context:this.context,length:4096}),this._order=d.order,this.connectEffect(this._shaper),this.order=d.order,this.oversample=d.oversample}static getDefaults(){return Object.assign(Effect.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(d,g,b){return b.has(g)||(g===0?b.set(g,0):g===1?b.set(g,d):b.set(g,2*d*this._getCoefficient(d,g-1,b)-this._getCoefficient(d,g-2,b))),b.get(g)}get order(){return this._order}set order(d){assert(Number.isInteger(d),"'order' must be an integer"),this._order=d,this._shaper.setMap(g=>this._getCoefficient(g,d,new Map))}get oversample(){return this._shaper.oversample}set oversample(d){this._shaper.oversample=d}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Split extends ToneAudioNode{constructor(){const d=optionsFromArguments(Split.getDefaults(),arguments,["channels"]);super(d),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(d.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Merge extends ToneAudioNode{constructor(){const d=optionsFromArguments(Merge.getDefaults(),arguments,["channels"]);super(d),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(d.channels)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class StereoEffect extends ToneAudioNode{constructor(d){super(d),this.name="StereoEffect",this.input=new Gain({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new CrossFade({context:this.context,fade:d.wet}),this.wet=this._dryWet.fade,this._split=new Split({context:this.context,channels:2}),this._merge=new Merge({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),readOnly$1(this,["wet"])}connectEffectLeft(...d){this._split.connect(d[0],0,0),connectSeries(...d),connect(d[d.length-1],this._merge,0,0)}connectEffectRight(...d){this._split.connect(d[0],1,0),connectSeries(...d),connect(d[d.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class StereoFeedbackEffect extends StereoEffect{constructor(d){super(d),this.feedback=new Signal({context:this.context,value:d.feedback,units:"normalRange"}),this._feedbackL=new Gain({context:this.context}),this._feedbackR=new Gain({context:this.context}),this._feedbackSplit=new Split({context:this.context,channels:2}),this._feedbackMerge=new Merge({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),readOnly$1(this,["feedback"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Chorus extends StereoFeedbackEffect{constructor(){const d=optionsFromArguments(Chorus.getDefaults(),arguments,["frequency","delayTime","depth"]);super(d),this.name="Chorus",this._depth=d.depth,this._delayTime=d.delayTime/1e3,this._lfoL=new LFO({context:this.context,frequency:d.frequency,min:0,max:1}),this._lfoR=new LFO({context:this.context,frequency:d.frequency,min:0,max:1,phase:180}),this._delayNodeL=new Delay({context:this.context}),this._delayNodeR=new Delay({context:this.context}),this.frequency=this._lfoL.frequency,readOnly$1(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=d.type,this.spread=d.spread}static getDefaults(){return Object.assign(StereoFeedbackEffect.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(d){this._depth=d;const g=this._delayTime*d;this._lfoL.min=Math.max(this._delayTime-g,0),this._lfoL.max=this._delayTime+g,this._lfoR.min=Math.max(this._delayTime-g,0),this._lfoR.max=this._delayTime+g}get delayTime(){return this._delayTime*1e3}set delayTime(d){this._delayTime=d/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(d){this._lfoL.type=d,this._lfoR.type=d}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(d){this._lfoL.phase=90-d/2,this._lfoR.phase=d/2+90}start(d){return this._lfoL.start(d),this._lfoR.start(d),this}stop(d){return this._lfoL.stop(d),this._lfoR.stop(d),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Distortion extends Effect{constructor(){const d=optionsFromArguments(Distortion.getDefaults(),arguments,["distortion"]);super(d),this.name="Distortion",this._shaper=new WaveShaper({context:this.context,length:4096}),this._distortion=d.distortion,this.connectEffect(this._shaper),this.distortion=d.distortion,this.oversample=d.oversample}static getDefaults(){return Object.assign(Effect.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(d){this._distortion=d;const g=d*100,b=Math.PI/180;this._shaper.setMap($=>Math.abs($)<.001?0:(3+g)*$*20*b/(Math.PI+g*Math.abs($)))}get oversample(){return this._shaper.oversample}set oversample(d){this._shaper.oversample=d}dispose(){return super.dispose(),this._shaper.dispose(),this}}class FeedbackEffect extends Effect{constructor(d){super(d),this.name="FeedbackEffect",this._feedbackGain=new Gain({context:this.context,gain:d.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,readOnly$1(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Effect.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class FeedbackDelay extends FeedbackEffect{constructor(){const d=optionsFromArguments(FeedbackDelay.getDefaults(),arguments,["delayTime","feedback"]);super(d),this.name="FeedbackDelay",this._delayNode=new Delay({context:this.context,delayTime:d.delayTime,maxDelay:d.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),readOnly$1(this,"delayTime")}static getDefaults(){return Object.assign(FeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class PhaseShiftAllpass extends ToneAudioNode{constructor(d){super(d),this.name="PhaseShiftAllpass",this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.offset90=new Gain({context:this.context});const g=[.6923878,.9360654322959,.988229522686,.9987488452737],b=[.4021921162426,.856171088242,.9722909545651,.9952884791278];this._bank0=this._createAllPassFilterBank(g),this._bank1=this._createAllPassFilterBank(b),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),connectSeries(this.input,...this._bank0,this._oneSampleDelay,this.output),connectSeries(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(d){return d.map(b=>{const $=[[b*b,0,-1],[1,0,-(b*b)]];return this.context.createIIRFilter($[0],$[1])})}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(d=>d.disconnect()),this._bank1.forEach(d=>d.disconnect()),this._oneSampleDelay.disconnect(),this}}class FrequencyShifter extends Effect{constructor(){const d=optionsFromArguments(FrequencyShifter.getDefaults(),arguments,["frequency"]);super(d),this.name="FrequencyShifter",this.frequency=new Signal({context:this.context,units:"frequency",value:d.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new ToneOscillatorNode({context:this.context,type:"sine"}),this._cosine=new Oscillator({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new Multiply({context:this.context}),this._cosineMultiply=new Multiply({context:this.context}),this._negate=new Negate({context:this.context}),this._add=new Add({context:this.context}),this._phaseShifter=new PhaseShiftAllpass({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const g=this.immediate();this._sine.start(g),this._cosine.start(g)}static getDefaults(){return Object.assign(Effect.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const combFilterTunings=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],allpassFilterFrequencies=[225,556,441,341];class Freeverb extends StereoEffect{constructor(){const d=optionsFromArguments(Freeverb.getDefaults(),arguments,["roomSize","dampening"]);super(d),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[],this.roomSize=new Signal({context:this.context,value:d.roomSize,units:"normalRange"}),this._allpassFiltersL=allpassFilterFrequencies.map(g=>{const b=this.context.createBiquadFilter();return b.type="allpass",b.frequency.value=g,b}),this._allpassFiltersR=allpassFilterFrequencies.map(g=>{const b=this.context.createBiquadFilter();return b.type="allpass",b.frequency.value=g,b}),this._combFilters=combFilterTunings.map((g,b)=>{const $=new LowpassCombFilter({context:this.context,dampening:d.dampening,delayTime:g});return b<combFilterTunings.length/2?this.connectEffectLeft($,...this._allpassFiltersL):this.connectEffectRight($,...this._allpassFiltersR),this.roomSize.connect($.resonance),$}),readOnly$1(this,["roomSize"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(d){this._combFilters.forEach(g=>g.dampening=d)}dispose(){return super.dispose(),this._allpassFiltersL.forEach(d=>d.disconnect()),this._allpassFiltersR.forEach(d=>d.disconnect()),this._combFilters.forEach(d=>d.dispose()),this.roomSize.dispose(),this}}const combFilterDelayTimes=[1687/25e3,1601/25e3,2053/25e3,2251/25e3],combFilterResonances=[.773,.802,.753,.733],allpassFilterFreqs=[347,113,37];class JCReverb extends StereoEffect{constructor(){const d=optionsFromArguments(JCReverb.getDefaults(),arguments,["roomSize"]);super(d),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[],this.roomSize=new Signal({context:this.context,value:d.roomSize,units:"normalRange"}),this._scaleRoomSize=new Scale({context:this.context,min:-.733,max:.197}),this._allpassFilters=allpassFilterFreqs.map(g=>{const b=this.context.createBiquadFilter();return b.type="allpass",b.frequency.value=g,b}),this._feedbackCombFilters=combFilterDelayTimes.map((g,b)=>{const $=new FeedbackCombFilter({context:this.context,delayTime:g});return this._scaleRoomSize.connect($.resonance),$.resonance.value=combFilterResonances[b],b<combFilterDelayTimes.length/2?this.connectEffectLeft(...this._allpassFilters,$):this.connectEffectRight(...this._allpassFilters,$),$}),this.roomSize.connect(this._scaleRoomSize),readOnly$1(this,["roomSize"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(d=>d.disconnect()),this._feedbackCombFilters.forEach(d=>d.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class StereoXFeedbackEffect extends StereoFeedbackEffect{constructor(d){super(d),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),readOnly$1(this,["feedback"])}}class PingPongDelay extends StereoXFeedbackEffect{constructor(){const d=optionsFromArguments(PingPongDelay.getDefaults(),arguments,["delayTime","feedback"]);super(d),this.name="PingPongDelay",this._leftDelay=new Delay({context:this.context,maxDelay:d.maxDelay}),this._rightDelay=new Delay({context:this.context,maxDelay:d.maxDelay}),this._rightPreDelay=new Delay({context:this.context,maxDelay:d.maxDelay}),this.delayTime=new Signal({context:this.context,units:"time",value:d.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),readOnly$1(this,["delayTime"])}static getDefaults(){return Object.assign(StereoXFeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class PitchShift extends FeedbackEffect{constructor(){const d=optionsFromArguments(PitchShift.getDefaults(),arguments,["pitch"]);super(d),this.name="PitchShift",this._frequency=new Signal({context:this.context}),this._delayA=new Delay({maxDelay:1,context:this.context}),this._lfoA=new LFO({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new Delay({maxDelay:1,context:this.context}),this._lfoB=new LFO({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new CrossFade({context:this.context}),this._crossFadeLFO=new LFO({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new Delay({delayTime:d.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,readOnly$1(this,"delayTime"),this._pitch=d.pitch,this._windowSize=d.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const g=this.now();this._lfoA.start(g),this._lfoB.start(g),this._crossFadeLFO.start(g),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(FeedbackEffect.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(d){this._pitch=d;let g=0;d<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,g=intervalToFrequencyRatio(d-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,g=intervalToFrequencyRatio(d)-1),this._frequency.value=g*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(d){this._windowSize=this.toSeconds(d),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class Phaser extends StereoEffect{constructor(){const d=optionsFromArguments(Phaser.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);super(d),this.name="Phaser",this._lfoL=new LFO({context:this.context,frequency:d.frequency,min:0,max:1}),this._lfoR=new LFO({context:this.context,frequency:d.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(d.baseFrequency),this._octaves=d.octaves,this.Q=new Signal({context:this.context,value:d.Q,units:"positive"}),this._filtersL=this._makeFilters(d.stages,this._lfoL),this._filtersR=this._makeFilters(d.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=d.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=d.baseFrequency,this.octaves=d.octaves,this._lfoL.start(),this._lfoR.start(),readOnly$1(this,["frequency","Q"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(d,g){const b=[];for(let $=0;$<d;$++){const j=this.context.createBiquadFilter();j.type="allpass",this.Q.connect(j.Q),g.connect(j.frequency),b.push(j)}return b}get octaves(){return this._octaves}set octaves(d){this._octaves=d;const g=this._baseFrequency*Math.pow(2,d);this._lfoL.max=g,this._lfoR.max=g}get baseFrequency(){return this._baseFrequency}set baseFrequency(d){this._baseFrequency=this.toFrequency(d),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(d=>d.disconnect()),this._filtersR.forEach(d=>d.disconnect()),this.frequency.dispose(),this}}class Reverb extends Effect{constructor(){const d=optionsFromArguments(Reverb.getDefaults(),arguments,["decay"]);super(d),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve(),this._decay=d.decay,this._preDelay=d.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Effect.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(d){d=this.toSeconds(d),assertRange(d,.001),this._decay=d,this.generate()}get preDelay(){return this._preDelay}set preDelay(d){d=this.toSeconds(d),assertRange(d,0),this._preDelay=d,this.generate()}generate(){return __awaiter(this,void 0,void 0,function*(){const d=this.ready,g=new OfflineContext(2,this._decay+this._preDelay,this.context.sampleRate),b=new Noise({context:g}),$=new Noise({context:g}),j=new Merge({context:g});b.connect(j,0,0),$.connect(j,0,1);const _e=new Gain({context:g}).toDestination();j.connect(_e),b.start(0),$.start(0),_e.gain.setValueAtTime(0,0),_e.gain.setValueAtTime(1,this._preDelay),_e.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const et=g.render();return this.ready=et.then(noOp),yield d,this._convolver.buffer=(yield et).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class MidSideSplit extends ToneAudioNode{constructor(){super(optionsFromArguments(MidSideSplit.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new Split({channels:2,context:this.context}),this._midAdd=new Add({context:this.context}),this.mid=new Multiply({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new Subtract({context:this.context}),this.side=new Multiply({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class MidSideMerge extends ToneAudioNode{constructor(){super(optionsFromArguments(MidSideMerge.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new Gain({context:this.context}),this.side=new Gain({context:this.context}),this._left=new Add({context:this.context}),this._leftMult=new Multiply({context:this.context,value:Math.SQRT1_2}),this._right=new Subtract({context:this.context}),this._rightMult=new Multiply({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new Merge({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class MidSideEffect extends Effect{constructor(d){super(d),this.name="MidSideEffect",this._midSideMerge=new MidSideMerge({context:this.context}),this._midSideSplit=new MidSideSplit({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...d){this._midSend.chain(...d,this._midReturn)}connectEffectSide(...d){this._sideSend.chain(...d,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class StereoWidener extends MidSideEffect{constructor(){const d=optionsFromArguments(StereoWidener.getDefaults(),arguments,["width"]);super(d),this.name="StereoWidener",this.width=new Signal({context:this.context,value:d.width,units:"normalRange"}),readOnly$1(this,["width"]),this._twoTimesWidthMid=new Multiply({context:this.context,value:2}),this._twoTimesWidthSide=new Multiply({context:this.context,value:2}),this._midMult=new Multiply({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new Subtract({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),connect(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new Multiply({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(MidSideEffect.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class Tremolo extends StereoEffect{constructor(){const d=optionsFromArguments(Tremolo.getDefaults(),arguments,["frequency","depth"]);super(d),this.name="Tremolo",this._lfoL=new LFO({context:this.context,type:d.type,min:1,max:0}),this._lfoR=new LFO({context:this.context,type:d.type,min:1,max:0}),this._amplitudeL=new Gain({context:this.context}),this._amplitudeR=new Gain({context:this.context}),this.frequency=new Signal({context:this.context,value:d.frequency,units:"frequency"}),this.depth=new Signal({context:this.context,value:d.depth,units:"normalRange"}),readOnly$1(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=d.spread}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(d){return this._lfoL.start(d),this._lfoR.start(d),this}stop(d){return this._lfoL.stop(d),this._lfoR.stop(d),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(d){this._lfoL.type=d,this._lfoR.type=d}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(d){this._lfoL.phase=90-d/2,this._lfoR.phase=d/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Vibrato extends Effect{constructor(){const d=optionsFromArguments(Vibrato.getDefaults(),arguments,["frequency","depth"]);super(d),this.name="Vibrato",this._delayNode=new Delay({context:this.context,delayTime:0,maxDelay:d.maxDelay}),this._lfo=new LFO({context:this.context,type:d.type,min:0,max:d.maxDelay,frequency:d.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=d.depth,readOnly$1(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(Effect.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(d){this._lfo.type=d}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Analyser extends ToneAudioNode{constructor(){const d=optionsFromArguments(Analyser.getDefaults(),arguments,["type","size"]);super(d),this.name="Analyser",this._analysers=[],this._buffers=[],this.input=this.output=this._gain=new Gain({context:this.context}),this._split=new Split({context:this.context,channels:d.channels}),this.input.connect(this._split),assertRange(d.channels,1);for(let g=0;g<d.channels;g++)this._analysers[g]=this.context.createAnalyser(),this._split.connect(this._analysers[g],g,0);this.size=d.size,this.type=d.type,this.smoothing=d.smoothing}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((d,g)=>{const b=this._buffers[g];this._type==="fft"?d.getFloatFrequencyData(b):this._type==="waveform"&&d.getFloatTimeDomainData(b)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(d){this._analysers.forEach((g,b)=>{g.fftSize=d*2,this._buffers[b]=new Float32Array(d)})}get channels(){return this._analysers.length}get type(){return this._type}set type(d){assert(d==="waveform"||d==="fft",`Analyser: invalid type: ${d}`),this._type=d}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(d){this._analysers.forEach(g=>g.smoothingTimeConstant=d)}dispose(){return super.dispose(),this._analysers.forEach(d=>d.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class MeterBase extends ToneAudioNode{constructor(){super(optionsFromArguments(MeterBase.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Analyser({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Meter extends MeterBase{constructor(){const d=optionsFromArguments(Meter.getDefaults(),arguments,["smoothing"]);super(d),this.name="Meter",this.input=this.output=this._analyser=new Analyser({context:this.context,size:256,type:"waveform",channels:d.channelCount}),this.smoothing=d.smoothing,this.normalRange=d.normalRange,this._rms=new Array(d.channelCount),this._rms.fill(0)}static getDefaults(){return Object.assign(MeterBase.getDefaults(),{smoothing:.8,normalRange:!1,channelCount:1})}getLevel(){return warn("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const d=this._analyser.getValue(),b=(this.channels===1?[d]:d).map(($,j)=>{const _e=$.reduce((tt,nt)=>tt+nt*nt,0),et=Math.sqrt(_e/$.length);return this._rms[j]=Math.max(et,this._rms[j]*this.smoothing),this.normalRange?this._rms[j]:gainToDb(this._rms[j])});return this.channels===1?b[0]:b}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class FFT extends MeterBase{constructor(){const d=optionsFromArguments(FFT.getDefaults(),arguments,["size"]);super(d),this.name="FFT",this.normalRange=d.normalRange,this._analyser.type="fft",this.size=d.size}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(g=>this.normalRange?dbToGain(g):g)}get size(){return this._analyser.size}set size(d){this._analyser.size=d}get smoothing(){return this._analyser.smoothing}set smoothing(d){this._analyser.smoothing=d}getFrequencyOfIndex(d){return assert(0<=d&&d<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),d*this.context.sampleRate/(this.size*2)}}class DCMeter extends MeterBase{constructor(){super(optionsFromArguments(DCMeter.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class Waveform extends MeterBase{constructor(){const d=optionsFromArguments(Waveform.getDefaults(),arguments,["size"]);super(d),this.name="Waveform",this._analyser.type="waveform",this.size=d.size}static getDefaults(){return Object.assign(MeterBase.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(d){this._analyser.size=d}}class Solo extends ToneAudioNode{constructor(){const d=optionsFromArguments(Solo.getDefaults(),arguments,["solo"]);super(d),this.name="Solo",this.input=this.output=new Gain({context:this.context}),Solo._allSolos.has(this.context)||Solo._allSolos.set(this.context,new Set),Solo._allSolos.get(this.context).add(this),this.solo=d.solo}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(d){d?this._addSolo():this._removeSolo(),Solo._allSolos.get(this.context).forEach(g=>g._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Solo._soloed.has(this.context)||Solo._soloed.set(this.context,new Set),Solo._soloed.get(this.context).add(this)}_removeSolo(){Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).delete(this)}_isSoloed(){return Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).has(this)}_noSolos(){return!Solo._soloed.has(this.context)||Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Solo._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Solo._allSolos=new Map;Solo._soloed=new Map;class PanVol extends ToneAudioNode{constructor(){const d=optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"]);super(d),this.name="PanVol",this._panner=this.input=new Panner({context:this.context,pan:d.pan,channelCount:d.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Volume({context:this.context,volume:d.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=d.mute,readOnly$1(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(d){this._volume.mute=d}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Channel extends ToneAudioNode{constructor(){const d=optionsFromArguments(Channel.getDefaults(),arguments,["volume","pan"]);super(d),this.name="Channel",this._solo=this.input=new Solo({solo:d.solo,context:this.context}),this._panVol=this.output=new PanVol({context:this.context,pan:d.pan,volume:d.volume,mute:d.mute,channelCount:d.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),readOnly$1(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(d){this._solo.solo=d}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(d){this._panVol.mute=d}_getBus(d){return Channel.buses.has(d)||Channel.buses.set(d,new Gain({context:this.context})),Channel.buses.get(d)}send(d,g=0){const b=this._getBus(d),$=new Gain({context:this.context,units:"decibels",gain:g});return this.connect($),$.connect(b),$}receive(d){return this._getBus(d).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Channel.buses=new Map;class Mono extends ToneAudioNode{constructor(){super(optionsFromArguments(Mono.getDefaults(),arguments)),this.name="Mono",this.input=new Gain({context:this.context}),this._merge=this.output=new Merge({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class MultibandSplit extends ToneAudioNode{constructor(){const d=optionsFromArguments(MultibandSplit.getDefaults(),arguments,["lowFrequency","highFrequency"]);super(d),this.name="MultibandSplit",this.input=new Gain({context:this.context}),this.output=void 0,this.low=new Filter({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Filter({context:this.context,frequency:0,type:"highpass"}),this.mid=new Filter({context:this.context,frequency:0,type:"lowpass"}),this.high=new Filter({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high],this.lowFrequency=new Signal({context:this.context,units:"frequency",value:d.lowFrequency}),this.highFrequency=new Signal({context:this.context,units:"frequency",value:d.highFrequency}),this.Q=new Signal({context:this.context,units:"positive",value:d.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),readOnly$1(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),writable(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class Panner3D extends ToneAudioNode{constructor(){const d=optionsFromArguments(Panner3D.getDefaults(),arguments,["positionX","positionY","positionZ"]);super(d),this.name="Panner3D",this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=d.panningModel,this.maxDistance=d.maxDistance,this.distanceModel=d.distanceModel,this.coneOuterGain=d.coneOuterGain,this.coneOuterAngle=d.coneOuterAngle,this.coneInnerAngle=d.coneInnerAngle,this.refDistance=d.refDistance,this.rolloffFactor=d.rolloffFactor,this.positionX=new Param({context:this.context,param:this._panner.positionX,value:d.positionX}),this.positionY=new Param({context:this.context,param:this._panner.positionY,value:d.positionY}),this.positionZ=new Param({context:this.context,param:this._panner.positionZ,value:d.positionZ}),this.orientationX=new Param({context:this.context,param:this._panner.orientationX,value:d.orientationX}),this.orientationY=new Param({context:this.context,param:this._panner.orientationY,value:d.orientationY}),this.orientationZ=new Param({context:this.context,param:this._panner.orientationZ,value:d.orientationZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(d,g,b){return this.positionX.value=d,this.positionY.value=g,this.positionZ.value=b,this}setOrientation(d,g,b){return this.orientationX.value=d,this.orientationY.value=g,this.orientationZ.value=b,this}get panningModel(){return this._panner.panningModel}set panningModel(d){this._panner.panningModel=d}get refDistance(){return this._panner.refDistance}set refDistance(d){this._panner.refDistance=d}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(d){this._panner.rolloffFactor=d}get distanceModel(){return this._panner.distanceModel}set distanceModel(d){this._panner.distanceModel=d}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(d){this._panner.coneInnerAngle=d}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(d){this._panner.coneOuterAngle=d}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(d){this._panner.coneOuterGain=d}get maxDistance(){return this._panner.maxDistance}set maxDistance(d){this._panner.maxDistance=d}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class Recorder extends ToneAudioNode{constructor(){const d=optionsFromArguments(Recorder.getDefaults(),arguments);super(d),this.name="Recorder",this.input=new Gain({context:this.context}),assert(Recorder.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:d.mimeType})}static getDefaults(){return ToneAudioNode.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return theWindow!==null&&Reflect.has(theWindow,"MediaRecorder")}get state(){return this._recorder.state==="inactive"?"stopped":this._recorder.state==="paused"?"paused":"started"}start(){return __awaiter(this,void 0,void 0,function*(){assert(this.state!=="started","Recorder is already started");const d=new Promise(g=>{const b=()=>{this._recorder.removeEventListener("start",b,!1),g()};this._recorder.addEventListener("start",b,!1)});return this._recorder.start(),yield d})}stop(){return __awaiter(this,void 0,void 0,function*(){assert(this.state!=="stopped","Recorder is not started");const d=new Promise(g=>{const b=$=>{this._recorder.removeEventListener("dataavailable",b,!1),g($.data)};this._recorder.addEventListener("dataavailable",b,!1)});return this._recorder.stop(),yield d})}pause(){return assert(this.state==="started","Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class Compressor extends ToneAudioNode{constructor(){const d=optionsFromArguments(Compressor.getDefaults(),arguments,["threshold","ratio"]);super(d),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor,this.threshold=new Param({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:d.threshold}),this.attack=new Param({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:d.attack}),this.release=new Param({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:d.release}),this.knee=new Param({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:d.knee}),this.ratio=new Param({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:d.ratio}),readOnly$1(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class Gate extends ToneAudioNode{constructor(){const d=optionsFromArguments(Gate.getDefaults(),arguments,["threshold","smoothing"]);super(d),this.name="Gate",this._follower=new Follower({context:this.context,smoothing:d.smoothing}),this._gt=new GreaterThan({context:this.context,value:dbToGain(d.threshold)}),this.input=new Gain({context:this.context}),this._gate=this.output=new Gain({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return gainToDb(this._gt.value)}set threshold(d){this._gt.value=dbToGain(d)}get smoothing(){return this._follower.smoothing}set smoothing(d){this._follower.smoothing=d}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class Limiter extends ToneAudioNode{constructor(){const d=optionsFromArguments(Limiter.getDefaults(),arguments,["threshold"]);super(d),this.name="Limiter",this._compressor=this.input=this.output=new Compressor({context:this.context,ratio:20,attack:.003,release:.01,threshold:d.threshold}),this.threshold=this._compressor.threshold,readOnly$1(this,"threshold")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class MidSideCompressor extends ToneAudioNode{constructor(){const d=optionsFromArguments(MidSideCompressor.getDefaults(),arguments);super(d),this.name="MidSideCompressor",this._midSideSplit=this.input=new MidSideSplit({context:this.context}),this._midSideMerge=this.output=new MidSideMerge({context:this.context}),this.mid=new Compressor(Object.assign(d.mid,{context:this.context})),this.side=new Compressor(Object.assign(d.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),readOnly$1(this,["mid","side"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class MultibandCompressor extends ToneAudioNode{constructor(){const d=optionsFromArguments(MultibandCompressor.getDefaults(),arguments);super(d),this.name="MultibandCompressor",this._splitter=this.input=new MultibandSplit({context:this.context,lowFrequency:d.lowFrequency,highFrequency:d.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new Gain({context:this.context}),this.low=new Compressor(Object.assign(d.low,{context:this.context})),this.mid=new Compressor(Object.assign(d.mid,{context:this.context})),this.high=new Compressor(Object.assign(d.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),readOnly$1(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class EQ3 extends ToneAudioNode{constructor(){const d=optionsFromArguments(EQ3.getDefaults(),arguments,["low","mid","high"]);super(d),this.name="EQ3",this.output=new Gain({context:this.context}),this._internalChannels=[],this.input=this._multibandSplit=new MultibandSplit({context:this.context,highFrequency:d.highFrequency,lowFrequency:d.lowFrequency}),this._lowGain=new Gain({context:this.context,gain:d.low,units:"decibels"}),this._midGain=new Gain({context:this.context,gain:d.mid,units:"decibels"}),this._highGain=new Gain({context:this.context,gain:d.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),readOnly$1(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),writable(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class Convolver extends ToneAudioNode{constructor(){const d=optionsFromArguments(Convolver.getDefaults(),arguments,["url","onload"]);super(d),this.name="Convolver",this._convolver=this.context.createConvolver(),this._buffer=new ToneAudioBuffer(d.url,g=>{this.buffer=g,d.onload()}),this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=d.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{normalize:!0,onload:noOp})}load(d){return __awaiter(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(d)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(d){d&&this._buffer.set(d),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const g=this._buffer.get();this._convolver.buffer=g||null}get normalize(){return this._convolver.normalize}set normalize(d){this._convolver.normalize=d}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function now(){return getContext().now()}function immediate(){return getContext().immediate()}const Transport=getContext().transport;function getTransport(){return getContext().transport}const Destination=getContext().destination,Master=getContext().destination;function getDestination(){return getContext().destination}const Listener=getContext().listener;function getListener(){return getContext().listener}const Draw=getContext().draw;function getDraw(){return getContext().draw}const context=getContext();function loaded(){return ToneAudioBuffer.loaded()}const Buffer=ToneAudioBuffer,Buffers=ToneAudioBuffers,BufferSource=ToneBufferSource,Tone=Object.freeze(Object.defineProperty({__proto__:null,AMOscillator,AMSynth,Abs,Add,AmplitudeEnvelope,Analyser,AudioToGain,AutoFilter,AutoPanner,AutoWah,BaseContext,BiquadFilter,BitCrusher,Buffer,BufferSource,Buffers,Channel,Chebyshev,Chorus,Clock,Compressor,Context,Convolver,CrossFade,DCMeter,Delay,Destination,Distortion,Draw,DuoSynth,EQ3,Emitter,Envelope,FFT,FMOscillator,FMSynth,FatOscillator,FeedbackCombFilter,FeedbackDelay,Filter,Follower,Freeverb,Frequency,FrequencyClass,FrequencyEnvelope,FrequencyShifter,Gain,GainToAudio,Gate,GrainPlayer,GreaterThan,GreaterThanZero,IntervalTimeline,JCReverb,LFO,Limiter,Listener,Loop,LowpassCombFilter,Master,MembraneSynth,Merge,MetalSynth,Meter,MidSideCompressor,MidSideMerge,MidSideSplit,Midi,MidiClass,Mono,MonoSynth,MultibandCompressor,MultibandSplit,Multiply,Negate,Noise,NoiseSynth,Offline,OfflineContext,OmniOscillator,OnePoleFilter,Oscillator,PWMOscillator,PanVol,Panner,Panner3D,Param,Part,Pattern,Phaser,PingPongDelay,PitchShift,Player,Players,PluckSynth,PolySynth,Pow,PulseOscillator,Recorder,Reverb,Sampler,Scale,ScaleExp,Sequence,Signal,Solo,Split,StateTimeline,StereoWidener,Subtract,SyncedSignal,Synth:Synth$1,Ticks,TicksClass,Time,TimeClass,Timeline,ToneAudioBuffer,ToneAudioBuffers,ToneAudioNode,ToneBufferSource,ToneEvent,ToneOscillatorNode,Transport,TransportTime,TransportTimeClass,Tremolo,Unit:Units,UserMedia,Vibrato,Volume,WaveShaper,Waveform,Zero,connect,connectSeries,connectSignal,context,dbToGain,debug:Debug,defaultArg,disconnect,fanIn,ftom,gainToDb,getContext,getDestination,getDraw,getListener,getTransport,immediate,intervalToFrequencyRatio,isArray,isBoolean,isDefined,isFunction,isNote,isNumber,isObject,isString,isUndef,loaded,mtof,now,optionsFromArguments,setContext,start,supported:isSupported,version},Symbol.toStringTag,{value:"Module"})),DefaultBufferLength=1024;let nextPropID=0,Range$1=class{constructor(d,g){this.from=d,this.to=g}};class NodeProp{constructor(d={}){this.id=nextPropID++,this.perNode=!!d.perNode,this.deserialize=d.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(d){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof d!="function"&&(d=NodeType.match(d)),g=>{let b=d(g);return b===void 0?null:[this,b]}}}NodeProp.closedBy=new NodeProp({deserialize:_=>_.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:_=>_.split(" ")});NodeProp.group=new NodeProp({deserialize:_=>_.split(" ")});NodeProp.isolate=new NodeProp({deserialize:_=>{if(_&&_!="rtl"&&_!="ltr"&&_!="auto")throw new RangeError("Invalid value for isolate: "+_);return _||"auto"}});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(d,g,b){this.tree=d,this.overlay=g,this.parser=b}static get(d){return d&&d.props&&d.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(d,g,b,$=0){this.name=d,this.props=g,this.id=b,this.flags=$}static define(d){let g=d.props&&d.props.length?Object.create(null):noProps,b=(d.top?1:0)|(d.skipped?2:0)|(d.error?4:0)|(d.name==null?8:0),$=new NodeType(d.name||"",g,d.id,b);if(d.props){for(let j of d.props)if(Array.isArray(j)||(j=j($)),j){if(j[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");g[j[0].id]=j[1]}}return $}prop(d){return this.props[d.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(d){if(typeof d=="string"){if(this.name==d)return!0;let g=this.prop(NodeProp.group);return g?g.indexOf(d)>-1:!1}return this.id==d}static match(d){let g=Object.create(null);for(let b in d)for(let $ of b.split(" "))g[$]=d[b];return b=>{for(let $=b.prop(NodeProp.group),j=-1;j<($?$.length:0);j++){let _e=g[j<0?b.name:$[j]];if(_e)return _e}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(d){this.types=d;for(let g=0;g<d.length;g++)if(d[g].id!=g)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...d){let g=[];for(let b of this.types){let $=null;for(let j of d){let _e=j(b);_e&&($||($=Object.assign({},b.props)),$[_e[0].id]=_e[1])}g.push($?new NodeType(b.name,$,b.id,b.flags):b)}return new NodeSet(g)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(_){_[_.ExcludeBuffers=1]="ExcludeBuffers",_[_.IncludeAnonymous=2]="IncludeAnonymous",_[_.IgnoreMounts=4]="IgnoreMounts",_[_.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(d,g,b,$,j){if(this.type=d,this.children=g,this.positions=b,this.length=$,this.props=null,j&&j.length){this.props=Object.create(null);for(let[_e,et]of j)this.props[typeof _e=="number"?_e:_e.id]=et}}toString(){let d=MountedTree.get(this);if(d&&!d.overlay)return d.tree.toString();let g="";for(let b of this.children){let $=b.toString();$&&(g&&(g+=","),g+=$)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(g.length?"("+g+")":""):g}cursor(d=0){return new TreeCursor(this.topNode,d)}cursorAt(d,g=0,b=0){let $=CachedNode.get(this)||this.topNode,j=new TreeCursor($);return j.moveTo(d,g),CachedNode.set(this,j._tree),j}get topNode(){return new TreeNode(this,0,0,null)}resolve(d,g=0){let b=resolveNode(CachedNode.get(this)||this.topNode,d,g,!1);return CachedNode.set(this,b),b}resolveInner(d,g=0){let b=resolveNode(CachedInnerNode.get(this)||this.topNode,d,g,!0);return CachedInnerNode.set(this,b),b}resolveStack(d,g=0){return stackIterator(this,d,g)}iterate(d){let{enter:g,leave:b,from:$=0,to:j=this.length}=d,_e=d.mode||0,et=(_e&IterMode.IncludeAnonymous)>0;for(let tt=this.cursor(_e|IterMode.IncludeAnonymous);;){let nt=!1;if(tt.from<=j&&tt.to>=$&&(!et&&tt.type.isAnonymous||g(tt)!==!1)){if(tt.firstChild())continue;nt=!0}for(;nt&&b&&(et||!tt.type.isAnonymous)&&b(tt),!tt.nextSibling();){if(!tt.parent())return;nt=!0}}}prop(d){return d.perNode?this.props?this.props[d.id]:void 0:this.type.prop(d)}get propValues(){let d=[];if(this.props)for(let g in this.props)d.push([+g,this.props[g]]);return d}balance(d={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(g,b,$)=>new Tree(this.type,g,b,$,this.propValues),d.makeTree||((g,b,$)=>new Tree(NodeType.none,g,b,$)))}static build(d){return buildTree(d)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(d,g){this.buffer=d,this.index=g}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(d,g,b){this.buffer=d,this.length=g,this.set=b}get type(){return NodeType.none}toString(){let d=[];for(let g=0;g<this.buffer.length;)d.push(this.childString(g)),g=this.buffer[g+3];return d.join(",")}childString(d){let g=this.buffer[d],b=this.buffer[d+3],$=this.set.types[g],j=$.name;if(/\W/.test(j)&&!$.isError&&(j=JSON.stringify(j)),d+=4,b==d)return j;let _e=[];for(;d<b;)_e.push(this.childString(d)),d=this.buffer[d+3];return j+"("+_e.join(",")+")"}findChild(d,g,b,$,j){let{buffer:_e}=this,et=-1;for(let tt=d;tt!=g&&!(checkSide(j,$,_e[tt+1],_e[tt+2])&&(et=tt,b>0));tt=_e[tt+3]);return et}slice(d,g,b){let $=this.buffer,j=new Uint16Array(g-d),_e=0;for(let et=d,tt=0;et<g;){j[tt++]=$[et++],j[tt++]=$[et++]-b;let nt=j[tt++]=$[et++]-b;j[tt++]=$[et++]-d,_e=Math.max(_e,nt)}return new TreeBuffer(j,_e,this.set)}}function checkSide(_,d,g,b){switch(_){case-2:return g<d;case-1:return b>=d&&g<d;case 0:return g<d&&b>d;case 1:return g<=d&&b>d;case 2:return b>d;case 4:return!0}}function resolveNode(_,d,g,b){for(var $;_.from==_.to||(g<1?_.from>=d:_.from>d)||(g>-1?_.to<=d:_.to<d);){let _e=!b&&_ instanceof TreeNode&&_.index<0?null:_.parent;if(!_e)return _;_=_e}let j=b?0:IterMode.IgnoreOverlays;if(b)for(let _e=_,et=_e.parent;et;_e=et,et=_e.parent)_e instanceof TreeNode&&_e.index<0&&(($=et.enter(d,g,j))===null||$===void 0?void 0:$.from)!=_e.from&&(_=et);for(;;){let _e=_.enter(d,g,j);if(!_e)return _;_=_e}}class BaseNode{cursor(d=0){return new TreeCursor(this,d)}getChild(d,g=null,b=null){let $=getChildren(this,d,g,b);return $.length?$[0]:null}getChildren(d,g=null,b=null){return getChildren(this,d,g,b)}resolve(d,g=0){return resolveNode(this,d,g,!1)}resolveInner(d,g=0){return resolveNode(this,d,g,!0)}matchContext(d){return matchNodeContext(this,d)}enterUnfinishedNodesBefore(d){let g=this.childBefore(d),b=this;for(;g;){let $=g.lastChild;if(!$||$.to!=g.to)break;$.type.isError&&$.from==$.to?(b=g,g=$.prevSibling):g=$}return b}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(d,g,b,$){super(),this._tree=d,this.from=g,this.index=b,this._parent=$}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(d,g,b,$,j=0){for(let _e=this;;){for(let{children:et,positions:tt}=_e._tree,nt=g>0?et.length:-1;d!=nt;d+=g){let it=et[d],rt=tt[d]+_e.from;if(checkSide($,b,rt,rt+it.length)){if(it instanceof TreeBuffer){if(j&IterMode.ExcludeBuffers)continue;let st=it.findChild(0,it.buffer.length,g,b-rt,$);if(st>-1)return new BufferNode(new BufferContext(_e,it,d,rt),null,st)}else if(j&IterMode.IncludeAnonymous||!it.type.isAnonymous||hasChild(it)){let st;if(!(j&IterMode.IgnoreMounts)&&(st=MountedTree.get(it))&&!st.overlay)return new TreeNode(st.tree,rt,d,_e);let ot=new TreeNode(it,rt,d,_e);return j&IterMode.IncludeAnonymous||!ot.type.isAnonymous?ot:ot.nextChild(g<0?it.children.length-1:0,g,b,$)}}}if(j&IterMode.IncludeAnonymous||!_e.type.isAnonymous||(_e.index>=0?d=_e.index+g:d=g<0?-1:_e._parent._tree.children.length,_e=_e._parent,!_e))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(d){return this.nextChild(0,1,d,2)}childBefore(d){return this.nextChild(this._tree.children.length-1,-1,d,-2)}enter(d,g,b=0){let $;if(!(b&IterMode.IgnoreOverlays)&&($=MountedTree.get(this._tree))&&$.overlay){let j=d-this.from;for(let{from:_e,to:et}of $.overlay)if((g>0?_e<=j:_e<j)&&(g<0?et>=j:et>j))return new TreeNode($.tree,$.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,d,g,b)}nextSignificantParent(){let d=this;for(;d.type.isAnonymous&&d._parent;)d=d._parent;return d}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(_,d,g,b){let $=_.cursor(),j=[];if(!$.firstChild())return j;if(g!=null){for(let _e=!1;!_e;)if(_e=$.type.is(g),!$.nextSibling())return j}for(;;){if(b!=null&&$.type.is(b))return j;if($.type.is(d)&&j.push($.node),!$.nextSibling())return b==null?j:[]}}function matchNodeContext(_,d,g=d.length-1){for(let b=_.parent;g>=0;b=b.parent){if(!b)return!1;if(!b.type.isAnonymous){if(d[g]&&d[g]!=b.name)return!1;g--}}return!0}class BufferContext{constructor(d,g,b,$){this.parent=d,this.buffer=g,this.index=b,this.start=$}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(d,g,b){super(),this.context=d,this._parent=g,this.index=b,this.type=d.buffer.set.types[d.buffer.buffer[b]]}child(d,g,b){let{buffer:$}=this.context,j=$.findChild(this.index+4,$.buffer[this.index+3],d,g-this.context.start,b);return j<0?null:new BufferNode(this.context,this,j)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(d){return this.child(1,d,2)}childBefore(d){return this.child(-1,d,-2)}enter(d,g,b=0){if(b&IterMode.ExcludeBuffers)return null;let{buffer:$}=this.context,j=$.findChild(this.index+4,$.buffer[this.index+3],g>0?1:-1,d-this.context.start,g);return j<0?null:new BufferNode(this.context,this,j)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(d){return this._parent?null:this.context.parent.nextChild(this.context.index+d,d,0,4)}get nextSibling(){let{buffer:d}=this.context,g=d.buffer[this.index+3];return g<(this._parent?d.buffer[this._parent.index+3]:d.buffer.length)?new BufferNode(this.context,this._parent,g):this.externalSibling(1)}get prevSibling(){let{buffer:d}=this.context,g=this._parent?this._parent.index+4:0;return this.index==g?this.externalSibling(-1):new BufferNode(this.context,this._parent,d.findChild(g,this.index,-1,0,4))}get tree(){return null}toTree(){let d=[],g=[],{buffer:b}=this.context,$=this.index+4,j=b.buffer[this.index+3];if(j>$){let _e=b.buffer[this.index+1];d.push(b.slice($,j,_e)),g.push(0)}return new Tree(this.type,d,g,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(_){if(!_.length)return null;let d=0,g=_[0];for(let j=1;j<_.length;j++){let _e=_[j];(_e.from>g.from||_e.to<g.to)&&(g=_e,d=j)}let b=g instanceof TreeNode&&g.index<0?null:g.parent,$=_.slice();return b?$[d]=b:$.splice(d,1),new StackIterator($,g)}class StackIterator{constructor(d,g){this.heads=d,this.node=g}get next(){return iterStack(this.heads)}}function stackIterator(_,d,g){let b=_.resolveInner(d,g),$=null;for(let j=b instanceof TreeNode?b:b.context.parent;j;j=j.parent)if(j.index<0){let _e=j.parent;($||($=[b])).push(_e.resolve(d,g)),j=_e}else{let _e=MountedTree.get(j.tree);if(_e&&_e.overlay&&_e.overlay[0].from<=d&&_e.overlay[_e.overlay.length-1].to>=d){let et=new TreeNode(_e.tree,_e.overlay[0].from+j.from,-1,j);($||($=[b])).push(resolveNode(et,d,g,!1))}}return $?iterStack($):b}class TreeCursor{get name(){return this.type.name}constructor(d,g=0){if(this.mode=g,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,d instanceof TreeNode)this.yieldNode(d);else{this._tree=d.context.parent,this.buffer=d.context;for(let b=d._parent;b;b=b._parent)this.stack.unshift(b.index);this.bufferNode=d,this.yieldBuf(d.index)}}yieldNode(d){return d?(this._tree=d,this.type=d.type,this.from=d.from,this.to=d.to,!0):!1}yieldBuf(d,g){this.index=d;let{start:b,buffer:$}=this.buffer;return this.type=g||$.set.types[$.buffer[d]],this.from=b+$.buffer[d+1],this.to=b+$.buffer[d+2],!0}yield(d){return d?d instanceof TreeNode?(this.buffer=null,this.yieldNode(d)):(this.buffer=d.context,this.yieldBuf(d.index,d.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(d,g,b){if(!this.buffer)return this.yield(this._tree.nextChild(d<0?this._tree._tree.children.length-1:0,d,g,b,this.mode));let{buffer:$}=this.buffer,j=$.findChild(this.index+4,$.buffer[this.index+3],d,g-this.buffer.start,b);return j<0?!1:(this.stack.push(this.index),this.yieldBuf(j))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(d){return this.enterChild(1,d,2)}childBefore(d){return this.enterChild(-1,d,-2)}enter(d,g,b=this.mode){return this.buffer?b&IterMode.ExcludeBuffers?!1:this.enterChild(1,d,g):this.yield(this._tree.enter(d,g,b))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let d=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(d)}sibling(d){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+d,d,0,4,this.mode)):!1;let{buffer:g}=this.buffer,b=this.stack.length-1;if(d<0){let $=b<0?0:this.stack[b]+4;if(this.index!=$)return this.yieldBuf(g.findChild($,this.index,-1,0,4))}else{let $=g.buffer[this.index+3];if($<(b<0?g.buffer.length:g.buffer[this.stack[b]+3]))return this.yieldBuf($)}return b<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+d,d,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(d){let g,b,{buffer:$}=this;if($){if(d>0){if(this.index<$.buffer.buffer.length)return!1}else for(let j=0;j<this.index;j++)if($.buffer.buffer[j+3]<this.index)return!1;({index:g,parent:b}=$)}else({index:g,_parent:b}=this._tree);for(;b;{index:g,_parent:b}=b)if(g>-1)for(let j=g+d,_e=d<0?-1:b._tree.children.length;j!=_e;j+=d){let et=b._tree.children[j];if(this.mode&IterMode.IncludeAnonymous||et instanceof TreeBuffer||!et.type.isAnonymous||hasChild(et))return!1}return!0}move(d,g){if(g&&this.enterChild(d,0,4))return!0;for(;;){if(this.sibling(d))return!0;if(this.atLastNode(d)||!this.parent())return!1}}next(d=!0){return this.move(1,d)}prev(d=!0){return this.move(-1,d)}moveTo(d,g=0){for(;(this.from==this.to||(g<1?this.from>=d:this.from>d)||(g>-1?this.to<=d:this.to<d))&&this.parent(););for(;this.enterChild(1,d,g););return this}get node(){if(!this.buffer)return this._tree;let d=this.bufferNode,g=null,b=0;if(d&&d.context==this.buffer)e:for(let $=this.index,j=this.stack.length;j>=0;){for(let _e=d;_e;_e=_e._parent)if(_e.index==$){if($==this.index)return _e;g=_e,b=j+1;break e}$=this.stack[--j]}for(let $=b;$<this.stack.length;$++)g=new BufferNode(this.buffer,g,this.stack[$]);return this.bufferNode=new BufferNode(this.buffer,g,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(d,g){for(let b=0;;){let $=!1;if(this.type.isAnonymous||d(this)!==!1){if(this.firstChild()){b++;continue}this.type.isAnonymous||($=!0)}for(;$&&g&&g(this),$=this.type.isAnonymous,!this.nextSibling();){if(!b)return;this.parent(),b--,$=!0}}}matchContext(d){if(!this.buffer)return matchNodeContext(this.node,d);let{buffer:g}=this.buffer,{types:b}=g.set;for(let $=d.length-1,j=this.stack.length-1;$>=0;j--){if(j<0)return matchNodeContext(this.node,d,$);let _e=b[g.buffer[this.stack[j]]];if(!_e.isAnonymous){if(d[$]&&d[$]!=_e.name)return!1;$--}}return!0}}function hasChild(_){return _.children.some(d=>d instanceof TreeBuffer||!d.type.isAnonymous||hasChild(d))}function buildTree(_){var d;let{buffer:g,nodeSet:b,maxBufferLength:$=DefaultBufferLength,reused:j=[],minRepeatType:_e=b.types.length}=_,et=Array.isArray(g)?new FlatBufferCursor(g,g.length):g,tt=b.types,nt=0,it=0;function rt(pt,Ot,gt,yt,St,vt){let{id:wt,start:xt,end:kt,size:bt}=et,Et=it;for(;bt<0;)if(et.next(),bt==-1){let Pt=j[wt];gt.push(Pt),yt.push(xt-pt);return}else if(bt==-3){nt=wt;return}else if(bt==-4){it=wt;return}else throw new RangeError(`Unrecognized record size: ${bt}`);let At=tt[wt],Tt,_t,Ct=xt-pt;if(kt-xt<=$&&(_t=ht(et.pos-Ot,St))){let Pt=new Uint16Array(_t.size-_t.skip),Nt=et.pos-_t.size,$t=Pt.length;for(;et.pos>Nt;)$t=ut(_t.start,Pt,$t);Tt=new TreeBuffer(Pt,kt-_t.start,b),Ct=_t.start-pt}else{let Pt=et.pos-bt;et.next();let Nt=[],$t=[],Zt=wt>=_e?wt:-1,Ft=0,It=kt;for(;et.pos>Pt;)Zt>=0&&et.id==Zt&&et.size>=0?(et.end<=It-$&&(at(Nt,$t,xt,Ft,et.end,It,Zt,Et),Ft=Nt.length,It=et.end),et.next()):vt>2500?st(xt,Pt,Nt,$t):rt(xt,Pt,Nt,$t,Zt,vt+1);if(Zt>=0&&Ft>0&&Ft<Nt.length&&at(Nt,$t,xt,Ft,xt,It,Zt,Et),Nt.reverse(),$t.reverse(),Zt>-1&&Ft>0){let Lt=ot(At);Tt=balanceRange(At,Nt,$t,0,Nt.length,0,kt-xt,Lt,Lt)}else Tt=ct(At,Nt,$t,kt-xt,Et-kt)}gt.push(Tt),yt.push(Ct)}function st(pt,Ot,gt,yt){let St=[],vt=0,wt=-1;for(;et.pos>Ot;){let{id:xt,start:kt,end:bt,size:Et}=et;if(Et>4)et.next();else{if(wt>-1&&kt<wt)break;wt<0&&(wt=bt-$),St.push(xt,kt,bt),vt++,et.next()}}if(vt){let xt=new Uint16Array(vt*4),kt=St[St.length-2];for(let bt=St.length-3,Et=0;bt>=0;bt-=3)xt[Et++]=St[bt],xt[Et++]=St[bt+1]-kt,xt[Et++]=St[bt+2]-kt,xt[Et++]=Et;gt.push(new TreeBuffer(xt,St[2]-kt,b)),yt.push(kt-pt)}}function ot(pt){return(Ot,gt,yt)=>{let St=0,vt=Ot.length-1,wt,xt;if(vt>=0&&(wt=Ot[vt])instanceof Tree){if(!vt&&wt.type==pt&&wt.length==yt)return wt;(xt=wt.prop(NodeProp.lookAhead))&&(St=gt[vt]+wt.length+xt)}return ct(pt,Ot,gt,yt,St)}}function at(pt,Ot,gt,yt,St,vt,wt,xt){let kt=[],bt=[];for(;pt.length>yt;)kt.push(pt.pop()),bt.push(Ot.pop()+gt-St);pt.push(ct(b.types[wt],kt,bt,vt-St,xt-vt)),Ot.push(St-gt)}function ct(pt,Ot,gt,yt,St=0,vt){if(nt){let wt=[NodeProp.contextHash,nt];vt=vt?[wt].concat(vt):[wt]}if(St>25){let wt=[NodeProp.lookAhead,St];vt=vt?[wt].concat(vt):[wt]}return new Tree(pt,Ot,gt,yt,vt)}function ht(pt,Ot){let gt=et.fork(),yt=0,St=0,vt=0,wt=gt.end-$,xt={size:0,start:0,skip:0};e:for(let kt=gt.pos-pt;gt.pos>kt;){let bt=gt.size;if(gt.id==Ot&&bt>=0){xt.size=yt,xt.start=St,xt.skip=vt,vt+=4,yt+=4,gt.next();continue}let Et=gt.pos-bt;if(bt<0||Et<kt||gt.start<wt)break;let At=gt.id>=_e?4:0,Tt=gt.start;for(gt.next();gt.pos>Et;){if(gt.size<0)if(gt.size==-3)At+=4;else break e;else gt.id>=_e&&(At+=4);gt.next()}St=Tt,yt+=bt,vt+=At}return(Ot<0||yt==pt)&&(xt.size=yt,xt.start=St,xt.skip=vt),xt.size>4?xt:void 0}function ut(pt,Ot,gt){let{id:yt,start:St,end:vt,size:wt}=et;if(et.next(),wt>=0&&yt<_e){let xt=gt;if(wt>4){let kt=et.pos-(wt-4);for(;et.pos>kt;)gt=ut(pt,Ot,gt)}Ot[--gt]=xt,Ot[--gt]=vt-pt,Ot[--gt]=St-pt,Ot[--gt]=yt}else wt==-3?nt=yt:wt==-4&&(it=yt);return gt}let dt=[],ft=[];for(;et.pos>0;)rt(_.start||0,_.bufferStart||0,dt,ft,-1,0);let mt=(d=_.length)!==null&&d!==void 0?d:dt.length?ft[0]+dt[0].length:0;return new Tree(tt[_.topID],dt.reverse(),ft.reverse(),mt)}const nodeSizeCache=new WeakMap;function nodeSize(_,d){if(!_.isAnonymous||d instanceof TreeBuffer||d.type!=_)return 1;let g=nodeSizeCache.get(d);if(g==null){g=1;for(let b of d.children){if(b.type!=_||!(b instanceof Tree)){g=1;break}g+=nodeSize(_,b)}nodeSizeCache.set(d,g)}return g}function balanceRange(_,d,g,b,$,j,_e,et,tt){let nt=0;for(let at=b;at<$;at++)nt+=nodeSize(_,d[at]);let it=Math.ceil(nt*1.5/8),rt=[],st=[];function ot(at,ct,ht,ut,dt){for(let ft=ht;ft<ut;){let mt=ft,pt=ct[ft],Ot=nodeSize(_,at[ft]);for(ft++;ft<ut;ft++){let gt=nodeSize(_,at[ft]);if(Ot+gt>=it)break;Ot+=gt}if(ft==mt+1){if(Ot>it){let gt=at[mt];ot(gt.children,gt.positions,0,gt.children.length,ct[mt]+dt);continue}rt.push(at[mt])}else{let gt=ct[ft-1]+at[ft-1].length-pt;rt.push(balanceRange(_,at,ct,mt,ft,pt,gt,null,tt))}st.push(pt+dt-j)}}return ot(d,g,b,$,0),(et||tt)(rt,st,_e)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(d,g,b){let $=this.map.get(d);$||this.map.set(d,$=new Map),$.set(g,b)}getBuffer(d,g){let b=this.map.get(d);return b&&b.get(g)}set(d,g){d instanceof BufferNode?this.setBuffer(d.context.buffer,d.index,g):d instanceof TreeNode&&this.map.set(d.tree,g)}get(d){return d instanceof BufferNode?this.getBuffer(d.context.buffer,d.index):d instanceof TreeNode?this.map.get(d.tree):void 0}cursorSet(d,g){d.buffer?this.setBuffer(d.buffer.buffer,d.index,g):this.map.set(d.tree,g)}cursorGet(d){return d.buffer?this.getBuffer(d.buffer.buffer,d.index):this.map.get(d.tree)}}class TreeFragment{constructor(d,g,b,$,j=!1,_e=!1){this.from=d,this.to=g,this.tree=b,this.offset=$,this.open=(j?1:0)|(_e?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(d,g=[],b=!1){let $=[new TreeFragment(0,d.length,d,0,!1,b)];for(let j of g)j.to>d.length&&$.push(j);return $}static applyChanges(d,g,b=128){if(!g.length)return d;let $=[],j=1,_e=d.length?d[0]:null;for(let et=0,tt=0,nt=0;;et++){let it=et<g.length?g[et]:null,rt=it?it.fromA:1e9;if(rt-tt>=b)for(;_e&&_e.from<rt;){let st=_e;if(tt>=st.from||rt<=st.to||nt){let ot=Math.max(st.from,tt)-nt,at=Math.min(st.to,rt)-nt;st=ot>=at?null:new TreeFragment(ot,at,st.tree,st.offset+nt,et>0,!!it)}if(st&&$.push(st),_e.to>rt)break;_e=j<d.length?d[j++]:null}if(!it)break;tt=it.toA,nt=it.toA-it.toB}return $}}class Parser{startParse(d,g,b){return typeof d=="string"&&(d=new StringInput(d)),b=b?b.length?b.map($=>new Range$1($.from,$.to)):[new Range$1(0,0)]:[new Range$1(0,d.length)],this.createParse(d,g||[],b)}parse(d,g,b){let $=this.startParse(d,g,b);for(;;){let j=$.advance();if(j)return j}}}class StringInput{constructor(d){this.string=d}get length(){return this.string.length}chunk(d){return this.string.slice(d)}get lineChunks(){return!1}read(d,g){return this.string.slice(d,g)}}new NodeProp({perNode:!0});class Stack{constructor(d,g,b,$,j,_e,et,tt,nt,it=0,rt){this.p=d,this.stack=g,this.state=b,this.reducePos=$,this.pos=j,this.score=_e,this.buffer=et,this.bufferBase=tt,this.curContext=nt,this.lookAhead=it,this.parent=rt}toString(){return`[${this.stack.filter((d,g)=>g%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(d,g,b=0){let $=d.parser.context;return new Stack(d,[],g,b,b,0,[],0,$?new StackContext($,$.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(d,g){this.stack.push(this.state,g,this.bufferBase+this.buffer.length),this.state=d}reduce(d){var g;let b=d>>19,$=d&65535,{parser:j}=this.p;this.reducePos<this.pos-25&&this.setLookAhead(this.pos);let _e=j.dynamicPrecedence($);if(_e&&(this.score+=_e),b==0){this.pushState(j.getGoto(this.state,$,!0),this.reducePos),$<j.minRepeatTerm&&this.storeNode($,this.reducePos,this.reducePos,4,!0),this.reduceContext($,this.reducePos);return}let et=this.stack.length-(b-1)*3-(d&262144?6:0),tt=et?this.stack[et-2]:this.p.ranges[0].from,nt=this.reducePos-tt;nt>=2e3&&!(!((g=this.p.parser.nodeSet.types[$])===null||g===void 0)&&g.isAnonymous)&&(tt==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=nt):this.p.lastBigReductionSize<nt&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=tt,this.p.lastBigReductionSize=nt));let it=et?this.stack[et-1]:0,rt=this.bufferBase+this.buffer.length-it;if($<j.minRepeatTerm||d&131072){let st=j.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode($,tt,st,rt+4,!0)}if(d&262144)this.state=this.stack[et];else{let st=this.stack[et-3];this.state=j.getGoto(st,$,!0)}for(;this.stack.length>et;)this.stack.pop();this.reduceContext($,tt)}storeNode(d,g,b,$=4,j=!1){if(d==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let _e=this,et=this.buffer.length;if(et==0&&_e.parent&&(et=_e.bufferBase-_e.parent.bufferBase,_e=_e.parent),et>0&&_e.buffer[et-4]==0&&_e.buffer[et-1]>-1){if(g==b)return;if(_e.buffer[et-2]>=g){_e.buffer[et-2]=b;return}}}if(!j||this.pos==b)this.buffer.push(d,g,b,$);else{let _e=this.buffer.length;if(_e>0&&this.buffer[_e-4]!=0)for(;_e>0&&this.buffer[_e-2]>b;)this.buffer[_e]=this.buffer[_e-4],this.buffer[_e+1]=this.buffer[_e-3],this.buffer[_e+2]=this.buffer[_e-2],this.buffer[_e+3]=this.buffer[_e-1],_e-=4,$>4&&($-=4);this.buffer[_e]=d,this.buffer[_e+1]=g,this.buffer[_e+2]=b,this.buffer[_e+3]=$}}shift(d,g,b,$){if(d&131072)this.pushState(d&65535,this.pos);else if(d&262144)this.pos=$,this.shiftContext(g,b),g<=this.p.parser.maxNode&&this.buffer.push(g,b,$,4);else{let j=d,{parser:_e}=this.p;($>this.pos||g<=_e.maxNode)&&(this.pos=$,_e.stateFlag(j,1)||(this.reducePos=$)),this.pushState(j,b),this.shiftContext(g,b),g<=_e.maxNode&&this.buffer.push(g,b,$,4)}}apply(d,g,b,$){d&65536?this.reduce(d):this.shift(d,g,b,$)}useNode(d,g){let b=this.p.reused.length-1;(b<0||this.p.reused[b]!=d)&&(this.p.reused.push(d),b++);let $=this.pos;this.reducePos=this.pos=$+d.length,this.pushState(g,$),this.buffer.push(b,$,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,d,this,this.p.stream.reset(this.pos-d.length)))}split(){let d=this,g=d.buffer.length;for(;g>0&&d.buffer[g-2]>d.reducePos;)g-=4;let b=d.buffer.slice(g),$=d.bufferBase+g;for(;d&&$==d.bufferBase;)d=d.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,b,$,this.curContext,this.lookAhead,d)}recoverByDelete(d,g){let b=d<=this.p.parser.maxNode;b&&this.storeNode(d,this.pos,g,4),this.storeNode(0,this.pos,g,b?8:4),this.pos=this.reducePos=g,this.score-=190}canShift(d){for(let g=new SimulatedStack(this);;){let b=this.p.parser.stateSlot(g.state,4)||this.p.parser.hasAction(g.state,d);if(b==0)return!1;if(!(b&65536))return!0;g.reduce(b)}}recoverByInsert(d){if(this.stack.length>=300)return[];let g=this.p.parser.nextStates(this.state);if(g.length>8||this.stack.length>=120){let $=[];for(let j=0,_e;j<g.length;j+=2)(_e=g[j+1])!=this.state&&this.p.parser.hasAction(_e,d)&&$.push(g[j],_e);if(this.stack.length<120)for(let j=0;$.length<8&&j<g.length;j+=2){let _e=g[j+1];$.some((et,tt)=>tt&1&&et==_e)||$.push(g[j],_e)}g=$}let b=[];for(let $=0;$<g.length&&b.length<4;$+=2){let j=g[$+1];if(j==this.state)continue;let _e=this.split();_e.pushState(j,this.pos),_e.storeNode(0,_e.pos,_e.pos,4,!0),_e.shiftContext(g[$],this.pos),_e.reducePos=this.pos,_e.score-=200,b.push(_e)}return b}forceReduce(){let{parser:d}=this.p,g=d.stateSlot(this.state,5);if(!(g&65536))return!1;if(!d.validAction(this.state,g)){let b=g>>19,$=g&65535,j=this.stack.length-b*3;if(j<0||d.getGoto(this.stack[j],$,!1)<0){let _e=this.findForcedReduction();if(_e==null)return!1;g=_e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(g),!0}findForcedReduction(){let{parser:d}=this.p,g=[],b=($,j)=>{if(!g.includes($))return g.push($),d.allActions($,_e=>{if(!(_e&393216))if(_e&65536){let et=(_e>>19)-j;if(et>1){let tt=_e&65535,nt=this.stack.length-et*3;if(nt>=0&&d.getGoto(this.stack[nt],tt,!1)>=0)return et<<19|65536|tt}}else{let et=b(_e,j+1);if(et!=null)return et}})};return b(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:d}=this.p;return d.data[d.stateSlot(this.state,1)]==65535&&!d.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(d){if(this.state!=d.state||this.stack.length!=d.stack.length)return!1;for(let g=0;g<this.stack.length;g+=3)if(this.stack[g]!=d.stack[g])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(d){return this.p.parser.dialect.flags[d]}shiftContext(d,g){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,d,this,this.p.stream.reset(g)))}reduceContext(d,g){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,d,this,this.p.stream.reset(g)))}emitContext(){let d=this.buffer.length-1;(d<0||this.buffer[d]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let d=this.buffer.length-1;(d<0||this.buffer[d]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(d){if(d!=this.curContext.context){let g=new StackContext(this.curContext.tracker,d);g.hash!=this.curContext.hash&&this.emitContext(),this.curContext=g}}setLookAhead(d){d>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=d)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(d,g){this.tracker=d,this.context=g,this.hash=d.strict?d.hash(g):0}}class SimulatedStack{constructor(d){this.start=d,this.state=d.state,this.stack=d.stack,this.base=this.stack.length}reduce(d){let g=d&65535,b=d>>19;b==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(b-1)*3;let $=this.start.p.parser.getGoto(this.stack[this.base-3],g,!0);this.state=$}}class StackBufferCursor{constructor(d,g,b){this.stack=d,this.pos=g,this.index=b,this.buffer=d.buffer,this.index==0&&this.maybeNext()}static create(d,g=d.bufferBase+d.buffer.length){return new StackBufferCursor(d,g,g-d.bufferBase)}maybeNext(){let d=this.stack.parent;d!=null&&(this.index=this.stack.bufferBase-d.bufferBase,this.stack=d,this.buffer=d.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(_,d=Uint16Array){if(typeof _!="string")return _;let g=null;for(let b=0,$=0;b<_.length;){let j=0;for(;;){let _e=_.charCodeAt(b++),et=!1;if(_e==126){j=65535;break}_e>=92&&_e--,_e>=34&&_e--;let tt=_e-32;if(tt>=46&&(tt-=46,et=!0),j+=tt,et)break;j*=46}g?g[$++]=j:g=new d(j)}return g}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(d,g){this.input=d,this.ranges=g,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=g[0].from,this.range=g[0],this.end=g[g.length-1].to,this.readNext()}resolveOffset(d,g){let b=this.range,$=this.rangeIndex,j=this.pos+d;for(;j<b.from;){if(!$)return null;let _e=this.ranges[--$];j-=b.from-_e.to,b=_e}for(;g<0?j>b.to:j>=b.to;){if($==this.ranges.length-1)return null;let _e=this.ranges[++$];j+=_e.from-b.to,b=_e}return j}clipPos(d){if(d>=this.range.from&&d<this.range.to)return d;for(let g of this.ranges)if(g.to>d)return Math.max(d,g.from);return this.end}peek(d){let g=this.chunkOff+d,b,$;if(g>=0&&g<this.chunk.length)b=this.pos+d,$=this.chunk.charCodeAt(g);else{let j=this.resolveOffset(d,1);if(j==null)return-1;if(b=j,b>=this.chunk2Pos&&b<this.chunk2Pos+this.chunk2.length)$=this.chunk2.charCodeAt(b-this.chunk2Pos);else{let _e=this.rangeIndex,et=this.range;for(;et.to<=b;)et=this.ranges[++_e];this.chunk2=this.input.chunk(this.chunk2Pos=b),b+this.chunk2.length>et.to&&(this.chunk2=this.chunk2.slice(0,et.to-b)),$=this.chunk2.charCodeAt(0)}}return b>=this.token.lookAhead&&(this.token.lookAhead=b+1),$}acceptToken(d,g=0){let b=g?this.resolveOffset(g,-1):this.pos;if(b==null||b<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=d,this.token.end=b}acceptTokenTo(d,g){this.token.value=d,this.token.end=g}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:d,chunkPos:g}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=d,this.chunk2Pos=g,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let d=this.input.chunk(this.pos),g=this.pos+d.length;this.chunk=g>this.range.to?d.slice(0,this.range.to-this.pos):d,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(d=1){for(this.chunkOff+=d;this.pos+d>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();d-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=d,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(d,g){if(g?(this.token=g,g.start=d,g.lookAhead=d+1,g.value=g.extended=-1):this.token=nullToken,this.pos!=d){if(this.pos=d,d==this.end)return this.setDone(),this;for(;d<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;d>=this.range.to;)this.range=this.ranges[++this.rangeIndex];d>=this.chunkPos&&d<this.chunkPos+this.chunk.length?this.chunkOff=d-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(d,g){if(d>=this.chunkPos&&g<=this.chunkPos+this.chunk.length)return this.chunk.slice(d-this.chunkPos,g-this.chunkPos);if(d>=this.chunk2Pos&&g<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(d-this.chunk2Pos,g-this.chunk2Pos);if(d>=this.range.from&&g<=this.range.to)return this.input.read(d,g);let b="";for(let $ of this.ranges){if($.from>=g)break;$.to>d&&(b+=this.input.read(Math.max($.from,d),Math.min($.to,g)))}return b}}class TokenGroup{constructor(d,g){this.data=d,this.id=g}token(d,g){let{parser:b}=g.p;readToken(this.data,d,g,this.id,b.data,b.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(d,g,b){this.precTable=g,this.elseToken=b,this.data=typeof d=="string"?decodeArray(d):d}token(d,g){let b=d.pos,$=0;for(;;){let j=d.next<0,_e=d.resolveOffset(1,1);if(readToken(this.data,d,g,0,this.data,this.precTable),d.token.value>-1)break;if(this.elseToken==null)return;if(j||$++,_e==null)break;d.reset(_e,d.token)}$&&(d.reset(b,d.token),d.acceptToken(this.elseToken,$))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(d,g={}){this.token=d,this.contextual=!!g.contextual,this.fallback=!!g.fallback,this.extend=!!g.extend}}function readToken(_,d,g,b,$,j){let _e=0,et=1<<b,{dialect:tt}=g.p.parser;e:for(;et&_[_e];){let nt=_[_e+1];for(let ot=_e+3;ot<nt;ot+=2)if((_[ot+1]&et)>0){let at=_[ot];if(tt.allows(at)&&(d.token.value==-1||d.token.value==at||overrides(at,d.token.value,$,j))){d.acceptToken(at);break}}let it=d.next,rt=0,st=_[_e+2];if(d.next<0&&st>rt&&_[nt+st*3-3]==65535){_e=_[nt+st*3-1];continue e}for(;rt<st;){let ot=rt+st>>1,at=nt+ot+(ot<<1),ct=_[at],ht=_[at+1]||65536;if(it<ct)st=ot;else if(it>=ht)rt=ot+1;else{_e=_[at+2],d.advance();continue e}}break}}function findOffset(_,d,g){for(let b=d,$;($=_[b])!=65535;b++)if($==g)return b-d;return-1}function overrides(_,d,g,b){let $=findOffset(g,b,d);return $<0||findOffset(g,b,_)<$}const verbose=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let stackIDs=null;function cutAt(_,d,g){let b=_.cursor(IterMode.IncludeAnonymous);for(b.moveTo(d);;)if(!(g<0?b.childBefore(d):b.childAfter(d)))for(;;){if((g<0?b.to<d:b.from>d)&&!b.type.isError)return g<0?Math.max(0,Math.min(b.to-1,d-25)):Math.min(_.length,Math.max(b.from+1,d+25));if(g<0?b.prevSibling():b.nextSibling())break;if(!b.parent())return g<0?0:_.length}}class FragmentCursor{constructor(d,g){this.fragments=d,this.nodeSet=g,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let d=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(d){for(this.safeFrom=d.openStart?cutAt(d.tree,d.from+d.offset,1)-d.offset:d.from,this.safeTo=d.openEnd?cutAt(d.tree,d.to+d.offset,-1)-d.offset:d.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(d.tree),this.start.push(-d.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(d){if(d<this.nextStart)return null;for(;this.fragment&&this.safeTo<=d;)this.nextFragment();if(!this.fragment)return null;for(;;){let g=this.trees.length-1;if(g<0)return this.nextFragment(),null;let b=this.trees[g],$=this.index[g];if($==b.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let j=b.children[$],_e=this.start[g]+b.positions[$];if(_e>d)return this.nextStart=_e,null;if(j instanceof Tree){if(_e==d){if(_e<this.safeFrom)return null;let et=_e+j.length;if(et<=this.safeTo){let tt=j.prop(NodeProp.lookAhead);if(!tt||et+tt<this.fragment.to)return j}}this.index[g]++,_e+j.length>=Math.max(this.safeFrom,d)&&(this.trees.push(j),this.start.push(_e),this.index.push(0))}else this.index[g]++,this.nextStart=_e+j.length}}}class TokenCache{constructor(d,g){this.stream=g,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=d.tokenizers.map(b=>new CachedToken)}getActions(d){let g=0,b=null,{parser:$}=d.p,{tokenizers:j}=$,_e=$.stateSlot(d.state,3),et=d.curContext?d.curContext.hash:0,tt=0;for(let nt=0;nt<j.length;nt++){if(!(1<<nt&_e))continue;let it=j[nt],rt=this.tokens[nt];if(!(b&&!it.fallback)&&((it.contextual||rt.start!=d.pos||rt.mask!=_e||rt.context!=et)&&(this.updateCachedToken(rt,it,d),rt.mask=_e,rt.context=et),rt.lookAhead>rt.end+25&&(tt=Math.max(rt.lookAhead,tt)),rt.value!=0)){let st=g;if(rt.extended>-1&&(g=this.addActions(d,rt.extended,rt.end,g)),g=this.addActions(d,rt.value,rt.end,g),!it.extend&&(b=rt,g>st))break}}for(;this.actions.length>g;)this.actions.pop();return tt&&d.setLookAhead(tt),!b&&d.pos==this.stream.end&&(b=new CachedToken,b.value=d.p.parser.eofTerm,b.start=b.end=d.pos,g=this.addActions(d,b.value,b.end,g)),this.mainToken=b,this.actions}getMainToken(d){if(this.mainToken)return this.mainToken;let g=new CachedToken,{pos:b,p:$}=d;return g.start=b,g.end=Math.min(b+1,$.stream.end),g.value=b==$.stream.end?$.parser.eofTerm:0,g}updateCachedToken(d,g,b){let $=this.stream.clipPos(b.pos);if(g.token(this.stream.reset($,d),b),d.value>-1){let{parser:j}=b.p;for(let _e=0;_e<j.specialized.length;_e++)if(j.specialized[_e]==d.value){let et=j.specializers[_e](this.stream.read(d.start,d.end),b);if(et>=0&&b.p.parser.dialect.allows(et>>1)){et&1?d.extended=et>>1:d.value=et>>1;break}}}else d.value=0,d.end=this.stream.clipPos($+1)}putAction(d,g,b,$){for(let j=0;j<$;j+=3)if(this.actions[j]==d)return $;return this.actions[$++]=d,this.actions[$++]=g,this.actions[$++]=b,$}addActions(d,g,b,$){let{state:j}=d,{parser:_e}=d.p,{data:et}=_e;for(let tt=0;tt<2;tt++)for(let nt=_e.stateSlot(j,tt?2:1);;nt+=3){if(et[nt]==65535)if(et[nt+1]==1)nt=pair(et,nt+2);else{$==0&&et[nt+1]==2&&($=this.putAction(pair(et,nt+2),g,b,$));break}et[nt]==g&&($=this.putAction(pair(et,nt+1),g,b,$))}return $}}class Parse{constructor(d,g,b,$){this.parser=d,this.input=g,this.ranges=$,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(g,$),this.tokens=new TokenCache(d,this.stream),this.topTerm=d.top[1];let{from:j}=$[0];this.stacks=[Stack.start(this,d.top[0],j)],this.fragments=b.length&&this.stream.end-j>d.bufferLength*4?new FragmentCursor(b,d.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let d=this.stacks,g=this.minStackPos,b=this.stacks=[],$,j;if(this.bigReductionCount>300&&d.length==1){let[_e]=d;for(;_e.forceReduce()&&_e.stack.length&&_e.stack[_e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let _e=0;_e<d.length;_e++){let et=d[_e];for(;;){if(this.tokens.mainToken=null,et.pos>g)b.push(et);else{if(this.advanceStack(et,b,d))continue;{$||($=[],j=[]),$.push(et);let tt=this.tokens.getMainToken(et);j.push(tt.value,tt.end)}}break}}if(!b.length){let _e=$&&findFinished($);if(_e)return verbose&&console.log("Finish with "+this.stackID(_e)),this.stackToTree(_e);if(this.parser.strict)throw verbose&&$&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+g);this.recovering||(this.recovering=5)}if(this.recovering&&$){let _e=this.stoppedAt!=null&&$[0].pos>this.stoppedAt?$[0]:this.runRecovery($,j,b);if(_e)return verbose&&console.log("Force-finish "+this.stackID(_e)),this.stackToTree(_e.forceAll())}if(this.recovering){let _e=this.recovering==1?1:this.recovering*3;if(b.length>_e)for(b.sort((et,tt)=>tt.score-et.score);b.length>_e;)b.pop();b.some(et=>et.reducePos>g)&&this.recovering--}else if(b.length>1){e:for(let _e=0;_e<b.length-1;_e++){let et=b[_e];for(let tt=_e+1;tt<b.length;tt++){let nt=b[tt];if(et.sameState(nt)||et.buffer.length>500&&nt.buffer.length>500)if((et.score-nt.score||et.buffer.length-nt.buffer.length)>0)b.splice(tt--,1);else{b.splice(_e--,1);continue e}}}b.length>12&&b.splice(12,b.length-12)}this.minStackPos=b[0].pos;for(let _e=1;_e<b.length;_e++)b[_e].pos<this.minStackPos&&(this.minStackPos=b[_e].pos);return null}stopAt(d){if(this.stoppedAt!=null&&this.stoppedAt<d)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=d}advanceStack(d,g,b){let $=d.pos,{parser:j}=this,_e=verbose?this.stackID(d)+" -> ":"";if(this.stoppedAt!=null&&$>this.stoppedAt)return d.forceReduce()?d:null;if(this.fragments){let nt=d.curContext&&d.curContext.tracker.strict,it=nt?d.curContext.hash:0;for(let rt=this.fragments.nodeAt($);rt;){let st=this.parser.nodeSet.types[rt.type.id]==rt.type?j.getGoto(d.state,rt.type.id):-1;if(st>-1&&rt.length&&(!nt||(rt.prop(NodeProp.contextHash)||0)==it))return d.useNode(rt,st),verbose&&console.log(_e+this.stackID(d)+` (via reuse of ${j.getName(rt.type.id)})`),!0;if(!(rt instanceof Tree)||rt.children.length==0||rt.positions[0]>0)break;let ot=rt.children[0];if(ot instanceof Tree&&rt.positions[0]==0)rt=ot;else break}}let et=j.stateSlot(d.state,4);if(et>0)return d.reduce(et),verbose&&console.log(_e+this.stackID(d)+` (via always-reduce ${j.getName(et&65535)})`),!0;if(d.stack.length>=8400)for(;d.stack.length>6e3&&d.forceReduce(););let tt=this.tokens.getActions(d);for(let nt=0;nt<tt.length;){let it=tt[nt++],rt=tt[nt++],st=tt[nt++],ot=nt==tt.length||!b,at=ot?d:d.split(),ct=this.tokens.mainToken;if(at.apply(it,rt,ct?ct.start:at.pos,st),verbose&&console.log(_e+this.stackID(at)+` (via ${it&65536?`reduce of ${j.getName(it&65535)}`:"shift"} for ${j.getName(rt)} @ ${$}${at==d?"":", split"})`),ot)return!0;at.pos>$?g.push(at):b.push(at)}return!1}advanceFully(d,g){let b=d.pos;for(;;){if(!this.advanceStack(d,null,null))return!1;if(d.pos>b)return pushStackDedup(d,g),!0}}runRecovery(d,g,b){let $=null,j=!1;for(let _e=0;_e<d.length;_e++){let et=d[_e],tt=g[_e<<1],nt=g[(_e<<1)+1],it=verbose?this.stackID(et)+" -> ":"";if(et.deadEnd&&(j||(j=!0,et.restart(),verbose&&console.log(it+this.stackID(et)+" (restarted)"),this.advanceFully(et,b))))continue;let rt=et.split(),st=it;for(let ot=0;rt.forceReduce()&&ot<10&&(verbose&&console.log(st+this.stackID(rt)+" (via force-reduce)"),!this.advanceFully(rt,b));ot++)verbose&&(st=this.stackID(rt)+" -> ");for(let ot of et.recoverByInsert(tt))verbose&&console.log(it+this.stackID(ot)+" (via recover-insert)"),this.advanceFully(ot,b);this.stream.end>et.pos?(nt==et.pos&&(nt++,tt=0),et.recoverByDelete(tt,nt),verbose&&console.log(it+this.stackID(et)+` (via recover-delete ${this.parser.getName(tt)})`),pushStackDedup(et,b)):(!$||$.score<et.score)&&($=et)}return $}stackToTree(d){return d.close(),Tree.build({buffer:StackBufferCursor.create(d),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:d.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(d){let g=(stackIDs||(stackIDs=new WeakMap)).get(d);return g||stackIDs.set(d,g=String.fromCodePoint(this.nextStackID++)),g+d}}function pushStackDedup(_,d){for(let g=0;g<d.length;g++){let b=d[g];if(b.pos==_.pos&&b.sameState(_)){d[g].score<_.score&&(d[g]=_);return}}d.push(_)}class Dialect{constructor(d,g,b){this.source=d,this.flags=g,this.disabled=b}allows(d){return!this.disabled||this.disabled[d]==0}}const id=_=>_;class ContextTracker{constructor(d){this.start=d.start,this.shift=d.shift||id,this.reduce=d.reduce||id,this.reuse=d.reuse||id,this.hash=d.hash||(()=>0),this.strict=d.strict!==!1}}class LRParser extends Parser{constructor(d){if(super(),this.wrappers=[],d.version!=14)throw new RangeError(`Parser version (${d.version}) doesn't match runtime version (14)`);let g=d.nodeNames.split(" ");this.minRepeatTerm=g.length;for(let et=0;et<d.repeatNodeCount;et++)g.push("");let b=Object.keys(d.topRules).map(et=>d.topRules[et][1]),$=[];for(let et=0;et<g.length;et++)$.push([]);function j(et,tt,nt){$[et].push([tt,tt.deserialize(String(nt))])}if(d.nodeProps)for(let et of d.nodeProps){let tt=et[0];typeof tt=="string"&&(tt=NodeProp[tt]);for(let nt=1;nt<et.length;){let it=et[nt++];if(it>=0)j(it,tt,et[nt++]);else{let rt=et[nt+-it];for(let st=-it;st>0;st--)j(et[nt++],tt,rt);nt++}}}this.nodeSet=new NodeSet(g.map((et,tt)=>NodeType.define({name:tt>=this.minRepeatTerm?void 0:et,id:tt,props:$[tt],top:b.indexOf(tt)>-1,error:tt==0,skipped:d.skippedNodes&&d.skippedNodes.indexOf(tt)>-1}))),d.propSources&&(this.nodeSet=this.nodeSet.extend(...d.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let _e=decodeArray(d.tokenData);this.context=d.context,this.specializerSpecs=d.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let et=0;et<this.specializerSpecs.length;et++)this.specialized[et]=this.specializerSpecs[et].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(d.states,Uint32Array),this.data=decodeArray(d.stateData),this.goto=decodeArray(d.goto),this.maxTerm=d.maxTerm,this.tokenizers=d.tokenizers.map(et=>typeof et=="number"?new TokenGroup(_e,et):et),this.topRules=d.topRules,this.dialects=d.dialects||{},this.dynamicPrecedences=d.dynamicPrecedences||null,this.tokenPrecTable=d.tokenPrec,this.termNames=d.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(d,g,b){let $=new Parse(this,d,g,b);for(let j of this.wrappers)$=j($,d,g,b);return $}getGoto(d,g,b=!1){let $=this.goto;if(g>=$[0])return-1;for(let j=$[g+1];;){let _e=$[j++],et=_e&1,tt=$[j++];if(et&&b)return tt;for(let nt=j+(_e>>1);j<nt;j++)if($[j]==d)return tt;if(et)return-1}}hasAction(d,g){let b=this.data;for(let $=0;$<2;$++)for(let j=this.stateSlot(d,$?2:1),_e;;j+=3){if((_e=b[j])==65535)if(b[j+1]==1)_e=b[j=pair(b,j+2)];else{if(b[j+1]==2)return pair(b,j+2);break}if(_e==g||_e==0)return pair(b,j+1)}return 0}stateSlot(d,g){return this.states[d*6+g]}stateFlag(d,g){return(this.stateSlot(d,0)&g)>0}validAction(d,g){return!!this.allActions(d,b=>b==g?!0:null)}allActions(d,g){let b=this.stateSlot(d,4),$=b?g(b):void 0;for(let j=this.stateSlot(d,1);$==null;j+=3){if(this.data[j]==65535)if(this.data[j+1]==1)j=pair(this.data,j+2);else break;$=g(pair(this.data,j+1))}return $}nextStates(d){let g=[];for(let b=this.stateSlot(d,1);;b+=3){if(this.data[b]==65535)if(this.data[b+1]==1)b=pair(this.data,b+2);else break;if(!(this.data[b+2]&1)){let $=this.data[b+1];g.some((j,_e)=>_e&1&&j==$)||g.push(this.data[b],$)}}return g}configure(d){let g=Object.assign(Object.create(LRParser.prototype),this);if(d.props&&(g.nodeSet=this.nodeSet.extend(...d.props)),d.top){let b=this.topRules[d.top];if(!b)throw new RangeError(`Invalid top rule name ${d.top}`);g.top=b}return d.tokenizers&&(g.tokenizers=this.tokenizers.map(b=>{let $=d.tokenizers.find(j=>j.from==b);return $?$.to:b})),d.specializers&&(g.specializers=this.specializers.slice(),g.specializerSpecs=this.specializerSpecs.map((b,$)=>{let j=d.specializers.find(et=>et.from==b.external);if(!j)return b;let _e=Object.assign(Object.assign({},b),{external:j.to});return g.specializers[$]=getSpecializer(_e),_e})),d.contextTracker&&(g.context=d.contextTracker),d.dialect&&(g.dialect=this.parseDialect(d.dialect)),d.strict!=null&&(g.strict=d.strict),d.wrap&&(g.wrappers=g.wrappers.concat(d.wrap)),d.bufferLength!=null&&(g.bufferLength=d.bufferLength),g}hasWrappers(){return this.wrappers.length>0}getName(d){return this.termNames?this.termNames[d]:String(d<=this.maxNode&&this.nodeSet.types[d].name||d)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(d){let g=this.dynamicPrecedences;return g==null?0:g[d]||0}parseDialect(d){let g=Object.keys(this.dialects),b=g.map(()=>!1);if(d)for(let j of d.split(" ")){let _e=g.indexOf(j);_e>=0&&(b[_e]=!0)}let $=null;for(let j=0;j<g.length;j++)if(!b[j])for(let _e=this.dialects[g[j]],et;(et=this.data[_e++])!=65535;)($||($=new Uint8Array(this.maxTerm+1)))[et]=1;return new Dialect(d,b,$)}static deserialize(d){return new LRParser(d)}}function pair(_,d){return _[d]|_[d+1]<<16}function findFinished(_){let d=null;for(let g of _){let b=g.p.stoppedAt;(g.pos==g.p.stream.end||b!=null&&g.pos>b)&&g.p.parser.stateFlag(g.state,2)&&(!d||d.score<g.score)&&(d=g)}return d}function getSpecializer(_){if(_.external){let d=_.extend?1:0;return(g,b)=>_.external(g,b)<<1|d}return _.get}let nextTagID=0;class Tag{constructor(d,g,b){this.set=d,this.base=g,this.modified=b,this.id=nextTagID++}static define(d){if(d!=null&&d.base)throw new Error("Can not derive from a modified tag");let g=new Tag([],null,[]);if(g.set.push(g),d)for(let b of d.set)g.set.push(b);return g}static defineModifier(){let d=new Modifier;return g=>g.modified.indexOf(d)>-1?g:Modifier.get(g.base||g,g.modified.concat(d).sort((b,$)=>b.id-$.id))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get(d,g){if(!g.length)return d;let b=g[0].instances.find(et=>et.base==d&&sameArray$1(g,et.modified));if(b)return b;let $=[],j=new Tag($,d,g);for(let et of g)et.instances.push(j);let _e=powerSet(g);for(let et of d.set)if(!et.modified.length)for(let tt of _e)$.push(Modifier.get(et,tt));return j}}function sameArray$1(_,d){return _.length==d.length&&_.every((g,b)=>g==d[b])}function powerSet(_){let d=[[]];for(let g=0;g<_.length;g++)for(let b=0,$=d.length;b<$;b++)d.push(d[b].concat(_[g]));return d.sort((g,b)=>b.length-g.length)}function styleTags(_){let d=Object.create(null);for(let g in _){let b=_[g];Array.isArray(b)||(b=[b]);for(let $ of g.split(" "))if($){let j=[],_e=2,et=$;for(let rt=0;;){if(et=="..."&&rt>0&&rt+3==$.length){_e=1;break}let st=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(et);if(!st)throw new RangeError("Invalid path: "+$);if(j.push(st[0]=="*"?"":st[0][0]=='"'?JSON.parse(st[0]):st[0]),rt+=st[0].length,rt==$.length)break;let ot=$[rt++];if(rt==$.length&&ot=="!"){_e=0;break}if(ot!="/")throw new RangeError("Invalid path: "+$);et=$.slice(rt)}let tt=j.length-1,nt=j[tt];if(!nt)throw new RangeError("Invalid path: "+$);let it=new Rule(b,_e,tt>0?j.slice(0,tt):null);d[nt]=it.sort(d[nt])}}return ruleNodeProp.add(d)}const ruleNodeProp=new NodeProp;class Rule{constructor(d,g,b,$){this.tags=d,this.mode=g,this.context=b,this.next=$}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(d){return!d||d.depth<this.depth?(this.next=d,this):(d.next=this.sort(d.next),d)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(_,d){let g=Object.create(null);for(let j of _)if(!Array.isArray(j.tag))g[j.tag.id]=j.class;else for(let _e of j.tag)g[_e.id]=j.class;let{scope:b,all:$=null}=d||{};return{style:j=>{let _e=$;for(let et of j)for(let tt of et.set){let nt=g[tt.id];if(nt){_e=_e?_e+" "+nt:nt;break}}return _e},scope:b}}function highlightTags(_,d){let g=null;for(let b of _){let $=b.style(d);$&&(g=g?g+" "+$:$)}return g}function highlightTree(_,d,g,b=0,$=_.length){let j=new HighlightBuilder(b,Array.isArray(d)?d:[d],g);j.highlightRange(_.cursor(),b,$,"",j.highlighters),j.flush($)}class HighlightBuilder{constructor(d,g,b){this.at=d,this.highlighters=g,this.span=b,this.class=""}startSpan(d,g){g!=this.class&&(this.flush(d),d>this.at&&(this.at=d),this.class=g)}flush(d){d>this.at&&this.class&&this.span(this.at,d,this.class)}highlightRange(d,g,b,$,j){let{type:_e,from:et,to:tt}=d;if(et>=b||tt<=g)return;_e.isTop&&(j=this.highlighters.filter(ot=>!ot.scope||ot.scope(_e)));let nt=$,it=getStyleTags(d)||Rule.empty,rt=highlightTags(j,it.tags);if(rt&&(nt&&(nt+=" "),nt+=rt,it.mode==1&&($+=($?" ":"")+rt)),this.startSpan(Math.max(g,et),nt),it.opaque)return;let st=d.tree&&d.tree.prop(NodeProp.mounted);if(st&&st.overlay){let ot=d.node.enter(st.overlay[0].from+et,1),at=this.highlighters.filter(ht=>!ht.scope||ht.scope(st.tree.type)),ct=d.firstChild();for(let ht=0,ut=et;;ht++){let dt=ht<st.overlay.length?st.overlay[ht]:null,ft=dt?dt.from+et:tt,mt=Math.max(g,ut),pt=Math.min(b,ft);if(mt<pt&&ct)for(;d.from<pt&&(this.highlightRange(d,mt,pt,$,j),this.startSpan(Math.min(pt,d.to),nt),!(d.to>=ft||!d.nextSibling())););if(!dt||ft>b)break;ut=dt.to+et,ut>g&&(this.highlightRange(ot.cursor(),Math.max(g,dt.from+et),Math.min(b,ut),"",at),this.startSpan(Math.min(b,ut),nt))}ct&&d.parent()}else if(d.firstChild()){st&&($="");do if(!(d.to<=g)){if(d.from>=b)break;this.highlightRange(d,g,b,$,j),this.startSpan(Math.min(b,d.to),nt)}while(d.nextSibling());d.parent()}}}function getStyleTags(_){let d=_.type.prop(ruleNodeProp);for(;d&&d.context&&!_.matchContext(d.context);)d=d.next;return d||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);const noSemi=312,incdec=1,incdecPrefix=2,questionDot=3,JSXStartTag=4,insertSemi=313,spaces=315,newline=316,LineComment=5,BlockComment=6,Dialect_jsx=0,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,lt=60,comma=44,question=63,dot=46,trackNewline=new ContextTracker({start:!1,shift(_,d){return d==LineComment||d==BlockComment||d==spaces?_:d==newline},strict:!1}),insertSemicolon=new ExternalTokenizer((_,d)=>{let{next:g}=_;(g==braceR||g==-1||d.context)&&_.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((_,d)=>{let{next:g}=_,b;space.indexOf(g)>-1||g==slash&&((b=_.peek(1))==slash||b==star)||g!=braceR&&g!=semicolon&&g!=-1&&!d.context&&_.acceptToken(noSemi)},{contextual:!0}),operatorToken=new ExternalTokenizer((_,d)=>{let{next:g}=_;if(g==plus||g==minus){if(_.advance(),g==_.next){_.advance();let b=!d.context&&d.canShift(incdec);_.acceptToken(b?incdec:incdecPrefix)}}else g==question&&_.peek(1)==dot&&(_.advance(),_.advance(),(_.next<48||_.next>57)&&_.acceptToken(questionDot))},{contextual:!0});function identifierChar(_,d){return _>=65&&_<=90||_>=97&&_<=122||_==95||_>=192||!d&&_>=48&&_<=57}const jsx=new ExternalTokenizer((_,d)=>{if(_.next!=lt||!d.dialectEnabled(Dialect_jsx)||(_.advance(),_.next==slash))return;let g=0;for(;space.indexOf(_.next)>-1;)_.advance(),g++;if(identifierChar(_.next,!0)){for(_.advance(),g++;identifierChar(_.next,!1);)_.advance(),g++;for(;space.indexOf(_.next)>-1;)_.advance(),g++;if(_.next==comma)return;for(let b=0;;b++){if(b==7){if(!identifierChar(_.next,!0))return;break}if(_.next!="extends".charCodeAt(b))break;_.advance(),g++}}_.acceptToken(JSXStartTag,-g)}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof":tags.operatorKeyword,"let var const using function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger as new":tags.keyword,TemplateString:tags.special(tags.string),super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,"LineComment Hashbang":tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags.function(tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)}),spec_identifier={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,extends:54,this:58,true:66,false:66,null:78,void:82,typeof:86,super:102,new:136,delete:148,yield:157,await:161,class:166,public:229,private:229,protected:229,readonly:231,instanceof:250,satisfies:253,in:254,const:256,import:290,keyof:345,unique:349,infer:355,is:391,abstract:411,implements:413,type:415,let:418,var:420,using:423,interface:429,enum:433,namespace:439,module:441,declare:445,global:449,for:468,of:477,while:480,with:484,do:488,if:492,else:494,switch:498,case:504,try:510,catch:514,finally:518,return:522,throw:526,break:530,continue:534,debugger:538},spec_word={__proto__:null,async:123,get:125,set:127,declare:189,public:191,private:191,protected:191,static:193,abstract:195,override:197,readonly:203,accessor:205,new:395},spec_LessThan={__proto__:null,"<":187},parser=LRParser.deserialize({version:14,states:"$@QO%TQ^OOO%[Q^OOO'_Q`OOP(lOWOOO*zQ?NdO'#CiO+RO!bO'#CjO+aO#tO'#CjO+oO!0LbO'#D^O.QQ^O'#DdO.bQ^O'#DoO%[Q^O'#DwO0fQ^O'#EPOOQ?Mr'#EX'#EXO1PQWO'#EUOOQO'#Em'#EmOOQO'#Ih'#IhO1XQWO'#GpO1dQWO'#ElO1iQWO'#ElO3hQ?NdO'#JmO6[Q?NdO'#JnO6uQWO'#F[O6zQ&jO'#FsOOQ?Mr'#Fe'#FeO7VO,YO'#FeO7eQ7[O'#FzO9RQWO'#FyOOQ?Mr'#Jn'#JnOOQ?Mp'#Jm'#JmO9WQWO'#GtOOQU'#KZ'#KZO9cQWO'#IUO9hQ?MxO'#IVOOQU'#JZ'#JZOOQU'#IZ'#IZQ`Q^OOO`Q^OOO9pQMnO'#DsO9wQ^O'#D{O:OQ^O'#D}O9^QWO'#GpO:VQ7[O'#CoO:eQWO'#EkO:pQWO'#EvO:uQ7[O'#FdO;dQWO'#GpOOQO'#K['#K[O;iQWO'#K[O;wQWO'#GxO;wQWO'#GyO;wQWO'#G{O9^QWO'#HOO<nQWO'#HRO>VQWO'#CeO>gQWO'#H_O>oQWO'#HeO>oQWO'#HgO`Q^O'#HiO>oQWO'#HkO>oQWO'#HnO>tQWO'#HtO>yQ?MyO'#HzO%[Q^O'#H|O?UQ?MyO'#IOO?aQ?MyO'#IQO9hQ?MxO'#ISO?lQ?NdO'#CiO@nQ`O'#DiQOQWOOO%[Q^O'#D}OAUQWO'#EQO:VQ7[O'#EkOAaQWO'#EkOAlQpO'#FdOOQU'#Cg'#CgOOQ?Mp'#Dn'#DnOOQ?Mp'#Jq'#JqO%[Q^O'#JqOOQO'#Jt'#JtOOQO'#Id'#IdOBlQ`O'#EdOOQ?Mp'#Ec'#EcOOQ?Mp'#Jx'#JxOChQ?NQO'#EdOCrQ`O'#ETOOQO'#Js'#JsODWQ`O'#JtOEeQ`O'#ETOCrQ`O'#EdPErO#@ItO'#CbPOOO)CDx)CDxOOOO'#I['#I[OE}O!bO,59UOOQ?Mr,59U,59UOOOO'#I]'#I]OF]O#tO,59UO%[Q^O'#D`OOOO'#I_'#I_OFkO!0LbO,59xOOQ?Mr,59x,59xOFyQ^O'#I`OG^QWO'#JoOI]QrO'#JoO+}Q^O'#JoOIdQWO,5:OOIzQWO'#EmOJXQWO'#KOOJdQWO'#J}OJdQWO'#J}OJlQWO,5;ZOJqQWO'#J|OOQ?Mv,5:Z,5:ZOJxQ^O,5:ZOLvQ?NdO,5:cOMgQWO,5:kONQQ?MxO'#J{ONXQWO'#JzO9WQWO'#JzONmQWO'#JzONuQWO,5;YONzQWO'#JzO!#PQrO'#JnOOQ?Mr'#Ci'#CiO%[Q^O'#EPO!#oQrO,5:pOOQQ'#Ju'#JuOOQO-E<f-E<fO9^QWO,5=[O!$VQWO,5=[O!$[Q^O,5;WO!&_Q7[O'#EhO!'xQWO,5;WO!'}Q^O'#DvO!(XQ`O,5;aO!(aQ`O,5;aO%[Q^O,5;aOOQU'#FS'#FSOOQU'#FU'#FUO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bOOQU'#FY'#FYO!(oQ^O,5;sOOQ?Mr,5;x,5;xOOQ?Mr,5;y,5;yOOQ?Mr,5;{,5;{O%[Q^O'#IlO!*rQ?MxO,5<gO%[Q^O,5;bO!&_Q7[O,5;bO!+aQ7[O,5;bO!-RQ7[O'#EZO%[Q^O,5;vOOQ?Mr,5;z,5;zO!-YQ&jO'#FiO!.VQ&jO'#KSO!-qQ&jO'#KSO!.^Q&jO'#KSOOQO'#KS'#KSO!.rQ&jO,5<ROOOS,5<_,5<_O!/TQ^O'#FuOOOS'#Ik'#IkO7VO,YO,5<PO!/[Q&jO'#FwOOQ?Mr,5<P,5<PO!/{Q!LQO'#CvOOQ?Mr'#Cz'#CzO!0`O!0LbO'#DOO!0|Q7[O,5<dO!1TQWO,5<fO!2pQ$ISO'#GVO!2}QWO'#GWO!3SQWO'#GWO!4rQ$ISO'#G[O!5nQ`O'#G`OOQO'#Gk'#GkO!+hQ7[O'#GjOOQO'#Gm'#GmO!+hQ7[O'#GlO!6aQ!LQO'#JgOOQ?Mr'#Jg'#JgO!6kQWO'#JfO!6yQWO'#JeO!7RQWO'#CuOOQ?Mr'#Cx'#CxO!7ZQWO'#CzOOQ?Mr'#DS'#DSOOQ?Mr'#DU'#DUO1SQWO'#DWO!+hQ7[O'#F}O!+hQ7[O'#GPO!7`QWO'#GRO!7eQWO'#GSO!3SQWO'#GYO!+hQ7[O'#G_O!7jQWO'#EnO!8XQWO,5<eOOQ?Mp'#Cr'#CrO!8aQWO'#EoO!9ZQ`O'#EpOOQ?Mp'#J|'#J|O!9bQ?MxO'#K]O9hQ?MxO,5=`O`Q^O,5>pOOQU'#Jc'#JcOOQU,5>q,5>qOOQU-E<X-E<XO!;aQ?NdO,5:_O!9UQ`O,5:]O!=zQ?NdO,5:gO%[Q^O,5:gO!@bQ?NdO,5:iOOQO,5@v,5@vO!ARQ7[O,5=[O!AaQ?MxO'#JdO9RQWO'#JdO!ArQ?MxO,59ZO!A}Q`O,59ZO!BVQ7[O,59ZO:VQ7[O,59ZO!BbQWO,5;WO!BjQWO'#H^O!COQWO'#K`O%[Q^O,5;|O!9UQ`O,5<OO!CWQWO,5=wO!C]QWO,5=wO!CbQWO,5=wO9hQ?MxO,5=wO;wQWO,5=gOOQO'#Cv'#CvO!CpQ`O,5=dO!CxQ7[O,5=eO!DTQWO,5=gO!DYQpO,5=jO!DbQWO'#K[O>tQWO'#HTO9^QWO'#HVO!DgQWO'#HVO:VQ7[O'#HXO!DlQWO'#HXOOQU,5=m,5=mO!DqQWO'#HYO!ESQWO'#CoO!EXQWO,59PO!EcQWO,59PO!GhQ^O,59POOQU,59P,59PO!GxQ?MxO,59PO%[Q^O,59PO!JTQ^O'#HaOOQU'#Hb'#HbOOQU'#Hc'#HcO`Q^O,5=yO!JkQWO,5=yO`Q^O,5>PO`Q^O,5>RO!JpQWO,5>TO`Q^O,5>VO!JuQWO,5>YO!JzQ^O,5>`OOQU,5>f,5>fO%[Q^O,5>fO9hQ?MxO,5>hOOQU,5>j,5>jO# UQWO,5>jOOQU,5>l,5>lO# UQWO,5>lOOQU,5>n,5>nO# rQ`O'#D[O%[Q^O'#JqO# |Q`O'#JqO#!kQ`O'#DjO#!|Q`O'#DjO#%_Q^O'#DjO#%fQWO'#JpO#%nQWO,5:TO#%sQWO'#EqO#&RQWO'#KPO#&ZQWO,5;[O#&`Q`O'#DjO#&mQ`O'#ESOOQ?Mr,5:l,5:lO%[Q^O,5:lO#&tQWO,5:lO>tQWO,5;VO!A}Q`O,5;VO!BVQ7[O,5;VO:VQ7[O,5;VO#&|QWO,5@]O#'RQ(CYO,5:pOOQO-E<b-E<bO#(XQ?NQO,5;OOCrQ`O,5:oO#(cQ`O,5:oOCrQ`O,5;OO!ArQ?MxO,5:oOOQ?Mp'#Eg'#EgOOQO,5;O,5;OO%[Q^O,5;OO#(pQ?MxO,5;OO#({Q?MxO,5;OO!A}Q`O,5:oOOQO,5;U,5;UO#)ZQ?MxO,5;OPOOO'#IY'#IYP#)oO#@ItO,58|POOO,58|,58|OOOO-E<Y-E<YOOQ?Mr1G.p1G.pOOOO-E<Z-E<ZO#)zQpO,59zOOOO-E<]-E<]OOQ?Mr1G/d1G/dO#*PQrO,5>zO+}Q^O,5>zOOQO,5?Q,5?QO#*ZQ^O'#I`OOQO-E<^-E<^O#*hQWO,5@ZO#*pQrO,5@ZO#*wQWO,5@iOOQ?Mr1G/j1G/jO%[Q^O,5@jO#+PQWO'#IfOOQO-E<d-E<dO#*wQWO,5@iOOQ?Mp1G0u1G0uOOQ?Mv1G/u1G/uOOQ?Mv1G0V1G0VO%[Q^O,5@gO#+eQ?MxO,5@gO#+vQ?MxO,5@gO#+}QWO,5@fO9WQWO,5@fO#,VQWO,5@fO#,eQWO'#IiO#+}QWO,5@fOOQ?Mp1G0t1G0tO!(XQ`O,5:rO!(dQ`O,5:rOOQQ,5:t,5:tO#-VQYO,5:tO#-_Q7[O1G2vO9^QWO1G2vOOQ?Mr1G0r1G0rO#-mQ?NdO1G0rO#.rQ?NbO,5;SOOQ?Mr'#GU'#GUO#/`Q?NdO'#JgO!$[Q^O1G0rO#1hQrO'#JrO%[Q^O'#JrO#1rQWO,5:bOOQ?Mr'#D['#D[OOQ?Mr1G0{1G0{O%[Q^O1G0{OOQ?Mr1G1e1G1eO#1wQWO1G0{O#4]Q?NdO1G0|O#4dQ?NdO1G0|O#6zQ?NdO1G0|O#7RQ?NdO1G0|O#9iQ?NdO1G0|O#<PQ?NdO1G0|O#<WQ?NdO1G0|O#<_Q?NdO1G0|O#>uQ?NdO1G0|O#>|Q?NdO1G0|O#AZQ07bO'#CiO#CUQ07bO1G1_O#C]Q07bO'#JnO#CpQ?NdO,5?WOOQ?Mp-E<j-E<jO#E}Q?NdO1G0|O#FzQ?NdO1G0|OOQ?Mr1G0|1G0|O#GzQ7[O'#JwO#HUQWO,5:uO#HZQ?NdO1G1bO#H}Q&jO,5<VO#IVQ&jO,5<WO#I_Q&jO'#FnO#IvQWO'#FmOOQO'#KT'#KTOOQO'#Ij'#IjO#I{Q&jO1G1mOOQ?Mr1G1m1G1mOOOS1G1x1G1xO#J^Q07bO'#JmO#JhQWO,5<aO!(oQ^O,5<aOOOS-E<i-E<iOOQ?Mr1G1k1G1kO#JmQ`O'#KSOOQ?Mr,5<c,5<cO#JuQ`O,5<cO!&_Q7[O'#DQOOOO'#I^'#I^O#JzO!0LbO,59jOOQ?Mr,59j,59jO%[Q^O1G2OO!7eQWO'#InO#KVQ7[O,5<xOOQ?Mr,5<u,5<uO!+hQ7[O'#IqO#KuQ7[O,5=UO!+hQ7[O'#IsO#LhQ7[O,5=WO!&_Q7[O,5=YOOQO1G2Q1G2QO#LrQpO'#CrO#MVQ$ISO'#EoO#NUQ`O'#G`O#NrQpO,5<qO#NyQWO'#KWO9WQWO'#KWO$ XQWO,5<sO!+hQ7[O,5<rO$ ^QWO'#GXO$ oQWO,5<rO$ tQpO'#GUO$!RQpO'#KXO$!]QWO'#KXO!&_Q7[O'#KXO$!bQWO,5<vO$!gQ`O'#GaO!5iQ`O'#GaO$!xQWO'#GcO$!}QWO'#GeO!3SQWO'#GhO$#SQ?MxO'#IpO$#_Q`O,5<zOOQ?Mv,5<z,5<zO$#fQ`O'#GaO$#tQ`O'#GbO$#|Q`O'#GbO$$RQ7[O,5=UO$$cQ7[O,5=WOOQ?Mr,5=Z,5=ZO!+hQ7[O,5@QO!+hQ7[O,5@QO$$sQWO'#IuO$%OQWO,5@PO$%WQWO,59aOOQ?Mr,59f,59fO$%zQ!LSO,59rOOQ?Mr'#Jk'#JkO$&mQ7[O,5<iO$'`Q7[O,5<kO@fQWO,5<mOOQ?Mr,5<n,5<nO$'jQWO,5<tO$'oQ7[O,5<yO$(PQWO'#JzO!$[Q^O1G2PO$(UQWO1G2PO9WQWO'#J}O9WQWO'#EqO%[Q^O'#EqO9WQWO'#IwO$(ZQ?MxO,5@wOOQU1G2z1G2zOOQU1G4[1G4[OOQ?Mr1G/y1G/yOOQ?Mr1G/w1G/wO$*]Q?NdO1G0ROOQU1G2v1G2vO!&_Q7[O1G2vO%[Q^O1G2vO#-bQWO1G2vO$,aQ7[O'#EhOOQ?Mp,5@O,5@OO$,kQ?MxO,5@OOOQU1G.u1G.uO!ArQ?MxO1G.uO!A}Q`O1G.uO!BVQ7[O1G.uO$,|QWO1G0rO$-RQWO'#CiO$-^QWO'#KaO$-fQWO,5=xO$-kQWO'#KaO$-pQWO'#KaO$.OQWO'#I}O$.^QWO,5@zO$.fQrO1G1hOOQ?Mr1G1j1G1jO9^QWO1G3cO@fQWO1G3cO$.mQWO1G3cO$.rQWO1G3cOOQU1G3c1G3cO!DTQWO1G3RO!&_Q7[O1G3OO$.wQWO1G3OOOQU1G3P1G3PO!&_Q7[O1G3PO$.|QWO1G3PO$/UQ`O'#G}OOQU1G3R1G3RO!5iQ`O'#IyO!DYQpO1G3UOOQU1G3U1G3UOOQU,5=o,5=oO$/^Q7[O,5=qO9^QWO,5=qO$!}QWO,5=sO9RQWO,5=sO!A}Q`O,5=sO!BVQ7[O,5=sO:VQ7[O,5=sO$/lQWO'#K_O$/wQWO,5=tOOQU1G.k1G.kO$/|Q?MxO1G.kO@fQWO1G.kO$0XQWO1G.kO9hQ?MxO1G.kO$2aQrO,5@|O$2nQWO,5@|O9WQWO,5@|O$2yQ^O,5={O$3QQWO,5={OOQU1G3e1G3eO`Q^O1G3eOOQU1G3k1G3kOOQU1G3m1G3mO>oQWO1G3oO$3VQ^O1G3qO$7ZQ^O'#HpOOQU1G3t1G3tO$7hQWO'#HvO>tQWO'#HxOOQU1G3z1G3zO$7pQ^O1G3zO9hQ?MxO1G4QOOQU1G4S1G4SOOQ?Mp'#G]'#G]O9hQ?MxO1G4UO9hQ?MxO1G4WO$;wQWO,5@]O!(oQ^O,5;]O9WQWO,5;]O>tQWO,5:UO!(oQ^O,5:UO!A}Q`O,5:UO$;|Q07bO,5:UOOQO,5;],5;]O$<WQ`O'#IaO$<nQWO,5@[OOQ?Mr1G/o1G/oO$<vQ`O'#IgO$=QQWO,5@kOOQ?Mp1G0v1G0vO#!|Q`O,5:UOOQO'#Ic'#IcO$=YQ`O,5:nOOQ?Mv,5:n,5:nO#&wQWO1G0WOOQ?Mr1G0W1G0WO%[Q^O1G0WOOQ?Mr1G0q1G0qO>tQWO1G0qO!A}Q`O1G0qO!BVQ7[O1G0qOOQ?Mp1G5w1G5wO!ArQ?MxO1G0ZOOQO1G0j1G0jO%[Q^O1G0jO$=aQ?MxO1G0jO$=lQ?MxO1G0jO!A}Q`O1G0ZOCrQ`O1G0ZO$=zQ?MxO1G0jOOQO1G0Z1G0ZO$>`Q?NdO1G0jPOOO-E<W-E<WPOOO1G.h1G.hOOOO1G/f1G/fO$>jQpO,5<gO$>rQrO1G4fOOQO1G4l1G4lO%[Q^O,5>zO$>|QWO1G5uO$?UQWO1G6TO$?^QrO1G6UO9WQWO,5?QO$?hQ?NdO1G6RO%[Q^O1G6RO$?xQ?MxO1G6RO$@ZQWO1G6QO$@ZQWO1G6QO9WQWO1G6QO$@cQWO,5?TO9WQWO,5?TOOQO,5?T,5?TO$@wQWO,5?TO$(PQWO,5?TOOQO-E<g-E<gOOQQ1G0^1G0^OOQQ1G0`1G0`O#-YQWO1G0`OOQU7+(b7+(bO!&_Q7[O7+(bO%[Q^O7+(bO$AVQWO7+(bO$AbQ7[O7+(bO$ApQ?NdO,5=UO$CxQ?NdO,5=WO$FQQ?NdO,5=UO$H`Q?NdO,5=WO$JnQ?NdO,59rO$LsQ?NdO,5<iO$N{Q?NdO,5<kO%#TQ?NdO,5<yOOQ?Mr7+&^7+&^O%%cQ?NdO7+&^O%&VQ^O'#IbO%&dQWO,5@^O%&lQrO,5@^OOQ?Mr1G/|1G/|O%&vQWO7+&gOOQ?Mr7+&g7+&gO%&{Q07bO,5:cO%[Q^O7+&yO%'VQ07bO,5:_O%'dQ07bO,5:gO%'nQ07bO,5:iO%'xQ7[O'#IeO%(SQWO,5@cOOQ?Mr1G0a1G0aOOQO1G1q1G1qOOQO1G1r1G1rO%([QtO,5<YO!(oQ^O,5<XOOQO-E<h-E<hOOQ?Mr7+'X7+'XOOOS7+'d7+'dOOOS1G1{1G1{O%(gQWO1G1{OOQ?Mr1G1}1G1}O%(lQpO,59lOOOO-E<[-E<[OOQ?Mr1G/U1G/UO%(sQ?NdO7+'jOOQ?Mr,5?Y,5?YO%)gQpO,5?YOOQ?Mr1G2d1G2dP!&_Q7[O'#InPOQ?Mr-E<l-E<lO%*VQ7[O,5?]OOQ?Mr-E<o-E<oO%*xQ7[O,5?_OOQ?Mr-E<q-E<qO%+SQpO1G2tO%+ZQpO'#CrO%+qQ7[O'#J}O%+xQ^O'#EqOOQ?Mr1G2]1G2]O%,SQWO'#ImO%,hQWO,5@rO%,hQWO,5@rO%,pQWO,5@rO%,{QWO,5@rOOQO1G2_1G2_O%-ZQ7[O1G2^O!+hQ7[O1G2^O%-kQ$ISO'#IoO%-xQWO,5@sO!&_Q7[O,5@sO%.QQpO,5@sOOQ?Mr1G2b1G2bOOQ?Mp,5<{,5<{OOQ?Mp,5<|,5<|O$(PQWO,5<|OCcQWO,5<|O!A}Q`O,5<{OOQO'#Gd'#GdO%.[QWO,5<}OOQ?Mp,5=P,5=PO$(PQWO,5=SOOQO,5?[,5?[OOQO-E<n-E<nOOQ?Mv1G2f1G2fO!5iQ`O,5<{O%.dQWO,5<|O$!xQWO,5<}O%.oQ`O,5<|O!+hQ7[O'#IqO%/`Q7[O1G2pO!+hQ7[O'#IsO%0RQ7[O1G2rO%0]Q7[O1G5lO%0gQ7[O1G5lOOQO,5?a,5?aOOQO-E<s-E<sOOQO1G.{1G.{O!9UQ`O,59tO%[Q^O,59tOOQ?Mr,5<h,5<hO%0tQWO1G2XO!+hQ7[O1G2`O%0yQ?NdO7+'kOOQ?Mr7+'k7+'kO!$[Q^O7+'kO%1mQWO,5;]OOQ?Mp,5?c,5?cOOQ?Mp-E<u-E<uO%1rQpO'#KYO#&wQWO7+(bO4UQrO7+(bO$AYQWO7+(bO%1|Q?NbO'#CiO%2aQ?NbO,5=QO%3RQWO,5=QOOQ?Mp1G5j1G5jOOQU7+$a7+$aO!ArQ?MxO7+$aO!A}Q`O7+$aO!$[Q^O7+&^O%3WQWO'#I|O%3oQWO,5@{OOQO1G3d1G3dO9^QWO,5@{O%3oQWO,5@{O%3wQWO,5@{OOQO,5?i,5?iOOQO-E<{-E<{OOQ?Mr7+'S7+'SO%3|QWO7+(}O9hQ?MxO7+(}O9^QWO7+(}O@fQWO7+(}OOQU7+(m7+(mO%4RQ?NbO7+(jO!&_Q7[O7+(jO%4]QpO7+(kOOQU7+(k7+(kO!&_Q7[O7+(kO%4dQWO'#K^O%4oQWO,5=iOOQO,5?e,5?eOOQO-E<w-E<wOOQU7+(p7+(pO%6RQ`O'#HWOOQU1G3]1G3]O!&_Q7[O1G3]O%[Q^O1G3]O%6YQWO1G3]O%6eQ7[O1G3]O9hQ?MxO1G3_O$!}QWO1G3_O9RQWO1G3_O!A}Q`O1G3_O!BVQ7[O1G3_O%6sQWO'#I{O%7XQWO,5@yO%7aQ`O,5@yOOQ?Mp1G3`1G3`OOQU7+$V7+$VO@fQWO7+$VO9hQ?MxO7+$VO%7lQWO7+$VO%[Q^O1G6hO%[Q^O1G6iO%7qQ?MxO1G6hO%7{Q^O1G3gO%8SQWO1G3gO%8XQ^O1G3gOOQU7+)P7+)PO9hQ?MxO7+)ZO`Q^O7+)]OOQU'#Kd'#KdOOQU'#JO'#JOO%8`Q^O,5>[OOQU,5>[,5>[O%[Q^O'#HqO%8mQWO'#HsOOQU,5>b,5>bO9WQWO,5>bOOQU,5>d,5>dOOQU7+)f7+)fOOQU7+)l7+)lOOQU7+)p7+)pOOQU7+)r7+)rO%8rQ`O1G5wO%9WQ07bO1G0wO%9bQWO1G0wOOQO1G/p1G/pO%9mQ07bO1G/pO>tQWO1G/pO!(oQ^O'#DjOOQO,5>{,5>{OOQO-E<_-E<_OOQO,5?R,5?ROOQO-E<e-E<eO!A}Q`O1G/pOOQO-E<a-E<aOOQ?Mv1G0Y1G0YOOQ?Mr7+%r7+%rO#&wQWO7+%rOOQ?Mr7+&]7+&]O>tQWO7+&]O!A}Q`O7+&]OOQO7+%u7+%uO$>`Q?NdO7+&UOOQO7+&U7+&UO%[Q^O7+&UO%9wQ?MxO7+&UO!ArQ?MxO7+%uO!A}Q`O7+%uO%:SQ?MxO7+&UO%:bQ?NdO7++mO%[Q^O7++mO%:rQWO7++lO%:rQWO7++lOOQO1G4o1G4oO9WQWO1G4oO%:zQWO1G4oOOQQ7+%z7+%zO#&wQWO<<K|O4UQrO<<K|O%;YQWO<<K|OOQU<<K|<<K|O!&_Q7[O<<K|O%[Q^O<<K|O%;bQWO<<K|O%;mQ?NdO,5?]O%=uQ?NdO,5?_O%?}Q?NdO1G2^O%B]Q?NdO1G2pO%DeQ?NdO1G2rO%FmQrO,5>|O%[Q^O,5>|OOQO-E<`-E<`O%FwQWO1G5xOOQ?Mr<<JR<<JRO%GPQ07bO1G0rO%IWQ07bO1G0|O%I_Q07bO1G0|O%K`Q07bO1G0|O%KgQ07bO1G0|O%MhQ07bO1G0|O& iQ07bO1G0|O& pQ07bO1G0|O& wQ07bO1G0|O&#xQ07bO1G0|O&$PQ07bO1G0|O&$WQ?NdO<<JeO&&OQ07bO1G0|O&&{Q07bO1G0|O&'{Q07bO'#JgO&*OQ07bO1G1bO&*]Q07bO1G0RO&*gQ7[O,5?POOQO-E<c-E<cO!(oQ^O'#FpOOQO'#KU'#KUOOQO1G1t1G1tO&*qQWO1G1sO&*vQ07bO,5?WOOOS7+'g7+'gOOOO1G/W1G/WOOQ?Mr1G4t1G4tO!+hQ7[O7+(`O&-WQrO'#CiO&-bQWO,5?XO9WQWO,5?XOOQO-E<k-E<kO&-pQWO1G6^O&-pQWO1G6^O&-xQWO1G6^O&.TQ7[O7+'xO&.eQpO,5?ZO&.oQWO,5?ZO!&_Q7[O,5?ZOOQO-E<m-E<mO&.tQpO1G6_O&/OQWO1G6_OOQ?Mp1G2h1G2hO$(PQWO1G2hOOQ?Mp1G2g1G2gO&/WQWO1G2iO!&_Q7[O1G2iOOQ?Mp1G2n1G2nO!A}Q`O1G2gOCcQWO1G2hO&/]QWO1G2iO&/eQWO1G2hO$!xQWO1G2iO&0XQ7[O,5?]OOQ?Mr-E<p-E<pO&0zQ7[O,5?_OOQ?Mr-E<r-E<rO!+hQ7[O7++WOOQ?Mr1G/`1G/`O&1UQWO1G/`OOQ?Mr7+'s7+'sO&1ZQ7[O7+'zO&1kQ?NdO<<KVOOQ?Mr<<KV<<KVO&2_QWO1G0wO!&_Q7[O'#IvO&2dQWO,5@tO&4fQrO<<K|O!&_Q7[O1G2lOOQU<<G{<<G{O!ArQ?MxO<<G{O&4mQ?NdO<<IxOOQ?Mr<<Ix<<IxOOQO,5?h,5?hO&5aQWO,5?hO&5fQWO,5?hOOQO-E<z-E<zO&5tQWO1G6gO&5tQWO1G6gO9^QWO1G6gO@fQWO<<LiOOQU<<Li<<LiO&5|QWO<<LiO9hQ?MxO<<LiOOQU<<LU<<LUO%4RQ?NbO<<LUOOQU<<LV<<LVO%4]QpO<<LVO&6RQ`O'#IxO&6^QWO,5@xO!(oQ^O,5@xOOQU1G3T1G3TO%+xQ^O'#JqOOQO'#Iz'#IzO9hQ?MxO'#IzO&6fQ`O,5=rOOQU,5=r,5=rO&6mQ`O'#EdO&7RQ`O'#GcO&7WQWO7+(wO&7]QWO7+(wOOQU7+(w7+(wO!&_Q7[O7+(wO%[Q^O7+(wO&7eQWO7+(wOOQU7+(y7+(yO9hQ?MxO7+(yO$!}QWO7+(yO9RQWO7+(yO!A}Q`O7+(yO&7pQWO,5?gOOQO-E<y-E<yOOQO'#HZ'#HZO&7{QWO1G6eO9hQ?MxO<<GqOOQU<<Gq<<GqO@fQWO<<GqO&8TQWO7+,SO&8YQWO7+,TO%[Q^O7+,SO%[Q^O7+,TOOQU7+)R7+)RO&8_QWO7+)RO&8dQ^O7+)RO&8kQWO7+)ROOQU<<Lu<<LuOOQU<<Lw<<LwOOQU-E<|-E<|OOQU1G3v1G3vO&8pQWO,5>]OOQU,5>_,5>_O&8uQWO1G3|O9WQWO7+&cO!(oQ^O7+&cOOQO7+%[7+%[O&8zQ07bO1G6UO>tQWO7+%[OOQ?Mr<<I^<<I^OOQ?Mr<<Iw<<IwO>tQWO<<IwOOQO<<Ip<<IpO$>`Q?NdO<<IpO%[Q^O<<IpOOQO<<Ia<<IaO!ArQ?MxO<<IaO&9UQ?MxO<<IpO&9aQ?NdO<= XO&9qQWO<= WOOQO7+*Z7+*ZO9WQWO7+*ZOOQUANAhANAhO&9yQrOANAhO!&_Q7[OANAhO#&wQWOANAhO4UQrOANAhO&:QQWOANAhO%[Q^OANAhO&:YQ?NdO7+'xO&<hQ?NdO,5?]O&>pQ?NdO,5?_O&@xQ?NdO7+'zO&CWQrO1G4hO&CbQ07bO7+&^O&EcQ07bO,5=UO&GgQ07bO,5=WO&GwQ07bO,5=UO&HXQ07bO,5=WO&HiQ07bO,59rO&JlQ07bO,5<iO&LlQ07bO,5<kO&N}Q07bO,5<yO'!pQ07bO7+'jO'!}Q07bO7+'kO'#[QWO,5<[OOQO7+'_7+'_O'#aQ7[O<<KzOOQO1G4s1G4sO'#hQWO1G4sO'#sQWO1G4sO'$RQWO7++xO'$RQWO7++xO!&_Q7[O1G4uO'$ZQpO1G4uO'$eQWO7++yOOQ?Mp7+(S7+(SO'$mQWO7+(TO'$xQpO7+(TOOQ?Mp7+(R7+(RO$(PQWO7+(SO'%PQWO7+(TO!&_Q7[O7+(TOCcQWO7+(SO'%UQWO7+(TO'%^Q7[O<<NrOOQ?Mr7+$z7+$zO'%hQpO,5?bOOQO-E<t-E<tO'%rQ?NbO7+(WOOQUAN=gAN=gO9^QWO1G5SOOQO1G5S1G5SO'&SQWO1G5SO'&XQWO7+,RO'&XQWO7+,RO9hQ?MxOANBTO@fQWOANBTOOQUANBTANBTOOQUANApANApOOQUANAqANAqO'&aQWO,5?dOOQO-E<v-E<vO'&lQ07bO1G6dOOQO,5?f,5?fOOQO-E<x-E<xOOQU1G3^1G3^O%+xQ^O,5<}O'&vQWO,5<}OOQU<<Lc<<LcO!&_Q7[O<<LcO&7WQWO<<LcO'&{QWO<<LcO%[Q^O<<LcOOQU<<Le<<LeO9hQ?MxO<<LeO$!}QWO<<LeO9RQWO<<LeO''TQ`O1G5RO''`QWO7+,POOQUAN=]AN=]O9hQ?MxOAN=]OOQU<= n<= nOOQU<= o<= oO''hQWO<= nO''mQWO<= oOOQU<<Lm<<LmO''rQWO<<LmO''wQ^O<<LmOOQU1G3w1G3wO>tQWO7+)hO'(OQWO<<I}O'(ZQ07bO<<I}OOQO<<Hv<<HvOOQ?MrAN?cAN?cOOQOAN?[AN?[O$>`Q?NdOAN?[OOQOAN>{AN>{O%[Q^OAN?[OOQO<<Mu<<MuOOQUG27SG27SO!&_Q7[OG27SO#&wQWOG27SO'(eQrOG27SO4UQrOG27SO'(lQWOG27SO'(tQ07bO<<JeO')RQ07bO1G2^O'*tQ07bO,5?]O',tQ07bO,5?_O'.tQ07bO1G2pO'0tQ07bO1G2rO'2tQ07bO<<KVO'3RQ07bO<<IxOOQO1G1v1G1vO!+hQ7[OANAfOOQO7+*_7+*_O'3`QWO7+*_O'3kQWO<= dO'3sQpO7+*aOOQ?Mp<<Ko<<KoO$(PQWO<<KoOCcQWO<<KoO'3}QWO<<KoOOQ?Mp<<Kn<<KnO'4YQpO<<KoO$(PQWO<<KnO'4aQWO<<KoO!&_Q7[O<<KoOOQO7+*n7+*nO9^QWO7+*nO'4fQWO<= mOOQUG27oG27oO9hQ?MxOG27oO!(oQ^O1G5OO'4nQWO7+,OO&7WQWOANA}OOQUANA}ANA}O!&_Q7[OANA}O'4vQWOANA}OOQUANBPANBPO9hQ?MxOANBPO$!}QWOANBPOOQO'#H['#H[OOQO7+*m7+*mOOQUG22wG22wOOQUANEYANEYOOQUANEZANEZOOQUANBXANBXO'5OQWOANBXOOQU<<MS<<MSO!(oQ^OAN?iOOQOG24vG24vO$>`Q?NdOG24vO#&wQWOLD,nOOQULD,nLD,nO!&_Q7[OLD,nO'5TQrOLD,nO'5[Q07bO7+'xO'6}Q07bO,5?]O'8}Q07bO,5?_O':}Q07bO7+'zO'<pQ7[OG27QOOQO<<My<<MyOOQ?MpANAZANAZO$(PQWOANAZOCcQWOANAZO'=QQWOANAZOOQ?MpANAYANAYO'=]QpOANAZOOQO<<NY<<NYOOQULD-ZLD-ZO'=dQ07bO7+*jOOQUG27iG27iO&7WQWOG27iO!&_Q7[OG27iOOQUG27kG27kO9hQ?MxOG27kOOQUG27sG27sO'=nQ07bOG25TOOQOLD*bLD*bOOQU!$(!Y!$(!YO#&wQWO!$(!YO!&_Q7[O!$(!YO'=xQ?NdOG27QOOQ?MpG26uG26uO$(PQWOG26uOCcQWOG26uO'@WQWOG26uOOQULD-TLD-TO&7WQWOLD-TOOQULD-VLD-VOOQU!)9Et!)9EtO#&wQWO!)9EtOOQ?MpLD,aLD,aO$(PQWOLD,aOCcQWOLD,aOOQU!$(!o!$(!oOOQU!.K;`!.K;`O'@cQ07bOG27QOOQ?Mp!$( {!$( {O$(PQWO!$( {OOQ?Mp!)9Eg!)9EgO!(oQ^O'#DwO1PQWO'#EUO'BUQrO'#JmO'B]QMnO'#DsO'BdQ^O'#D{O'BkQrO'#CiO'ERQrO'#CiO!(oQ^O'#D}O'EcQ^O,5;WO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O'#IlO'GfQWO,5<gO!(oQ^O,5;bO'GnQ7[O,5;bO'IXQ7[O,5;bO!(oQ^O,5;vO!&_Q7[O'#GjO'GnQ7[O'#GjO!&_Q7[O'#GlO'GnQ7[O'#GlO1SQWO'#DWO1SQWO'#DWO!&_Q7[O'#F}O'GnQ7[O'#F}O!&_Q7[O'#GPO'GnQ7[O'#GPO!&_Q7[O'#G_O'GnQ7[O'#G_O!(oQ^O,5:gO'I`Q`O'#D[O!(oQ^O,5@jO'EcQ^O1G0rO'IjQ07bO'#CiO!(oQ^O1G2OO!&_Q7[O'#IqO'GnQ7[O'#IqO!&_Q7[O'#IsO'GnQ7[O'#IsO'ItQpO'#CrO!&_Q7[O,5<rO'GnQ7[O,5<rO'EcQ^O1G2PO!(oQ^O7+&yO!&_Q7[O1G2^O'GnQ7[O1G2^O!&_Q7[O'#IqO'GnQ7[O'#IqO!&_Q7[O'#IsO'GnQ7[O'#IsO!&_Q7[O1G2`O'GnQ7[O1G2`O'EcQ^O7+'kO'EcQ^O7+&^O!&_Q7[OANAfO'GnQ7[OANAfO'JXQWO'#ElO'J^QWO'#ElO'JfQWO'#F[O'JkQWO'#EvO'JpQWO'#KOO'J{QWO'#J|O'KWQWO,5;WO'K]Q7[O,5<dO'KdQWO'#GWO'KiQWO'#GWO'KnQWO,5<eO'KvQWO,5;WO'LOQ07bO1G1_O'LVQWO,5<rO'L[QWO,5<rO'LaQWO,5<tO'LfQWO,5<tO'LkQWO1G2PO'LpQWO1G0rO'LuQ7[O<<KzO'L|Q7[O<<KzO7eQ7[O'#FzO9RQWO'#FyOAaQWO'#EkO!(oQ^O,5;sO!3SQWO'#GWO!3SQWO'#GWO!3SQWO'#GYO!3SQWO'#GYO!+hQ7[O7+(`O!+hQ7[O7+(`O%+SQpO1G2tO%+SQpO1G2tO!&_Q7[O,5=YO!&_Q7[O,5=Y",stateData:"'NQ~O'wOS'xOSTOS'yRQ~OPYOQYOSfOY!VOaqOdzOeyOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![XO!fuO!iZO!lYO!mYO!nYO!pvO!rwO!uxO!y]O#t!PO$V|O%e}O%g!QO%i!OO%j!OO%k!OO%n!RO%p!SO%s!TO%t!TO%v!UO&S!WO&Y!XO&[!YO&^!ZO&`![O&c!]O&i!^O&o!_O&q!`O&s!aO&u!bO&w!cO(OSO(QTO(TUO([VO(j[O(yiO~OWtO~P`OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(O!dO(QTO(TUO([VO(j[O(yiO~Oa!wOp!nO!P!oO!_!yO!`!vO!a!vO!y;QO#Q!pO#R!pO#S!xO#T!pO#U!pO#X!zO#Y!zO(P!lO(QTO(TUO(`!mO(j!sO~O'y!{O~OP]XR]X[]Xa]Xo]X}]X!P]X!Y]X!i]X!m]X#O]X#P]X#]]X#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X'u]X([]X(m]X(t]X(u]X~O!d%PX~P(qO_!}O(Q#PO(R!}O(S#PO~O_#QO(S#PO(T#PO(U#QO~Ou#SO!R#TO(]#TO(^#VO~OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(O;UO(QTO(TUO([VO(j[O(yiO~O!X#ZO!Y#WO!V(cP!V(qP~P+}O!Z#cO~P`OPYOQYOSfOd!jOe!iOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(QTO(TUO([VO(j[O(yiO~Om#mO!X#iO!y]O#f#lO#g#iO(O;VO!h(nP~P.iO!i#oO(O#nO~O!u#sO!y]O%e#tO~O#h#uO~O!d#vO#h#uO~OP$[OR#zO[$cOo$aO}#yO!P#{O!Y$_O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO#w$UO#y$WO#z$XO([VO(m$YO(t#|O(u#}O~Oa(aX'u(aX's(aX!h(aX!V(aX![(aX%f(aX!d(aX~P1qO#P$dO#]$eO$P$eOP(bXR(bX[(bXo(bX}(bX!P(bX!Y(bX!i(bX!m(bX#O(bX#k(bX#l(bX#m(bX#n(bX#o(bX#p(bX#q(bX#r(bX#s(bX#u(bX#w(bX#y(bX#z(bX([(bX(m(bX(t(bX(u(bX![(bX%f(bX~Oa(bX'u(bX's(bX!V(bX!h(bXs(bX!d(bX~P4UO#]$eO~O$[$hO$^$gO$e$mO~OSfO![$nO$h$oO$j$qO~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{%[O!P${O![$|O!f%aO!i$xO#g%bO$V%_O$r%]O$t%^O$w%`O(O$sO(QTO(TUO([$uO(t$}O(u%POg(XP~O!i%cO~O!P%fO![%gO(O%eO~O!d%kO~Oa%lO'u%lO~O}%pO~P%[O(P!lO~P%[O%k%tO~P%[Oh%VO!i%cO(O%eO(P!lO~Oe%{O!i%cO(O%eO~O#s$RO~O}&QO![%}O!i&PO%g&TO(O%eO(P!lO(QTO(TUO`)SP~O!u#sO~O%p&VO!P)OX![)OX(O)OX~O(O&WO~O!r&]O#t!PO%g!QO%i!OO%j!OO%k!OO%n!RO%p!SO%s!TO%t!TO~Od&bOe&aO!u&_O%e&`O%x&^O~P;|Od&eOeyO![&dO!r&]O!uxO!y]O#t!PO%e}O%i!OO%j!OO%k!OO%n!RO%p!SO%s!TO%t!TO%v!UO~Ob&hO#]&kO%g&fO(P!lO~P=RO!i&lO!r&pO~O!i#oO~O![XO~Oa%lO't&xO'u%lO~Oa%lO't&{O'u%lO~Oa%lO't&}O'u%lO~O's]X!V]Xs]X!h]X&W]X![]X%f]X!d]X~P(qO!_'[O!`'TO!a'TO(P!lO(QTO(TUO~Op'RO!P'QO!X'UO(`'PO!Z(dP!Z(sP~P@YOk'_O![']O(O%eO~Oe'dO!i%cO(O%eO~O}&QO!i&PO~Op!nO!P!oO!y;QO#Q!pO#R!pO#T!pO#U!pO(P!lO(QTO(TUO(`!mO(j!sO~O!_'jO!`'iO!a'iO#S!pO#X'kO#Y'kO~PAtOa%lOh%VO!d#vO!i%cO'u%lO(m'mO~O!m'qO#]'oO~PCSOp!nO!P!oO(QTO(TUO(`!mO(j!sO~O![XOp(hX!P(hX!_(hX!`(hX!a(hX!y(hX#Q(hX#R(hX#S(hX#T(hX#U(hX#X(hX#Y(hX(P(hX(Q(hX(T(hX(`(hX(j(hX~O!`'iO!a'iO(P!lO~PCrO'z'uO'{'uO'|'wO~O_!}O(Q'yO(R!}O(S'yO~O_#QO(S'yO(T'yO(U#QO~Ou#SO!R#TO(]#TO(^'}O~O!X(PO!V'SX!V'YX!Y'SX!Y'YX~P+}O!Y(RO!V(cX~OP$[OR#zO[$cOo$aO}#yO!P#{O!Y(RO!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO#w$UO#y$WO#z$XO([VO(m$YO(t#|O(u#}O~O!V(cX~PGfO!V(WO~O!V(pX!Y(pX!d(pX!h(pX(m(pX~O#](pX#h#aX!Z(pX~PIiO#](XO!V(rX!Y(rX~O!Y(YO!V(qX~O!V(]O~O#]$eO~PIiO!Z(^O~P`OR#zO}#yO!P#{O!i#xO([VOP!ka[!kao!ka!Y!ka!m!ka#O!ka#k!ka#l!ka#m!ka#n!ka#o!ka#p!ka#q!ka#r!ka#s!ka#u!ka#w!ka#y!ka#z!ka(m!ka(t!ka(u!ka~Oa!ka'u!ka's!ka!V!ka!h!kas!ka![!ka%f!ka!d!ka~PKPO!h(_O~O!d#vO#](`O(m'mO!Y(oXa(oX'u(oX~O!h(oX~PMlO!P%fO![%gO!y]O#f(eO#g(dO(O%eO~O!Y(fO!h(nX~O!h(hO~O!P%fO![%gO#g(dO(O%eO~OP(bXR(bX[(bXo(bX}(bX!P(bX!Y(bX!i(bX!m(bX#O(bX#k(bX#l(bX#m(bX#n(bX#o(bX#p(bX#q(bX#r(bX#s(bX#u(bX#w(bX#y(bX#z(bX([(bX(m(bX(t(bX(u(bX~O!d#vO!h(bX~P! YOR(jO}(iO!i#xO#P$dO!y!xa!P!xa~O!u!xa%e!xa![!xa#f!xa#g!xa(O!xa~P!#ZO!u(nO~OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![XO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(O!dO(QTO(TUO([VO(j[O(yiO~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{;nO!P${O![$|O!f=OO!i$xO#g;tO$V%_O$r;pO$t;rO$w%`O(O(rO(QTO(TUO([$uO(t$}O(u%PO~O#h(tO~O!X(vO!h(fP~P%[O(`(xO(j[O~O!P(zO!i#xO(`(xO(j[O~OP;POQ;POSfOd<zOe!iOmkOo;POpkOqkOwkOy;PO{;PO!PWO!TkO!UkO![!eO!f;SO!iZO!l;PO!m;PO!n;PO!p;TO!r;WO!u!hO$V!kO(O)XO(QTO(TUO([VO(j[O(y<xO~O!Y$_Oa$oa'u$oa's$oa!h$oa!V$oa![$oa%f$oa!d$oa~O#t)`O~P!&_Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{%[O!P${O![$|O!f%aO!i$xO#g%bO$V%_O$r%]O$t%^O$w%`O(O(rO(QTO(TUO([$uO(t$}O(u%PO~Og(kP~P!+hO})eO!d)dO![$]X$Y$]X$[$]X$^$]X$e$]X~O!d)dO![(vX$Y(vX$[(vX$^(vX$e(vX~O})eO~P!-qO})eO![(vX$Y(vX$[(vX$^(vX$e(vX~O![)gO$Y)kO$[)fO$^)fO$e)lO~O!X)oO~P!(oO$[$hO$^$gO$e)sO~Ok$xX}$xX!P$xX#P$xX(t$xX(u$xX~OgjXg$xXkjX!YjX#]jX~P!/gOu)uO(])vO(^)xO~Ok*RO})zO!P){O(t$}O(u%PO~Og)yO~P!0kOg*SO~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{;nO!P*UO![*VO!f=OO!i$xO#g;tO$V%_O$r;pO$t;rO$w%`O(QTO(TUO([$uO(t$}O(u%PO~O!X*YO(O*TO!h(zP~P!1YO#h*[O~O!i*]O~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{;nO!P${O![$|O!f=OO!i$xO#g;tO$V%_O$r;pO$t;rO$w%`O(O*_O(QTO(TUO([$uO(t$}O(u%PO~O!X*bO!V({P~P!3XOo*nO!P*fO!_*lO!`*eO!a*eO!i*]O#X*mO%]*hO(P!lO(`!mO~O!Z*kO~P!4|O#P$dOk(ZX}(ZX!P(ZX(t(ZX(u(ZX!Y(ZX#](ZX~Og(ZX#}(ZX~P!5uOk*sO#]*rOg(YX!Y(YX~O!Y*tOg(XX~O(O&WOg(XP~Op*wO~O!i*|O~O(O(rO~Om+QO!P%fO!X#iO![%gO!y]O#f#lO#g#iO(O%eO!h(nP~O!d#vO#h+RO~O!P%fO!X+TO!Y(YO![%gO(O%eO!V(qP~Op'XO!P+VO!X+UO(QTO(TUO(`(xO~O!Z(sP~P!8uO!Y+WOa)PX'u)PX~OP$[OR#zO[$cOo$aO}#yO!P#{O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO#w$UO#y$WO#z$XO([VO(m$YO(t#|O(u#}O~Oa!ga!Y!ga'u!ga's!ga!V!ga!h!gas!ga![!ga%f!ga!d!ga~P!9mOR#zO}#yO!P#{O!i#xO([VOP!oa[!oao!oa!Y!oa!m!oa#O!oa#k!oa#l!oa#m!oa#n!oa#o!oa#p!oa#q!oa#r!oa#s!oa#u!oa#w!oa#y!oa#z!oa(m!oa(t!oa(u!oa~Oa!oa'u!oa's!oa!V!oa!h!oas!oa![!oa%f!oa!d!oa~P!<TOR#zO}#yO!P#{O!i#xO([VOP!qa[!qao!qa!Y!qa!m!qa#O!qa#k!qa#l!qa#m!qa#n!qa#o!qa#p!qa#q!qa#r!qa#s!qa#u!qa#w!qa#y!qa#z!qa(m!qa(t!qa(u!qa~Oa!qa'u!qa's!qa!V!qa!h!qas!qa![!qa%f!qa!d!qa~P!>kOh%VOk+aO![']O%f+`O~O!d+cOa(WX![(WX'u(WX!Y(WX~Oa%lO![XO'u%lO~Oh%VO!i%cO~Oh%VO!i%cO(O%eO~O!d#vO#h(tO~Ob+nO%g+oO(O+kO(QTO(TUO!Z)TP~O!Y+pO`)SX~O[+tO~O`+uO~O![%}O(O%eO(P!lO`)SP~Oh%VO#]+zO~Oh%VOk+}O![$|O~O![,PO~O},RO![XO~O%k%tO~O!u,WO~Oe,]O~Ob,^O(O#nO(QTO(TUO!Z)RP~Oe%{O~O%g!QO(O&WO~P=RO[,cO`,bO~OPYOQYOSfOdzOeyOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO!fuO!iZO!lYO!mYO!nYO!pvO!uxO!y]O%e}O(QTO(TUO([VO(j[O(yiO~O![!eO!r!gO$V!kO(O!dO~P!EkO`,bOa%lO'u%lO~OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!u!hO$V!kO(O!dO(QTO(TUO([VO(j[O(yiO~Oa,hO!rwO#t!OO%i!OO%j!OO%k!OO~P!HTO!i&lO~O&Y,nO~O![,pO~O&k,rO&m,sOP&haQ&haS&haY&haa&had&hae&ham&hao&hap&haq&haw&hay&ha{&ha!P&ha!T&ha!U&ha![&ha!f&ha!i&ha!l&ha!m&ha!n&ha!p&ha!r&ha!u&ha!y&ha#t&ha$V&ha%e&ha%g&ha%i&ha%j&ha%k&ha%n&ha%p&ha%s&ha%t&ha%v&ha&S&ha&Y&ha&[&ha&^&ha&`&ha&c&ha&i&ha&o&ha&q&ha&s&ha&u&ha&w&ha's&ha(O&ha(Q&ha(T&ha([&ha(j&ha(y&ha!Z&ha&a&hab&ha&f&ha~O(O,xO~Oh!bX!Y!OX!Z!OX!d!OX!d!bX!i!bX#]!OX~O!Y!bX!Z!bX~P# ZO!d,}O#],|Oh(eX!Y#eX!Y(eX!Z#eX!Z(eX!d(eX!i(eX~Oh%VO!d-PO!i%cO!Y!^X!Z!^X~Op!nO!P!oO(QTO(TUO(`!mO~OP;POQ;POSfOd<zOe!iOmkOo;POpkOqkOwkOy;PO{;PO!PWO!TkO!UkO![!eO!f;SO!iZO!l;PO!m;PO!n;PO!p;TO!r;WO!u!hO$V!kO(QTO(TUO([VO(j[O(y<xO~O(O;zO~P##_O!Y-TO!Z(dX~O!Z-VO~O!d,}O#],|O!Y#eX!Z#eX~O!Y-WO!Z(sX~O!Z-YO~O!`-ZO!a-ZO(P!lO~P#!|O!Z-^O~P'_Ok-aO![']O~O!V-fO~Op!xa!_!xa!`!xa!a!xa#Q!xa#R!xa#S!xa#T!xa#U!xa#X!xa#Y!xa(P!xa(Q!xa(T!xa(`!xa(j!xa~P!#ZO!m-kO#]-iO~PCSO!`-mO!a-mO(P!lO~PCrOa%lO#]-iO'u%lO~Oa%lO!d#vO#]-iO'u%lO~Oa%lO!d#vO!m-kO#]-iO'u%lO(m'mO~O'z'uO'{'uO'|-rO~Os-sO~O!V'Sa!Y'Sa~P!9mO!X-wO!V'SX!Y'SX~P%[O!Y(RO!V(ca~O!V(ca~PGfO!Y(YO!V(qa~O!P%fO!X-{O![%gO(O%eO!V'YX!Y'YX~O#]-}O!Y(oa!h(oaa(oa'u(oa~O!d#vO~P#+eO!Y(fO!h(na~O!P%fO![%gO#g.RO(O%eO~Om.WO!P%fO!X.TO![%gO!y]O#f.VO#g.TO(O%eO!Y']X!h']X~OR.[O!i#xO~Oh%VOk._O![']O%f.^O~Oa#`i!Y#`i'u#`i's#`i!V#`i!h#`is#`i![#`i%f#`i!d#`i~P!9mOk=UO})zO!P){O(t$}O(u%PO~O#h#[aa#[a#]#[a'u#[a!Y#[a!h#[a![#[a!V#[a~P#.aO#h(ZXP(ZXR(ZX[(ZXa(ZXo(ZX!i(ZX!m(ZX#O(ZX#k(ZX#l(ZX#m(ZX#n(ZX#o(ZX#p(ZX#q(ZX#r(ZX#s(ZX#u(ZX#w(ZX#y(ZX#z(ZX'u(ZX([(ZX(m(ZX!h(ZX!V(ZX's(ZXs(ZX![(ZX%f(ZX!d(ZX~P!5uO!Y.lO!h(fX~P!9mO!h.oO~O!V.qO~OP$[OR#zO}#yO!P#{O!i#xO!m$[O([VO[#jia#jio#ji!Y#ji#O#ji#l#ji#m#ji#n#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'u#ji(m#ji(t#ji(u#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#k#ji~P#1|O#k$OO~P#1|OP$[OR#zOo$aO}#yO!P#{O!i#xO!m$[O#k$OO#l$PO#m$PO#n$PO([VO[#jia#ji!Y#ji#O#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'u#ji(m#ji(t#ji(u#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#o#ji~P#4kO#o$QO~P#4kOP$[OR#zO[$cOo$aO}#yO!P#{O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO([VOa#ji!Y#ji#w#ji#y#ji#z#ji'u#ji(m#ji(t#ji(u#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#u#ji~P#7YOP$[OR#zO[$cOo$aO}#yO!P#{O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO([VO(u#}Oa#ji!Y#ji#y#ji#z#ji'u#ji(m#ji(t#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#w$UO~P#9pO#w#ji~P#9pO#u$SO~P#7YOP$[OR#zO[$cOo$aO}#yO!P#{O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO#w$UO([VO(t#|O(u#}Oa#ji!Y#ji#z#ji'u#ji(m#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#y#ji~P#<fO#y$WO~P#<fOP]XR]X[]Xo]X}]X!P]X!i]X!m]X#O]X#P]X#]]X#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X([]X(m]X(t]X(u]X!Y]X!Z]X~O#}]X~P#?TOP$[OR#zO[;hOo;fO}#yO!P#{O!i#xO!m$[O#O;]O#k;YO#l;ZO#m;ZO#n;ZO#o;[O#p;]O#q;]O#r;gO#s;]O#u;^O#w;`O#y;bO#z;cO([VO(m$YO(t#|O(u#}O~O#}.sO~P#AbO#P$dO#];iO$P;iO#}(bX!Z(bX~P! YOa'`a!Y'`a'u'`a's'`a!h'`a!V'`as'`a!['`a%f'`a!d'`a~P!9mO[#jia#jio#ji!Y#ji#O#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'u#ji(m#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~OP$[OR#zO}#yO!P#{O!i#xO!m$[O#k$OO#l$PO#m$PO#n$PO([VO(t#ji(u#ji~P#DdOk=UO})zO!P){O(t$}O(u%POP#jiR#ji!i#ji!m#ji#k#ji#l#ji#m#ji#n#ji([#ji~P#DdO!Y.wOg(kX~P!0kOg.yO~Oa$Oi!Y$Oi'u$Oi's$Oi!V$Oi!h$Ois$Oi![$Oi%f$Oi!d$Oi~P!9mO$[.zO$^.zO~O$[.{O$^.{O~O!d)dO#].|O![$bX$Y$bX$[$bX$^$bX$e$bX~O!X.}O~O![)gO$Y/PO$[)fO$^)fO$e/QO~O!Y;dO!Z(aX~P#AbO!Z/RO~O!d)dO$e(vX~O$e/TO~Ou)uO(])vO(^/WO~O!V/[O~P!&_O(t$}Ok%^a}%^a!P%^a(u%^a!Y%^a#]%^a~Og%^a#}%^a~P#K^O(u%POk%`a}%`a!P%`a(t%`a!Y%`a#]%`a~Og%`a#}%`a~P#LPO!YfX!dfX!hfX!h$xX(mfX~P!/gO!X/eO!Y(YO(O/dO!V(qP!V({P~P!1YOo*nO!_*lO!`*eO!a*eO!i*]O#X*mO%]*hO(P!lO~Op'XO!P/fO!X+UO!Z*kO(QTO(TUO(`;wO!Z(sP~P#MjO!h/gO~P#.aO!Y/hO!d#vO(m'mO!h(zX~O!h/mO~O!P%fO!X*YO![%gO(O%eO!h(zP~O#h/oO~O!V$xX!Y$xX!d%PX~P!/gO!Y/pO!V({X~P#.aO!d/rO~O!V/tO~Oh%VOo/xO!d#vO!i%cO(m'mO~O(O/zO~O!d+cO~Oa%lO!Y0OO'u%lO~O!Z0QO~P!4|O!`0RO!a0RO(P!lO(`!mO~O!P0TO(`!mO~O#X0UO~Og%^a!Y%^a#]%^a#}%^a~P!0kOg%`a!Y%`a#]%`a#}%`a~P!0kO(O&WOg'iX!Y'iX~O!Y*tOg(Xa~Og0_O~OR0`O}0`O!P0aO#P$dOkza(tza(uza!Yza#]za~Ogza#}za~P$%]O})zO!P){Ok$qa(t$qa(u$qa!Y$qa#]$qa~Og$qa#}$qa~P$&UO})zO!P){Ok$sa(t$sa(u$sa!Y$sa#]$sa~Og$sa#}$sa~P$&wO#h0dO~Og%Ra!Y%Ra#]%Ra#}%Ra~P!0kO!d#vO~O#h0gO~O!Y+WOa)Pa'u)Pa~OR#zO}#yO!P#{O!i#xO([VOP!oi[!oio!oi!Y!oi!m!oi#O!oi#k!oi#l!oi#m!oi#n!oi#o!oi#p!oi#q!oi#r!oi#s!oi#u!oi#w!oi#y!oi#z!oi(m!oi(t!oi(u!oi~Oa!oi'u!oi's!oi!V!oi!h!ois!oi![!oi%f!oi!d!oi~P$(fOh%VOo%XOp$tOq$tOw%YOy%ZO{;nO!P${O![$|O!f=OO!i$xO#g;tO$V%_O$r;pO$t;rO$w%`O(QTO(TUO([$uO(t$}O(u%PO~Om0pO(O0oO~P$*|O!d+cOa(Wa![(Wa'u(Wa!Y(Wa~O#h0vO~O[]X!YfX!ZfX~O!Y0wO!Z)TX~O!Z0yO~O[0zO~Ob0|O(O+kO(QTO(TUO~O![%}O(O%eO`'qX!Y'qX~O!Y+pO`)Sa~O!h1PO~P!9mO[1SO~O`1TO~O#]1WO~Ok1ZO![$|O~O(`(xO!Z)QP~Oh%VOk1dO![1aO%f1cO~O[1nO!Y1lO!Z)RX~O!Z1oO~O`1qOa%lO'u%lO~O(O#nO(QTO(TUO~O#P$dO#]$eO$P$eOP(bXR(bX[(bXo(bX}(bX!P(bX!Y(bX!i(bX!m(bX#O(bX#k(bX#l(bX#m(bX#n(bX#o(bX#p(bX#q(bX#r(bX#u(bX#w(bX#y(bX#z(bX([(bX(m(bX(t(bX(u(bX~O#s1tO&W1uOa(bX~P$0dO#]$eO#s1tO&W1uO~Oa1wO~P%[Oa1yO~O&a1|OP&_iQ&_iS&_iY&_ia&_id&_ie&_im&_io&_ip&_iq&_iw&_iy&_i{&_i!P&_i!T&_i!U&_i![&_i!f&_i!i&_i!l&_i!m&_i!n&_i!p&_i!r&_i!u&_i!y&_i#t&_i$V&_i%e&_i%g&_i%i&_i%j&_i%k&_i%n&_i%p&_i%s&_i%t&_i%v&_i&S&_i&Y&_i&[&_i&^&_i&`&_i&c&_i&i&_i&o&_i&q&_i&s&_i&u&_i&w&_i's&_i(O&_i(Q&_i(T&_i([&_i(j&_i(y&_i!Z&_ib&_i&f&_i~Ob2SO!Z2QO&f2RO~P`O![XO!i2UO~O&m,sOP&hiQ&hiS&hiY&hia&hid&hie&him&hio&hip&hiq&hiw&hiy&hi{&hi!P&hi!T&hi!U&hi![&hi!f&hi!i&hi!l&hi!m&hi!n&hi!p&hi!r&hi!u&hi!y&hi#t&hi$V&hi%e&hi%g&hi%i&hi%j&hi%k&hi%n&hi%p&hi%s&hi%t&hi%v&hi&S&hi&Y&hi&[&hi&^&hi&`&hi&c&hi&i&hi&o&hi&q&hi&s&hi&u&hi&w&hi's&hi(O&hi(Q&hi(T&hi([&hi(j&hi(y&hi!Z&hi&a&hib&hi&f&hi~O!V2[O~O!Y!^a!Z!^a~P#AbOp!nO!P!oO!X2bO(`!mO!Y'TX!Z'TX~P@YO!Y-TO!Z(da~O!Y'ZX!Z'ZX~P!8uO!Y-WO!Z(sa~O!Z2iO~P'_Oa%lO#]2rO'u%lO~Oa%lO!d#vO#]2rO'u%lO~Oa%lO!d#vO!m2vO#]2rO'u%lO(m'mO~Oa%lO'u%lO~P!9mO!Y$_Os$oa~O!V'Si!Y'Si~P!9mO!Y(RO!V(ci~O!Y(YO!V(qi~O!V(ri!Y(ri~P!9mO!Y(oi!h(oia(oi'u(oi~P!9mO#]2xO!Y(oi!h(oia(oi'u(oi~O!Y(fO!h(ni~O!P%fO![%gO!y]O#f2}O#g2|O(O%eO~O!P%fO![%gO#g2|O(O%eO~Ok3UO![']O%f3TO~Oh%VOk3UO![']O%f3TO~O#h%^aP%^aR%^a[%^aa%^ao%^a!i%^a!m%^a#O%^a#k%^a#l%^a#m%^a#n%^a#o%^a#p%^a#q%^a#r%^a#s%^a#u%^a#w%^a#y%^a#z%^a'u%^a([%^a(m%^a!h%^a!V%^a's%^as%^a![%^a%f%^a!d%^a~P#K^O#h%`aP%`aR%`a[%`aa%`ao%`a!i%`a!m%`a#O%`a#k%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#u%`a#w%`a#y%`a#z%`a'u%`a([%`a(m%`a!h%`a!V%`a's%`as%`a![%`a%f%`a!d%`a~P#LPO#h%^aP%^aR%^a[%^aa%^ao%^a!Y%^a!i%^a!m%^a#O%^a#k%^a#l%^a#m%^a#n%^a#o%^a#p%^a#q%^a#r%^a#s%^a#u%^a#w%^a#y%^a#z%^a'u%^a([%^a(m%^a!h%^a!V%^a's%^a#]%^as%^a![%^a%f%^a!d%^a~P#.aO#h%`aP%`aR%`a[%`aa%`ao%`a!Y%`a!i%`a!m%`a#O%`a#k%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#u%`a#w%`a#y%`a#z%`a'u%`a([%`a(m%`a!h%`a!V%`a's%`a#]%`as%`a![%`a%f%`a!d%`a~P#.aO#hzaPza[zaazaoza!iza!mza#Oza#kza#lza#mza#nza#oza#pza#qza#rza#sza#uza#wza#yza#zza'uza([za(mza!hza!Vza'szasza![za%fza!dza~P$%]O#h$qaP$qaR$qa[$qaa$qao$qa!i$qa!m$qa#O$qa#k$qa#l$qa#m$qa#n$qa#o$qa#p$qa#q$qa#r$qa#s$qa#u$qa#w$qa#y$qa#z$qa'u$qa([$qa(m$qa!h$qa!V$qa's$qas$qa![$qa%f$qa!d$qa~P$&UO#h$saP$saR$sa[$saa$sao$sa!i$sa!m$sa#O$sa#k$sa#l$sa#m$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#u$sa#w$sa#y$sa#z$sa'u$sa([$sa(m$sa!h$sa!V$sa's$sas$sa![$sa%f$sa!d$sa~P$&wO#h%RaP%RaR%Ra[%Raa%Rao%Ra!Y%Ra!i%Ra!m%Ra#O%Ra#k%Ra#l%Ra#m%Ra#n%Ra#o%Ra#p%Ra#q%Ra#r%Ra#s%Ra#u%Ra#w%Ra#y%Ra#z%Ra'u%Ra([%Ra(m%Ra!h%Ra!V%Ra's%Ra#]%Ras%Ra![%Ra%f%Ra!d%Ra~P#.aOa#`q!Y#`q'u#`q's#`q!V#`q!h#`qs#`q![#`q%f#`q!d#`q~P!9mO!X3^O!Y'UX!h'UX~P%[O!Y.lO!h(fa~O!Y.lO!h(fa~P!9mO!V3aO~O#}!ka!Z!ka~PKPO#}!ga!Y!ga!Z!ga~P#AbO#}!oa!Z!oa~P!<TO#}!qa!Z!qa~P!>kOg'XX!Y'XX~P!+hO!Y.wOg(ka~OSfO![3uO$c3vO~O!Z3zO~Os3{O~P#.aOa$lq!Y$lq'u$lq's$lq!V$lq!h$lqs$lq![$lq%f$lq!d$lq~P!9mO!V3|O~P#.aO})zO!P){O(u%POk'ea(t'ea!Y'ea#]'ea~Og'ea#}'ea~P%)nO})zO!P){Ok'ga(t'ga(u'ga!Y'ga#]'ga~Og'ga#}'ga~P%*aO(m$YO~P#.aO!VfX!V$xX!YfX!Y$xX!d%PX#]fX~P!/gO(O<QO~P!1YOmkO(O4OO~P.iO!P%fO!X4QO![%gO(O%eO!Y'aX!h'aX~O!Y/hO!h(za~O!Y/hO!d#vO!h(za~O!Y/hO!d#vO(m'mO!h(za~Og$zi!Y$zi#]$zi#}$zi~P!0kO!X4YO!V'cX!Y'cX~P!3XO!Y/pO!V({a~O!Y/pO!V({a~P#.aO!d#vO#s4bO~Oo4eO!d#vO(m'mO~O!P4hO(`!mO~O(t$}Ok%^i}%^i!P%^i(u%^i!Y%^i#]%^i~Og%^i#}%^i~P%.wO(u%POk%`i}%`i!P%`i(t%`i!Y%`i#]%`i~Og%`i#}%`i~P%/jOg(Yi!Y(Yi~P!0kO#]4mOg(Yi!Y(Yi~P!0kO!h4pO~Oa$mq!Y$mq'u$mq's$mq!V$mq!h$mqs$mq![$mq%f$mq!d$mq~P!9mO!V4tO~O!Y4uO![(|X~P#.aOa$xX![$xX%Z]X'u$xX!Y$xX~P!/gO%Z4xOalXklX}lX!PlX![lX'ulX(tlX(ulX!YlX~O%Z4xO~Ob5OO%g5PO(O+kO(QTO(TUO!Y'pX!Z'pX~O!Y0wO!Z)Ta~O[5TO~O`5UO~Oa%lO'u%lO~P#.aO![$|O~P#.aO!Y5^O#]5`O!Z)QX~O!Z5aO~Oo5hOp!nO!P5bO!_!yO!`!vO!a!vO!y;QO#Q!pO#R!pO#S!pO#T!pO#U!pO#X5gO#Y!zO(P!lO(QTO(TUO(`!mO(j!sO~O!Z5fO~P%4tOk5mO![1aO%f5lO~Oh%VOk5mO![1aO%f5lO~Ob5tO(O#nO(QTO(TUO!Y'oX!Z'oX~O!Y1lO!Z)Ra~O(QTO(TUO(`5vO~O`5zO~O#s5}O&W6OO~PMlO!h6PO~P%[Oa6RO~Oa6RO~P%[Ob2SO!Z6WO&f2RO~P`O!d6YO~O!d6[Oh(ei!Y(ei!Z(ei!d(ei!i(ei~O!Y#ei!Z#ei~P#AbO#]6]O!Y#ei!Z#ei~O!Y!^i!Z!^i~P#AbOa%lO#]6fO'u%lO~Oa%lO!d#vO#]6fO'u%lO~O!Y(oq!h(oqa(oq'u(oq~P!9mO!Y(fO!h(nq~O!P%fO![%gO#g6mO(O%eO~O![']O%f6pO~Ok6tO![']O%f6pO~O#h'eaP'eaR'ea['eaa'eao'ea!i'ea!m'ea#O'ea#k'ea#l'ea#m'ea#n'ea#o'ea#p'ea#q'ea#r'ea#s'ea#u'ea#w'ea#y'ea#z'ea'u'ea(['ea(m'ea!h'ea!V'ea's'eas'ea!['ea%f'ea!d'ea~P%)nO#h'gaP'gaR'ga['gaa'gao'ga!i'ga!m'ga#O'ga#k'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#u'ga#w'ga#y'ga#z'ga'u'ga(['ga(m'ga!h'ga!V'ga's'gas'ga!['ga%f'ga!d'ga~P%*aO#h$ziP$ziR$zi[$zia$zio$zi!Y$zi!i$zi!m$zi#O$zi#k$zi#l$zi#m$zi#n$zi#o$zi#p$zi#q$zi#r$zi#s$zi#u$zi#w$zi#y$zi#z$zi'u$zi([$zi(m$zi!h$zi!V$zi's$zi#]$zis$zi![$zi%f$zi!d$zi~P#.aO#h%^iP%^iR%^i[%^ia%^io%^i!i%^i!m%^i#O%^i#k%^i#l%^i#m%^i#n%^i#o%^i#p%^i#q%^i#r%^i#s%^i#u%^i#w%^i#y%^i#z%^i'u%^i([%^i(m%^i!h%^i!V%^i's%^is%^i![%^i%f%^i!d%^i~P%.wO#h%`iP%`iR%`i[%`ia%`io%`i!i%`i!m%`i#O%`i#k%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#u%`i#w%`i#y%`i#z%`i'u%`i([%`i(m%`i!h%`i!V%`i's%`is%`i![%`i%f%`i!d%`i~P%/jO!Y'Ua!h'Ua~P!9mO!Y.lO!h(fi~O#}#`i!Y#`i!Z#`i~P#AbOP$[OR#zO}#yO!P#{O!i#xO!m$[O([VO[#jio#ji#O#ji#l#ji#m#ji#n#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji(m#ji(t#ji(u#ji!Y#ji!Z#ji~O#k#ji~P%G^O#k;YO~P%G^OP$[OR#zOo;fO}#yO!P#{O!i#xO!m$[O#k;YO#l;ZO#m;ZO#n;ZO([VO[#ji#O#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji(m#ji(t#ji(u#ji!Y#ji!Z#ji~O#o#ji~P%IfO#o;[O~P%IfOP$[OR#zO[;hOo;fO}#yO!P#{O!i#xO!m$[O#O;]O#k;YO#l;ZO#m;ZO#n;ZO#o;[O#p;]O#q;]O#r;gO#s;]O([VO#w#ji#y#ji#z#ji#}#ji(m#ji(t#ji(u#ji!Y#ji!Z#ji~O#u#ji~P%KnOP$[OR#zO[;hOo;fO}#yO!P#{O!i#xO!m$[O#O;]O#k;YO#l;ZO#m;ZO#n;ZO#o;[O#p;]O#q;]O#r;gO#s;]O#u;^O([VO(u#}O#y#ji#z#ji#}#ji(m#ji(t#ji!Y#ji!Z#ji~O#w;`O~P%MoO#w#ji~P%MoO#u;^O~P%KnOP$[OR#zO[;hOo;fO}#yO!P#{O!i#xO!m$[O#O;]O#k;YO#l;ZO#m;ZO#n;ZO#o;[O#p;]O#q;]O#r;gO#s;]O#u;^O#w;`O([VO(t#|O(u#}O#z#ji#}#ji(m#ji!Y#ji!Z#ji~O#y#ji~P&!OO#y;bO~P&!OOa#{y!Y#{y'u#{y's#{y!V#{y!h#{ys#{y![#{y%f#{y!d#{y~P!9mO[#jio#ji#O#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji(m#ji!Y#ji!Z#ji~OP$[OR#zO}#yO!P#{O!i#xO!m$[O#k;YO#l;ZO#m;ZO#n;ZO([VO(t#ji(u#ji~P&$zOk=VO})zO!P){O(t$}O(u%POP#jiR#ji!i#ji!m#ji#k#ji#l#ji#m#ji#n#ji([#ji~P&$zO#P$dOP(ZXR(ZX[(ZXk(ZXo(ZX}(ZX!P(ZX!i(ZX!m(ZX#O(ZX#k(ZX#l(ZX#m(ZX#n(ZX#o(ZX#p(ZX#q(ZX#r(ZX#s(ZX#u(ZX#w(ZX#y(ZX#z(ZX#}(ZX([(ZX(m(ZX(t(ZX(u(ZX!Y(ZX!Z(ZX~O#}$Oi!Y$Oi!Z$Oi~P#AbO#}!oi!Z!oi~P$(fOg'Xa!Y'Xa~P!0kO!Z7WO~O!Y'`a!Z'`a~P#AbOP]XR]X[]Xo]X}]X!P]X!V]X!Y]X!i]X!m]X#O]X#P]X#]]X#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X([]X(m]X(t]X(u]X~O!d%WX#s%WX~P&+QO!d#vO(m'mO!Y'aa!h'aa~O!Y/hO!h(zi~O!Y/hO!d#vO!h(zi~Og$zq!Y$zq#]$zq#}$zq~P!0kO!V'ca!Y'ca~P#.aO!d7_O~O!Y/pO!V({i~P#.aO!Y/pO!V({i~O!V7cO~O!d#vO#s7hO~Oo7iO!d#vO(m'mO~O})zO!P){O(u%POk'fa(t'fa!Y'fa#]'fa~Og'fa#}'fa~P&/pO})zO!P){Ok'ha(t'ha(u'ha!Y'ha#]'ha~Og'ha#}'ha~P&0cO!V7lO~Og$|q!Y$|q#]$|q#}$|q~P!0kOa$my!Y$my'u$my's$my!V$my!h$mys$my![$my%f$my!d$my~P!9mO!d6[O~O!Y4uO![(|a~O![']OP$SaR$Sa[$Sao$Sa}$Sa!P$Sa!Y$Sa!i$Sa!m$Sa#O$Sa#k$Sa#l$Sa#m$Sa#n$Sa#o$Sa#p$Sa#q$Sa#r$Sa#s$Sa#u$Sa#w$Sa#y$Sa#z$Sa([$Sa(m$Sa(t$Sa(u$Sa~O%f6pO~P&2lOa#`y!Y#`y'u#`y's#`y!V#`y!h#`ys#`y![#`y%f#`y!d#`y~P!9mO[7qO~Ob7sO(O+kO(QTO(TUO~O!Y0wO!Z)Ti~O`7wO~O(`(xO!Y'lX!Z'lX~O!Y5^O!Z)Qa~O!Z8QO~P%4tOp!nO!P8RO(QTO(TUO(`!mO(j!sO~O#X8SO~O![1aO~O![1aO%f8UO~Ok8XO![1aO%f8UO~O[8^O!Y'oa!Z'oa~O!Y1lO!Z)Ri~O!h8bO~O!h8cO~O!h8fO~O!h8fO~P%[Oa8hO~O!d8iO~O!h8jO~O!Y(ri!Z(ri~P#AbOa%lO#]8rO'u%lO~O!Y(oy!h(oya(oy'u(oy~P!9mO!Y(fO!h(ny~O%f8uO~P&2lO![']O%f8uO~O#h$zqP$zqR$zq[$zqa$zqo$zq!Y$zq!i$zq!m$zq#O$zq#k$zq#l$zq#m$zq#n$zq#o$zq#p$zq#q$zq#r$zq#s$zq#u$zq#w$zq#y$zq#z$zq'u$zq([$zq(m$zq!h$zq!V$zq's$zq#]$zqs$zq![$zq%f$zq!d$zq~P#.aO#h'faP'faR'fa['faa'fao'fa!i'fa!m'fa#O'fa#k'fa#l'fa#m'fa#n'fa#o'fa#p'fa#q'fa#r'fa#s'fa#u'fa#w'fa#y'fa#z'fa'u'fa(['fa(m'fa!h'fa!V'fa's'fas'fa!['fa%f'fa!d'fa~P&/pO#h'haP'haR'ha['haa'hao'ha!i'ha!m'ha#O'ha#k'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#u'ha#w'ha#y'ha#z'ha'u'ha(['ha(m'ha!h'ha!V'ha's'has'ha!['ha%f'ha!d'ha~P&0cO#h$|qP$|qR$|q[$|qa$|qo$|q!Y$|q!i$|q!m$|q#O$|q#k$|q#l$|q#m$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#u$|q#w$|q#y$|q#z$|q'u$|q([$|q(m$|q!h$|q!V$|q's$|q#]$|qs$|q![$|q%f$|q!d$|q~P#.aO!Y'Ui!h'Ui~P!9mO#}#`q!Y#`q!Z#`q~P#AbO(t$}OP%^aR%^a[%^ao%^a!i%^a!m%^a#O%^a#k%^a#l%^a#m%^a#n%^a#o%^a#p%^a#q%^a#r%^a#s%^a#u%^a#w%^a#y%^a#z%^a#}%^a([%^a(m%^a!Y%^a!Z%^a~Ok%^a}%^a!P%^a(u%^a~P&CoO(u%POP%`aR%`a[%`ao%`a!i%`a!m%`a#O%`a#k%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#u%`a#w%`a#y%`a#z%`a#}%`a([%`a(m%`a!Y%`a!Z%`a~Ok%`a}%`a!P%`a(t%`a~P&EsOk=VO})zO!P){O(u%PO~P&CoOk=VO})zO!P){O(t$}O~P&EsOR0`O}0`O!P0aO#P$dOPza[zakzaoza!iza!mza#Oza#kza#lza#mza#nza#oza#pza#qza#rza#sza#uza#wza#yza#zza#}za([za(mza(tza(uza!Yza!Zza~O})zO!P){OP$qaR$qa[$qak$qao$qa!i$qa!m$qa#O$qa#k$qa#l$qa#m$qa#n$qa#o$qa#p$qa#q$qa#r$qa#s$qa#u$qa#w$qa#y$qa#z$qa#}$qa([$qa(m$qa(t$qa(u$qa!Y$qa!Z$qa~O})zO!P){OP$saR$sa[$sak$sao$sa!i$sa!m$sa#O$sa#k$sa#l$sa#m$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#u$sa#w$sa#y$sa#z$sa#}$sa([$sa(m$sa(t$sa(u$sa!Y$sa!Z$sa~Ok=VO})zO!P){O(t$}O(u%PO~OP%RaR%Ra[%Rao%Ra!i%Ra!m%Ra#O%Ra#k%Ra#l%Ra#m%Ra#n%Ra#o%Ra#p%Ra#q%Ra#r%Ra#s%Ra#u%Ra#w%Ra#y%Ra#z%Ra#}%Ra([%Ra(m%Ra!Y%Ra!Z%Ra~P&NlO#}$lq!Y$lq!Z$lq~P#AbO#}$mq!Y$mq!Z$mq~P#AbO!Z9SO~O#}9TO~P!0kO!d#vO!Y'ai!h'ai~O!d#vO(m'mO!Y'ai!h'ai~O!Y/hO!h(zq~O!V'ci!Y'ci~P#.aO!Y/pO!V({q~Oo9[O!d#vO(m'mO~O!V9]O~P#.aO!V9]O~O!d#vO#s9bO~Og(Yy!Y(Yy~P!0kO!Y'ja!['ja~P#.aOa%Yq![%Yq'u%Yq!Y%Yq~P#.aO[9dO~O!Y0wO!Z)Tq~O#]9hO!Y'la!Z'la~O!Y5^O!Z)Qi~P#AbO!P4hO~O![1aO%f9lO~O(QTO(TUO(`9qO~O!Y1lO!Z)Rq~O!h9tO~O!h9uO~O!h9vO~O!h9vO~P%[O#]9yO!Y#ey!Z#ey~O!Y#ey!Z#ey~P#AbO%f:OO~P&2lO![']O%f:OO~O#}#{y!Y#{y!Z#{y~P#AbOP$ziR$zi[$zio$zi!i$zi!m$zi#O$zi#k$zi#l$zi#m$zi#n$zi#o$zi#p$zi#q$zi#r$zi#s$zi#u$zi#w$zi#y$zi#z$zi#}$zi([$zi(m$zi!Y$zi!Z$zi~P&NlO})zO!P){O(u%POP'eaR'ea['eak'eao'ea!i'ea!m'ea#O'ea#k'ea#l'ea#m'ea#n'ea#o'ea#p'ea#q'ea#r'ea#s'ea#u'ea#w'ea#y'ea#z'ea#}'ea(['ea(m'ea(t'ea!Y'ea!Z'ea~O})zO!P){OP'gaR'ga['gak'gao'ga!i'ga!m'ga#O'ga#k'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#u'ga#w'ga#y'ga#z'ga#}'ga(['ga(m'ga(t'ga(u'ga!Y'ga!Z'ga~O(t$}OP%^iR%^i[%^ik%^io%^i}%^i!P%^i!i%^i!m%^i#O%^i#k%^i#l%^i#m%^i#n%^i#o%^i#p%^i#q%^i#r%^i#s%^i#u%^i#w%^i#y%^i#z%^i#}%^i([%^i(m%^i(u%^i!Y%^i!Z%^i~O(u%POP%`iR%`i[%`ik%`io%`i}%`i!P%`i!i%`i!m%`i#O%`i#k%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#u%`i#w%`i#y%`i#z%`i#}%`i([%`i(m%`i(t%`i!Y%`i!Z%`i~O#}$my!Y$my!Z$my~P#AbO#}#`y!Y#`y!Z#`y~P#AbO!d#vO!Y'aq!h'aq~O!Y/hO!h(zy~O!V'cq!Y'cq~P#.aOo:YO!d#vO(m'mO~O!V:ZO~P#.aO!V:ZO~O!Y0wO!Z)Ty~O!Y5^O!Z)Qq~O![1aO%f:cO~O!h:fO~O%f:kO~P&2lOP$zqR$zq[$zqo$zq!i$zq!m$zq#O$zq#k$zq#l$zq#m$zq#n$zq#o$zq#p$zq#q$zq#r$zq#s$zq#u$zq#w$zq#y$zq#z$zq#}$zq([$zq(m$zq!Y$zq!Z$zq~P&NlO})zO!P){O(u%POP'faR'fa['fak'fao'fa!i'fa!m'fa#O'fa#k'fa#l'fa#m'fa#n'fa#o'fa#p'fa#q'fa#r'fa#s'fa#u'fa#w'fa#y'fa#z'fa#}'fa(['fa(m'fa(t'fa!Y'fa!Z'fa~O})zO!P){OP'haR'ha['hak'hao'ha!i'ha!m'ha#O'ha#k'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#u'ha#w'ha#y'ha#z'ha#}'ha(['ha(m'ha(t'ha(u'ha!Y'ha!Z'ha~OP$|qR$|q[$|qo$|q!i$|q!m$|q#O$|q#k$|q#l$|q#m$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#u$|q#w$|q#y$|q#z$|q#}$|q([$|q(m$|q!Y$|q!Z$|q~P&NlOg%b!Z!Y%b!Z#]%b!Z#}%b!Z~P!0kOo:oO!d#vO(m'mO~O!V:pO~P#.aO!Y'lq!Z'lq~P#AbO!Y#e!Z!Z#e!Z~P#AbO#h%b!ZP%b!ZR%b!Z[%b!Za%b!Zo%b!Z!Y%b!Z!i%b!Z!m%b!Z#O%b!Z#k%b!Z#l%b!Z#m%b!Z#n%b!Z#o%b!Z#p%b!Z#q%b!Z#r%b!Z#s%b!Z#u%b!Z#w%b!Z#y%b!Z#z%b!Z'u%b!Z([%b!Z(m%b!Z!h%b!Z!V%b!Z's%b!Z#]%b!Zs%b!Z![%b!Z%f%b!Z!d%b!Z~P#.aOo:xO!d#vO(m'mO~OP%b!ZR%b!Z[%b!Zo%b!Z!i%b!Z!m%b!Z#O%b!Z#k%b!Z#l%b!Z#m%b!Z#n%b!Z#o%b!Z#p%b!Z#q%b!Z#r%b!Z#s%b!Z#u%b!Z#w%b!Z#y%b!Z#z%b!Z#}%b!Z([%b!Z(m%b!Z!Y%b!Z!Z%b!Z~P&NlOs(aX~P1qO}%pO~P!(oO(P!lO~P!(oO!VfX!YfX#]fX~P&+QOP]XR]X[]Xo]X}]X!P]X!Y]X!YfX!i]X!m]X#O]X#P]X#]]X#]fX#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X([]X(m]X(t]X(u]X~O!dfX!h]X!hfX(mfX~P'BxOP;POQ;POSfOd<zOe!iOmkOo;POpkOqkOwkOy;PO{;PO!PWO!TkO!UkO![XO!f;SO!iZO!l;PO!m;PO!n;PO!p;TO!r;WO!u!hO$V!kO(O)XO(QTO(TUO([VO(j[O(y<xO~O!Y;dO!Z$oa~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{;oO!P${O![$|O!f=PO!i$xO#g;uO$V%_O$r;qO$t;sO$w%`O(O(rO(QTO(TUO([$uO(t$}O(u%PO~O#t)`O~P'GnOo!bX(m!bX~P# ZO!Z]X!ZfX~P'BxO!VfX!V$xX!YfX!Y$xX#]fX~P!/gO#h;XO~O!d#vO#h;XO~O#];iO~O#s;]O~O#];xO!Y(rX!Z(rX~O#];iO!Y(pX!Z(pX~O#h;yO~Og;{O~P!0kO#h<RO~O#h<SO~O!d#vO#h<TO~O!d#vO#h;yO~O#}<UO~P#AbO#h<VO~O#h<WO~O#h<]O~O#h<^O~O#h<_O~O#h<`O~O#}<aO~P!0kO#}<bO~P!0kO#P#Q#R#T#U#X#f#g#r(y$r$t$w%Z%e%f%g%n%p%s%t%v%x~'yT#l!U'w(P#mp#k#no}'x$['x(O$^(`~",goto:"$4Q)XPPPPPP)YPP)]P)nP+O/PPPPP5xPP6`PP<V?mP@QP@QPPP@QPBRP@QP@QP@QPBVPB[PByPGrPPPGvPPPPGvJxPPPKOKzPGvPGvPPNYGvPPPGvPGvP!!aGvP!%v!&{!'UP!'x!'|!'x!+YPPPPPPP!+y!&{PP!,Z!-gP!0jGvGv!0o!3z!8b!8b!<`PPP!<hGvPPPPPPPPPPP!?vP!ATPPGv!BfPGvPGvGvGvGvGvPGv!CxP!GRP!JWP!J[!Jf!Jj!JjP!GOP!Jn!JnP!MsP!MwGvGv!M}##RBV@QP@QP@Q@QP#$_@Q@Q#&j@Q#)Z@Q#+`@Q@Q#,O#.]#.]#.b#.k#.]#.wP#.]P@Q#/a@Q#3S@Q@Q5xPPP#6{PPP#7f#7fP#7fP#7|#7fPP#8SP#7yP#7y#8g#7y#9R#9X5u)]#9[)]P#9c#9c#9cP)]P)]P)]P)]PP)]P#9i#9lP#9l)]P#9pP#9sP)]P)]P)]P)]P)]P)])]PP#9y#:P#:[#:b#:h#:n#:t#;S#;Y#;d#;j#;t#;z#<[#<b#=S#=f#=l#=r#>Q#>g#@V#@e#@l#BR#Ba#C|#D[#Db#Dh#Dn#Dx#EO#EU#E`#Er#ExPPPPPPPPPP#FOPPPPPPP#Fs#Iz#KZ#Kb#KjPPP$!sP$!|$%t$,^$,a$,d$-P$-S$-Z$-cP$-i$-lP$.Y$.^$/U$0d$0i$1PPP$1U$1[$1`P$1c$1g$1k$2a$2x$3a$3e$3h$3k$3q$3t$3x$3|R!|RoqOXst!Z#d%k&o&q&r&t,k,p1|2PY!vQ']-]1a5eQ%rvQ%zyQ&R|Q&g!VS'T!e-TQ'c!iS'i!r!yU*e$|*V*jQ+i%{Q+v&TQ,[&aQ-Z'[Q-e'dQ-m'jQ0R*lQ1k,]R;v;T%QdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)y+R+V,h,k,p-a-i-w-}.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3^5b5m5}6O6R6f8R8X8h8rS#q];Q!r)Z$Z$n'U)o,|-P.}2b3u5`6]9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{U*y%[;n;oQ+n%}Q,^&dQ,e&lQ0m+aQ0q+cQ0|+oQ1s,cQ3Q._Q5O0wQ5t1lQ6r3UQ7s5PR8x6t'OkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{t!nQ!r!v!y!z'T'[']'i'j'k-T-Z-]-m1a5e5g$|$ti#v$b$c$d$x${%O%Q%]%^%b)u){)}*P*R*U*[*b*r*s+`+c+z+}.^.w/]/e/o/p/r0V0X0d1W1Z1c3T3}4Y4b4m4u4x5l6p7_7h8U8u9T9b9l:O:c:k;g;h;j;k;l;m;p;q;r;s;t;u;|;}<O<P<R<S<V<W<X<Y<Z<[<]<^<a<b<x=Q=R=U=VQ&U|Q'R!eU'X%g*V-WQ+n%}Q,^&dQ0c*|Q0|+oQ1R+uQ1r,bQ1s,cQ5O0wQ5X1TQ5t1lQ5w1nQ5x1qQ7s5PQ7v5UQ8a5zQ9g7wR9r8^rnOXst!V!Z#d%k&f&o&q&r&t,k,p1|2PR,`&h&x^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<z<{[#]WZ#W#Z'U(P!b%hm#h#i#l$x%c%f(Y(d(e(f*U*Y*]+T+U+W,g,}-{.R.S.T.V/e/h2U2|2}4Q6[6mQ%uxQ%yyS&O|&TQ&[!TQ'`!hQ'b!iQ(m#sS+h%z%{Q+l%}Q,V&_Q,Z&aS-d'c'dQ.a(nQ0u+iQ0{+oQ0}+pQ1Q+tQ1f,WS1j,[,]Q2n-eQ4}0wQ5R0zQ5W1SQ5s1kQ7r5PQ7u5TQ9c7qR:^9d!O$zi$d%O%Q%]%^%b)}*P*[*r*s.w/o0V0X0d3}4m9T<x=Q=R!S%wy!i!u%y%z%{'S'b'c'd'h'r*d+h+i-Q-d-e-l/y0u2g2n2u4dQ+b%uQ+{&XQ,O&YQ,Y&aQ.`(mQ1e,VU1i,Z,[,]Q3V.aQ5n1fS5r1j1kQ8]5s#^<|#v$b$c$x${)u){*R*U*b+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4u4x5l6p7_7h8U8u9b9l:O:c:k;j;l;p;r;t;|<O<R<V<X<Z<]<a=U=Vo<};g;h;k;m;q;s;u;}<P<S<W<Y<[<^<bW%Ti%V*t<xS&X!Q&fQ&Y!RQ&Z!SR+y&V$}%Si#v$b$c$d$x${%O%Q%]%^%b)u){)}*P*R*U*[*b*r*s+`+c+z+}.^.w/]/e/o/p/r0V0X0d1W1Z1c3T3}4Y4b4m4u4x5l6p7_7h8U8u9T9b9l:O:c:k;g;h;j;k;l;m;p;q;r;s;t;u;|;}<O<P<R<S<V<W<X<Y<Z<[<]<^<a<b<x=Q=R=U=VT)v$u)wV*y%[;n;oW'X!e%g*V-WS(y#y#zQ+]%pQ+s&QS.Y(i(jQ1[,PQ4n0`R7{5^'OkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{$i$^c#Y#e%o%q%s(O(U(p(u(})O)P)Q)R)S)T)U)V)W)Y)[)^)c)m+^+r-R-p-u-z-|.k.n.r.t.u.v/X0e2]2`2p2w3]3b3c3d3e3f3g3h3i3j3k3l3m3n3q3r3y4r4{6_6e6j6y6z7T7U7}8l8p8z9Q9R9{:`:g;R<oT#TV#U'PkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{Q'V!eR2c-Tv!nQ!e!r!v!y!z'T'[']'i'j'k-T-Z-]-m1a5e5gU*d$|*V*jS/y*e*lQ0S*mQ1^,RQ4d0RR4g0UnqOXst!Z#d%k&o&q&r&t,k,p1|2PQ&v!^Q's!xS(o#u;XQ+f%xQ,T&[Q,U&^Q-b'aQ-o'lS.j(t;yS0f+R<TQ0s+gQ1`,SQ2T,rQ2V,sQ2_-OQ2l-cQ2o-gS4s0g<_Q4y0tS4|0v<`Q6^2aQ6b2mQ6g2tQ7p4zQ8m6`Q8n6cQ8q6hR9x8j$d$]c#Y#e%q%s(O(U(p(u(})O)P)Q)R)S)T)U)V)W)Y)[)^)c)m+^+r-R-p-u-z-|.k.n.r.u.v/X0e2]2`2p2w3]3b3c3d3e3f3g3h3i3j3k3l3m3n3q3r3y4r4{6_6e6j6y6z7T7U7}8l8p8z9Q9R9{:`:g;R<oS(k#p'fQ({#zS+[%o.tS.Z(j(lR3O.['OkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{S#q];QQ&q!XQ&r!YQ&t![Q&u!]R1{,nQ'^!hQ+_%uQ-`'`S.](m+bQ2j-_W3S.`.a0l0nQ6a2kW6n3P3R3V4wU8t6o6q6sU9}8v8w8yS:i9|:PQ:t:jR:z:uU!wQ']-]T5c1a5e!Q_OXZ`st!V!Z#d#h%c%k&f&h&o&q&r&t(f,k,p.S1|2P]!pQ!r']-]1a5eT#q];Q%[{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)y+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5b5m5}6O6R6f6t8R8X8h8rS(y#y#zS.Y(i(j!s<f$Z$n'U)o,|-P.}2b3u5`6]9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{U$fd)Z,eS(l#p'fU*q%R(s3pU0b*x.f7PQ4w0mQ6o3QQ8w6rR:P8xm!tQ!r!v!y!z']'i'j'k-]-m1a5e5gQ'q!uS(b#g1vS-k'h'tQ/k*XQ/w*dQ2v-nQ4U/lS4_/x0SQ7Z4PS7f4e4gQ9V7[Q9Z7cQ9`7iS:X9[9]S:n:Y:ZS:w:o:pR:}:xQ#wbQ'p!uS(a#g1vS(c#m+QQ+S%dQ+d%vQ+j%|U-j'h'q'tQ.O(bQ/j*XQ/v*dQ/|*gQ0r+eQ1g,XS2s-k-nQ2{.WS4T/k/lS4^/w0SQ4a/{Q4c/}Q5p1hQ6i2vQ7Y4PQ7^4US7b4_4gQ7g4fQ8Z5qS9U7Z7[Q9Y7cQ9^7fQ9a7jQ9o8[Q:V9VS:W9Z9]Q:[9`Q:e9pS:m:X:ZS:v:n:pQ:|:wQ;O:}Q<i<dQ<t<mR<u<nV!wQ']-]%[aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)y+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5b5m5}6O6R6f6t8R8X8h8rS#wz!j!r<c$Z$n'U)o,|-P.}2b3u5`6]9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{R<i<z%[bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)y+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5b5m5}6O6R6f6t8R8X8h8rQ%dj!S%vy!i!u%y%z%{'S'b'c'd'h'r*d+h+i-Q-d-e-l/y0u2g2n2u4dS%|z!jQ+e%wQ,X&aW1h,Y,Z,[,]U5q1i1j1kS8[5r5sQ9p8]!r<d$Z$n'U)o,|-P.}2b3u5`6]9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{Q<m<yR<n<z%OeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&o&q&r&t&x'Q'_'o(R(X(`(t(v(z)y+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5b5m5}6O6R6f6t8R8X8h8rY#bWZ#W#Z(P!b%hm#h#i#l$x%c%f(Y(d(e(f*U*Y*]+T+U+W,g,}-{.R.S.T.V/e/h2U2|2}4Q6[6mQ,f&l!p<e$Z$n)o,|-P.}2b3u5`6]9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{R<h'UU'Y!e%g*VR2e-W%QdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)y+R+V,h,k,p-a-i-w-}.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3^5b5m5}6O6R6f8R8X8h8r!r)Z$Z$n'U)o,|-P.}2b3u5`6]9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{Q,e&lQ0m+aQ3Q._Q6r3UR8x6t!b$Tc#Y%o(O(U(p(u)V)W)[)c+r-p-u-z-|.k.n/X0e2p2w3]3m4r4{6e6j6y8p9{;R!P;_)Y)m-R.t2]2`3b3k3l3q3y6_6z7T7U7}8l8z9Q9R:`:g<o!f$Vc#Y%o(O(U(p(u)S)T)V)W)[)c+r-p-u-z-|.k.n/X0e2p2w3]3m4r4{6e6j6y8p9{;R!T;a)Y)m-R.t2]2`3b3h3i3k3l3q3y6_6z7T7U7}8l8z9Q9R:`:g<o!^$Zc#Y%o(O(U(p(u)[)c+r-p-u-z-|.k.n/X0e2p2w3]3m4r4{6e6j6y8p9{;RQ3}/cz<{)Y)m-R.t2]2`3b3q3y6_6z7T7U7}8l8z9Q9R:`:g<oQ=Q=SR=R=T'OkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{S$oh$pR3v.|'VgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.|.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{T$kf$qQ$ifS)f$l)jR)r$qT$jf$qT)h$l)j'VhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.|.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{T$oh$pQ$rhR)q$p%[jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)y+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5b5m5}6O6R6f6t8R8X8h8r!s<y$Z$n'U)o,|-P.}2b3u5`6]9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{#elOPXZst!Z!`!o#S#d#o#{$n%k&h&k&l&o&q&r&t&x'Q'_(z)o+V+a,h,k,p-a._.}/f0a1d1t1u1w1y1|2P2R3U3u5b5m5}6O6R6t8R8X8h!O%Ri$d%O%Q%]%^%b)}*P*[*r*s.w/o0V0X0d3}4m9T<x=Q=R#^(s#v$b$c$x${)u){*R*U*b+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4u4x5l6p7_7h8U8u9b9l:O:c:k;j;l;p;r;t;|<O<R<V<X<Z<]<a=U=VQ*}%`Q/Y)zo3p;g;h;k;m;q;s;u;}<P<S<W<Y<[<^<b!O$yi$d%O%Q%]%^%b)}*P*[*r*s.w/o0V0X0d3}4m9T<x=Q=RQ*^$zU*g$|*V*jQ+O%aQ/}*h#^<k#v$b$c$x${)u){*R*U*b+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4u4x5l6p7_7h8U8u9b9l:O:c:k;j;l;p;r;t;|<O<R<V<X<Z<]<a=U=Vn<l;g;h;k;m;q;s;u;}<P<S<W<Y<[<^<bQ<p<|Q<q<}Q<r=OR<s=P!O%Ri$d%O%Q%]%^%b)}*P*[*r*s.w/o0V0X0d3}4m9T<x=Q=R#^(s#v$b$c$x${)u){*R*U*b+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4u4x5l6p7_7h8U8u9b9l:O:c:k;j;l;p;r;t;|<O<R<V<X<Z<]<a=U=Vo3p;g;h;k;m;q;s;u;}<P<S<W<Y<[<^<bnoOXst!Z#d%k&o&q&r&t,k,p1|2PS*a${*UQ,y&{Q,z&}R4X/p$|%Si#v$b$c$d$x${%O%Q%]%^%b)u){)}*P*R*U*[*b*r*s+`+c+z+}.^.w/]/e/o/p/r0V0X0d1W1Z1c3T3}4Y4b4m4u4x5l6p7_7h8U8u9T9b9l:O:c:k;g;h;j;k;l;m;p;q;r;s;t;u;|;}<O<P<R<S<V<W<X<Y<Z<[<]<^<a<b<x=Q=R=U=VQ+|&YQ1Y,OQ5[1XR7z5]V*i$|*V*jU*i$|*V*jT5d1a5eU/{*f/f5bS4f0T8RR7j4hQ+d%vQ/|*gQ0r+eQ1g,XQ5p1hQ8Z5qQ9o8[R:e9p!O%Oi$d%O%Q%]%^%b)}*P*[*r*s.w/o0V0X0d3}4m9T<x=Q=Rr)}$v)a*O*p+P/n0Z0[3s4V4q7X7k:U<j<v<wS0V*o0W#^;j#v$b$c$x${)u){*R*U*b+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4u4x5l6p7_7h8U8u9b9l:O:c:k;j;l;p;r;t;|<O<R<V<X<Z<]<a=U=Vn;k;g;h;k;m;q;s;u;}<P<S<W<Y<[<^<b!`;|(q)_*W*`.b.e.i/U/Z/c/s0k1V1X3Y4W4[5Z5]6u6x7`7d7m7o9X9_:]:l=S=T`;}3o6{7O7S8{:Q:T:{S<X.d3ZT<Y6}9O!O%Qi$d%O%Q%]%^%b)}*P*[*r*s.w/o0V0X0d3}4m9T<x=Q=Rv*P$v)a*Q*o+P/_/n0Z0[3s4V4i4q7X7k:U<j<v<wS0X*p0Y#^;l#v$b$c$x${)u){*R*U*b+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4u4x5l6p7_7h8U8u9b9l:O:c:k;j;l;p;r;t;|<O<R<V<X<Z<]<a=U=Vn;m;g;h;k;m;q;s;u;}<P<S<W<Y<[<^<b!d<O(q)_*W*`.c.d.i/U/Z/c/s0k1V1X3W3Y4W4[5Z5]6u6v6x7`7d7m7o9X9_:]:l=S=Td<P3o6|6}7S8{8|:Q:R:T:{S<Z.e3[T<[7O9PrnOXst!V!Z#d%k&f&o&q&r&t,k,p1|2PQ&c!UR,h&lrnOXst!V!Z#d%k&f&o&q&r&t,k,p1|2PR&c!UQ,Q&ZR1U+ysnOXst!V!Z#d%k&f&o&q&r&t,k,p1|2PQ1b,VS5k1e1fU8T5i5j5nS9k8V8WS:a9j9mQ:q:bR:y:rQ&j!VR,a&fR5w1nS&O|&TR0}+pQ&o!WR,k&pR,q&uT1},p2PR,u&vQ,t&vR2W,uQ'v!{R-q'vSsOtQ#dXT%ns#dQ#OTR'x#OQ#RUR'z#RQ)w$uR/V)wQ#UVR'|#UQ#XWU(S#X(T-xQ(T#YR-x(UQ-U'VR2d-UQ.m(uS3_.m3`R3`.nQ-]']R2h-]Y!rQ']-]1a5eR'g!rQ.x)aR3t.xU#_W%f*UU(Z#_([-yQ([#`R-y(VQ-X'YR2f-Xt`OXst!V!Z#d%k&f&h&o&q&r&t,k,p1|2PS#hZ%cU#r`#h.SR.S(fQ(g#jQ.P(cW.X(g.P2y6kQ2y.QR6k2zQ)j$lR/O)jQ$phR)p$pQ$`cU)]$`-t;eQ-t;RR;e)mQ/i*XW4R/i4S7]9WU4S/j/k/lS7]4T4UR9W7^$Z)|$v(q)_)a*W*`*o*p*z*{+P.d.e.g.h.i/U/Z/_/a/c/n/s0Z0[0k1V1X3W3X3Y3o3s4V4W4[4i4k4q5Z5]6u6v6w6x6}7O7Q7R7S7X7`7d7k7m7o8{8|8}9X9_:Q:R:S:T:U:]:l:{<j<v<w=S=TQ/q*`U4Z/q4]7aQ4]/sR7a4[S*j$|*VR0P*jr*O$v)a*o*p+P/n0Z0[3s4V4q7X7k:U<j<v<w!`.b(q)_*W*`.d.e.i/U/Z/c/s0k1V1X3Y4W4[5Z5]6u6x7`7d7m7o9X9_:]:l=S=TU/`*O.b6{a6{3o6}7O7S8{:Q:T:{Q0W*oQ3Z.dU4j0W3Z9OR9O6}v*Q$v)a*o*p+P/_/n0Z0[3s4V4i4q7X7k:U<j<v<w!d.c(q)_*W*`.d.e.i/U/Z/c/s0k1V1X3W3Y4W4[5Z5]6u6v6x7`7d7m7o9X9_:]:l=S=TU/b*Q.c6|e6|3o6}7O7S8{8|:Q:R:T:{Q0Y*pQ3[.eU4l0Y3[9PR9P7OQ*u%UR0^*uQ4v0kR7n4vQ+X%iR0j+XQ5_1[S7|5_9iR9i7}Q,S&[R1_,SQ5e1aR8P5eQ1m,^S5u1m8_R8_5wQ0x+lW5Q0x5S7t9eQ5S0{Q7t5RR9e7uQ+q&OR1O+qQ2P,pR6V2PYrOXst#dQ&s!ZQ+Z%kQ,j&oQ,l&qQ,m&rQ,o&tQ1z,kS1},p2PR6U1|Q%mpQ&w!_Q&z!aQ&|!bQ'O!cQ'n!uQ+Y%jQ+f%xQ+x&UQ,`&jQ,w&yW-h'h'p'q'tQ-o'lQ0O*iQ0s+gS1p,a,dQ2X,vQ2Y,yQ2Z,zQ2o-gW2q-j-k-n-pQ4y0tQ5V1RQ5Y1VQ5o1gQ5y1rQ6T1{U6d2p2s2vQ6g2tQ7p4zQ7x5XQ7y5ZQ8O5dQ8Y5pQ8`5xS8o6e6iQ8q6hQ9f7vQ9n8ZQ9s8aQ9z8pQ:_9gQ:d9oQ:h9{R:s:eQ%xyQ'a!iQ'l!uU+g%y%z%{Q-O'SU-c'b'c'dS-g'h'rQ/u*dS0t+h+iQ2a-QS2m-d-eQ2t-lQ4`/yQ4z0uQ6`2gQ6c2nQ6h2uR7e4dS$wi<xR*v%VU%Ui%V<xR0]*tQ$viS(q#v+cS)_$b$cQ)a$dQ*W$xS*`${*UQ*o%OQ*p%QQ*z%]Q*{%^Q+P%bQ.d;jQ.e;lQ.g;pQ.h;rQ.i;tQ/U)uS/Z){/]Q/_)}Q/a*PQ/c*RQ/n*[S/s*b/eQ0Z*rQ0[*sh0k+`.^1c3T5l6p8U8u9l:O:c:kQ1V+zQ1X+}Q3W;|Q3X<OQ3Y<RS3o;g;hQ3s.wQ4V/oQ4W/pQ4[/rQ4i0VQ4k0XQ4q0dQ5Z1WQ5]1ZQ6u<VQ6v<XQ6w<ZQ6x<]Q6};kQ7O;mQ7Q;qQ7R;sQ7S;uQ7X3}Q7`4YQ7d4bQ7k4mQ7m4uQ7o4xQ8{<SQ8|;}Q8}<PQ9X7_Q9_7hQ:Q<WQ:R<YQ:S<[Q:T<^Q:U9TQ:]9bQ:l<aQ:{<bQ<j<xQ<v=QQ<w=RQ=S=UR=T=VQ*x%[Q.f;nR7P;onpOXst!Z#d%k&o&q&r&t,k,p1|2PQ!fPS#fZ#oQ&y!`U'e!o5b8RQ'{#SQ(|#{Q)n$nS,d&h&kQ,i&lQ,v&xQ,{'QQ-_'_Q.p(zQ/S)oS0h+V/fQ0n+aQ1x,hQ2k-aQ3R._Q3x.}Q4o0aQ5j1dQ5{1tQ5|1uQ6Q1wQ6S1yQ6X2RQ6s3UQ7V3uQ8W5mQ8d5}Q8e6OQ8g6RQ8y6tQ9m8XR9w8h#YcOPXZst!Z!`!o#d#o#{%k&h&k&l&o&q&r&t&x'Q'_(z+V+a,h,k,p-a._/f0a1d1t1u1w1y1|2P2R3U5b5m5}6O6R6t8R8X8hQ#YWQ#eYQ%ouQ%qvS%sw!gS(O#W(RQ(U#ZQ(p#uQ(u#xQ(}$OQ)O$PQ)P$QQ)Q$RQ)R$SQ)S$TQ)T$UQ)U$VQ)V$WQ)W$XQ)Y$ZQ)[$_Q)^$aQ)c$eW)m$n)o.}3uQ+^%rQ+r&PS-R'U2bQ-p'oS-u(P-wQ-z(XQ-|(`Q.k(tQ.n(vQ.r;PQ.t;SQ.u;TQ.v;WQ/X)yQ0e+RQ2],|Q2`-PQ2p-iQ2w-}Q3].lQ3b;XQ3c;YQ3d;ZQ3e;[Q3f;]Q3g;^Q3h;_Q3i;`Q3j;aQ3k;bQ3l;cQ3m.sQ3n;fQ3q;iQ3r;vQ3y;dQ4r0gQ4{0vQ6_;xQ6e2rQ6j2xQ6y3^Q6z;yQ7T;{Q7U<TQ7}5`Q8l6]Q8p6fQ8z<UQ9Q<_Q9R<`Q9{8rQ:`9hQ:g9yQ;R#SR<o<{R#[WR'W!el!tQ!r!v!y!z']'i'j'k-]-m1a5e5gS'S!e-TS-Q'T'[R2g-ZR(w#xQ!fQT-[']-]]!qQ!r']-]1a5eQ#p]R'f;QR)b$dY!uQ']-]1a5eQ'h!rS'r!v!yS't!z5gS-l'i'jQ-n'kR2u-mT#kZ%cS#jZ%cS%im,gU(c#h#i#lS.Q(d(eQ.U(fQ0i+WQ2z.RU2{.S.T.VS6l2|2}R8s6md#^W#W#Z%f(P(Y*U+T-{/er#gZm#h#i#l%c(d(e(f+W.R.S.T.V2|2}6mS*X$x*]Q/l*YQ1v,gQ2^,}Q4P/hQ6Z2UQ7[4QQ8k6[T<g'U+UV#aW%f*UU#`W%f*US(Q#W(YU(V#Z+T/eS-S'U+UT-v(P-{V'Z!e%g*VQ$lfR)t$qT)i$l)jR3w.|T*Z$x*]T*c${*UQ0l+`Q3P.^Q5i1cQ6q3TQ8V5lQ8v6pQ9j8UQ9|8uQ:b9lQ:j:OQ:r:cR:u:knqOXst!Z#d%k&o&q&r&t,k,p1|2PQ&i!VR,`&ftmOXst!U!V!Z#d%k&f&o&q&r&t,k,p1|2PR,g&lT%jm,gR1],PR,_&dQ&S|R+w&TR+m%}T&m!W&pT&n!W&pT2O,p2P",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:376,context:trackNewline,nodeProps:[["isolate",-8,5,6,14,34,36,48,50,52,""],["group",-26,9,17,19,65,204,208,212,213,215,218,221,231,233,239,241,243,245,248,254,260,262,264,266,268,270,271,"Statement",-34,13,14,29,32,33,39,48,51,52,54,59,67,69,73,77,79,81,82,107,108,117,118,135,138,140,141,142,143,144,146,147,166,167,169,"Expression",-23,28,30,34,38,40,42,171,173,175,176,178,179,180,182,183,184,186,187,188,198,200,202,203,"Type",-3,85,100,106,"ClassItem"],["openedBy",23,"<",35,"InterpolationStart",53,"[",57,"{",70,"(",159,"JSXStartCloseTag"],["closedBy",24,">",37,"InterpolationEnd",47,"]",58,"}",71,")",164,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,5,6,274],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$h&j(U!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(U!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$h&j(RpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(RpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$h&j(Rp(U!b'w0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(S#S$h&j'x0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$h&j(Rp(U!b'x0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$h&j!m),Q(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#u(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#u(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(Q':f$h&j(U!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$h&j(U!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$h&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$c`$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$c``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$c`$h&j(U!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(U!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$c`(U!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$h&j(Rp(U!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$h&j(Rp(U!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$h&j(U!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$h&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(U!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$h&j(RpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(RpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Rp(U!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$h&j(j%1l(Rp(U!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$h&j(Rp(U!b$[#t(O,2j(`$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$h&j(Rp(U!b$[#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$h&j(Rp(U!b#m(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$h&j$P(Ch(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(u+JY$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$h&j#y(Ch(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(T';W$h&j(RpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$h&j(RpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$h&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$c`$h&j(RpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(RpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$c`(RpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!i/.^$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!h!Lf$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$h&j(Rp(U!b(P%&f#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$h&j(Rp(U!b#k(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$h&j(Rp(U!bo+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!Y+Jf$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$h&j(Rp(U!b}.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_!X!L^$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$h&j(Rp(U!b#l(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$h&j(Rp(U!b!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$h&j(U!b!U7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$h&j!U7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$h&j!U7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!U7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!U7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$h&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$h&j(U!b!U7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(U!b!U7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(U!b!U7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(U!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$h&j(U!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$h&j(Rp!U7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$h&j(Rp!U7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Rp!U7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Rp!U7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(RpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$h&j(RpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$h&j(Rp(U!b!U7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Rp(U!b!U7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Rp(U!b!U7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Rp(U!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$h&j(Rp(U!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$h&j(Rp(U!b'y0/l!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$h&j(Rp(U!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$h&j(U!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$h&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(U!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$h&j(RpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(RpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Rp(U!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$h&j$P(Ch(Rp(U!b!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Y#t$h&j(Rp(U!b!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!d$b$h&j#})Lv(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#O-<U(Rp(U!b(y7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$j&j(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#o(Ch(Rp(U!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$P(Ch(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#p(Ch(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#]*!Y$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#h(Cl$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#p(Ch$e#|$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#p(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#o(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#o(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(m(Ct$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$h&j#z(Ch(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!y$Ip$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!P0,v$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$h&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$h&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$h&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$h&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$h&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!V#)l$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#w(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$h&j(Rp(U!b([+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$h&j(Rp(U!b(O,2j$^#t(`$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$h&j(Rp(U!b$^#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X![#Hb(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(t+JY$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z(Kd$?V_!Z(Cds`$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!n7`$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$h&j(Rp(U!b'w0/l$[#t(O,2j(`$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$h&j(Rp(U!b'x0/l$[#t(O,2j(`$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[noSemicolon,operatorToken,jsx,2,3,4,5,6,7,8,9,10,11,12,13,14,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOu~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!R~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(^~~",141,335),new LocalTokenGroup("j~RQYZXz{^~^O'{~~aP!P!Qd~iO'|~~",25,318)],topRules:{Script:[0,7],SingleExpression:[1,272],SingleClassItem:[2,273]},dialects:{jsx:0,ts:14725},dynamicPrecedences:{77:1,79:1,91:1,167:1,196:1},specialized:[{term:322,get:_=>spec_identifier[_]||-1},{term:338,get:_=>spec_word[_]||-1},{term:92,get:_=>spec_LessThan[_]||-1}],tokenPrec:14749});class Text{lineAt(d){if(d<0||d>this.length)throw new RangeError(`Invalid position ${d} in document of length ${this.length}`);return this.lineInner(d,!1,1,0)}line(d){if(d<1||d>this.lines)throw new RangeError(`Invalid line number ${d} in ${this.lines}-line document`);return this.lineInner(d,!0,1,0)}replace(d,g,b){[d,g]=clip(this,d,g);let $=[];return this.decompose(0,d,$,2),b.length&&b.decompose(0,b.length,$,3),this.decompose(g,this.length,$,1),TextNode.from($,this.length-(g-d)+b.length)}append(d){return this.replace(this.length,this.length,d)}slice(d,g=this.length){[d,g]=clip(this,d,g);let b=[];return this.decompose(d,g,b,0),TextNode.from(b,g-d)}eq(d){if(d==this)return!0;if(d.length!=this.length||d.lines!=this.lines)return!1;let g=this.scanIdentical(d,1),b=this.length-this.scanIdentical(d,-1),$=new RawTextCursor(this),j=new RawTextCursor(d);for(let _e=g,et=g;;){if($.next(_e),j.next(_e),_e=0,$.lineBreak!=j.lineBreak||$.done!=j.done||$.value!=j.value)return!1;if(et+=$.value.length,$.done||et>=b)return!0}}iter(d=1){return new RawTextCursor(this,d)}iterRange(d,g=this.length){return new PartialTextCursor(this,d,g)}iterLines(d,g){let b;if(d==null)b=this.iter();else{g==null&&(g=this.lines+1);let $=this.line(d).from;b=this.iterRange($,Math.max($,g==this.lines+1?this.length:g<=1?0:this.line(g-1).to))}return new LineCursor(b)}toString(){return this.sliceString(0)}toJSON(){let d=[];return this.flatten(d),d}constructor(){}static of(d){if(d.length==0)throw new RangeError("A document must have at least one line");return d.length==1&&!d[0]?Text.empty:d.length<=32?new TextLeaf(d):TextNode.from(TextLeaf.split(d,[]))}}class TextLeaf extends Text{constructor(d,g=textLength(d)){super(),this.text=d,this.length=g}get lines(){return this.text.length}get children(){return null}lineInner(d,g,b,$){for(let j=0;;j++){let _e=this.text[j],et=$+_e.length;if((g?b:et)>=d)return new Line($,et,b,_e);$=et+1,b++}}decompose(d,g,b,$){let j=d<=0&&g>=this.length?this:new TextLeaf(sliceText(this.text,d,g),Math.min(g,this.length)-Math.max(0,d));if($&1){let _e=b.pop(),et=appendText(j.text,_e.text.slice(),0,j.length);if(et.length<=32)b.push(new TextLeaf(et,_e.length+j.length));else{let tt=et.length>>1;b.push(new TextLeaf(et.slice(0,tt)),new TextLeaf(et.slice(tt)))}}else b.push(j)}replace(d,g,b){if(!(b instanceof TextLeaf))return super.replace(d,g,b);[d,g]=clip(this,d,g);let $=appendText(this.text,appendText(b.text,sliceText(this.text,0,d)),g),j=this.length+b.length-(g-d);return $.length<=32?new TextLeaf($,j):TextNode.from(TextLeaf.split($,[]),j)}sliceString(d,g=this.length,b=`
`){[d,g]=clip(this,d,g);let $="";for(let j=0,_e=0;j<=g&&_e<this.text.length;_e++){let et=this.text[_e],tt=j+et.length;j>d&&_e&&($+=b),d<tt&&g>j&&($+=et.slice(Math.max(0,d-j),g-j)),j=tt+1}return $}flatten(d){for(let g of this.text)d.push(g)}scanIdentical(){return 0}static split(d,g){let b=[],$=-1;for(let j of d)b.push(j),$+=j.length+1,b.length==32&&(g.push(new TextLeaf(b,$)),b=[],$=-1);return $>-1&&g.push(new TextLeaf(b,$)),g}}class TextNode extends Text{constructor(d,g){super(),this.children=d,this.length=g,this.lines=0;for(let b of d)this.lines+=b.lines}lineInner(d,g,b,$){for(let j=0;;j++){let _e=this.children[j],et=$+_e.length,tt=b+_e.lines-1;if((g?tt:et)>=d)return _e.lineInner(d,g,b,$);$=et+1,b=tt+1}}decompose(d,g,b,$){for(let j=0,_e=0;_e<=g&&j<this.children.length;j++){let et=this.children[j],tt=_e+et.length;if(d<=tt&&g>=_e){let nt=$&((_e<=d?1:0)|(tt>=g?2:0));_e>=d&&tt<=g&&!nt?b.push(et):et.decompose(d-_e,g-_e,b,nt)}_e=tt+1}}replace(d,g,b){if([d,g]=clip(this,d,g),b.lines<this.lines)for(let $=0,j=0;$<this.children.length;$++){let _e=this.children[$],et=j+_e.length;if(d>=j&&g<=et){let tt=_e.replace(d-j,g-j,b),nt=this.lines-_e.lines+tt.lines;if(tt.lines<nt>>5-1&&tt.lines>nt>>5+1){let it=this.children.slice();return it[$]=tt,new TextNode(it,this.length-(g-d)+b.length)}return super.replace(j,et,tt)}j=et+1}return super.replace(d,g,b)}sliceString(d,g=this.length,b=`
`){[d,g]=clip(this,d,g);let $="";for(let j=0,_e=0;j<this.children.length&&_e<=g;j++){let et=this.children[j],tt=_e+et.length;_e>d&&j&&($+=b),d<tt&&g>_e&&($+=et.sliceString(d-_e,g-_e,b)),_e=tt+1}return $}flatten(d){for(let g of this.children)g.flatten(d)}scanIdentical(d,g){if(!(d instanceof TextNode))return 0;let b=0,[$,j,_e,et]=g>0?[0,0,this.children.length,d.children.length]:[this.children.length-1,d.children.length-1,-1,-1];for(;;$+=g,j+=g){if($==_e||j==et)return b;let tt=this.children[$],nt=d.children[j];if(tt!=nt)return b+tt.scanIdentical(nt,g);b+=tt.length+1}}static from(d,g=d.reduce((b,$)=>b+$.length+1,-1)){let b=0;for(let ot of d)b+=ot.lines;if(b<32){let ot=[];for(let at of d)at.flatten(ot);return new TextLeaf(ot,g)}let $=Math.max(32,b>>5),j=$<<1,_e=$>>1,et=[],tt=0,nt=-1,it=[];function rt(ot){let at;if(ot.lines>j&&ot instanceof TextNode)for(let ct of ot.children)rt(ct);else ot.lines>_e&&(tt>_e||!tt)?(st(),et.push(ot)):ot instanceof TextLeaf&&tt&&(at=it[it.length-1])instanceof TextLeaf&&ot.lines+at.lines<=32?(tt+=ot.lines,nt+=ot.length+1,it[it.length-1]=new TextLeaf(at.text.concat(ot.text),at.length+1+ot.length)):(tt+ot.lines>$&&st(),tt+=ot.lines,nt+=ot.length+1,it.push(ot))}function st(){tt!=0&&(et.push(it.length==1?it[0]:TextNode.from(it,nt)),nt=-1,tt=it.length=0)}for(let ot of d)rt(ot);return st(),et.length==1?et[0]:new TextNode(et,g)}}Text.empty=new TextLeaf([""],0);function textLength(_){let d=-1;for(let g of _)d+=g.length+1;return d}function appendText(_,d,g=0,b=1e9){for(let $=0,j=0,_e=!0;j<_.length&&$<=b;j++){let et=_[j],tt=$+et.length;tt>=g&&(tt>b&&(et=et.slice(0,b-$)),$<g&&(et=et.slice(g-$)),_e?(d[d.length-1]+=et,_e=!1):d.push(et)),$=tt+1}return d}function sliceText(_,d,g){return appendText(_,[""],d,g)}class RawTextCursor{constructor(d,g=1){this.dir=g,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[d],this.offsets=[g>0?1:(d instanceof TextLeaf?d.text.length:d.children.length)<<1]}nextInner(d,g){for(this.done=this.lineBreak=!1;;){let b=this.nodes.length-1,$=this.nodes[b],j=this.offsets[b],_e=j>>1,et=$ instanceof TextLeaf?$.text.length:$.children.length;if(_e==(g>0?et:0)){if(b==0)return this.done=!0,this.value="",this;g>0&&this.offsets[b-1]++,this.nodes.pop(),this.offsets.pop()}else if((j&1)==(g>0?0:1)){if(this.offsets[b]+=g,d==0)return this.lineBreak=!0,this.value=`
`,this;d--}else if($ instanceof TextLeaf){let tt=$.text[_e+(g<0?-1:0)];if(this.offsets[b]+=g,tt.length>Math.max(0,d))return this.value=d==0?tt:g>0?tt.slice(d):tt.slice(0,tt.length-d),this;d-=tt.length}else{let tt=$.children[_e+(g<0?-1:0)];d>tt.length?(d-=tt.length,this.offsets[b]+=g):(g<0&&this.offsets[b]--,this.nodes.push(tt),this.offsets.push(g>0?1:(tt instanceof TextLeaf?tt.text.length:tt.children.length)<<1))}}}next(d=0){return d<0&&(this.nextInner(-d,-this.dir),d=this.value.length),this.nextInner(d,this.dir)}}class PartialTextCursor{constructor(d,g,b){this.value="",this.done=!1,this.cursor=new RawTextCursor(d,g>b?-1:1),this.pos=g>b?d.length:0,this.from=Math.min(g,b),this.to=Math.max(g,b)}nextInner(d,g){if(g<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;d+=Math.max(0,g<0?this.pos-this.to:this.from-this.pos);let b=g<0?this.pos-this.from:this.to-this.pos;d>b&&(d=b),b-=d;let{value:$}=this.cursor.next(d);return this.pos+=($.length+d)*g,this.value=$.length<=b?$:g<0?$.slice($.length-b):$.slice(0,b),this.done=!this.value,this}next(d=0){return d<0?d=Math.max(d,this.from-this.pos):d>0&&(d=Math.min(d,this.to-this.pos)),this.nextInner(d,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(d){this.inner=d,this.afterBreak=!0,this.value="",this.done=!1}next(d=0){let{done:g,lineBreak:b,value:$}=this.inner.next(d);return g&&this.afterBreak?(this.value="",this.afterBreak=!1):g?(this.done=!0,this.value=""):b?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=$,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(d,g,b,$){this.from=d,this.to=g,this.number=b,this.text=$}get length(){return this.to-this.from}}function clip(_,d,g){return d=Math.max(0,Math.min(_.length,d)),[d,Math.max(d,Math.min(_.length,g))]}let extend="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(_=>_?parseInt(_,36):1);for(let _=1;_<extend.length;_++)extend[_]+=extend[_-1];function isExtendingChar(_){for(let d=1;d<extend.length;d+=2)if(extend[d]>_)return extend[d-1]<=_;return!1}function isRegionalIndicator(_){return _>=127462&&_<=127487}const ZWJ=8205;function findClusterBreak(_,d,g=!0,b=!0){return(g?nextClusterBreak:prevClusterBreak)(_,d,b)}function nextClusterBreak(_,d,g){if(d==_.length)return d;d&&surrogateLow(_.charCodeAt(d))&&surrogateHigh(_.charCodeAt(d-1))&&d--;let b=codePointAt(_,d);for(d+=codePointSize(b);d<_.length;){let $=codePointAt(_,d);if(b==ZWJ||$==ZWJ||g&&isExtendingChar($))d+=codePointSize($),b=$;else if(isRegionalIndicator($)){let j=0,_e=d-2;for(;_e>=0&&isRegionalIndicator(codePointAt(_,_e));)j++,_e-=2;if(j%2==0)break;d+=2}else break}return d}function prevClusterBreak(_,d,g){for(;d>0;){let b=nextClusterBreak(_,d-2,g);if(b<d)return b;d--}return 0}function surrogateLow(_){return _>=56320&&_<57344}function surrogateHigh(_){return _>=55296&&_<56320}function codePointAt(_,d){let g=_.charCodeAt(d);if(!surrogateHigh(g)||d+1==_.length)return g;let b=_.charCodeAt(d+1);return surrogateLow(b)?(g-55296<<10)+(b-56320)+65536:g}function fromCodePoint(_){return _<=65535?String.fromCharCode(_):(_-=65536,String.fromCharCode((_>>10)+55296,(_&1023)+56320))}function codePointSize(_){return _<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(_){return _[_.Simple=0]="Simple",_[_.TrackDel=1]="TrackDel",_[_.TrackBefore=2]="TrackBefore",_[_.TrackAfter=3]="TrackAfter",_}(MapMode||(MapMode={}));class ChangeDesc{constructor(d){this.sections=d}get length(){let d=0;for(let g=0;g<this.sections.length;g+=2)d+=this.sections[g];return d}get newLength(){let d=0;for(let g=0;g<this.sections.length;g+=2){let b=this.sections[g+1];d+=b<0?this.sections[g]:b}return d}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(d){for(let g=0,b=0,$=0;g<this.sections.length;){let j=this.sections[g++],_e=this.sections[g++];_e<0?(d(b,$,j),$+=j):$+=_e,b+=j}}iterChangedRanges(d,g=!1){iterChanges(this,d,g)}get invertedDesc(){let d=[];for(let g=0;g<this.sections.length;){let b=this.sections[g++],$=this.sections[g++];$<0?d.push(b,$):d.push($,b)}return new ChangeDesc(d)}composeDesc(d){return this.empty?d:d.empty?this:composeSets(this,d)}mapDesc(d,g=!1){return d.empty?this:mapSet(this,d,g)}mapPos(d,g=-1,b=MapMode.Simple){let $=0,j=0;for(let _e=0;_e<this.sections.length;){let et=this.sections[_e++],tt=this.sections[_e++],nt=$+et;if(tt<0){if(nt>d)return j+(d-$);j+=et}else{if(b!=MapMode.Simple&&nt>=d&&(b==MapMode.TrackDel&&$<d&&nt>d||b==MapMode.TrackBefore&&$<d||b==MapMode.TrackAfter&&nt>d))return null;if(nt>d||nt==d&&g<0&&!et)return d==$||g<0?j:j+tt;j+=tt}$=nt}if(d>$)throw new RangeError(`Position ${d} is out of range for changeset of length ${$}`);return j}touchesRange(d,g=d){for(let b=0,$=0;b<this.sections.length&&$<=g;){let j=this.sections[b++],_e=this.sections[b++],et=$+j;if(_e>=0&&$<=g&&et>=d)return $<d&&et>g?"cover":!0;$=et}return!1}toString(){let d="";for(let g=0;g<this.sections.length;){let b=this.sections[g++],$=this.sections[g++];d+=(d?" ":"")+b+($>=0?":"+$:"")}return d}toJSON(){return this.sections}static fromJSON(d){if(!Array.isArray(d)||d.length%2||d.some(g=>typeof g!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(d)}static create(d){return new ChangeDesc(d)}}class ChangeSet extends ChangeDesc{constructor(d,g){super(d),this.inserted=g}apply(d){if(this.length!=d.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(g,b,$,j,_e)=>d=d.replace($,$+(b-g),_e),!1),d}mapDesc(d,g=!1){return mapSet(this,d,g,!0)}invert(d){let g=this.sections.slice(),b=[];for(let $=0,j=0;$<g.length;$+=2){let _e=g[$],et=g[$+1];if(et>=0){g[$]=et,g[$+1]=_e;let tt=$>>1;for(;b.length<tt;)b.push(Text.empty);b.push(_e?d.slice(j,j+_e):Text.empty)}j+=_e}return new ChangeSet(g,b)}compose(d){return this.empty?d:d.empty?this:composeSets(this,d,!0)}map(d,g=!1){return d.empty?this:mapSet(this,d,g,!0)}iterChanges(d,g=!1){iterChanges(this,d,g)}get desc(){return ChangeDesc.create(this.sections)}filter(d){let g=[],b=[],$=[],j=new SectionIter(this);e:for(let _e=0,et=0;;){let tt=_e==d.length?1e9:d[_e++];for(;et<tt||et==tt&&j.len==0;){if(j.done)break e;let it=Math.min(j.len,tt-et);addSection($,it,-1);let rt=j.ins==-1?-1:j.off==0?j.ins:0;addSection(g,it,rt),rt>0&&addInsert(b,g,j.text),j.forward(it),et+=it}let nt=d[_e++];for(;et<nt;){if(j.done)break e;let it=Math.min(j.len,nt-et);addSection(g,it,-1),addSection($,it,j.ins==-1?-1:j.off==0?j.ins:0),j.forward(it),et+=it}}return{changes:new ChangeSet(g,b),filtered:ChangeDesc.create($)}}toJSON(){let d=[];for(let g=0;g<this.sections.length;g+=2){let b=this.sections[g],$=this.sections[g+1];$<0?d.push(b):$==0?d.push([b]):d.push([b].concat(this.inserted[g>>1].toJSON()))}return d}static of(d,g,b){let $=[],j=[],_e=0,et=null;function tt(it=!1){if(!it&&!$.length)return;_e<g&&addSection($,g-_e,-1);let rt=new ChangeSet($,j);et=et?et.compose(rt.map(et)):rt,$=[],j=[],_e=0}function nt(it){if(Array.isArray(it))for(let rt of it)nt(rt);else if(it instanceof ChangeSet){if(it.length!=g)throw new RangeError(`Mismatched change set length (got ${it.length}, expected ${g})`);tt(),et=et?et.compose(it.map(et)):it}else{let{from:rt,to:st=rt,insert:ot}=it;if(rt>st||rt<0||st>g)throw new RangeError(`Invalid change range ${rt} to ${st} (in doc of length ${g})`);let at=ot?typeof ot=="string"?Text.of(ot.split(b||DefaultSplit)):ot:Text.empty,ct=at.length;if(rt==st&&ct==0)return;rt<_e&&tt(),rt>_e&&addSection($,rt-_e,-1),addSection($,st-rt,ct),addInsert(j,$,at),_e=st}}return nt(d),tt(!et),et}static empty(d){return new ChangeSet(d?[d,-1]:[],[])}static fromJSON(d){if(!Array.isArray(d))throw new RangeError("Invalid JSON representation of ChangeSet");let g=[],b=[];for(let $=0;$<d.length;$++){let j=d[$];if(typeof j=="number")g.push(j,-1);else{if(!Array.isArray(j)||typeof j[0]!="number"||j.some((_e,et)=>et&&typeof _e!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(j.length==1)g.push(j[0],0);else{for(;b.length<$;)b.push(Text.empty);b[$]=Text.of(j.slice(1)),g.push(j[0],b[$].length)}}}return new ChangeSet(g,b)}static createSet(d,g){return new ChangeSet(d,g)}}function addSection(_,d,g,b=!1){if(d==0&&g<=0)return;let $=_.length-2;$>=0&&g<=0&&g==_[$+1]?_[$]+=d:d==0&&_[$]==0?_[$+1]+=g:b?(_[$]+=d,_[$+1]+=g):_.push(d,g)}function addInsert(_,d,g){if(g.length==0)return;let b=d.length-2>>1;if(b<_.length)_[_.length-1]=_[_.length-1].append(g);else{for(;_.length<b;)_.push(Text.empty);_.push(g)}}function iterChanges(_,d,g){let b=_.inserted;for(let $=0,j=0,_e=0;_e<_.sections.length;){let et=_.sections[_e++],tt=_.sections[_e++];if(tt<0)$+=et,j+=et;else{let nt=$,it=j,rt=Text.empty;for(;nt+=et,it+=tt,tt&&b&&(rt=rt.append(b[_e-2>>1])),!(g||_e==_.sections.length||_.sections[_e+1]<0);)et=_.sections[_e++],tt=_.sections[_e++];d($,nt,j,it,rt),$=nt,j=it}}}function mapSet(_,d,g,b=!1){let $=[],j=b?[]:null,_e=new SectionIter(_),et=new SectionIter(d);for(let tt=-1;;)if(_e.ins==-1&&et.ins==-1){let nt=Math.min(_e.len,et.len);addSection($,nt,-1),_e.forward(nt),et.forward(nt)}else if(et.ins>=0&&(_e.ins<0||tt==_e.i||_e.off==0&&(et.len<_e.len||et.len==_e.len&&!g))){let nt=et.len;for(addSection($,et.ins,-1);nt;){let it=Math.min(_e.len,nt);_e.ins>=0&&tt<_e.i&&_e.len<=it&&(addSection($,0,_e.ins),j&&addInsert(j,$,_e.text),tt=_e.i),_e.forward(it),nt-=it}et.next()}else if(_e.ins>=0){let nt=0,it=_e.len;for(;it;)if(et.ins==-1){let rt=Math.min(it,et.len);nt+=rt,it-=rt,et.forward(rt)}else if(et.ins==0&&et.len<it)it-=et.len,et.next();else break;addSection($,nt,tt<_e.i?_e.ins:0),j&&tt<_e.i&&addInsert(j,$,_e.text),tt=_e.i,_e.forward(_e.len-it)}else{if(_e.done&&et.done)return j?ChangeSet.createSet($,j):ChangeDesc.create($);throw new Error("Mismatched change set lengths")}}function composeSets(_,d,g=!1){let b=[],$=g?[]:null,j=new SectionIter(_),_e=new SectionIter(d);for(let et=!1;;){if(j.done&&_e.done)return $?ChangeSet.createSet(b,$):ChangeDesc.create(b);if(j.ins==0)addSection(b,j.len,0,et),j.next();else if(_e.len==0&&!_e.done)addSection(b,0,_e.ins,et),$&&addInsert($,b,_e.text),_e.next();else{if(j.done||_e.done)throw new Error("Mismatched change set lengths");{let tt=Math.min(j.len2,_e.len),nt=b.length;if(j.ins==-1){let it=_e.ins==-1?-1:_e.off?0:_e.ins;addSection(b,tt,it,et),$&&it&&addInsert($,b,_e.text)}else _e.ins==-1?(addSection(b,j.off?0:j.len,tt,et),$&&addInsert($,b,j.textBit(tt))):(addSection(b,j.off?0:j.len,_e.off?0:_e.ins,et),$&&!_e.off&&addInsert($,b,_e.text));et=(j.ins>tt||_e.ins>=0&&_e.len>tt)&&(et||b.length>nt),j.forward2(tt),_e.forward(tt)}}}}class SectionIter{constructor(d){this.set=d,this.i=0,this.next()}next(){let{sections:d}=this.set;this.i<d.length?(this.len=d[this.i++],this.ins=d[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:d}=this.set,g=this.i-2>>1;return g>=d.length?Text.empty:d[g]}textBit(d){let{inserted:g}=this.set,b=this.i-2>>1;return b>=g.length&&!d?Text.empty:g[b].slice(this.off,d==null?void 0:this.off+d)}forward(d){d==this.len?this.next():(this.len-=d,this.off+=d)}forward2(d){this.ins==-1?this.forward(d):d==this.ins?this.next():(this.ins-=d,this.off+=d)}}class SelectionRange{constructor(d,g,b){this.from=d,this.to=g,this.flags=b}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let d=this.flags&7;return d==7?null:d}get goalColumn(){let d=this.flags>>6;return d==16777215?void 0:d}map(d,g=-1){let b,$;return this.empty?b=$=d.mapPos(this.from,g):(b=d.mapPos(this.from,1),$=d.mapPos(this.to,-1)),b==this.from&&$==this.to?this:new SelectionRange(b,$,this.flags)}extend(d,g=d){if(d<=this.anchor&&g>=this.anchor)return EditorSelection.range(d,g);let b=Math.abs(d-this.anchor)>Math.abs(g-this.anchor)?d:g;return EditorSelection.range(this.anchor,b)}eq(d,g=!1){return this.anchor==d.anchor&&this.head==d.head&&(!g||!this.empty||this.assoc==d.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(d){if(!d||typeof d.anchor!="number"||typeof d.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(d.anchor,d.head)}static create(d,g,b){return new SelectionRange(d,g,b)}}class EditorSelection{constructor(d,g){this.ranges=d,this.mainIndex=g}map(d,g=-1){return d.empty?this:EditorSelection.create(this.ranges.map(b=>b.map(d,g)),this.mainIndex)}eq(d,g=!1){if(this.ranges.length!=d.ranges.length||this.mainIndex!=d.mainIndex)return!1;for(let b=0;b<this.ranges.length;b++)if(!this.ranges[b].eq(d.ranges[b],g))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(d,g=!0){return EditorSelection.create([d].concat(this.ranges),g?0:this.mainIndex+1)}replaceRange(d,g=this.mainIndex){let b=this.ranges.slice();return b[g]=d,EditorSelection.create(b,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(d=>d.toJSON()),main:this.mainIndex}}static fromJSON(d){if(!d||!Array.isArray(d.ranges)||typeof d.main!="number"||d.main>=d.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(d.ranges.map(g=>SelectionRange.fromJSON(g)),d.main)}static single(d,g=d){return new EditorSelection([EditorSelection.range(d,g)],0)}static create(d,g=0){if(d.length==0)throw new RangeError("A selection needs at least one range");for(let b=0,$=0;$<d.length;$++){let j=d[$];if(j.empty?j.from<=b:j.from<b)return EditorSelection.normalized(d.slice(),g);b=j.to}return new EditorSelection(d,g)}static cursor(d,g=0,b,$){return SelectionRange.create(d,d,(g==0?0:g<0?8:16)|(b==null?7:Math.min(6,b))|($??16777215)<<6)}static range(d,g,b,$){let j=(b??16777215)<<6|($==null?7:Math.min(6,$));return g<d?SelectionRange.create(g,d,48|j):SelectionRange.create(d,g,(g>d?8:0)|j)}static normalized(d,g=0){let b=d[g];d.sort(($,j)=>$.from-j.from),g=d.indexOf(b);for(let $=1;$<d.length;$++){let j=d[$],_e=d[$-1];if(j.empty?j.from<=_e.to:j.from<_e.to){let et=_e.from,tt=Math.max(j.to,_e.to);$<=g&&g--,d.splice(--$,2,j.anchor>j.head?EditorSelection.range(tt,et):EditorSelection.range(et,tt))}}return new EditorSelection(d,g)}}function checkSelection(_,d){for(let g of _.ranges)if(g.to>d)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(d,g,b,$,j){this.combine=d,this.compareInput=g,this.compare=b,this.isStatic=$,this.id=nextID++,this.default=d([]),this.extensions=typeof j=="function"?j(this):j}get reader(){return this}static define(d={}){return new Facet(d.combine||(g=>g),d.compareInput||((g,b)=>g===b),d.compare||(d.combine?(g,b)=>g===b:sameArray),!!d.static,d.enables)}of(d){return new FacetProvider([],this,0,d)}compute(d,g){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(d,this,1,g)}computeN(d,g){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(d,this,2,g)}from(d,g){return g||(g=b=>b),this.compute([d],b=>g(b.field(d)))}}function sameArray(_,d){return _==d||_.length==d.length&&_.every((g,b)=>g===d[b])}class FacetProvider{constructor(d,g,b,$){this.dependencies=d,this.facet=g,this.type=b,this.value=$,this.id=nextID++}dynamicSlot(d){var g;let b=this.value,$=this.facet.compareInput,j=this.id,_e=d[j]>>1,et=this.type==2,tt=!1,nt=!1,it=[];for(let rt of this.dependencies)rt=="doc"?tt=!0:rt=="selection"?nt=!0:((g=d[rt.id])!==null&&g!==void 0?g:1)&1||it.push(d[rt.id]);return{create(rt){return rt.values[_e]=b(rt),1},update(rt,st){if(tt&&st.docChanged||nt&&(st.docChanged||st.selection)||ensureAll(rt,it)){let ot=b(rt);if(et?!compareArray(ot,rt.values[_e],$):!$(ot,rt.values[_e]))return rt.values[_e]=ot,1}return 0},reconfigure:(rt,st)=>{let ot,at=st.config.address[j];if(at!=null){let ct=getAddr(st,at);if(this.dependencies.every(ht=>ht instanceof Facet?st.facet(ht)===rt.facet(ht):ht instanceof StateField?st.field(ht,!1)==rt.field(ht,!1):!0)||(et?compareArray(ot=b(rt),ct,$):$(ot=b(rt),ct)))return rt.values[_e]=ct,0}else ot=b(rt);return rt.values[_e]=ot,1}}}}function compareArray(_,d,g){if(_.length!=d.length)return!1;for(let b=0;b<_.length;b++)if(!g(_[b],d[b]))return!1;return!0}function ensureAll(_,d){let g=!1;for(let b of d)ensureAddr(_,b)&1&&(g=!0);return g}function dynamicFacetSlot(_,d,g){let b=g.map(tt=>_[tt.id]),$=g.map(tt=>tt.type),j=b.filter(tt=>!(tt&1)),_e=_[d.id]>>1;function et(tt){let nt=[];for(let it=0;it<b.length;it++){let rt=getAddr(tt,b[it]);if($[it]==2)for(let st of rt)nt.push(st);else nt.push(rt)}return d.combine(nt)}return{create(tt){for(let nt of b)ensureAddr(tt,nt);return tt.values[_e]=et(tt),1},update(tt,nt){if(!ensureAll(tt,j))return 0;let it=et(tt);return d.compare(it,tt.values[_e])?0:(tt.values[_e]=it,1)},reconfigure(tt,nt){let it=ensureAll(tt,b),rt=nt.config.facets[d.id],st=nt.facet(d);if(rt&&!it&&sameArray(g,rt))return tt.values[_e]=st,0;let ot=et(tt);return d.compare(ot,st)?(tt.values[_e]=st,0):(tt.values[_e]=ot,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(d,g,b,$,j){this.id=d,this.createF=g,this.updateF=b,this.compareF=$,this.spec=j,this.provides=void 0}static define(d){let g=new StateField(nextID++,d.create,d.update,d.compare||((b,$)=>b===$),d);return d.provide&&(g.provides=d.provide(g)),g}create(d){let g=d.facet(initField).find(b=>b.field==this);return((g==null?void 0:g.create)||this.createF)(d)}slot(d){let g=d[this.id]>>1;return{create:b=>(b.values[g]=this.create(b),1),update:(b,$)=>{let j=b.values[g],_e=this.updateF(j,$);return this.compareF(j,_e)?0:(b.values[g]=_e,1)},reconfigure:(b,$)=>$.config.address[this.id]!=null?(b.values[g]=$.field(this),0):(b.values[g]=this.create(b),1)}}init(d){return[this,initField.of({field:this,create:d})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(_){return d=>new PrecExtension(d,_)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(d,g){this.inner=d,this.prec=g}}class Compartment{of(d){return new CompartmentInstance(this,d)}reconfigure(d){return Compartment.reconfigure.of({compartment:this,extension:d})}get(d){return d.config.compartments.get(this)}}class CompartmentInstance{constructor(d,g){this.compartment=d,this.inner=g}}class Configuration{constructor(d,g,b,$,j,_e){for(this.base=d,this.compartments=g,this.dynamicSlots=b,this.address=$,this.staticValues=j,this.facets=_e,this.statusTemplate=[];this.statusTemplate.length<b.length;)this.statusTemplate.push(0)}staticFacet(d){let g=this.address[d.id];return g==null?d.default:this.staticValues[g>>1]}static resolve(d,g,b){let $=[],j=Object.create(null),_e=new Map;for(let st of flatten(d,g,_e))st instanceof StateField?$.push(st):(j[st.facet.id]||(j[st.facet.id]=[])).push(st);let et=Object.create(null),tt=[],nt=[];for(let st of $)et[st.id]=nt.length<<1,nt.push(ot=>st.slot(ot));let it=b==null?void 0:b.config.facets;for(let st in j){let ot=j[st],at=ot[0].facet,ct=it&&it[st]||[];if(ot.every(ht=>ht.type==0))if(et[at.id]=tt.length<<1|1,sameArray(ct,ot))tt.push(b.facet(at));else{let ht=at.combine(ot.map(ut=>ut.value));tt.push(b&&at.compare(ht,b.facet(at))?b.facet(at):ht)}else{for(let ht of ot)ht.type==0?(et[ht.id]=tt.length<<1|1,tt.push(ht.value)):(et[ht.id]=nt.length<<1,nt.push(ut=>ht.dynamicSlot(ut)));et[at.id]=nt.length<<1,nt.push(ht=>dynamicFacetSlot(ht,at,ot))}}let rt=nt.map(st=>st(et));return new Configuration(d,_e,rt,et,tt,j)}}function flatten(_,d,g){let b=[[],[],[],[],[]],$=new Map;function j(_e,et){let tt=$.get(_e);if(tt!=null){if(tt<=et)return;let nt=b[tt].indexOf(_e);nt>-1&&b[tt].splice(nt,1),_e instanceof CompartmentInstance&&g.delete(_e.compartment)}if($.set(_e,et),Array.isArray(_e))for(let nt of _e)j(nt,et);else if(_e instanceof CompartmentInstance){if(g.has(_e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let nt=d.get(_e.compartment)||_e.inner;g.set(_e.compartment,nt),j(nt,et)}else if(_e instanceof PrecExtension)j(_e.inner,_e.prec);else if(_e instanceof StateField)b[et].push(_e),_e.provides&&j(_e.provides,et);else if(_e instanceof FacetProvider)b[et].push(_e),_e.facet.extensions&&j(_e.facet.extensions,Prec_.default);else{let nt=_e.extension;if(!nt)throw new Error(`Unrecognized extension value in extension set (${_e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);j(nt,et)}}return j(_,Prec_.default),b.reduce((_e,et)=>_e.concat(et))}function ensureAddr(_,d){if(d&1)return 2;let g=d>>1,b=_.status[g];if(b==4)throw new Error("Cyclic dependency between fields and/or facets");if(b&2)return b;_.status[g]=4;let $=_.computeSlot(_,_.config.dynamicSlots[g]);return _.status[g]=2|$}function getAddr(_,d){return d&1?_.config.staticValues[d>>1]:_.values[d>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:_=>_.some(d=>d),static:!0}),lineSeparator=Facet.define({combine:_=>_.length?_[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:_=>_.length?_[0]:!1});class Annotation{constructor(d,g){this.type=d,this.value=g}static define(){return new AnnotationType}}class AnnotationType{of(d){return new Annotation(this,d)}}class StateEffectType{constructor(d){this.map=d}of(d){return new StateEffect(this,d)}}class StateEffect{constructor(d,g){this.type=d,this.value=g}map(d){let g=this.type.map(this.value,d);return g===void 0?void 0:g==this.value?this:new StateEffect(this.type,g)}is(d){return this.type==d}static define(d={}){return new StateEffectType(d.map||(g=>g))}static mapEffects(d,g){if(!d.length)return d;let b=[];for(let $ of d){let j=$.map(g);j&&b.push(j)}return b}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(d,g,b,$,j,_e){this.startState=d,this.changes=g,this.selection=b,this.effects=$,this.annotations=j,this.scrollIntoView=_e,this._doc=null,this._state=null,b&&checkSelection(b,g.newLength),j.some(et=>et.type==Transaction.time)||(this.annotations=j.concat(Transaction.time.of(Date.now())))}static create(d,g,b,$,j,_e){return new Transaction(d,g,b,$,j,_e)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(d){for(let g of this.annotations)if(g.type==d)return g.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(d){let g=this.annotation(Transaction.userEvent);return!!(g&&(g==d||g.length>d.length&&g.slice(0,d.length)==d&&g[d.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(_,d){let g=[];for(let b=0,$=0;;){let j,_e;if(b<_.length&&($==d.length||d[$]>=_[b]))j=_[b++],_e=_[b++];else if($<d.length)j=d[$++],_e=d[$++];else return g;!g.length||g[g.length-1]<j?g.push(j,_e):g[g.length-1]<_e&&(g[g.length-1]=_e)}}function mergeTransaction(_,d,g){var b;let $,j,_e;return g?($=d.changes,j=ChangeSet.empty(d.changes.length),_e=_.changes.compose(d.changes)):($=d.changes.map(_.changes),j=_.changes.mapDesc(d.changes,!0),_e=_.changes.compose($)),{changes:_e,selection:d.selection?d.selection.map(j):(b=_.selection)===null||b===void 0?void 0:b.map($),effects:StateEffect.mapEffects(_.effects,$).concat(StateEffect.mapEffects(d.effects,j)),annotations:_.annotations.length?_.annotations.concat(d.annotations):d.annotations,scrollIntoView:_.scrollIntoView||d.scrollIntoView}}function resolveTransactionInner(_,d,g){let b=d.selection,$=asArray$1(d.annotations);return d.userEvent&&($=$.concat(Transaction.userEvent.of(d.userEvent))),{changes:d.changes instanceof ChangeSet?d.changes:ChangeSet.of(d.changes||[],g,_.facet(lineSeparator)),selection:b&&(b instanceof EditorSelection?b:EditorSelection.single(b.anchor,b.head)),effects:asArray$1(d.effects),annotations:$,scrollIntoView:!!d.scrollIntoView}}function resolveTransaction(_,d,g){let b=resolveTransactionInner(_,d.length?d[0]:{},_.doc.length);d.length&&d[0].filter===!1&&(g=!1);for(let j=1;j<d.length;j++){d[j].filter===!1&&(g=!1);let _e=!!d[j].sequential;b=mergeTransaction(b,resolveTransactionInner(_,d[j],_e?b.changes.newLength:_.doc.length),_e)}let $=Transaction.create(_,b.changes,b.selection,b.effects,b.annotations,b.scrollIntoView);return extendTransaction(g?filterTransaction($):$)}function filterTransaction(_){let d=_.startState,g=!0;for(let $ of d.facet(changeFilter)){let j=$(_);if(j===!1){g=!1;break}Array.isArray(j)&&(g=g===!0?j:joinRanges(g,j))}if(g!==!0){let $,j;if(g===!1)j=_.changes.invertedDesc,$=ChangeSet.empty(d.doc.length);else{let _e=_.changes.filter(g);$=_e.changes,j=_e.filtered.mapDesc(_e.changes).invertedDesc}_=Transaction.create(d,$,_.selection&&_.selection.map(j),StateEffect.mapEffects(_.effects,j),_.annotations,_.scrollIntoView)}let b=d.facet(transactionFilter);for(let $=b.length-1;$>=0;$--){let j=b[$](_);j instanceof Transaction?_=j:Array.isArray(j)&&j.length==1&&j[0]instanceof Transaction?_=j[0]:_=resolveTransaction(d,asArray$1(j),!1)}return _}function extendTransaction(_){let d=_.startState,g=d.facet(transactionExtender),b=_;for(let $=g.length-1;$>=0;$--){let j=g[$](_);j&&Object.keys(j).length&&(b=mergeTransaction(b,resolveTransactionInner(d,j,_.changes.newLength),!0))}return b==_?_:Transaction.create(d,_.changes,_.selection,b.effects,b.annotations,b.scrollIntoView)}const none$2=[];function asArray$1(_){return _==null?none$2:Array.isArray(_)?_:[_]}var CharCategory=function(_){return _[_.Word=0]="Word",_[_.Space=1]="Space",_[_.Other=2]="Other",_}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(_){if(wordChar)return wordChar.test(_);for(let d=0;d<_.length;d++){let g=_[d];if(/\w/.test(g)||g>""&&(g.toUpperCase()!=g.toLowerCase()||nonASCIISingleCaseWordChar.test(g)))return!0}return!1}function makeCategorizer(_){return d=>{if(!/\S/.test(d))return CharCategory.Space;if(hasWordChar(d))return CharCategory.Word;for(let g=0;g<_.length;g++)if(d.indexOf(_[g])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(d,g,b,$,j,_e){this.config=d,this.doc=g,this.selection=b,this.values=$,this.status=d.statusTemplate.slice(),this.computeSlot=j,_e&&(_e._state=this);for(let et=0;et<this.config.dynamicSlots.length;et++)ensureAddr(this,et<<1);this.computeSlot=null}field(d,g=!0){let b=this.config.address[d.id];if(b==null){if(g)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,b),getAddr(this,b)}update(...d){return resolveTransaction(this,d,!0)}applyTransaction(d){let g=this.config,{base:b,compartments:$}=g;for(let et of d.effects)et.is(Compartment.reconfigure)?(g&&($=new Map,g.compartments.forEach((tt,nt)=>$.set(nt,tt)),g=null),$.set(et.value.compartment,et.value.extension)):et.is(StateEffect.reconfigure)?(g=null,b=et.value):et.is(StateEffect.appendConfig)&&(g=null,b=asArray$1(b).concat(et.value));let j;g?j=d.startState.values.slice():(g=Configuration.resolve(b,$,this),j=new EditorState(g,this.doc,this.selection,g.dynamicSlots.map(()=>null),(tt,nt)=>nt.reconfigure(tt,this),null).values);let _e=d.startState.facet(allowMultipleSelections)?d.newSelection:d.newSelection.asSingle();new EditorState(g,d.newDoc,_e,j,(et,tt)=>tt.update(et,d),d)}replaceSelection(d){return typeof d=="string"&&(d=this.toText(d)),this.changeByRange(g=>({changes:{from:g.from,to:g.to,insert:d},range:EditorSelection.cursor(g.from+d.length)}))}changeByRange(d){let g=this.selection,b=d(g.ranges[0]),$=this.changes(b.changes),j=[b.range],_e=asArray$1(b.effects);for(let et=1;et<g.ranges.length;et++){let tt=d(g.ranges[et]),nt=this.changes(tt.changes),it=nt.map($);for(let st=0;st<et;st++)j[st]=j[st].map(it);let rt=$.mapDesc(nt,!0);j.push(tt.range.map(rt)),$=$.compose(it),_e=StateEffect.mapEffects(_e,it).concat(StateEffect.mapEffects(asArray$1(tt.effects),rt))}return{changes:$,selection:EditorSelection.create(j,g.mainIndex),effects:_e}}changes(d=[]){return d instanceof ChangeSet?d:ChangeSet.of(d,this.doc.length,this.facet(EditorState.lineSeparator))}toText(d){return Text.of(d.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(d=0,g=this.doc.length){return this.doc.sliceString(d,g,this.lineBreak)}facet(d){let g=this.config.address[d.id];return g==null?d.default:(ensureAddr(this,g),getAddr(this,g))}toJSON(d){let g={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(d)for(let b in d){let $=d[b];$ instanceof StateField&&this.config.address[$.id]!=null&&(g[b]=$.spec.toJSON(this.field(d[b]),this))}return g}static fromJSON(d,g={},b){if(!d||typeof d.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let $=[];if(b){for(let j in b)if(Object.prototype.hasOwnProperty.call(d,j)){let _e=b[j],et=d[j];$.push(_e.init(tt=>_e.spec.fromJSON(et,tt)))}}return EditorState.create({doc:d.doc,selection:EditorSelection.fromJSON(d.selection),extensions:g.extensions?$.concat([g.extensions]):$})}static create(d={}){let g=Configuration.resolve(d.extensions||[],new Map),b=d.doc instanceof Text?d.doc:Text.of((d.doc||"").split(g.staticFacet(EditorState.lineSeparator)||DefaultSplit)),$=d.selection?d.selection instanceof EditorSelection?d.selection:EditorSelection.single(d.selection.anchor,d.selection.head):EditorSelection.single(0);return checkSelection($,b.length),g.staticFacet(allowMultipleSelections)||($=$.asSingle()),new EditorState(g,b,$,g.dynamicSlots.map(()=>null),(j,_e)=>_e.create(j),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(d,...g){for(let b of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(b,d)){d=b[d];break}return g.length&&(d=d.replace(/\$(\$|\d*)/g,(b,$)=>{if($=="$")return"$";let j=+($||1);return!j||j>g.length?b:g[j-1]})),d}languageDataAt(d,g,b=-1){let $=[];for(let j of this.facet(languageData))for(let _e of j(this,g,b))Object.prototype.hasOwnProperty.call(_e,d)&&$.push(_e[d]);return $}charCategorizer(d){return makeCategorizer(this.languageDataAt("wordChars",d).join(""))}wordAt(d){let{text:g,from:b,length:$}=this.doc.lineAt(d),j=this.charCategorizer(d),_e=d-b,et=d-b;for(;_e>0;){let tt=findClusterBreak(g,_e,!1);if(j(g.slice(tt,_e))!=CharCategory.Word)break;_e=tt}for(;et<$;){let tt=findClusterBreak(g,et);if(j(g.slice(et,tt))!=CharCategory.Word)break;et=tt}return _e==et?null:EditorSelection.range(_e+b,et+b)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:_=>_.length?_[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(_,d){let g=Object.keys(_),b=Object.keys(d);return g.length==b.length&&g.every($=>_[$]==d[$])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(_,d,g={}){let b={};for(let $ of _)for(let j of Object.keys($)){let _e=$[j],et=b[j];if(et===void 0)b[j]=_e;else if(!(et===_e||_e===void 0))if(Object.hasOwnProperty.call(g,j))b[j]=g[j](et,_e);else throw new Error("Config merge conflict for field "+j)}for(let $ in d)b[$]===void 0&&(b[$]=d[$]);return b}class RangeValue{eq(d){return this==d}range(d,g=d){return Range.create(d,g,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;class Range{constructor(d,g,b){this.from=d,this.to=g,this.value=b}static create(d,g,b){return new Range(d,g,b)}}function cmpRange(_,d){return _.from-d.from||_.value.startSide-d.value.startSide}class Chunk{constructor(d,g,b,$){this.from=d,this.to=g,this.value=b,this.maxPoint=$}get length(){return this.to[this.to.length-1]}findIndex(d,g,b,$=0){let j=b?this.to:this.from;for(let _e=$,et=j.length;;){if(_e==et)return _e;let tt=_e+et>>1,nt=j[tt]-d||(b?this.value[tt].endSide:this.value[tt].startSide)-g;if(tt==_e)return nt>=0?_e:et;nt>=0?et=tt:_e=tt+1}}between(d,g,b,$){for(let j=this.findIndex(g,-1e9,!0),_e=this.findIndex(b,1e9,!1,j);j<_e;j++)if($(this.from[j]+d,this.to[j]+d,this.value[j])===!1)return!1}map(d,g){let b=[],$=[],j=[],_e=-1,et=-1;for(let tt=0;tt<this.value.length;tt++){let nt=this.value[tt],it=this.from[tt]+d,rt=this.to[tt]+d,st,ot;if(it==rt){let at=g.mapPos(it,nt.startSide,nt.mapMode);if(at==null||(st=ot=at,nt.startSide!=nt.endSide&&(ot=g.mapPos(it,nt.endSide),ot<st)))continue}else if(st=g.mapPos(it,nt.startSide),ot=g.mapPos(rt,nt.endSide),st>ot||st==ot&&nt.startSide>0&&nt.endSide<=0)continue;(ot-st||nt.endSide-nt.startSide)<0||(_e<0&&(_e=st),nt.point&&(et=Math.max(et,ot-st)),b.push(nt),$.push(st-_e),j.push(ot-_e))}return{mapped:b.length?new Chunk($,j,b,et):null,pos:_e}}}class RangeSet{constructor(d,g,b,$){this.chunkPos=d,this.chunk=g,this.nextLayer=b,this.maxPoint=$}static create(d,g,b,$){return new RangeSet(d,g,b,$)}get length(){let d=this.chunk.length-1;return d<0?0:Math.max(this.chunkEnd(d),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let d=this.nextLayer.size;for(let g of this.chunk)d+=g.value.length;return d}chunkEnd(d){return this.chunkPos[d]+this.chunk[d].length}update(d){let{add:g=[],sort:b=!1,filterFrom:$=0,filterTo:j=this.length}=d,_e=d.filter;if(g.length==0&&!_e)return this;if(b&&(g=g.slice().sort(cmpRange)),this.isEmpty)return g.length?RangeSet.of(g):this;let et=new LayerCursor(this,null,-1).goto(0),tt=0,nt=[],it=new RangeSetBuilder;for(;et.value||tt<g.length;)if(tt<g.length&&(et.from-g[tt].from||et.startSide-g[tt].value.startSide)>=0){let rt=g[tt++];it.addInner(rt.from,rt.to,rt.value)||nt.push(rt)}else et.rangeIndex==1&&et.chunkIndex<this.chunk.length&&(tt==g.length||this.chunkEnd(et.chunkIndex)<g[tt].from)&&(!_e||$>this.chunkEnd(et.chunkIndex)||j<this.chunkPos[et.chunkIndex])&&it.addChunk(this.chunkPos[et.chunkIndex],this.chunk[et.chunkIndex])?et.nextChunk():((!_e||$>et.to||j<et.from||_e(et.from,et.to,et.value))&&(it.addInner(et.from,et.to,et.value)||nt.push(Range.create(et.from,et.to,et.value))),et.next());return it.finishInner(this.nextLayer.isEmpty&&!nt.length?RangeSet.empty:this.nextLayer.update({add:nt,filter:_e,filterFrom:$,filterTo:j}))}map(d){if(d.empty||this.isEmpty)return this;let g=[],b=[],$=-1;for(let _e=0;_e<this.chunk.length;_e++){let et=this.chunkPos[_e],tt=this.chunk[_e],nt=d.touchesRange(et,et+tt.length);if(nt===!1)$=Math.max($,tt.maxPoint),g.push(tt),b.push(d.mapPos(et));else if(nt===!0){let{mapped:it,pos:rt}=tt.map(et,d);it&&($=Math.max($,it.maxPoint),g.push(it),b.push(rt))}}let j=this.nextLayer.map(d);return g.length==0?j:new RangeSet(b,g,j||RangeSet.empty,$)}between(d,g,b){if(!this.isEmpty){for(let $=0;$<this.chunk.length;$++){let j=this.chunkPos[$],_e=this.chunk[$];if(g>=j&&d<=j+_e.length&&_e.between(j,d-j,g-j,b)===!1)return}this.nextLayer.between(d,g,b)}}iter(d=0){return HeapCursor.from([this]).goto(d)}get isEmpty(){return this.nextLayer==this}static iter(d,g=0){return HeapCursor.from(d).goto(g)}static compare(d,g,b,$,j=-1){let _e=d.filter(rt=>rt.maxPoint>0||!rt.isEmpty&&rt.maxPoint>=j),et=g.filter(rt=>rt.maxPoint>0||!rt.isEmpty&&rt.maxPoint>=j),tt=findSharedChunks(_e,et,b),nt=new SpanCursor(_e,tt,j),it=new SpanCursor(et,tt,j);b.iterGaps((rt,st,ot)=>compare(nt,rt,it,st,ot,$)),b.empty&&b.length==0&&compare(nt,0,it,0,0,$)}static eq(d,g,b=0,$){$==null&&($=1e9-1);let j=d.filter(it=>!it.isEmpty&&g.indexOf(it)<0),_e=g.filter(it=>!it.isEmpty&&d.indexOf(it)<0);if(j.length!=_e.length)return!1;if(!j.length)return!0;let et=findSharedChunks(j,_e),tt=new SpanCursor(j,et,0).goto(b),nt=new SpanCursor(_e,et,0).goto(b);for(;;){if(tt.to!=nt.to||!sameValues(tt.active,nt.active)||tt.point&&(!nt.point||!tt.point.eq(nt.point)))return!1;if(tt.to>$)return!0;tt.next(),nt.next()}}static spans(d,g,b,$,j=-1){let _e=new SpanCursor(d,null,j).goto(g),et=g,tt=_e.openStart;for(;;){let nt=Math.min(_e.to,b);if(_e.point){let it=_e.activeForPoint(_e.to),rt=_e.pointFrom<g?it.length+1:_e.point.startSide<0?it.length:Math.min(it.length,tt);$.point(et,nt,_e.point,it,rt,_e.pointRank),tt=Math.min(_e.openEnd(nt),it.length)}else nt>et&&($.span(et,nt,_e.active,tt),tt=_e.openEnd(nt));if(_e.to>b)return tt+(_e.point&&_e.to>b?1:0);et=_e.to,_e.next()}}static of(d,g=!1){let b=new RangeSetBuilder;for(let $ of d instanceof Range?[d]:g?lazySort(d):d)b.add($.from,$.to,$.value);return b.finish()}static join(d){if(!d.length)return RangeSet.empty;let g=d[d.length-1];for(let b=d.length-2;b>=0;b--)for(let $=d[b];$!=RangeSet.empty;$=$.nextLayer)g=new RangeSet($.chunkPos,$.chunk,g,Math.max($.maxPoint,g.maxPoint));return g}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(_){if(_.length>1)for(let d=_[0],g=1;g<_.length;g++){let b=_[g];if(cmpRange(d,b)>0)return _.slice().sort(cmpRange);d=b}return _}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(d){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,d&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(d,g,b){this.addInner(d,g,b)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(d,g,b)}addInner(d,g,b){let $=d-this.lastTo||b.startSide-this.last.endSide;if($<=0&&(d-this.lastFrom||b.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return $<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=d),this.from.push(d-this.chunkStart),this.to.push(g-this.chunkStart),this.last=b,this.lastFrom=d,this.lastTo=g,this.value.push(b),b.point&&(this.maxPoint=Math.max(this.maxPoint,g-d)),!0)}addChunk(d,g){if((d-this.lastTo||g.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,g.maxPoint),this.chunks.push(g),this.chunkPos.push(d);let b=g.value.length-1;return this.last=g.value[b],this.lastFrom=g.from[b]+d,this.lastTo=g.to[b]+d,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(d){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return d;let g=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(d):d,this.setMaxPoint);return this.from=null,g}}function findSharedChunks(_,d,g){let b=new Map;for(let j of _)for(let _e=0;_e<j.chunk.length;_e++)j.chunk[_e].maxPoint<=0&&b.set(j.chunk[_e],j.chunkPos[_e]);let $=new Set;for(let j of d)for(let _e=0;_e<j.chunk.length;_e++){let et=b.get(j.chunk[_e]);et!=null&&(g?g.mapPos(et):et)==j.chunkPos[_e]&&!(g!=null&&g.touchesRange(et,et+j.chunk[_e].length))&&$.add(j.chunk[_e])}return $}class LayerCursor{constructor(d,g,b,$=0){this.layer=d,this.skip=g,this.minPoint=b,this.rank=$}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(d,g=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(d,g,!1),this}gotoInner(d,g,b){for(;this.chunkIndex<this.layer.chunk.length;){let $=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has($)||this.layer.chunkEnd(this.chunkIndex)<d||$.maxPoint<this.minPoint))break;this.chunkIndex++,b=!1}if(this.chunkIndex<this.layer.chunk.length){let $=this.layer.chunk[this.chunkIndex].findIndex(d-this.layer.chunkPos[this.chunkIndex],g,!0);(!b||this.rangeIndex<$)&&this.setRangeIndex($)}this.next()}forward(d,g){(this.to-d||this.endSide-g)<0&&this.gotoInner(d,g,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let d=this.layer.chunkPos[this.chunkIndex],g=this.layer.chunk[this.chunkIndex],b=d+g.from[this.rangeIndex];if(this.from=b,this.to=d+g.to[this.rangeIndex],this.value=g.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(d){if(d==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=d}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(d){return this.from-d.from||this.startSide-d.startSide||this.rank-d.rank||this.to-d.to||this.endSide-d.endSide}}class HeapCursor{constructor(d){this.heap=d}static from(d,g=null,b=-1){let $=[];for(let j=0;j<d.length;j++)for(let _e=d[j];!_e.isEmpty;_e=_e.nextLayer)_e.maxPoint>=b&&$.push(new LayerCursor(_e,g,b,j));return $.length==1?$[0]:new HeapCursor($)}get startSide(){return this.value?this.value.startSide:0}goto(d,g=-1e9){for(let b of this.heap)b.goto(d,g);for(let b=this.heap.length>>1;b>=0;b--)heapBubble(this.heap,b);return this.next(),this}forward(d,g){for(let b of this.heap)b.forward(d,g);for(let b=this.heap.length>>1;b>=0;b--)heapBubble(this.heap,b);(this.to-d||this.value.endSide-g)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let d=this.heap[0];this.from=d.from,this.to=d.to,this.value=d.value,this.rank=d.rank,d.value&&d.next(),heapBubble(this.heap,0)}}}function heapBubble(_,d){for(let g=_[d];;){let b=(d<<1)+1;if(b>=_.length)break;let $=_[b];if(b+1<_.length&&$.compare(_[b+1])>=0&&($=_[b+1],b++),g.compare($)<0)break;_[b]=g,_[d]=$,d=b}}class SpanCursor{constructor(d,g,b){this.minPoint=b,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(d,g,b)}goto(d,g=-1e9){return this.cursor.goto(d,g),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=d,this.endSide=g,this.openStart=-1,this.next(),this}forward(d,g){for(;this.minActive>-1&&(this.activeTo[this.minActive]-d||this.active[this.minActive].endSide-g)<0;)this.removeActive(this.minActive);this.cursor.forward(d,g)}removeActive(d){remove(this.active,d),remove(this.activeTo,d),remove(this.activeRank,d),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(d){let g=0,{value:b,to:$,rank:j}=this.cursor;for(;g<this.activeRank.length&&(j-this.activeRank[g]||$-this.activeTo[g])>0;)g++;insert(this.active,g,b),insert(this.activeTo,g,$),insert(this.activeRank,g,j),d&&insert(d,g,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let d=this.to,g=this.point;this.point=null;let b=this.openStart<0?[]:null;for(;;){let $=this.minActive;if($>-1&&(this.activeTo[$]-this.cursor.from||this.active[$].endSide-this.cursor.startSide)<0){if(this.activeTo[$]>d){this.to=this.activeTo[$],this.endSide=this.active[$].endSide;break}this.removeActive($),b&&remove(b,$)}else if(this.cursor.value)if(this.cursor.from>d){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let j=this.cursor.value;if(!j.point)this.addActive(b),this.cursor.next();else if(g&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=j,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=j.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(b){this.openStart=0;for(let $=b.length-1;$>=0&&b[$]<d;$--)this.openStart++}}activeForPoint(d){if(!this.active.length)return this.active;let g=[];for(let b=this.active.length-1;b>=0&&!(this.activeRank[b]<this.pointRank);b--)(this.activeTo[b]>d||this.activeTo[b]==d&&this.active[b].endSide>=this.point.endSide)&&g.push(this.active[b]);return g.reverse()}openEnd(d){let g=0;for(let b=this.activeTo.length-1;b>=0&&this.activeTo[b]>d;b--)g++;return g}}function compare(_,d,g,b,$,j){_.goto(d),g.goto(b);let _e=b+$,et=b,tt=b-d;for(;;){let nt=_.to+tt-g.to||_.endSide-g.endSide,it=nt<0?_.to+tt:g.to,rt=Math.min(it,_e);if(_.point||g.point?_.point&&g.point&&(_.point==g.point||_.point.eq(g.point))&&sameValues(_.activeForPoint(_.to),g.activeForPoint(g.to))||j.comparePoint(et,rt,_.point,g.point):rt>et&&!sameValues(_.active,g.active)&&j.compareRange(et,rt,_.active,g.active),it>_e)break;et=it,nt<=0&&_.next(),nt>=0&&g.next()}}function sameValues(_,d){if(_.length!=d.length)return!1;for(let g=0;g<_.length;g++)if(_[g]!=d[g]&&!_[g].eq(d[g]))return!1;return!0}function remove(_,d){for(let g=d,b=_.length-1;g<b;g++)_[g]=_[g+1];_.pop()}function insert(_,d,g){for(let b=_.length-1;b>=d;b--)_[b+1]=_[b];_[d]=g}function findMinIndex(_,d){let g=-1,b=1e9;for(let $=0;$<d.length;$++)(d[$]-b||_[$].endSide-_[g].endSide)<0&&(g=$,b=d[$]);return g}function countColumn(_,d,g=_.length){let b=0;for(let $=0;$<g;)_.charCodeAt($)==9?(b+=d-b%d,$++):(b++,$=findClusterBreak(_,$));return b}function findColumn(_,d,g,b){for(let $=0,j=0;;){if(j>=d)return $;if($==_.length)break;j+=_.charCodeAt($)==9?g-j%g:1,$=findClusterBreak(_,$)}return b===!0?-1:_.length}const C="",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(d,g){this.rules=[];let{finish:b}=g||{};function $(_e){return/^@/.test(_e)?[_e]:_e.split(/,\s*/)}function j(_e,et,tt,nt){let it=[],rt=/^@(\w+)\b/.exec(_e[0]),st=rt&&rt[1]=="keyframes";if(rt&&et==null)return tt.push(_e[0]+";");for(let ot in et){let at=et[ot];if(/&/.test(ot))j(ot.split(/,\s*/).map(ct=>_e.map(ht=>ct.replace(/&/,ht))).reduce((ct,ht)=>ct.concat(ht)),at,tt);else if(at&&typeof at=="object"){if(!rt)throw new RangeError("The value of a property ("+ot+") should be a primitive value.");j($(ot),at,it,st)}else at!=null&&it.push(ot.replace(/_.*/,"").replace(/[A-Z]/g,ct=>"-"+ct.toLowerCase())+": "+at+";")}(it.length||st)&&tt.push((b&&!rt&&!nt?_e.map(b):_e).join(", ")+" {"+it.join(" ")+"}")}for(let _e in d)j($(_e),d[_e],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let d=top[COUNT]||1;return top[COUNT]=d+1,C+d.toString(36)}static mount(d,g,b){let $=d[SET],j=b&&b.nonce;$?j&&$.setNonce(j):$=new StyleSet(d,j),$.mount(Array.isArray(g)?g:[g],d)}}let adoptedSet=new Map;class StyleSet{constructor(d,g){let b=d.ownerDocument||d,$=b.defaultView;if(!d.head&&d.adoptedStyleSheets&&$.CSSStyleSheet){let j=adoptedSet.get(b);if(j)return d[SET]=j;this.sheet=new $.CSSStyleSheet,adoptedSet.set(b,this)}else this.styleTag=b.createElement("style"),g&&this.styleTag.setAttribute("nonce",g);this.modules=[],d[SET]=this}mount(d,g){let b=this.sheet,$=0,j=0;for(let _e=0;_e<d.length;_e++){let et=d[_e],tt=this.modules.indexOf(et);if(tt<j&&tt>-1&&(this.modules.splice(tt,1),j--,tt=-1),tt==-1){if(this.modules.splice(j++,0,et),b)for(let nt=0;nt<et.rules.length;nt++)b.insertRule(et.rules[nt],$++)}else{for(;j<tt;)$+=this.modules[j++].rules.length;$+=et.rules.length,j++}}if(b)g.adoptedStyleSheets.indexOf(this.sheet)<0&&(g.adoptedStyleSheets=[this.sheet,...g.adoptedStyleSheets]);else{let _e="";for(let tt=0;tt<this.modules.length;tt++)_e+=this.modules[tt].getRules()+`
`;this.styleTag.textContent=_e;let et=g.head||g;this.styleTag.parentNode!=et&&et.insertBefore(this.styleTag,et.firstChild)}}setNonce(d){this.styleTag&&this.styleTag.getAttribute("nonce")!=d&&this.styleTag.setAttribute("nonce",d)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift$3={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift$3[i]=String.fromCharCode(i);for(var code in base)shift$3.hasOwnProperty(code)||(shift$3[code]=base[code]);function keyName(_){var d=mac&&_.metaKey&&_.shiftKey&&!_.ctrlKey&&!_.altKey||ie$1&&_.shiftKey&&_.key&&_.key.length==1||_.key=="Unidentified",g=!d&&_.key||(_.shiftKey?shift$3:base)[_.keyCode]||_.key||"Unidentified";return g=="Esc"&&(g="Escape"),g=="Del"&&(g="Delete"),g=="Left"&&(g="ArrowLeft"),g=="Up"&&(g="ArrowUp"),g=="Right"&&(g="ArrowRight"),g=="Down"&&(g="ArrowDown"),g}function getSelection(_){let d;return _.nodeType==11?d=_.getSelection?_:_.ownerDocument:d=_,d.getSelection()}function contains(_,d){return d?_==d||_.contains(d.nodeType!=1?d.parentNode:d):!1}function deepActiveElement(_){let d=_.activeElement;for(;d&&d.shadowRoot;)d=d.shadowRoot.activeElement;return d}function hasSelection(_,d){if(!d.anchorNode)return!1;try{return contains(_,d.anchorNode)}catch{return!1}}function clientRectsFor(_){return _.nodeType==3?textRange(_,0,_.nodeValue.length).getClientRects():_.nodeType==1?_.getClientRects():[]}function isEquivalentPosition(_,d,g,b){return g?scanFor(_,d,g,b,-1)||scanFor(_,d,g,b,1):!1}function domIndex(_){for(var d=0;;d++)if(_=_.previousSibling,!_)return d}function isBlockElement(_){return _.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(_.nodeName)}function scanFor(_,d,g,b,$){for(;;){if(_==g&&d==b)return!0;if(d==($<0?0:maxOffset(_))){if(_.nodeName=="DIV")return!1;let j=_.parentNode;if(!j||j.nodeType!=1)return!1;d=domIndex(_)+($<0?0:1),_=j}else if(_.nodeType==1){if(_=_.childNodes[d+($<0?-1:0)],_.nodeType==1&&_.contentEditable=="false")return!1;d=$<0?maxOffset(_):0}else return!1}}function maxOffset(_){return _.nodeType==3?_.nodeValue.length:_.childNodes.length}function flattenRect(_,d){let g=d?_.left:_.right;return{left:g,right:g,top:_.top,bottom:_.bottom}}function windowRect(_){let d=_.visualViewport;return d?{left:0,right:d.width,top:0,bottom:d.height}:{left:0,right:_.innerWidth,top:0,bottom:_.innerHeight}}function getScale$1(_,d){let g=d.width/_.offsetWidth,b=d.height/_.offsetHeight;return(g>.995&&g<1.005||!isFinite(g)||Math.abs(d.width-_.offsetWidth)<1)&&(g=1),(b>.995&&b<1.005||!isFinite(b)||Math.abs(d.height-_.offsetHeight)<1)&&(b=1),{scaleX:g,scaleY:b}}function scrollRectIntoView(_,d,g,b,$,j,_e,et){let tt=_.ownerDocument,nt=tt.defaultView||window;for(let it=_,rt=!1;it&&!rt;)if(it.nodeType==1){let st,ot=it==tt.body,at=1,ct=1;if(ot)st=windowRect(nt);else{if(/^(fixed|sticky)$/.test(getComputedStyle(it).position)&&(rt=!0),it.scrollHeight<=it.clientHeight&&it.scrollWidth<=it.clientWidth){it=it.assignedSlot||it.parentNode;continue}let dt=it.getBoundingClientRect();({scaleX:at,scaleY:ct}=getScale$1(it,dt)),st={left:dt.left,right:dt.left+it.clientWidth*at,top:dt.top,bottom:dt.top+it.clientHeight*ct}}let ht=0,ut=0;if($=="nearest")d.top<st.top?(ut=-(st.top-d.top+_e),g>0&&d.bottom>st.bottom+ut&&(ut=d.bottom-st.bottom+ut+_e)):d.bottom>st.bottom&&(ut=d.bottom-st.bottom+_e,g<0&&d.top-ut<st.top&&(ut=-(st.top+ut-d.top+_e)));else{let dt=d.bottom-d.top,ft=st.bottom-st.top;ut=($=="center"&&dt<=ft?d.top+dt/2-ft/2:$=="start"||$=="center"&&g<0?d.top-_e:d.bottom-ft+_e)-st.top}if(b=="nearest"?d.left<st.left?(ht=-(st.left-d.left+j),g>0&&d.right>st.right+ht&&(ht=d.right-st.right+ht+j)):d.right>st.right&&(ht=d.right-st.right+j,g<0&&d.left<st.left+ht&&(ht=-(st.left+ht-d.left+j))):ht=(b=="center"?d.left+(d.right-d.left)/2-(st.right-st.left)/2:b=="start"==et?d.left-j:d.right-(st.right-st.left)+j)-st.left,ht||ut)if(ot)nt.scrollBy(ht,ut);else{let dt=0,ft=0;if(ut){let mt=it.scrollTop;it.scrollTop+=ut/ct,ft=(it.scrollTop-mt)*ct}if(ht){let mt=it.scrollLeft;it.scrollLeft+=ht/at,dt=(it.scrollLeft-mt)*at}d={left:d.left-dt,top:d.top-ft,right:d.right-dt,bottom:d.bottom-ft},dt&&Math.abs(dt-ht)<1&&(b="nearest"),ft&&Math.abs(ft-ut)<1&&($="nearest")}if(ot)break;it=it.assignedSlot||it.parentNode}else if(it.nodeType==11)it=it.host;else break}function scrollableParent(_){let d=_.ownerDocument;for(let g=_.parentNode;g&&g!=d.body;)if(g.nodeType==1){if(g.scrollHeight>g.clientHeight||g.scrollWidth>g.clientWidth)return g;g=g.assignedSlot||g.parentNode}else if(g.nodeType==11)g=g.host;else break;return null}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(d){return this.anchorNode==d.anchorNode&&this.anchorOffset==d.anchorOffset&&this.focusNode==d.focusNode&&this.focusOffset==d.focusOffset}setRange(d){let{anchorNode:g,focusNode:b}=d;this.set(g,Math.min(d.anchorOffset,g?maxOffset(g):0),b,Math.min(d.focusOffset,b?maxOffset(b):0))}set(d,g,b,$){this.anchorNode=d,this.anchorOffset=g,this.focusNode=b,this.focusOffset=$}}let preventScrollSupported=null;function focusPreventScroll(_){if(_.setActive)return _.setActive();if(preventScrollSupported)return _.focus(preventScrollSupported);let d=[];for(let g=_;g&&(d.push(g,g.scrollTop,g.scrollLeft),g!=g.ownerDocument);g=g.parentNode);if(_.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let g=0;g<d.length;){let b=d[g++],$=d[g++],j=d[g++];b.scrollTop!=$&&(b.scrollTop=$),b.scrollLeft!=j&&(b.scrollLeft=j)}}}let scratchRange;function textRange(_,d,g=d){let b=scratchRange||(scratchRange=document.createRange());return b.setEnd(_,g),b.setStart(_,d),b}function dispatchKey(_,d,g,b){let $={key:d,code:d,keyCode:g,which:g,cancelable:!0};b&&({altKey:$.altKey,ctrlKey:$.ctrlKey,shiftKey:$.shiftKey,metaKey:$.metaKey}=b);let j=new KeyboardEvent("keydown",$);j.synthetic=!0,_.dispatchEvent(j);let _e=new KeyboardEvent("keyup",$);return _e.synthetic=!0,_.dispatchEvent(_e),j.defaultPrevented||_e.defaultPrevented}function getRoot(_){for(;_;){if(_&&(_.nodeType==9||_.nodeType==11&&_.host))return _;_=_.assignedSlot||_.parentNode}return null}function clearAttributes(_){for(;_.attributes.length;)_.removeAttributeNode(_.attributes[0])}function atElementStart(_,d){let g=d.focusNode,b=d.focusOffset;if(!g||d.anchorNode!=g||d.anchorOffset!=b)return!1;for(b=Math.min(b,maxOffset(g));;)if(b){if(g.nodeType!=1)return!1;let $=g.childNodes[b-1];$.contentEditable=="false"?b--:(g=$,b=maxOffset(g))}else{if(g==_)return!0;b=domIndex(g),g=g.parentNode}}function isScrolledToBottom(_){return _.scrollTop>Math.max(1,_.scrollHeight-_.clientHeight-4)}function textNodeBefore(_,d){for(let g=_,b=d;;){if(g.nodeType==3&&b>0)return{node:g,offset:b};if(g.nodeType==1&&b>0){if(g.contentEditable=="false")return null;g=g.childNodes[b-1],b=maxOffset(g)}else if(g.parentNode&&!isBlockElement(g))b=domIndex(g),g=g.parentNode;else return null}}function textNodeAfter(_,d){for(let g=_,b=d;;){if(g.nodeType==3&&b<g.nodeValue.length)return{node:g,offset:b};if(g.nodeType==1&&b<g.childNodes.length){if(g.contentEditable=="false")return null;g=g.childNodes[b],b=0}else if(g.parentNode&&!isBlockElement(g))b=domIndex(g)+1,g=g.parentNode;else return null}}class DOMPos{constructor(d,g,b=!0){this.node=d,this.offset=g,this.precise=b}static before(d,g){return new DOMPos(d.parentNode,domIndex(d),g)}static after(d,g){return new DOMPos(d.parentNode,domIndex(d)+1,g)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(d){let g=this.posAtStart;for(let b of this.children){if(b==d)return g;g+=b.length+b.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(d){return this.posBefore(d)+d.length}sync(d,g){if(this.flags&2){let b=this.dom,$=null,j;for(let _e of this.children){if(_e.flags&7){if(!_e.dom&&(j=$?$.nextSibling:b.firstChild)){let et=ContentView.get(j);(!et||!et.parent&&et.canReuseDOM(_e))&&_e.reuseDOM(j)}_e.sync(d,g),_e.flags&=-8}if(j=$?$.nextSibling:b.firstChild,g&&!g.written&&g.node==b&&j!=_e.dom&&(g.written=!0),_e.dom.parentNode==b)for(;j&&j!=_e.dom;)j=rm$1(j);else b.insertBefore(_e.dom,j);$=_e.dom}for(j=$?$.nextSibling:b.firstChild,j&&g&&g.node==b&&(g.written=!0);j;)j=rm$1(j)}else if(this.flags&1)for(let b of this.children)b.flags&7&&(b.sync(d,g),b.flags&=-8)}reuseDOM(d){}localPosFromDOM(d,g){let b;if(d==this.dom)b=this.dom.childNodes[g];else{let $=maxOffset(d)==0?0:g==0?-1:1;for(;;){let j=d.parentNode;if(j==this.dom)break;$==0&&j.firstChild!=j.lastChild&&(d==j.firstChild?$=-1:$=1),d=j}$<0?b=d:b=d.nextSibling}if(b==this.dom.firstChild)return 0;for(;b&&!ContentView.get(b);)b=b.nextSibling;if(!b)return this.length;for(let $=0,j=0;;$++){let _e=this.children[$];if(_e.dom==b)return j;j+=_e.length+_e.breakAfter}}domBoundsAround(d,g,b=0){let $=-1,j=-1,_e=-1,et=-1;for(let tt=0,nt=b,it=b;tt<this.children.length;tt++){let rt=this.children[tt],st=nt+rt.length;if(nt<d&&st>g)return rt.domBoundsAround(d,g,nt);if(st>=d&&$==-1&&($=tt,j=nt),nt>g&&rt.dom.parentNode==this.dom){_e=tt,et=it;break}it=st,nt=st+rt.breakAfter}return{from:j,to:et<0?b+this.length:et,startDOM:($?this.children[$-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:_e<this.children.length&&_e>=0?this.children[_e].dom:null}}markDirty(d=!1){this.flags|=2,this.markParentsDirty(d)}markParentsDirty(d){for(let g=this.parent;g;g=g.parent){if(d&&(g.flags|=2),g.flags&1)return;g.flags|=1,d=!1}}setParent(d){this.parent!=d&&(this.parent=d,this.flags&7&&this.markParentsDirty(!0))}setDOM(d){this.dom!=d&&(this.dom&&(this.dom.cmView=null),this.dom=d,d.cmView=this)}get rootView(){for(let d=this;;){let g=d.parent;if(!g)return d;d=g}}replaceChildren(d,g,b=noChildren){this.markDirty();for(let $=d;$<g;$++){let j=this.children[$];j.parent==this&&b.indexOf(j)<0&&j.destroy()}this.children.splice(d,g-d,...b);for(let $=0;$<b.length;$++)b[$].setParent(this)}ignoreMutation(d){return!1}ignoreEvent(d){return!1}childCursor(d=this.length){return new ChildCursor(this.children,d,this.children.length)}childPos(d,g=1){return this.childCursor().findPos(d,g)}toString(){let d=this.constructor.name.replace("View","");return d+(this.children.length?"("+this.children.join()+")":this.length?"["+(d=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(d){return d.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(d,g,b,$,j,_e){return!1}become(d){return!1}canReuseDOM(d){return d.constructor==this.constructor&&!((this.flags|d.flags)&8)}getSide(){return 0}destroy(){for(let d of this.children)d.parent==this&&d.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(_){let d=_.nextSibling;return _.parentNode.removeChild(_),d}class ChildCursor{constructor(d,g,b){this.children=d,this.pos=g,this.i=b,this.off=0}findPos(d,g=1){for(;;){if(d>this.pos||d==this.pos&&(g>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=d-this.pos,this;let b=this.children[--this.i];this.pos-=b.length+b.breakAfter}}}function replaceRange(_,d,g,b,$,j,_e,et,tt){let{children:nt}=_,it=nt.length?nt[d]:null,rt=j.length?j[j.length-1]:null,st=rt?rt.breakAfter:_e;if(!(d==b&&it&&!_e&&!st&&j.length<2&&it.merge(g,$,j.length?rt:null,g==0,et,tt))){if(b<nt.length){let ot=nt[b];ot&&($<ot.length||ot.breakAfter&&(rt!=null&&rt.breakAfter))?(d==b&&(ot=ot.split($),$=0),!st&&rt&&ot.merge(0,$,rt,!0,0,tt)?j[j.length-1]=ot:(($||ot.children.length&&!ot.children[0].length)&&ot.merge(0,$,null,!1,0,tt),j.push(ot))):ot!=null&&ot.breakAfter&&(rt?rt.breakAfter=1:_e=1),b++}for(it&&(it.breakAfter=_e,g>0&&(!_e&&j.length&&it.merge(g,it.length,j[0],!1,et,0)?it.breakAfter=j.shift().breakAfter:(g<it.length||it.children.length&&it.children[it.children.length-1].length==0)&&it.merge(g,it.length,null,!1,et,0),d++));d<b&&j.length;)if(nt[b-1].become(j[j.length-1]))b--,j.pop(),tt=j.length?0:et;else if(nt[d].become(j[0]))d++,j.shift(),et=j.length?0:tt;else break;!j.length&&d&&b<nt.length&&!nt[d-1].breakAfter&&nt[b].merge(0,0,nt[d-1],!1,et,tt)&&d--,(d<b||j.length)&&_.replaceChildren(d,b,j)}}function mergeChildrenInto(_,d,g,b,$,j){let _e=_.childCursor(),{i:et,off:tt}=_e.findPos(g,1),{i:nt,off:it}=_e.findPos(d,-1),rt=d-g;for(let st of b)rt+=st.length;_.length+=rt,replaceRange(_,nt,it,et,tt,b,0,$,j)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(d){super(),this.text=d}get length(){return this.text.length}createDOM(d){this.setDOM(d||document.createTextNode(this.text))}sync(d,g){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(g&&g.node==this.dom&&(g.written=!0),this.dom.nodeValue=this.text)}reuseDOM(d){d.nodeType==3&&this.createDOM(d)}merge(d,g,b){return this.flags&8||b&&(!(b instanceof TextView)||this.length-(g-d)+b.length>MaxJoinLen||b.flags&8)?!1:(this.text=this.text.slice(0,d)+(b?b.text:"")+this.text.slice(g),this.markDirty(),!0)}split(d){let g=new TextView(this.text.slice(d));return this.text=this.text.slice(0,d),this.markDirty(),g.flags|=this.flags&8,g}localPosFromDOM(d,g){return d==this.dom?g:g?this.text.length:0}domAtPos(d){return new DOMPos(this.dom,d)}domBoundsAround(d,g,b){return{from:b,to:b+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(d,g){return textCoords(this.dom,d,g)}}class MarkView extends ContentView{constructor(d,g=[],b=0){super(),this.mark=d,this.children=g,this.length=b;for(let $ of g)$.setParent(this)}setAttrs(d){if(clearAttributes(d),this.mark.class&&(d.className=this.mark.class),this.mark.attrs)for(let g in this.mark.attrs)d.setAttribute(g,this.mark.attrs[g]);return d}canReuseDOM(d){return super.canReuseDOM(d)&&!((this.flags|d.flags)&8)}reuseDOM(d){d.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(d),this.flags|=6)}sync(d,g){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(d,g)}merge(d,g,b,$,j,_e){return b&&(!(b instanceof MarkView&&b.mark.eq(this.mark))||d&&j<=0||g<this.length&&_e<=0)?!1:(mergeChildrenInto(this,d,g,b?b.children.slice():[],j-1,_e-1),this.markDirty(),!0)}split(d){let g=[],b=0,$=-1,j=0;for(let et of this.children){let tt=b+et.length;tt>d&&g.push(b<d?et.split(d-b):et),$<0&&b>=d&&($=j),b=tt,j++}let _e=this.length-d;return this.length=d,$>-1&&(this.children.length=$,this.markDirty()),new MarkView(this.mark,g,_e)}domAtPos(d){return inlineDOMAtPos(this,d)}coordsAt(d,g){return coordsInChildren(this,d,g)}}function textCoords(_,d,g){let b=_.nodeValue.length;d>b&&(d=b);let $=d,j=d,_e=0;d==0&&g<0||d==b&&g>=0?browser.chrome||browser.gecko||(d?($--,_e=1):j<b&&(j++,_e=-1)):g<0?$--:j<b&&j++;let et=textRange(_,$,j).getClientRects();if(!et.length)return null;let tt=et[(_e?_e<0:g>=0)?0:et.length-1];return browser.safari&&!_e&&tt.width==0&&(tt=Array.prototype.find.call(et,nt=>nt.width)||tt),_e?flattenRect(tt,_e<0):tt||null}class WidgetView extends ContentView{static create(d,g,b){return new WidgetView(d,g,b)}constructor(d,g,b){super(),this.widget=d,this.length=g,this.side=b,this.prevWidget=null}split(d){let g=WidgetView.create(this.widget,this.length-d,this.side);return this.length-=d,g}sync(d){(!this.dom||!this.widget.updateDOM(this.dom,d))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(d)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(d,g,b,$,j,_e){return b&&(!(b instanceof WidgetView)||!this.widget.compare(b.widget)||d>0&&j<=0||g<this.length&&_e<=0)?!1:(this.length=d+(b?b.length:0)+(this.length-g),!0)}become(d){return d instanceof WidgetView&&d.side==this.side&&this.widget.constructor==d.widget.constructor?(this.widget.compare(d.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=d.widget,this.length=d.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(d){return this.widget.ignoreEvent(d)}get overrideDOMText(){if(this.length==0)return Text.empty;let d=this;for(;d.parent;)d=d.parent;let{view:g}=d,b=g&&g.state.doc,$=this.posAtStart;return b?b.slice($,$+this.length):Text.empty}domAtPos(d){return(this.length?d==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,d==this.length)}domBoundsAround(){return null}coordsAt(d,g){let b=this.widget.coordsAt(this.dom,d,g);if(b)return b;let $=this.dom.getClientRects(),j=null;if(!$.length)return null;let _e=this.side?this.side<0:d>0;for(let et=_e?$.length-1:0;j=$[et],!(d>0?et==0:et==$.length-1||j.top<j.bottom);et+=_e?-1:1);return flattenRect(j,!_e)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(d){super(),this.side=d}get length(){return 0}merge(){return!1}become(d){return d instanceof WidgetBufferView&&d.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let d=document.createElement("img");d.className="cm-widgetBuffer",d.setAttribute("aria-hidden","true"),this.setDOM(d)}}getSide(){return this.side}domAtPos(d){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(d){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(_,d){let g=_.dom,{children:b}=_,$=0;for(let j=0;$<b.length;$++){let _e=b[$],et=j+_e.length;if(!(et==j&&_e.getSide()<=0)){if(d>j&&d<et&&_e.dom.parentNode==g)return _e.domAtPos(d-j);if(d<=j)break;j=et}}for(let j=$;j>0;j--){let _e=b[j-1];if(_e.dom.parentNode==g)return _e.domAtPos(_e.length)}for(let j=$;j<b.length;j++){let _e=b[j];if(_e.dom.parentNode==g)return _e.domAtPos(0)}return new DOMPos(g,0)}function joinInlineInto(_,d,g){let b,{children:$}=_;g>0&&d instanceof MarkView&&$.length&&(b=$[$.length-1])instanceof MarkView&&b.mark.eq(d.mark)?joinInlineInto(b,d.children[0],g-1):($.push(d),d.setParent(_)),_.length+=d.length}function coordsInChildren(_,d,g){let b=null,$=-1,j=null,_e=-1;function et(nt,it){for(let rt=0,st=0;rt<nt.children.length&&st<=it;rt++){let ot=nt.children[rt],at=st+ot.length;at>=it&&(ot.children.length?et(ot,it-st):(!j||j.isHidden&&g>0)&&(at>it||st==at&&ot.getSide()>0)?(j=ot,_e=it-st):(st<it||st==at&&ot.getSide()<0&&!ot.isHidden)&&(b=ot,$=it-st)),st=at}}et(_,d);let tt=(g<0?b:j)||b||j;return tt?tt.coordsAt(Math.max(0,tt==b?$:_e),g):fallbackRect(_)}function fallbackRect(_){let d=_.dom.lastChild;if(!d)return _.dom.getBoundingClientRect();let g=clientRectsFor(d);return g[g.length-1]||null}function combineAttrs(_,d){for(let g in _)g=="class"&&d.class?d.class+=" "+_.class:g=="style"&&d.style?d.style+=";"+_.style:d[g]=_[g];return d}const noAttrs$1=Object.create(null);function attrsEq(_,d,g){if(_==d)return!0;_||(_=noAttrs$1),d||(d=noAttrs$1);let b=Object.keys(_),$=Object.keys(d);if(b.length-(g&&b.indexOf(g)>-1?1:0)!=$.length-(g&&$.indexOf(g)>-1?1:0))return!1;for(let j of b)if(j!=g&&($.indexOf(j)==-1||_[j]!==d[j]))return!1;return!0}function updateAttrs(_,d,g){let b=!1;if(d)for(let $ in d)g&&$ in g||(b=!0,$=="style"?_.style.cssText="":_.removeAttribute($));if(g)for(let $ in g)d&&d[$]==g[$]||(b=!0,$=="style"?_.style.cssText=g[$]:_.setAttribute($,g[$]));return b}function getAttrs(_){let d=Object.create(null);for(let g=0;g<_.attributes.length;g++){let b=_.attributes[g];d[b.name]=b.value}return d}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(d,g,b,$,j,_e){if(b){if(!(b instanceof LineView))return!1;this.dom||b.transferDOM(this)}return $&&this.setDeco(b?b.attrs:null),mergeChildrenInto(this,d,g,b?b.children.slice():[],j,_e),!0}split(d){let g=new LineView;if(g.breakAfter=this.breakAfter,this.length==0)return g;let{i:b,off:$}=this.childPos(d);$&&(g.append(this.children[b].split($),0),this.children[b].merge($,this.children[b].length,null,!1,0,0),b++);for(let j=b;j<this.children.length;j++)g.append(this.children[j],0);for(;b>0&&this.children[b-1].length==0;)this.children[--b].destroy();return this.children.length=b,this.markDirty(),this.length=d,g}transferDOM(d){this.dom&&(this.markDirty(),d.setDOM(this.dom),d.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(d){attrsEq(this.attrs,d)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=d)}append(d,g){joinInlineInto(this,d,g)}addLineDeco(d){let g=d.spec.attributes,b=d.spec.class;g&&(this.attrs=combineAttrs(g,this.attrs||{})),b&&(this.attrs=combineAttrs({class:b},this.attrs||{}))}domAtPos(d){return inlineDOMAtPos(this,d)}reuseDOM(d){d.nodeName=="DIV"&&(this.setDOM(d),this.flags|=6)}sync(d,g){var b;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(d,g);let $=this.dom.lastChild;for(;$&&ContentView.get($)instanceof MarkView;)$=$.lastChild;if(!$||!this.length||$.nodeName!="BR"&&((b=ContentView.get($))===null||b===void 0?void 0:b.isEditable)==!1&&(!browser.ios||!this.children.some(j=>j instanceof TextView))){let j=document.createElement("BR");j.cmIgnore=!0,this.dom.appendChild(j)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let d=0,g;for(let b of this.children){if(!(b instanceof TextView)||/[^ -~]/.test(b.text))return null;let $=clientRectsFor(b.dom);if($.length!=1)return null;d+=$[0].width,g=$[0].height}return d?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:d/this.length,textHeight:g}:null}coordsAt(d,g){let b=coordsInChildren(this,d,g);if(!this.children.length&&b&&this.parent){let{heightOracle:$}=this.parent.view.viewState,j=b.bottom-b.top;if(Math.abs(j-$.lineHeight)<2&&$.textHeight<j){let _e=(j-$.textHeight)/2;return{top:b.top+_e,bottom:b.bottom-_e,left:b.left,right:b.left}}}return b}become(d){return d instanceof LineView&&this.children.length==0&&d.children.length==0&&attrsEq(this.attrs,d.attrs)&&this.breakAfter==d.breakAfter}covers(){return!0}static find(d,g){for(let b=0,$=0;b<d.children.length;b++){let j=d.children[b],_e=$+j.length;if(_e>=g){if(j instanceof LineView)return j;if(_e>g)break}$=_e+j.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(d,g,b){super(),this.widget=d,this.length=g,this.deco=b,this.breakAfter=0,this.prevWidget=null}merge(d,g,b,$,j,_e){return b&&(!(b instanceof BlockWidgetView)||!this.widget.compare(b.widget)||d>0&&j<=0||g<this.length&&_e<=0)?!1:(this.length=d+(b?b.length:0)+(this.length-g),!0)}domAtPos(d){return d==0?DOMPos.before(this.dom):DOMPos.after(this.dom,d==this.length)}split(d){let g=this.length-d;this.length=d;let b=new BlockWidgetView(this.widget,g,this.deco);return b.breakAfter=this.breakAfter,b}get children(){return noChildren}sync(d){(!this.dom||!this.widget.updateDOM(this.dom,d))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(d)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(d){return d instanceof BlockWidgetView&&d.widget.constructor==this.widget.constructor?(d.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=d.widget,this.length=d.length,this.deco=d.deco,this.breakAfter=d.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(d){return this.widget.ignoreEvent(d)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(d,g){return this.widget.coordsAt(this.dom,d,g)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(d){let{startSide:g,endSide:b}=this.deco;return g==b?!1:d<0?g<0:b>0}}class WidgetType{eq(d){return!1}updateDOM(d,g){return!1}compare(d){return this==d||this.constructor==d.constructor&&this.eq(d)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(d){return!0}coordsAt(d,g,b){return null}get isHidden(){return!1}get editable(){return!1}destroy(d){}}var BlockType=function(_){return _[_.Text=0]="Text",_[_.WidgetBefore=1]="WidgetBefore",_[_.WidgetAfter=2]="WidgetAfter",_[_.WidgetRange=3]="WidgetRange",_}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(d,g,b,$){super(),this.startSide=d,this.endSide=g,this.widget=b,this.spec=$}get heightRelevant(){return!1}static mark(d){return new MarkDecoration(d)}static widget(d){let g=Math.max(-1e4,Math.min(1e4,d.side||0)),b=!!d.block;return g+=b&&!d.inlineOrder?g>0?3e8:-4e8:g>0?1e8:-1e8,new PointDecoration(d,g,g,b,d.widget||null,!1)}static replace(d){let g=!!d.block,b,$;if(d.isBlockGap)b=-5e8,$=4e8;else{let{start:j,end:_e}=getInclusive(d,g);b=(j?g?-3e8:-1:5e8)-1,$=(_e?g?2e8:1:-6e8)+1}return new PointDecoration(d,b,$,g,d.widget||null,!0)}static line(d){return new LineDecoration(d)}static set(d,g=!1){return RangeSet.of(d,g)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(d){let{start:g,end:b}=getInclusive(d);super(g?-1:5e8,b?1:-6e8,null,d),this.tagName=d.tagName||"span",this.class=d.class||"",this.attrs=d.attributes||null}eq(d){var g,b;return this==d||d instanceof MarkDecoration&&this.tagName==d.tagName&&(this.class||((g=this.attrs)===null||g===void 0?void 0:g.class))==(d.class||((b=d.attrs)===null||b===void 0?void 0:b.class))&&attrsEq(this.attrs,d.attrs,"class")}range(d,g=d){if(d>=g)throw new RangeError("Mark decorations may not be empty");return super.range(d,g)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(d){super(-2e8,-2e8,null,d)}eq(d){return d instanceof LineDecoration&&this.spec.class==d.spec.class&&attrsEq(this.spec.attributes,d.spec.attributes)}range(d,g=d){if(g!=d)throw new RangeError("Line decoration ranges must be zero-length");return super.range(d,g)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(d,g,b,$,j,_e){super(g,b,j,d),this.block=$,this.isReplace=_e,this.mapMode=$?g<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(d){return d instanceof PointDecoration&&widgetsEq(this.widget,d.widget)&&this.block==d.block&&this.startSide==d.startSide&&this.endSide==d.endSide}range(d,g=d){if(this.isReplace&&(d>g||d==g&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&g!=d)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(d,g)}}PointDecoration.prototype.point=!0;function getInclusive(_,d=!1){let{inclusiveStart:g,inclusiveEnd:b}=_;return g==null&&(g=_.inclusive),b==null&&(b=_.inclusive),{start:g??d,end:b??d}}function widgetsEq(_,d){return _==d||!!(_&&d&&_.compare(d))}function addRange(_,d,g,b=0){let $=g.length-1;$>=0&&g[$]+b>=_?g[$]=Math.max(g[$],d):g.push(_,d)}class ContentBuilder{constructor(d,g,b,$){this.doc=d,this.pos=g,this.end=b,this.disallowBlockEffectsFor=$,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=d.iter(),this.skip=g}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let d=this.content[this.content.length-1];return!(d.breakAfter||d instanceof BlockWidgetView&&d.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(d=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),d),d.length),this.pendingBuffer=0)}addBlockWidget(d){this.flushBuffer(),this.curLine=null,this.content.push(d)}finish(d){this.pendingBuffer&&d<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(d&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(d,g,b){for(;d>0;){if(this.textOff==this.text.length){let{value:j,lineBreak:_e,done:et}=this.cursor.next(this.skip);if(this.skip=0,et)throw new Error("Ran out of text content when drawing inline views");if(_e){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,d--;continue}else this.text=j,this.textOff=0}let $=Math.min(this.text.length-this.textOff,d,512);this.flushBuffer(g.slice(g.length-b)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+$)),g),b),this.atCursorPos=!0,this.textOff+=$,d-=$,b=0}}span(d,g,b,$){this.buildText(g-d,b,$),this.pos=g,this.openStart<0&&(this.openStart=$)}point(d,g,b,$,j,_e){if(this.disallowBlockEffectsFor[_e]&&b instanceof PointDecoration){if(b.block)throw new RangeError("Block decorations may not be specified via plugins");if(g>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let et=g-d;if(b instanceof PointDecoration)if(b.block)b.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(b.widget||NullWidget.block,et,b));else{let tt=WidgetView.create(b.widget||NullWidget.inline,et,et?0:b.startSide),nt=this.atCursorPos&&!tt.isEditable&&j<=$.length&&(d<g||b.startSide>0),it=!tt.isEditable&&(d<g||j>$.length||b.startSide<=0),rt=this.getLine();this.pendingBuffer==2&&!nt&&!tt.isEditable&&(this.pendingBuffer=0),this.flushBuffer($),nt&&(rt.append(wrapMarks(new WidgetBufferView(1),$),j),j=$.length+Math.max(0,j-$.length)),rt.append(wrapMarks(tt,$),j),this.atCursorPos=it,this.pendingBuffer=it?d<g||j>$.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=$.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(b);et&&(this.textOff+et<=this.text.length?this.textOff+=et:(this.skip+=et-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=g),this.openStart<0&&(this.openStart=j)}static build(d,g,b,$,j){let _e=new ContentBuilder(d,g,b,j);return _e.openEnd=RangeSet.spans($,g,b,_e),_e.openStart<0&&(_e.openStart=_e.openEnd),_e.finish(_e.openEnd),_e}}function wrapMarks(_,d){for(let g of d)_=new MarkView(g,[_],_.length);return _}class NullWidget extends WidgetType{constructor(d){super(),this.tag=d}eq(d){return d.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(d){return d.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span");NullWidget.block=new NullWidget("div");var Direction=function(_){return _[_.LTR=0]="LTR",_[_.RTL=1]="RTL",_}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(_){let d=[];for(let g=0;g<_.length;g++)d.push(1<<+_[g]);return d}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let _ of["()","[]","{}"]){let d=_.charCodeAt(0),g=_.charCodeAt(1);Brackets[d]=g,Brackets[g]=-d}function charType(_){return _<=247?LowTypes[_]:1424<=_&&_<=1524?2:1536<=_&&_<=1785?ArabicTypes[_-1536]:1774<=_&&_<=2220?4:8192<=_&&_<=8204?256:64336<=_&&_<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(d,g,b){this.from=d,this.to=g,this.level=b}side(d,g){return this.dir==g==d?this.to:this.from}forward(d,g){return d==(this.dir==g)}static find(d,g,b,$){let j=-1;for(let _e=0;_e<d.length;_e++){let et=d[_e];if(et.from<=g&&et.to>=g){if(et.level==b)return _e;(j<0||($!=0?$<0?et.from<g:et.to>g:d[j].level>et.level))&&(j=_e)}}if(j<0)throw new RangeError("Index out of range");return j}}function isolatesEq(_,d){if(_.length!=d.length)return!1;for(let g=0;g<_.length;g++){let b=_[g],$=d[g];if(b.from!=$.from||b.to!=$.to||b.direction!=$.direction||!isolatesEq(b.inner,$.inner))return!1}return!0}const types=[];function computeCharTypes(_,d,g,b,$){for(let j=0;j<=b.length;j++){let _e=j?b[j-1].to:d,et=j<b.length?b[j].from:g,tt=j?256:$;for(let nt=_e,it=tt,rt=tt;nt<et;nt++){let st=charType(_.charCodeAt(nt));st==512?st=it:st==8&&rt==4&&(st=16),types[nt]=st==4?2:st,st&7&&(rt=st),it=st}for(let nt=_e,it=tt,rt=tt;nt<et;nt++){let st=types[nt];if(st==128)nt<et-1&&it==types[nt+1]&&it&24?st=types[nt]=it:types[nt]=256;else if(st==64){let ot=nt+1;for(;ot<et&&types[ot]==64;)ot++;let at=nt&&it==8||ot<g&&types[ot]==8?rt==1?1:8:256;for(let ct=nt;ct<ot;ct++)types[ct]=at;nt=ot-1}else st==8&&rt==1&&(types[nt]=1);it=st,st&7&&(rt=st)}}}function processBracketPairs(_,d,g,b,$){let j=$==1?2:1;for(let _e=0,et=0,tt=0;_e<=b.length;_e++){let nt=_e?b[_e-1].to:d,it=_e<b.length?b[_e].from:g;for(let rt=nt,st,ot,at;rt<it;rt++)if(ot=Brackets[st=_.charCodeAt(rt)])if(ot<0){for(let ct=et-3;ct>=0;ct-=3)if(BracketStack[ct+1]==-ot){let ht=BracketStack[ct+2],ut=ht&2?$:ht&4?ht&1?j:$:0;ut&&(types[rt]=types[BracketStack[ct]]=ut),et=ct;break}}else{if(BracketStack.length==189)break;BracketStack[et++]=rt,BracketStack[et++]=st,BracketStack[et++]=tt}else if((at=types[rt])==2||at==1){let ct=at==$;tt=ct?0:1;for(let ht=et-3;ht>=0;ht-=3){let ut=BracketStack[ht+2];if(ut&2)break;if(ct)BracketStack[ht+2]|=2;else{if(ut&4)break;BracketStack[ht+2]|=4}}}}}function processNeutrals(_,d,g,b){for(let $=0,j=b;$<=g.length;$++){let _e=$?g[$-1].to:_,et=$<g.length?g[$].from:d;for(let tt=_e;tt<et;){let nt=types[tt];if(nt==256){let it=tt+1;for(;;)if(it==et){if($==g.length)break;it=g[$++].to,et=$<g.length?g[$].from:d}else if(types[it]==256)it++;else break;let rt=j==1,st=(it<d?types[it]:b)==1,ot=rt==st?rt?1:2:b;for(let at=it,ct=$,ht=ct?g[ct-1].to:_;at>tt;)at==ht&&(at=g[--ct].from,ht=ct?g[ct-1].to:_),types[--at]=ot;tt=it}else j=nt,tt++}}}function emitSpans(_,d,g,b,$,j,_e){let et=b%2?2:1;if(b%2==$%2)for(let tt=d,nt=0;tt<g;){let it=!0,rt=!1;if(nt==j.length||tt<j[nt].from){let ct=types[tt];ct!=et&&(it=!1,rt=ct==16)}let st=!it&&et==1?[]:null,ot=it?b:b+1,at=tt;e:for(;;)if(nt<j.length&&at==j[nt].from){if(rt)break e;let ct=j[nt];if(!it)for(let ht=ct.to,ut=nt+1;;){if(ht==g)break e;if(ut<j.length&&j[ut].from==ht)ht=j[ut++].to;else{if(types[ht]==et)break e;break}}if(nt++,st)st.push(ct);else{ct.from>tt&&_e.push(new BidiSpan(tt,ct.from,ot));let ht=ct.direction==LTR!=!(ot%2);computeSectionOrder(_,ht?b+1:b,$,ct.inner,ct.from,ct.to,_e),tt=ct.to}at=ct.to}else{if(at==g||(it?types[at]!=et:types[at]==et))break;at++}st?emitSpans(_,tt,at,b+1,$,st,_e):tt<at&&_e.push(new BidiSpan(tt,at,ot)),tt=at}else for(let tt=g,nt=j.length;tt>d;){let it=!0,rt=!1;if(!nt||tt>j[nt-1].to){let ct=types[tt-1];ct!=et&&(it=!1,rt=ct==16)}let st=!it&&et==1?[]:null,ot=it?b:b+1,at=tt;e:for(;;)if(nt&&at==j[nt-1].to){if(rt)break e;let ct=j[--nt];if(!it)for(let ht=ct.from,ut=nt;;){if(ht==d)break e;if(ut&&j[ut-1].to==ht)ht=j[--ut].from;else{if(types[ht-1]==et)break e;break}}if(st)st.push(ct);else{ct.to<tt&&_e.push(new BidiSpan(ct.to,tt,ot));let ht=ct.direction==LTR!=!(ot%2);computeSectionOrder(_,ht?b+1:b,$,ct.inner,ct.from,ct.to,_e),tt=ct.from}at=ct.from}else{if(at==d||(it?types[at-1]!=et:types[at-1]==et))break;at--}st?emitSpans(_,at,tt,b+1,$,st,_e):at<tt&&_e.push(new BidiSpan(at,tt,ot)),tt=at}}function computeSectionOrder(_,d,g,b,$,j,_e){let et=d%2?2:1;computeCharTypes(_,$,j,b,et),processBracketPairs(_,$,j,b,et),processNeutrals($,j,b,et),emitSpans(_,$,j,d,g,b,_e)}function computeOrder(_,d,g){if(!_)return[new BidiSpan(0,0,d==RTL?1:0)];if(d==LTR&&!g.length&&!BidiRE.test(_))return trivialOrder(_.length);if(g.length)for(;_.length>types.length;)types[types.length]=256;let b=[],$=d==LTR?0:1;return computeSectionOrder(_,$,$,g,0,_.length,b),b}function trivialOrder(_){return[new BidiSpan(0,_,0)]}let movedOver="";function moveVisually(_,d,g,b,$){var j;let _e=b.head-_.from,et=BidiSpan.find(d,_e,(j=b.bidiLevel)!==null&&j!==void 0?j:-1,b.assoc),tt=d[et],nt=tt.side($,g);if(_e==nt){let st=et+=$?1:-1;if(st<0||st>=d.length)return null;tt=d[et=st],_e=tt.side(!$,g),nt=tt.side($,g)}let it=findClusterBreak(_.text,_e,tt.forward($,g));(it<tt.from||it>tt.to)&&(it=nt),movedOver=_.text.slice(Math.min(_e,it),Math.max(_e,it));let rt=et==($?d.length-1:0)?null:d[et+($?1:-1)];return rt&&it==nt&&rt.level+($?0:1)<tt.level?EditorSelection.cursor(rt.side(!$,g)+_.from,rt.forward($,g)?1:-1,rt.level):EditorSelection.cursor(it+_.from,tt.forward($,g)?-1:1,tt.level)}function autoDirection(_,d,g){for(let b=d;b<g;b++){let $=charType(_.charCodeAt(b));if($==1)return LTR;if($==2||$==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:_=>_.some(d=>d)}),nativeSelectionHidden=Facet.define({combine:_=>_.some(d=>d)}),scrollHandler=Facet.define();class ScrollTarget{constructor(d,g="nearest",b="nearest",$=5,j=5,_e=!1){this.range=d,this.y=g,this.x=b,this.yMargin=$,this.xMargin=j,this.isSnapshot=_e}map(d){return d.empty?this:new ScrollTarget(this.range.map(d),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(d){return this.range.to<=d.doc.length?this:new ScrollTarget(EditorSelection.cursor(d.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(_,d)=>_.map(d)}),setEditContextFormatting=StateEffect.define();function logException(_,d,g){let b=_.facet(exceptionSink);b.length?b[0](d):window.onerror?window.onerror(String(d),g,void 0,void 0,d):g?console.error(g+":",d):console.error(d)}const editable=Facet.define({combine:_=>_.length?_[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(d,g,b,$,j){this.id=d,this.create=g,this.domEventHandlers=b,this.domEventObservers=$,this.extension=j(this)}static define(d,g){const{eventHandlers:b,eventObservers:$,provide:j,decorations:_e}=g||{};return new ViewPlugin(nextPluginID++,d,b,$,et=>{let tt=[viewPlugin.of(et)];return _e&&tt.push(decorations.of(nt=>{let it=nt.plugin(et);return it?_e(it):Decoration.none})),j&&tt.push(j(et)),tt})}static fromClass(d,g){return ViewPlugin.define(b=>new d(b),g)}}class PluginInstance{constructor(d){this.spec=d,this.mustUpdate=null,this.value=null}update(d){if(this.value){if(this.mustUpdate){let g=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(g)}catch(b){if(logException(g.state,b,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(d)}catch(g){logException(d.state,g,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(d){var g;if(!((g=this.value)===null||g===void 0)&&g.destroy)try{this.value.destroy()}catch(b){logException(d.state,b,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(_,d){let g=_.state.facet(bidiIsolatedRanges);if(!g.length)return g;let b=g.map(j=>j instanceof Function?j(_):j),$=[];return RangeSet.spans(b,d.from,d.to,{point(){},span(j,_e,et,tt){let nt=j-d.from,it=_e-d.from,rt=$;for(let st=et.length-1;st>=0;st--,tt--){let ot=et[st].spec.bidiIsolate,at;if(ot==null&&(ot=autoDirection(d.text,nt,it)),tt>0&&rt.length&&(at=rt[rt.length-1]).to==nt&&at.direction==ot)at.to=it,rt=at.inner;else{let ct={from:nt,to:it,direction:ot,inner:[]};rt.push(ct),rt=ct.inner}}}}),$}const scrollMargins=Facet.define();function getScrollMargins(_){let d=0,g=0,b=0,$=0;for(let j of _.state.facet(scrollMargins)){let _e=j(_);_e&&(_e.left!=null&&(d=Math.max(d,_e.left)),_e.right!=null&&(g=Math.max(g,_e.right)),_e.top!=null&&(b=Math.max(b,_e.top)),_e.bottom!=null&&($=Math.max($,_e.bottom)))}return{left:d,right:g,top:b,bottom:$}}const styleModule=Facet.define();class ChangedRange{constructor(d,g,b,$){this.fromA=d,this.toA=g,this.fromB=b,this.toB=$}join(d){return new ChangedRange(Math.min(this.fromA,d.fromA),Math.max(this.toA,d.toA),Math.min(this.fromB,d.fromB),Math.max(this.toB,d.toB))}addToSet(d){let g=d.length,b=this;for(;g>0;g--){let $=d[g-1];if(!($.fromA>b.toA)){if($.toA<b.fromA)break;b=b.join($),d.splice(g-1,1)}}return d.splice(g,0,b),d}static extendWithRanges(d,g){if(g.length==0)return d;let b=[];for(let $=0,j=0,_e=0,et=0;;$++){let tt=$==d.length?null:d[$],nt=_e-et,it=tt?tt.fromB:1e9;for(;j<g.length&&g[j]<it;){let rt=g[j],st=g[j+1],ot=Math.max(et,rt),at=Math.min(it,st);if(ot<=at&&new ChangedRange(ot+nt,at+nt,ot,at).addToSet(b),st>it)break;j+=2}if(!tt)return b;new ChangedRange(tt.fromA,tt.toA,tt.fromB,tt.toB).addToSet(b),_e=tt.toA,et=tt.toB}}}class ViewUpdate{constructor(d,g,b){this.view=d,this.state=g,this.transactions=b,this.flags=0,this.startState=d.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let j of b)this.changes=this.changes.compose(j.changes);let $=[];this.changes.iterChangedRanges((j,_e,et,tt)=>$.push(new ChangedRange(j,_e,et,tt))),this.changedRanges=$}static create(d,g,b){return new ViewUpdate(d,g,b)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(d=>d.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(d){super(),this.view=d,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(d.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,d.state.doc.length)],0,null)}update(d){var g;let b=d.changedRanges;this.minWidth>0&&b.length&&(b.every(({fromA:nt,toA:it})=>it<this.minWidthFrom||nt>this.minWidthTo)?(this.minWidthFrom=d.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=d.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(d);let $=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((g=this.domChanged)===null||g===void 0)&&g.newSel?$=this.domChanged.newSel.head:!touchesComposition(d.changes,this.hasComposition)&&!d.selectionSet&&($=d.state.selection.main.head));let j=$>-1?findCompositionRange(this.view,d.changes,$):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:nt,to:it}=this.hasComposition;b=new ChangedRange(nt,it,d.changes.mapPos(nt,-1),d.changes.mapPos(it,1)).addToSet(b.slice())}this.hasComposition=j?{from:j.range.fromB,to:j.range.toB}:null,(browser.ie||browser.chrome)&&!j&&d&&d.state.doc.lines!=d.startState.doc.lines&&(this.forceSelection=!0);let _e=this.decorations,et=this.updateDeco(),tt=findChangedDeco(_e,et,d.changes);return b=ChangedRange.extendWithRanges(b,tt),!(this.flags&7)&&b.length==0?!1:(this.updateInner(b,d.startState.doc.length,j),d.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(d,g,b){this.view.viewState.mustMeasureContent=!0,this.updateChildren(d,g,b);let{observer:$}=this.view;$.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let _e=browser.chrome||browser.ios?{node:$.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,_e),this.flags&=-8,_e&&(_e.written||$.selectionRange.focusNode!=_e.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(_e=>_e.flags&=-9);let j=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let _e of this.children)_e instanceof BlockWidgetView&&_e.widget instanceof BlockGapWidget&&j.push(_e.dom);$.updateGaps(j)}updateChildren(d,g,b){let $=b?b.range.addToSet(d.slice()):d,j=this.childCursor(g);for(let _e=$.length-1;;_e--){let et=_e>=0?$[_e]:null;if(!et)break;let{fromA:tt,toA:nt,fromB:it,toB:rt}=et,st,ot,at,ct;if(b&&b.range.fromB<rt&&b.range.toB>it){let mt=ContentBuilder.build(this.view.state.doc,it,b.range.fromB,this.decorations,this.dynamicDecorationMap),pt=ContentBuilder.build(this.view.state.doc,b.range.toB,rt,this.decorations,this.dynamicDecorationMap);ot=mt.breakAtStart,at=mt.openStart,ct=pt.openEnd;let Ot=this.compositionView(b);pt.breakAtStart?Ot.breakAfter=1:pt.content.length&&Ot.merge(Ot.length,Ot.length,pt.content[0],!1,pt.openStart,0)&&(Ot.breakAfter=pt.content[0].breakAfter,pt.content.shift()),mt.content.length&&Ot.merge(0,0,mt.content[mt.content.length-1],!0,0,mt.openEnd)&&mt.content.pop(),st=mt.content.concat(Ot).concat(pt.content)}else({content:st,breakAtStart:ot,openStart:at,openEnd:ct}=ContentBuilder.build(this.view.state.doc,it,rt,this.decorations,this.dynamicDecorationMap));let{i:ht,off:ut}=j.findPos(nt,1),{i:dt,off:ft}=j.findPos(tt,-1);replaceRange(this,dt,ft,ht,ut,st,ot,at,ct)}b&&this.fixCompositionDOM(b)}updateEditContextFormatting(d){this.editContextFormatting=this.editContextFormatting.map(d.changes);for(let g of d.transactions)for(let b of g.effects)b.is(setEditContextFormatting)&&(this.editContextFormatting=b.value)}compositionView(d){let g=new TextView(d.text.nodeValue);g.flags|=8;for(let{deco:$}of d.marks)g=new MarkView($,[g],g.length);let b=new LineView;return b.append(g,0),b}fixCompositionDOM(d){let g=(j,_e)=>{_e.flags|=8|(_e.children.some(tt=>tt.flags&7)?1:0),this.markedForComposition.add(_e);let et=ContentView.get(j);et&&et!=_e&&(et.dom=null),_e.setDOM(j)},b=this.childPos(d.range.fromB,1),$=this.children[b.i];g(d.line,$);for(let j=d.marks.length-1;j>=-1;j--)b=$.childPos(b.off,1),$=$.children[b.i],g(j>=0?d.marks[j].node:d.text,$)}updateSelection(d=!1,g=!1){(d||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let b=this.view.root.activeElement,$=b==this.dom,j=!$&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(b&&this.dom.contains(b));if(!($||g||j))return;let _e=this.forceSelection;this.forceSelection=!1;let et=this.view.state.selection.main,tt=this.moveToLine(this.domAtPos(et.anchor)),nt=et.empty?tt:this.moveToLine(this.domAtPos(et.head));if(browser.gecko&&et.empty&&!this.hasComposition&&betweenUneditable(tt)){let rt=document.createTextNode("");this.view.observer.ignore(()=>tt.node.insertBefore(rt,tt.node.childNodes[tt.offset]||null)),tt=nt=new DOMPos(rt,0),_e=!0}let it=this.view.observer.selectionRange;(_e||!it.focusNode||(!isEquivalentPosition(tt.node,tt.offset,it.anchorNode,it.anchorOffset)||!isEquivalentPosition(nt.node,nt.offset,it.focusNode,it.focusOffset))&&!this.suppressWidgetCursorChange(it,et))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(it.focusNode)&&inUneditable(it.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let rt=getSelection(this.view.root);if(rt)if(et.empty){if(browser.gecko){let st=nextToUneditable(tt.node,tt.offset);if(st&&st!=3){let ot=(st==1?textNodeBefore:textNodeAfter)(tt.node,tt.offset);ot&&(tt=new DOMPos(ot.node,ot.offset))}}rt.collapse(tt.node,tt.offset),et.bidiLevel!=null&&rt.caretBidiLevel!==void 0&&(rt.caretBidiLevel=et.bidiLevel)}else if(rt.extend){rt.collapse(tt.node,tt.offset);try{rt.extend(nt.node,nt.offset)}catch{}}else{let st=document.createRange();et.anchor>et.head&&([tt,nt]=[nt,tt]),st.setEnd(nt.node,nt.offset),st.setStart(tt.node,tt.offset),rt.removeAllRanges(),rt.addRange(st)}j&&this.view.root.activeElement==this.dom&&(this.dom.blur(),b&&b.focus())}),this.view.observer.setSelectionRange(tt,nt)),this.impreciseAnchor=tt.precise?null:new DOMPos(it.anchorNode,it.anchorOffset),this.impreciseHead=nt.precise?null:new DOMPos(it.focusNode,it.focusOffset)}suppressWidgetCursorChange(d,g){return this.hasComposition&&g.empty&&isEquivalentPosition(d.focusNode,d.focusOffset,d.anchorNode,d.anchorOffset)&&this.posFromDOM(d.focusNode,d.focusOffset)==g.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:d}=this,g=d.state.selection.main,b=getSelection(d.root),{anchorNode:$,anchorOffset:j}=d.observer.selectionRange;if(!b||!g.empty||!g.assoc||!b.modify)return;let _e=LineView.find(this,g.head);if(!_e)return;let et=_e.posAtStart;if(g.head==et||g.head==et+_e.length)return;let tt=this.coordsAt(g.head,-1),nt=this.coordsAt(g.head,1);if(!tt||!nt||tt.bottom>nt.top)return;let it=this.domAtPos(g.head+g.assoc);b.collapse(it.node,it.offset),b.modify("move",g.assoc<0?"forward":"backward","lineboundary"),d.observer.readSelectionRange();let rt=d.observer.selectionRange;d.docView.posFromDOM(rt.anchorNode,rt.anchorOffset)!=g.from&&b.collapse($,j)}moveToLine(d){let g=this.dom,b;if(d.node!=g)return d;for(let $=d.offset;!b&&$<g.childNodes.length;$++){let j=ContentView.get(g.childNodes[$]);j instanceof LineView&&(b=j.domAtPos(0))}for(let $=d.offset-1;!b&&$>=0;$--){let j=ContentView.get(g.childNodes[$]);j instanceof LineView&&(b=j.domAtPos(j.length))}return b?new DOMPos(b.node,b.offset,!0):d}nearest(d){for(let g=d;g;){let b=ContentView.get(g);if(b&&b.rootView==this)return b;g=g.parentNode}return null}posFromDOM(d,g){let b=this.nearest(d);if(!b)throw new RangeError("Trying to find position for a DOM position outside of the document");return b.localPosFromDOM(d,g)+b.posAtStart}domAtPos(d){let{i:g,off:b}=this.childCursor().findPos(d,-1);for(;g<this.children.length-1;){let $=this.children[g];if(b<$.length||$ instanceof LineView)break;g++,b=0}return this.children[g].domAtPos(b)}coordsAt(d,g){let b=null,$=0;for(let j=this.length,_e=this.children.length-1;_e>=0;_e--){let et=this.children[_e],tt=j-et.breakAfter,nt=tt-et.length;if(tt<d)break;if(nt<=d&&(nt<d||et.covers(-1))&&(tt>d||et.covers(1))&&(!b||et instanceof LineView&&!(b instanceof LineView&&g>=0)))b=et,$=nt;else if(b&&nt==d&&tt==d&&et instanceof BlockWidgetView&&Math.abs(g)<2){if(et.deco.startSide<0)break;_e&&(b=null)}j=nt}return b?b.coordsAt(d-$,g):null}coordsForChar(d){let{i:g,off:b}=this.childPos(d,1),$=this.children[g];if(!($ instanceof LineView))return null;for(;$.children.length;){let{i:et,off:tt}=$.childPos(b,1);for(;;et++){if(et==$.children.length)return null;if(($=$.children[et]).length)break}b=tt}if(!($ instanceof TextView))return null;let j=findClusterBreak($.text,b);if(j==b)return null;let _e=textRange($.dom,b,j).getClientRects();for(let et=0;et<_e.length;et++){let tt=_e[et];if(et==_e.length-1||tt.top<tt.bottom&&tt.left<tt.right)return tt}return null}measureVisibleLineHeights(d){let g=[],{from:b,to:$}=d,j=this.view.contentDOM.clientWidth,_e=j>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,et=-1,tt=this.view.textDirection==Direction.LTR;for(let nt=0,it=0;it<this.children.length;it++){let rt=this.children[it],st=nt+rt.length;if(st>$)break;if(nt>=b){let ot=rt.dom.getBoundingClientRect();if(g.push(ot.height),_e){let at=rt.dom.lastChild,ct=at?clientRectsFor(at):[];if(ct.length){let ht=ct[ct.length-1],ut=tt?ht.right-ot.left:ot.right-ht.left;ut>et&&(et=ut,this.minWidth=j,this.minWidthFrom=nt,this.minWidthTo=st)}}}nt=st+rt.breakAfter}return g}textDirectionAt(d){let{i:g}=this.childPos(d,1);return getComputedStyle(this.children[g].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let j of this.children)if(j instanceof LineView){let _e=j.measureTextSize();if(_e)return _e}let d=document.createElement("div"),g,b,$;return d.className="cm-line",d.style.width="99999px",d.style.position="absolute",d.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(d);let j=clientRectsFor(d.firstChild)[0];g=d.getBoundingClientRect().height,b=j?j.width/27:7,$=j?j.height:g,d.remove()}),{lineHeight:g,charWidth:b,textHeight:$}}childCursor(d=this.length){let g=this.children.length;return g&&(d-=this.children[--g].length),new ChildCursor(this.children,d,g)}computeBlockGapDeco(){let d=[],g=this.view.viewState;for(let b=0,$=0;;$++){let j=$==g.viewports.length?null:g.viewports[$],_e=j?j.from-1:this.length;if(_e>b){let et=(g.lineBlockAt(_e).bottom-g.lineBlockAt(b).top)/this.view.scaleY;d.push(Decoration.replace({widget:new BlockGapWidget(et),block:!0,inclusive:!0,isBlockGap:!0}).range(b,_e))}if(!j)break;b=j.to+1}return Decoration.set(d)}updateDeco(){let d=1,g=this.view.state.facet(decorations).map(j=>(this.dynamicDecorationMap[d++]=typeof j=="function")?j(this.view):j),b=!1,$=this.view.state.facet(outerDecorations).map((j,_e)=>{let et=typeof j=="function";return et&&(b=!0),et?j(this.view):j});for($.length&&(this.dynamicDecorationMap[d++]=b,g.push(RangeSet.join($))),this.decorations=[this.editContextFormatting,...g,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];d<this.decorations.length;)this.dynamicDecorationMap[d++]=!1;return this.decorations}scrollIntoView(d){if(d.isSnapshot){let nt=this.view.viewState.lineBlockAt(d.range.head);this.view.scrollDOM.scrollTop=nt.top-d.yMargin,this.view.scrollDOM.scrollLeft=d.xMargin;return}for(let nt of this.view.state.facet(scrollHandler))try{if(nt(this.view,d.range,d))return!0}catch(it){logException(this.view.state,it,"scroll handler")}let{range:g}=d,b=this.coordsAt(g.head,g.empty?g.assoc:g.head>g.anchor?-1:1),$;if(!b)return;!g.empty&&($=this.coordsAt(g.anchor,g.anchor>g.head?-1:1))&&(b={left:Math.min(b.left,$.left),top:Math.min(b.top,$.top),right:Math.max(b.right,$.right),bottom:Math.max(b.bottom,$.bottom)});let j=getScrollMargins(this.view),_e={left:b.left-j.left,top:b.top-j.top,right:b.right+j.right,bottom:b.bottom+j.bottom},{offsetWidth:et,offsetHeight:tt}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,_e,g.head<g.anchor?-1:1,d.x,d.y,Math.max(Math.min(d.xMargin,et),-et),Math.max(Math.min(d.yMargin,tt),-tt),this.view.textDirection==Direction.LTR)}}function betweenUneditable(_){return _.node.nodeType==1&&_.node.firstChild&&(_.offset==0||_.node.childNodes[_.offset-1].contentEditable=="false")&&(_.offset==_.node.childNodes.length||_.node.childNodes[_.offset].contentEditable=="false")}class BlockGapWidget extends WidgetType{constructor(d){super(),this.height=d}toDOM(){let d=document.createElement("div");return d.className="cm-gap",this.updateDOM(d),d}eq(d){return d.height==this.height}updateDOM(d){return d.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function findCompositionNode(_,d){let g=_.observer.selectionRange;if(!g.focusNode)return null;let b=textNodeBefore(g.focusNode,g.focusOffset),$=textNodeAfter(g.focusNode,g.focusOffset),j=b||$;if($&&b&&$.node!=b.node){let et=ContentView.get($.node);if(!et||et instanceof TextView&&et.text!=$.node.nodeValue)j=$;else if(_.docView.lastCompositionAfterCursor){let tt=ContentView.get(b.node);!tt||tt instanceof TextView&&tt.text!=b.node.nodeValue||(j=$)}}if(_.docView.lastCompositionAfterCursor=j!=b,!j)return null;let _e=d-j.offset;return{from:_e,to:_e+j.node.nodeValue.length,node:j.node}}function findCompositionRange(_,d,g){let b=findCompositionNode(_,g);if(!b)return null;let{node:$,from:j,to:_e}=b,et=$.nodeValue;if(/[\n\r]/.test(et)||_.state.doc.sliceString(b.from,b.to)!=et)return null;let tt=d.invertedDesc,nt=new ChangedRange(tt.mapPos(j),tt.mapPos(_e),j,_e),it=[];for(let rt=$.parentNode;;rt=rt.parentNode){let st=ContentView.get(rt);if(st instanceof MarkView)it.push({node:rt,deco:st.mark});else{if(st instanceof LineView||rt.nodeName=="DIV"&&rt.parentNode==_.contentDOM)return{range:nt,text:$,marks:it,line:rt};if(rt!=_.contentDOM)it.push({node:rt,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(rt),tagName:rt.tagName.toLowerCase()})});else return null}}}function nextToUneditable(_,d){return _.nodeType!=1?0:(d&&_.childNodes[d-1].contentEditable=="false"?1:0)|(d<_.childNodes.length&&_.childNodes[d].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(d,g){addRange(d,g,this.changes)}comparePoint(d,g){addRange(d,g,this.changes)}};function findChangedDeco(_,d,g){let b=new DecorationComparator$1;return RangeSet.compare(_,d,g,b),b.changes}function inUneditable(_,d){for(let g=_;g&&g!=d;g=g.assignedSlot||g.parentNode)if(g.nodeType==1&&g.contentEditable=="false")return!0;return!1}function touchesComposition(_,d){let g=!1;return d&&_.iterChangedRanges((b,$)=>{b<d.to&&$>d.from&&(g=!0)}),g}function groupAt(_,d,g=1){let b=_.charCategorizer(d),$=_.doc.lineAt(d),j=d-$.from;if($.length==0)return EditorSelection.cursor(d);j==0?g=1:j==$.length&&(g=-1);let _e=j,et=j;g<0?_e=findClusterBreak($.text,j,!1):et=findClusterBreak($.text,j);let tt=b($.text.slice(_e,et));for(;_e>0;){let nt=findClusterBreak($.text,_e,!1);if(b($.text.slice(nt,_e))!=tt)break;_e=nt}for(;et<$.length;){let nt=findClusterBreak($.text,et);if(b($.text.slice(et,nt))!=tt)break;et=nt}return EditorSelection.range(_e+$.from,et+$.from)}function getdx(_,d){return d.left>_?d.left-_:Math.max(0,_-d.right)}function getdy(_,d){return d.top>_?d.top-_:Math.max(0,_-d.bottom)}function yOverlap(_,d){return _.top<d.bottom-1&&_.bottom>d.top+1}function upTop(_,d){return d<_.top?{top:d,left:_.left,right:_.right,bottom:_.bottom}:_}function upBot(_,d){return d>_.bottom?{top:_.top,left:_.left,right:_.right,bottom:d}:_}function domPosAtCoords(_,d,g){let b,$,j,_e,et=!1,tt,nt,it,rt;for(let at=_.firstChild;at;at=at.nextSibling){let ct=clientRectsFor(at);for(let ht=0;ht<ct.length;ht++){let ut=ct[ht];$&&yOverlap($,ut)&&(ut=upTop(upBot(ut,$.bottom),$.top));let dt=getdx(d,ut),ft=getdy(g,ut);if(dt==0&&ft==0)return at.nodeType==3?domPosInText(at,d,g):domPosAtCoords(at,d,g);if(!b||_e>ft||_e==ft&&j>dt){b=at,$=ut,j=dt,_e=ft;let mt=ft?g<ut.top?-1:1:dt?d<ut.left?-1:1:0;et=!mt||(mt>0?ht<ct.length-1:ht>0)}dt==0?g>ut.bottom&&(!it||it.bottom<ut.bottom)?(tt=at,it=ut):g<ut.top&&(!rt||rt.top>ut.top)&&(nt=at,rt=ut):it&&yOverlap(it,ut)?it=upBot(it,ut.bottom):rt&&yOverlap(rt,ut)&&(rt=upTop(rt,ut.top))}}if(it&&it.bottom>=g?(b=tt,$=it):rt&&rt.top<=g&&(b=nt,$=rt),!b)return{node:_,offset:0};let st=Math.max($.left,Math.min($.right,d));if(b.nodeType==3)return domPosInText(b,st,g);if(et&&b.contentEditable!="false")return domPosAtCoords(b,st,g);let ot=Array.prototype.indexOf.call(_.childNodes,b)+(d>=($.left+$.right)/2?1:0);return{node:_,offset:ot}}function domPosInText(_,d,g){let b=_.nodeValue.length,$=-1,j=1e9,_e=0;for(let et=0;et<b;et++){let tt=textRange(_,et,et+1).getClientRects();for(let nt=0;nt<tt.length;nt++){let it=tt[nt];if(it.top==it.bottom)continue;_e||(_e=d-it.left);let rt=(it.top>g?it.top-g:g-it.bottom)-1;if(it.left-1<=d&&it.right+1>=d&&rt<j){let st=d>=(it.left+it.right)/2,ot=st;if((browser.chrome||browser.gecko)&&textRange(_,et).getBoundingClientRect().left==it.right&&(ot=!st),rt<=0)return{node:_,offset:et+(ot?1:0)};$=et+(ot?1:0),j=rt}}}return{node:_,offset:$>-1?$:_e>0?_.nodeValue.length:0}}function posAtCoords(_,d,g,b=-1){var $,j;let _e=_.contentDOM.getBoundingClientRect(),et=_e.top+_.viewState.paddingTop,tt,{docHeight:nt}=_.viewState,{x:it,y:rt}=d,st=rt-et;if(st<0)return 0;if(st>nt)return _.state.doc.length;for(let mt=_.viewState.heightOracle.textHeight/2,pt=!1;tt=_.elementAtHeight(st),tt.type!=BlockType.Text;)for(;st=b>0?tt.bottom+mt:tt.top-mt,!(st>=0&&st<=nt);){if(pt)return g?null:0;pt=!0,b=-b}rt=et+st;let ot=tt.from;if(ot<_.viewport.from)return _.viewport.from==0?0:g?null:posAtCoordsImprecise(_,_e,tt,it,rt);if(ot>_.viewport.to)return _.viewport.to==_.state.doc.length?_.state.doc.length:g?null:posAtCoordsImprecise(_,_e,tt,it,rt);let at=_.dom.ownerDocument,ct=_.root.elementFromPoint?_.root:at,ht=ct.elementFromPoint(it,rt);ht&&!_.contentDOM.contains(ht)&&(ht=null),ht||(it=Math.max(_e.left+1,Math.min(_e.right-1,it)),ht=ct.elementFromPoint(it,rt),ht&&!_.contentDOM.contains(ht)&&(ht=null));let ut,dt=-1;if(ht&&(($=_.docView.nearest(ht))===null||$===void 0?void 0:$.isEditable)!=!1){if(at.caretPositionFromPoint){let mt=at.caretPositionFromPoint(it,rt);mt&&({offsetNode:ut,offset:dt}=mt)}else if(at.caretRangeFromPoint){let mt=at.caretRangeFromPoint(it,rt);mt&&({startContainer:ut,startOffset:dt}=mt,(!_.contentDOM.contains(ut)||browser.safari&&isSuspiciousSafariCaretResult(ut,dt,it)||browser.chrome&&isSuspiciousChromeCaretResult(ut,dt,it))&&(ut=void 0))}}if(!ut||!_.docView.dom.contains(ut)){let mt=LineView.find(_.docView,ot);if(!mt)return st>tt.top+tt.height/2?tt.to:tt.from;({node:ut,offset:dt}=domPosAtCoords(mt.dom,it,rt))}let ft=_.docView.nearest(ut);if(!ft)return null;if(ft.isWidget&&((j=ft.dom)===null||j===void 0?void 0:j.nodeType)==1){let mt=ft.dom.getBoundingClientRect();return d.y<mt.top||d.y<=mt.bottom&&d.x<=(mt.left+mt.right)/2?ft.posAtStart:ft.posAtEnd}else return ft.localPosFromDOM(ut,dt)+ft.posAtStart}function posAtCoordsImprecise(_,d,g,b,$){let j=Math.round((b-d.left)*_.defaultCharacterWidth);if(_.lineWrapping&&g.height>_.defaultLineHeight*1.5){let et=_.viewState.heightOracle.textHeight,tt=Math.floor(($-g.top-(_.defaultLineHeight-et)*.5)/et);j+=tt*_.viewState.heightOracle.lineLength}let _e=_.state.sliceDoc(g.from,g.to);return g.from+findColumn(_e,j,_.state.tabSize)}function isSuspiciousSafariCaretResult(_,d,g){let b;if(_.nodeType!=3||d!=(b=_.nodeValue.length))return!1;for(let $=_.nextSibling;$;$=$.nextSibling)if($.nodeType!=1||$.nodeName!="BR")return!1;return textRange(_,b-1,b).getBoundingClientRect().left>g}function isSuspiciousChromeCaretResult(_,d,g){if(d!=0)return!1;for(let $=_;;){let j=$.parentNode;if(!j||j.nodeType!=1||j.firstChild!=$)return!1;if(j.classList.contains("cm-line"))break;$=j}let b=_.nodeType==1?_.getBoundingClientRect():textRange(_,0,Math.max(_.nodeValue.length,1)).getBoundingClientRect();return g-b.left>5}function blockAt(_,d){let g=_.lineBlockAt(d);if(Array.isArray(g.type)){for(let b of g.type)if(b.to>d||b.to==d&&(b.to==g.to||b.type==BlockType.Text))return b}return g}function moveToLineBoundary(_,d,g,b){let $=blockAt(_,d.head),j=!b||$.type!=BlockType.Text||!(_.lineWrapping||$.widgetLineBreaks)?null:_.coordsAtPos(d.assoc<0&&d.head>$.from?d.head-1:d.head);if(j){let _e=_.dom.getBoundingClientRect(),et=_.textDirectionAt($.from),tt=_.posAtCoords({x:g==(et==Direction.LTR)?_e.right-1:_e.left+1,y:(j.top+j.bottom)/2});if(tt!=null)return EditorSelection.cursor(tt,g?-1:1)}return EditorSelection.cursor(g?$.to:$.from,g?-1:1)}function moveByChar(_,d,g,b){let $=_.state.doc.lineAt(d.head),j=_.bidiSpans($),_e=_.textDirectionAt($.from);for(let et=d,tt=null;;){let nt=moveVisually($,j,_e,et,g),it=movedOver;if(!nt){if($.number==(g?_.state.doc.lines:1))return et;it=`
`,$=_.state.doc.line($.number+(g?1:-1)),j=_.bidiSpans($),nt=_.visualLineSide($,!g)}if(tt){if(!tt(it))return et}else{if(!b)return nt;tt=b(it)}et=nt}}function byGroup(_,d,g){let b=_.state.charCategorizer(d),$=b(g);return j=>{let _e=b(j);return $==CharCategory.Space&&($=_e),$==_e}}function moveVertically(_,d,g,b){let $=d.head,j=g?1:-1;if($==(g?_.state.doc.length:0))return EditorSelection.cursor($,d.assoc);let _e=d.goalColumn,et,tt=_.contentDOM.getBoundingClientRect(),nt=_.coordsAtPos($,d.assoc||-1),it=_.documentTop;if(nt)_e==null&&(_e=nt.left-tt.left),et=j<0?nt.top:nt.bottom;else{let ot=_.viewState.lineBlockAt($);_e==null&&(_e=Math.min(tt.right-tt.left,_.defaultCharacterWidth*($-ot.from))),et=(j<0?ot.top:ot.bottom)+it}let rt=tt.left+_e,st=b??_.viewState.heightOracle.textHeight>>1;for(let ot=0;;ot+=10){let at=et+(st+ot)*j,ct=posAtCoords(_,{x:rt,y:at},!1,j);if(at<tt.top||at>tt.bottom||(j<0?ct<$:ct>$)){let ht=_.docView.coordsForChar(ct),ut=!ht||at<ht.top?-1:1;return EditorSelection.cursor(ct,ut,void 0,_e)}}}function skipAtomicRanges(_,d,g){for(;;){let b=0;for(let $ of _)$.between(d-1,d+1,(j,_e,et)=>{if(d>j&&d<_e){let tt=b||g||(d-j<_e-d?-1:1);d=tt<0?j:_e,b=tt}});if(!b)return d}}function skipAtoms(_,d,g){let b=skipAtomicRanges(_.state.facet(atomicRanges).map($=>$(_)),g.from,d.head>g.from?-1:1);return b==g.from?g:EditorSelection.cursor(b,b<g.from?1:-1)}class InputState{setSelectionOrigin(d){this.lastSelectionOrigin=d,this.lastSelectionTime=Date.now()}constructor(d){this.view=d,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=d.hasFocus,browser.safari&&d.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(d.contentDOM.ownerDocument)}handleEvent(d){!eventBelongsToEditor(this.view,d)||this.ignoreDuringComposition(d)||d.type=="keydown"&&this.keydown(d)||this.runHandlers(d.type,d)}runHandlers(d,g){let b=this.handlers[d];if(b){for(let $ of b.observers)$(this.view,g);for(let $ of b.handlers){if(g.defaultPrevented)break;if($(this.view,g)){g.preventDefault();break}}}}ensureHandlers(d){let g=computeHandlers(d),b=this.handlers,$=this.view.contentDOM;for(let j in g)if(j!="scroll"){let _e=!g[j].handlers.length,et=b[j];et&&_e!=!et.handlers.length&&($.removeEventListener(j,this.handleEvent),et=null),et||$.addEventListener(j,this.handleEvent,{passive:_e})}for(let j in b)j!="scroll"&&!g[j]&&$.removeEventListener(j,this.handleEvent);this.handlers=g}keydown(d){if(this.lastKeyCode=d.keyCode,this.lastKeyTime=Date.now(),d.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&d.keyCode!=27&&modifierCodes.indexOf(d.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!d.synthetic&&(d.keyCode==13||d.keyCode==8))return this.view.observer.delayAndroidKey(d.key,d.keyCode),!0;let g;return browser.ios&&!d.synthetic&&!d.altKey&&!d.metaKey&&((g=PendingKeys.find(b=>b.keyCode==d.keyCode))&&!d.ctrlKey||EmacsyPendingKeys.indexOf(d.key)>-1&&d.ctrlKey&&!d.shiftKey)?(this.pendingIOSKey=g||d,setTimeout(()=>this.flushIOSKey(),250),!0):(d.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(d){let g=this.pendingIOSKey;return!g||g.key=="Enter"&&d&&d.from<d.to&&/^\S+$/.test(d.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,g.key,g.keyCode,g instanceof KeyboardEvent?g:void 0))}ignoreDuringComposition(d){return/^key/.test(d.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(d){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=d}update(d){this.view.observer.update(d),this.mouseSelection&&this.mouseSelection.update(d),this.draggedContent&&d.docChanged&&(this.draggedContent=this.draggedContent.map(d.changes)),d.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(_,d){return(g,b)=>{try{return d.call(_,b,g)}catch($){logException(g.state,$)}}}function computeHandlers(_){let d=Object.create(null);function g(b){return d[b]||(d[b]={observers:[],handlers:[]})}for(let b of _){let $=b.spec;if($&&$.domEventHandlers)for(let j in $.domEventHandlers){let _e=$.domEventHandlers[j];_e&&g(j).handlers.push(bindHandler(b.value,_e))}if($&&$.domEventObservers)for(let j in $.domEventObservers){let _e=$.domEventObservers[j];_e&&g(j).observers.push(bindHandler(b.value,_e))}}for(let b in handlers)g(b).handlers.push(handlers[b]);for(let b in observers)g(b).observers.push(observers[b]);return d}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(_){return Math.max(0,_)*.7+8}function dist(_,d){return Math.max(Math.abs(_.clientX-d.clientX),Math.abs(_.clientY-d.clientY))}class MouseSelection{constructor(d,g,b,$){this.view=d,this.startEvent=g,this.style=b,this.mustSelect=$,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=g,this.scrollParent=scrollableParent(d.contentDOM),this.atoms=d.state.facet(atomicRanges).map(_e=>_e(d));let j=d.contentDOM.ownerDocument;j.addEventListener("mousemove",this.move=this.move.bind(this)),j.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=g.shiftKey,this.multiple=d.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(d,g),this.dragging=isInPrimarySelection(d,g)&&getClickType(g)==1?null:!1}start(d){this.dragging===!1&&this.select(d)}move(d){var g;if(d.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,d)<10)return;this.select(this.lastEvent=d);let b=0,$=0,j=((g=this.scrollParent)===null||g===void 0?void 0:g.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},_e=getScrollMargins(this.view);d.clientX-_e.left<=j.left+dragScrollMargin?b=-dragScrollSpeed(j.left-d.clientX):d.clientX+_e.right>=j.right-dragScrollMargin&&(b=dragScrollSpeed(d.clientX-j.right)),d.clientY-_e.top<=j.top+dragScrollMargin?$=-dragScrollSpeed(j.top-d.clientY):d.clientY+_e.bottom>=j.bottom-dragScrollMargin&&($=dragScrollSpeed(d.clientY-j.bottom)),this.setScrollSpeed(b,$)}up(d){this.dragging==null&&this.select(this.lastEvent),this.dragging||d.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let d=this.view.contentDOM.ownerDocument;d.removeEventListener("mousemove",this.move),d.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(d,g){this.scrollSpeed={x:d,y:g},d||g?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(d){let g=null;for(let b=0;b<d.ranges.length;b++){let $=d.ranges[b],j=null;if($.empty){let _e=skipAtomicRanges(this.atoms,$.from,0);_e!=$.from&&(j=EditorSelection.cursor(_e,-1))}else{let _e=skipAtomicRanges(this.atoms,$.from,-1),et=skipAtomicRanges(this.atoms,$.to,1);(_e!=$.from||et!=$.to)&&(j=EditorSelection.range($.from==$.anchor?_e:et,$.from==$.head?_e:et))}j&&(g||(g=d.ranges.slice()),g[b]=j)}return g?EditorSelection.create(g,d.mainIndex):d}select(d){let{view:g}=this,b=this.skipAtoms(this.style.get(d,this.extend,this.multiple));(this.mustSelect||!b.eq(g.state.selection,this.dragging===!1))&&this.view.dispatch({selection:b,userEvent:"select.pointer"}),this.mustSelect=!1}update(d){d.transactions.some(g=>g.isUserEvent("input.type"))?this.destroy():this.style.update(d)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(_,d){let g=_.state.facet(clickAddsSelectionRange);return g.length?g[0](d):browser.mac?d.metaKey:d.ctrlKey}function dragMovesSelection(_,d){let g=_.state.facet(dragMovesSelection$1);return g.length?g[0](d):browser.mac?!d.altKey:!d.ctrlKey}function isInPrimarySelection(_,d){let{main:g}=_.state.selection;if(g.empty)return!1;let b=getSelection(_.root);if(!b||b.rangeCount==0)return!0;let $=b.getRangeAt(0).getClientRects();for(let j=0;j<$.length;j++){let _e=$[j];if(_e.left<=d.clientX&&_e.right>=d.clientX&&_e.top<=d.clientY&&_e.bottom>=d.clientY)return!0}return!1}function eventBelongsToEditor(_,d){if(!d.bubbles)return!0;if(d.defaultPrevented)return!1;for(let g=d.target,b;g!=_.contentDOM;g=g.parentNode)if(!g||g.nodeType==11||(b=ContentView.get(g))&&b.ignoreEvent(d))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(_){let d=_.dom.parentNode;if(!d)return;let g=d.appendChild(document.createElement("textarea"));g.style.cssText="position: fixed; left: -10000px; top: 10px",g.focus(),setTimeout(()=>{_.focus(),g.remove(),doPaste(_,g.value)},50)}function doPaste(_,d){let{state:g}=_,b,$=1,j=g.toText(d),_e=j.lines==g.selection.ranges.length;if(lastLinewiseCopy!=null&&g.selection.ranges.every(tt=>tt.empty)&&lastLinewiseCopy==j.toString()){let tt=-1;b=g.changeByRange(nt=>{let it=g.doc.lineAt(nt.from);if(it.from==tt)return{range:nt};tt=it.from;let rt=g.toText((_e?j.line($++).text:d)+g.lineBreak);return{changes:{from:it.from,insert:rt},range:EditorSelection.cursor(nt.from+rt.length)}})}else _e?b=g.changeByRange(tt=>{let nt=j.line($++);return{changes:{from:tt.from,to:tt.to,insert:nt.text},range:EditorSelection.cursor(tt.from+nt.length)}}):b=g.replaceSelection(j);_.dispatch(b,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=_=>{_.inputState.lastScrollTop=_.scrollDOM.scrollTop,_.inputState.lastScrollLeft=_.scrollDOM.scrollLeft};handlers.keydown=(_,d)=>(_.inputState.setSelectionOrigin("select"),d.keyCode==27&&_.inputState.tabFocusMode!=0&&(_.inputState.tabFocusMode=Date.now()+2e3),!1);observers.touchstart=(_,d)=>{_.inputState.lastTouchTime=Date.now(),_.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=_=>{_.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=(_,d)=>{if(_.observer.flush(),_.inputState.lastTouchTime>Date.now()-2e3)return!1;let g=null;for(let b of _.state.facet(mouseSelectionStyle))if(g=b(_,d),g)break;if(!g&&d.button==0&&(g=basicMouseSelection(_,d)),g){let b=!_.hasFocus;_.inputState.startMouseSelection(new MouseSelection(_,d,g,b)),b&&_.observer.ignore(()=>{focusPreventScroll(_.contentDOM);let j=_.root.activeElement;j&&!j.contains(_.contentDOM)&&j.blur()});let $=_.inputState.mouseSelection;if($)return $.start(d),$.dragging===!1}return!1};function rangeForClick(_,d,g,b){if(b==1)return EditorSelection.cursor(d,g);if(b==2)return groupAt(_.state,d,g);{let $=LineView.find(_.docView,d),j=_.state.doc.lineAt($?$.posAtEnd:d),_e=$?$.posAtStart:j.from,et=$?$.posAtEnd:j.to;return et<_.state.doc.length&&et==j.to&&et++,EditorSelection.range(_e,et)}}let insideY=(_,d)=>_>=d.top&&_<=d.bottom,inside=(_,d,g)=>insideY(d,g)&&_>=g.left&&_<=g.right;function findPositionSide(_,d,g,b){let $=LineView.find(_.docView,d);if(!$)return 1;let j=d-$.posAtStart;if(j==0)return 1;if(j==$.length)return-1;let _e=$.coordsAt(j,-1);if(_e&&inside(g,b,_e))return-1;let et=$.coordsAt(j,1);return et&&inside(g,b,et)?1:_e&&insideY(b,_e)?-1:1}function queryPos(_,d){let g=_.posAtCoords({x:d.clientX,y:d.clientY},!1);return{pos:g,bias:findPositionSide(_,g,d.clientX,d.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(_){if(!BadMouseDetail)return _.detail;let d=lastMouseDown,g=lastMouseDownTime;return lastMouseDown=_,lastMouseDownTime=Date.now(),lastMouseDownCount=!d||g>Date.now()-400&&Math.abs(d.clientX-_.clientX)<2&&Math.abs(d.clientY-_.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(_,d){let g=queryPos(_,d),b=getClickType(d),$=_.state.selection;return{update(j){j.docChanged&&(g.pos=j.changes.mapPos(g.pos),$=$.map(j.changes))},get(j,_e,et){let tt=queryPos(_,j),nt,it=rangeForClick(_,tt.pos,tt.bias,b);if(g.pos!=tt.pos&&!_e){let rt=rangeForClick(_,g.pos,g.bias,b),st=Math.min(rt.from,it.from),ot=Math.max(rt.to,it.to);it=st<it.from?EditorSelection.range(st,ot):EditorSelection.range(ot,st)}return _e?$.replaceRange($.main.extend(it.from,it.to)):et&&b==1&&$.ranges.length>1&&(nt=removeRangeAround($,tt.pos))?nt:et?$.addRange(it):EditorSelection.create([it])}}}function removeRangeAround(_,d){for(let g=0;g<_.ranges.length;g++){let{from:b,to:$}=_.ranges[g];if(b<=d&&$>=d)return EditorSelection.create(_.ranges.slice(0,g).concat(_.ranges.slice(g+1)),_.mainIndex==g?0:_.mainIndex-(_.mainIndex>g?1:0))}return null}handlers.dragstart=(_,d)=>{let{selection:{main:g}}=_.state;if(d.target.draggable){let $=_.docView.nearest(d.target);if($&&$.isWidget){let j=$.posAtStart,_e=j+$.length;(j>=g.to||_e<=g.from)&&(g=EditorSelection.range(j,_e))}}let{inputState:b}=_;return b.mouseSelection&&(b.mouseSelection.dragging=!0),b.draggedContent=g,d.dataTransfer&&(d.dataTransfer.setData("Text",_.state.sliceDoc(g.from,g.to)),d.dataTransfer.effectAllowed="copyMove"),!1};handlers.dragend=_=>(_.inputState.draggedContent=null,!1);function dropText(_,d,g,b){if(!g)return;let $=_.posAtCoords({x:d.clientX,y:d.clientY},!1),{draggedContent:j}=_.inputState,_e=b&&j&&dragMovesSelection(_,d)?{from:j.from,to:j.to}:null,et={from:$,insert:g},tt=_.state.changes(_e?[_e,et]:et);_.focus(),_.dispatch({changes:tt,selection:{anchor:tt.mapPos($,-1),head:tt.mapPos($,1)},userEvent:_e?"move.drop":"input.drop"}),_.inputState.draggedContent=null}handlers.drop=(_,d)=>{if(!d.dataTransfer)return!1;if(_.state.readOnly)return!0;let g=d.dataTransfer.files;if(g&&g.length){let b=Array(g.length),$=0,j=()=>{++$==g.length&&dropText(_,d,b.filter(_e=>_e!=null).join(_.state.lineBreak),!1)};for(let _e=0;_e<g.length;_e++){let et=new FileReader;et.onerror=j,et.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(et.result)||(b[_e]=et.result),j()},et.readAsText(g[_e])}return!0}else{let b=d.dataTransfer.getData("Text");if(b)return dropText(_,d,b,!0),!0}return!1};handlers.paste=(_,d)=>{if(_.state.readOnly)return!0;_.observer.flush();let g=brokenClipboardAPI?null:d.clipboardData;return g?(doPaste(_,g.getData("text/plain")||g.getData("text/uri-list")),!0):(capturePaste(_),!1)};function captureCopy(_,d){let g=_.dom.parentNode;if(!g)return;let b=g.appendChild(document.createElement("textarea"));b.style.cssText="position: fixed; left: -10000px; top: 10px",b.value=d,b.focus(),b.selectionEnd=d.length,b.selectionStart=0,setTimeout(()=>{b.remove(),_.focus()},50)}function copiedRange(_){let d=[],g=[],b=!1;for(let $ of _.selection.ranges)$.empty||(d.push(_.sliceDoc($.from,$.to)),g.push($));if(!d.length){let $=-1;for(let{from:j}of _.selection.ranges){let _e=_.doc.lineAt(j);_e.number>$&&(d.push(_e.text),g.push({from:_e.from,to:Math.min(_.doc.length,_e.to+1)})),$=_e.number}b=!0}return{text:d.join(_.lineBreak),ranges:g,linewise:b}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(_,d)=>{let{text:g,ranges:b,linewise:$}=copiedRange(_.state);if(!g&&!$)return!1;lastLinewiseCopy=$?g:null,d.type=="cut"&&!_.state.readOnly&&_.dispatch({changes:b,scrollIntoView:!0,userEvent:"delete.cut"});let j=brokenClipboardAPI?null:d.clipboardData;return j?(j.clearData(),j.setData("text/plain",g),!0):(captureCopy(_,g),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(_,d){let g=[];for(let b of _.facet(focusChangeEffect)){let $=b(_,d);$&&g.push($)}return g?_.update({effects:g,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(_){setTimeout(()=>{let d=_.hasFocus;if(d!=_.inputState.notifiedFocused){let g=focusChangeTransaction(_.state,d);g?_.dispatch(g):_.update([])}},10)}observers.focus=_=>{_.inputState.lastFocusTime=Date.now(),!_.scrollDOM.scrollTop&&(_.inputState.lastScrollTop||_.inputState.lastScrollLeft)&&(_.scrollDOM.scrollTop=_.inputState.lastScrollTop,_.scrollDOM.scrollLeft=_.inputState.lastScrollLeft),updateForFocusChange(_)};observers.blur=_=>{_.observer.clearSelectionRange(),updateForFocusChange(_)};observers.compositionstart=observers.compositionupdate=_=>{_.observer.editContext||(_.inputState.compositionFirstChange==null&&(_.inputState.compositionFirstChange=!0),_.inputState.composing<0&&(_.inputState.composing=0))};observers.compositionend=_=>{_.observer.editContext||(_.inputState.composing=-1,_.inputState.compositionEndedAt=Date.now(),_.inputState.compositionPendingKey=!0,_.inputState.compositionPendingChange=_.observer.pendingRecords().length>0,_.inputState.compositionFirstChange=null,browser.chrome&&browser.android?_.observer.flushSoon():_.inputState.compositionPendingChange?Promise.resolve().then(()=>_.observer.flush()):setTimeout(()=>{_.inputState.composing<0&&_.docView.hasComposition&&_.update([])},50))};observers.contextmenu=_=>{_.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(_,d)=>{var g;let b;if(browser.chrome&&browser.android&&(b=PendingKeys.find($=>$.inputType==d.inputType))&&(_.observer.delayAndroidKey(b.key,b.keyCode),b.key=="Backspace"||b.key=="Delete")){let $=((g=window.visualViewport)===null||g===void 0?void 0:g.height)||0;setTimeout(()=>{var j;(((j=window.visualViewport)===null||j===void 0?void 0:j.height)||0)>$+10&&_.hasFocus&&(_.contentDOM.blur(),_.focus())},100)}return browser.ios&&d.inputType=="deleteContentForward"&&_.observer.flushSoon(),browser.safari&&d.inputType=="insertText"&&_.inputState.composing>=0&&setTimeout(()=>observers.compositionend(_,d),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(_){appliedFirefoxHack.has(_)||(appliedFirefoxHack.add(_),_.addEventListener("copy",()=>{}),_.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor(d){this.lineWrapping=d,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(d,g){let b=this.doc.lineAt(g).number-this.doc.lineAt(d).number+1;return this.lineWrapping&&(b+=Math.max(0,Math.ceil((g-d-b*this.lineLength*.5)/this.lineLength))),this.lineHeight*b}heightForLine(d){return this.lineWrapping?(1+Math.max(0,Math.ceil((d-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(d){return this.doc=d,this}mustRefreshForWrapping(d){return wrappingWhiteSpace.indexOf(d)>-1!=this.lineWrapping}mustRefreshForHeights(d){let g=!1;for(let b=0;b<d.length;b++){let $=d[b];$<0?b++:this.heightSamples[Math.floor($*10)]||(g=!0,this.heightSamples[Math.floor($*10)]=!0)}return g}refresh(d,g,b,$,j,_e){let et=wrappingWhiteSpace.indexOf(d)>-1,tt=Math.round(g)!=Math.round(this.lineHeight)||this.lineWrapping!=et;if(this.lineWrapping=et,this.lineHeight=g,this.charWidth=b,this.textHeight=$,this.lineLength=j,tt){this.heightSamples={};for(let nt=0;nt<_e.length;nt++){let it=_e[nt];it<0?nt++:this.heightSamples[Math.floor(it*10)]=!0}}return tt}}class MeasuredHeights{constructor(d,g){this.from=d,this.heights=g,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(d,g,b,$,j){this.from=d,this.length=g,this.top=b,this.height=$,this._content=j}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(d){let g=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(d._content)?d._content:[d]);return new BlockInfo(this.from,this.length+d.length,this.top,this.height+d.height,g)}}var QueryType$1=function(_){return _[_.ByPos=0]="ByPos",_[_.ByHeight=1]="ByHeight",_[_.ByPosNoHeight=2]="ByPosNoHeight",_}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(d,g,b=2){this.length=d,this.height=g,this.flags=b}get outdated(){return(this.flags&2)>0}set outdated(d){this.flags=(d?2:0)|this.flags&-3}setHeight(d,g){this.height!=g&&(Math.abs(this.height-g)>Epsilon&&(d.heightChanged=!0),this.height=g)}replace(d,g,b){return HeightMap.of(b)}decomposeLeft(d,g){g.push(this)}decomposeRight(d,g){g.push(this)}applyChanges(d,g,b,$){let j=this,_e=b.doc;for(let et=$.length-1;et>=0;et--){let{fromA:tt,toA:nt,fromB:it,toB:rt}=$[et],st=j.lineAt(tt,QueryType$1.ByPosNoHeight,b.setDoc(g),0,0),ot=st.to>=nt?st:j.lineAt(nt,QueryType$1.ByPosNoHeight,b,0,0);for(rt+=ot.to-nt,nt=ot.to;et>0&&st.from<=$[et-1].toA;)tt=$[et-1].fromA,it=$[et-1].fromB,et--,tt<st.from&&(st=j.lineAt(tt,QueryType$1.ByPosNoHeight,b,0,0));it+=st.from-tt,tt=st.from;let at=NodeBuilder.build(b.setDoc(_e),d,it,rt);j=j.replace(tt,nt,at)}return j.updateHeight(b,0)}static empty(){return new HeightMapText(0,0)}static of(d){if(d.length==1)return d[0];let g=0,b=d.length,$=0,j=0;for(;;)if(g==b)if($>j*2){let et=d[g-1];et.break?d.splice(--g,1,et.left,null,et.right):d.splice(--g,1,et.left,et.right),b+=1+et.break,$-=et.size}else if(j>$*2){let et=d[b];et.break?d.splice(b,1,et.left,null,et.right):d.splice(b,1,et.left,et.right),b+=2+et.break,j-=et.size}else break;else if($<j){let et=d[g++];et&&($+=et.size)}else{let et=d[--b];et&&(j+=et.size)}let _e=0;return d[g-1]==null?(_e=1,g--):d[g]==null&&(_e=1,b++),new HeightMapBranch(HeightMap.of(d.slice(0,g)),_e,HeightMap.of(d.slice(b)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(d,g,b){super(d,g),this.deco=b}blockAt(d,g,b,$){return new BlockInfo($,this.length,b,this.height,this.deco||0)}lineAt(d,g,b,$,j){return this.blockAt(0,b,$,j)}forEachLine(d,g,b,$,j,_e){d<=j+this.length&&g>=j&&_e(this.blockAt(0,b,$,j))}updateHeight(d,g=0,b=!1,$){return $&&$.from<=g&&$.more&&this.setHeight(d,$.heights[$.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(d,g){super(d,g,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(d,g,b,$){return new BlockInfo($,this.length,b,this.height,this.breaks)}replace(d,g,b){let $=b[0];return b.length==1&&($ instanceof HeightMapText||$ instanceof HeightMapGap&&$.flags&4)&&Math.abs(this.length-$.length)<10?($ instanceof HeightMapGap?$=new HeightMapText($.length,this.height):$.height=this.height,this.outdated||($.outdated=!1),$):HeightMap.of(b)}updateHeight(d,g=0,b=!1,$){return $&&$.from<=g&&$.more?this.setHeight(d,$.heights[$.index++]):(b||this.outdated)&&this.setHeight(d,Math.max(this.widgetHeight,d.heightForLine(this.length-this.collapsed))+this.breaks*d.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(d){super(d,0)}heightMetrics(d,g){let b=d.doc.lineAt(g).number,$=d.doc.lineAt(g+this.length).number,j=$-b+1,_e,et=0;if(d.lineWrapping){let tt=Math.min(this.height,d.lineHeight*j);_e=tt/j,this.length>j+1&&(et=(this.height-tt)/(this.length-j-1))}else _e=this.height/j;return{firstLine:b,lastLine:$,perLine:_e,perChar:et}}blockAt(d,g,b,$){let{firstLine:j,lastLine:_e,perLine:et,perChar:tt}=this.heightMetrics(g,$);if(g.lineWrapping){let nt=$+(d<g.lineHeight?0:Math.round(Math.max(0,Math.min(1,(d-b)/this.height))*this.length)),it=g.doc.lineAt(nt),rt=et+it.length*tt,st=Math.max(b,d-rt/2);return new BlockInfo(it.from,it.length,st,rt,0)}else{let nt=Math.max(0,Math.min(_e-j,Math.floor((d-b)/et))),{from:it,length:rt}=g.doc.line(j+nt);return new BlockInfo(it,rt,b+et*nt,et,0)}}lineAt(d,g,b,$,j){if(g==QueryType$1.ByHeight)return this.blockAt(d,b,$,j);if(g==QueryType$1.ByPosNoHeight){let{from:ot,to:at}=b.doc.lineAt(d);return new BlockInfo(ot,at-ot,0,0,0)}let{firstLine:_e,perLine:et,perChar:tt}=this.heightMetrics(b,j),nt=b.doc.lineAt(d),it=et+nt.length*tt,rt=nt.number-_e,st=$+et*rt+tt*(nt.from-j-rt);return new BlockInfo(nt.from,nt.length,Math.max($,Math.min(st,$+this.height-it)),it,0)}forEachLine(d,g,b,$,j,_e){d=Math.max(d,j),g=Math.min(g,j+this.length);let{firstLine:et,perLine:tt,perChar:nt}=this.heightMetrics(b,j);for(let it=d,rt=$;it<=g;){let st=b.doc.lineAt(it);if(it==d){let at=st.number-et;rt+=tt*at+nt*(d-j-at)}let ot=tt+nt*st.length;_e(new BlockInfo(st.from,st.length,rt,ot,0)),rt+=ot,it=st.to+1}}replace(d,g,b){let $=this.length-g;if($>0){let j=b[b.length-1];j instanceof HeightMapGap?b[b.length-1]=new HeightMapGap(j.length+$):b.push(null,new HeightMapGap($-1))}if(d>0){let j=b[0];j instanceof HeightMapGap?b[0]=new HeightMapGap(d+j.length):b.unshift(new HeightMapGap(d-1),null)}return HeightMap.of(b)}decomposeLeft(d,g){g.push(new HeightMapGap(d-1),null)}decomposeRight(d,g){g.push(null,new HeightMapGap(this.length-d-1))}updateHeight(d,g=0,b=!1,$){let j=g+this.length;if($&&$.from<=g+this.length&&$.more){let _e=[],et=Math.max(g,$.from),tt=-1;for($.from>g&&_e.push(new HeightMapGap($.from-g-1).updateHeight(d,g));et<=j&&$.more;){let it=d.doc.lineAt(et).length;_e.length&&_e.push(null);let rt=$.heights[$.index++];tt==-1?tt=rt:Math.abs(rt-tt)>=Epsilon&&(tt=-2);let st=new HeightMapText(it,rt);st.outdated=!1,_e.push(st),et+=it+1}et<=j&&_e.push(null,new HeightMapGap(j-et).updateHeight(d,et));let nt=HeightMap.of(_e);return(tt<0||Math.abs(nt.height-this.height)>=Epsilon||Math.abs(tt-this.heightMetrics(d,g).perLine)>=Epsilon)&&(d.heightChanged=!0),nt}else(b||this.outdated)&&(this.setHeight(d,d.heightForGap(g,g+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(d,g,b){super(d.length+g+b.length,d.height+b.height,g|(d.outdated||b.outdated?2:0)),this.left=d,this.right=b,this.size=d.size+b.size}get break(){return this.flags&1}blockAt(d,g,b,$){let j=b+this.left.height;return d<j?this.left.blockAt(d,g,b,$):this.right.blockAt(d,g,j,$+this.left.length+this.break)}lineAt(d,g,b,$,j){let _e=$+this.left.height,et=j+this.left.length+this.break,tt=g==QueryType$1.ByHeight?d<_e:d<et,nt=tt?this.left.lineAt(d,g,b,$,j):this.right.lineAt(d,g,b,_e,et);if(this.break||(tt?nt.to<et:nt.from>et))return nt;let it=g==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return tt?nt.join(this.right.lineAt(et,it,b,_e,et)):this.left.lineAt(et,it,b,$,j).join(nt)}forEachLine(d,g,b,$,j,_e){let et=$+this.left.height,tt=j+this.left.length+this.break;if(this.break)d<tt&&this.left.forEachLine(d,g,b,$,j,_e),g>=tt&&this.right.forEachLine(d,g,b,et,tt,_e);else{let nt=this.lineAt(tt,QueryType$1.ByPos,b,$,j);d<nt.from&&this.left.forEachLine(d,nt.from-1,b,$,j,_e),nt.to>=d&&nt.from<=g&&_e(nt),g>nt.to&&this.right.forEachLine(nt.to+1,g,b,et,tt,_e)}}replace(d,g,b){let $=this.left.length+this.break;if(g<$)return this.balanced(this.left.replace(d,g,b),this.right);if(d>this.left.length)return this.balanced(this.left,this.right.replace(d-$,g-$,b));let j=[];d>0&&this.decomposeLeft(d,j);let _e=j.length;for(let et of b)j.push(et);if(d>0&&mergeGaps(j,_e-1),g<this.length){let et=j.length;this.decomposeRight(g,j),mergeGaps(j,et)}return HeightMap.of(j)}decomposeLeft(d,g){let b=this.left.length;if(d<=b)return this.left.decomposeLeft(d,g);g.push(this.left),this.break&&(b++,d>=b&&g.push(null)),d>b&&this.right.decomposeLeft(d-b,g)}decomposeRight(d,g){let b=this.left.length,$=b+this.break;if(d>=$)return this.right.decomposeRight(d-$,g);d<b&&this.left.decomposeRight(d,g),this.break&&d<$&&g.push(null),g.push(this.right)}balanced(d,g){return d.size>2*g.size||g.size>2*d.size?HeightMap.of(this.break?[d,null,g]:[d,g]):(this.left=d,this.right=g,this.height=d.height+g.height,this.outdated=d.outdated||g.outdated,this.size=d.size+g.size,this.length=d.length+this.break+g.length,this)}updateHeight(d,g=0,b=!1,$){let{left:j,right:_e}=this,et=g+j.length+this.break,tt=null;return $&&$.from<=g+j.length&&$.more?tt=j=j.updateHeight(d,g,b,$):j.updateHeight(d,g,b),$&&$.from<=et+_e.length&&$.more?tt=_e=_e.updateHeight(d,et,b,$):_e.updateHeight(d,et,b),tt?this.balanced(j,_e):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(_,d){let g,b;_[d]==null&&(g=_[d-1])instanceof HeightMapGap&&(b=_[d+1])instanceof HeightMapGap&&_.splice(d-1,3,new HeightMapGap(g.length+1+b.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(d,g){this.pos=d,this.oracle=g,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=d}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(d,g){if(this.lineStart>-1){let b=Math.min(g,this.lineEnd),$=this.nodes[this.nodes.length-1];$ instanceof HeightMapText?$.length+=b-this.pos:(b>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(b-this.pos,-1)),this.writtenTo=b,g>b&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=g}point(d,g,b){if(d<g||b.heightRelevant){let $=b.widget?b.widget.estimatedHeight:0,j=b.widget?b.widget.lineBreaks:0;$<0&&($=this.oracle.lineHeight);let _e=g-d;b.block?this.addBlock(new HeightMapBlock(_e,$,b)):(_e||j||$>=relevantWidgetHeight)&&this.addLineDeco($,j,_e)}else g>d&&this.span(d,g);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:d,to:g}=this.oracle.doc.lineAt(this.pos);this.lineStart=d,this.lineEnd=g,this.writtenTo<d&&((this.writtenTo<d-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,d-1)),this.nodes.push(null)),this.pos>d&&this.nodes.push(new HeightMapText(this.pos-d,-1)),this.writtenTo=this.pos}blankContent(d,g){let b=new HeightMapGap(g-d);return this.oracle.doc.lineAt(d).to==g&&(b.flags|=4),b}ensureLine(){this.enterLine();let d=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(d instanceof HeightMapText)return d;let g=new HeightMapText(0,-1);return this.nodes.push(g),g}addBlock(d){this.enterLine();let g=d.deco;g&&g.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(d),this.writtenTo=this.pos=this.pos+d.length,g&&g.endSide>0&&(this.covering=d)}addLineDeco(d,g,b){let $=this.ensureLine();$.length+=b,$.collapsed+=b,$.widgetHeight=Math.max($.widgetHeight,d),$.breaks+=g,this.writtenTo=this.pos=this.pos+b}finish(d){let g=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(g instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||g==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let b=d;for(let $ of this.nodes)$ instanceof HeightMapText&&$.updateHeight(this.oracle,b),b+=$?$.length:1;return this.nodes}static build(d,g,b,$){let j=new NodeBuilder(b,d);return RangeSet.spans(g,b,$,j,0),j.finish(b)}}function heightRelevantDecoChanges(_,d,g){let b=new DecorationComparator;return RangeSet.compare(_,d,g,b,0),b.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(d,g,b,$){(d<g||b&&b.heightRelevant||$&&$.heightRelevant)&&addRange(d,g,this.changes,5)}}function visiblePixelRange(_,d){let g=_.getBoundingClientRect(),b=_.ownerDocument,$=b.defaultView||window,j=Math.max(0,g.left),_e=Math.min($.innerWidth,g.right),et=Math.max(0,g.top),tt=Math.min($.innerHeight,g.bottom);for(let nt=_.parentNode;nt&&nt!=b.body;)if(nt.nodeType==1){let it=nt,rt=window.getComputedStyle(it);if((it.scrollHeight>it.clientHeight||it.scrollWidth>it.clientWidth)&&rt.overflow!="visible"){let st=it.getBoundingClientRect();j=Math.max(j,st.left),_e=Math.min(_e,st.right),et=Math.max(et,st.top),tt=nt==_.parentNode?st.bottom:Math.min(tt,st.bottom)}nt=rt.position=="absolute"||rt.position=="fixed"?it.offsetParent:it.parentNode}else if(nt.nodeType==11)nt=nt.host;else break;return{left:j-g.left,right:Math.max(j,_e)-g.left,top:et-(g.top+d),bottom:Math.max(et,tt)-(g.top+d)}}function fullPixelRange(_,d){let g=_.getBoundingClientRect();return{left:0,right:g.right-g.left,top:d,bottom:g.bottom-(g.top+d)}}class LineGap{constructor(d,g,b){this.from=d,this.to=g,this.size=b}static same(d,g){if(d.length!=g.length)return!1;for(let b=0;b<d.length;b++){let $=d[b],j=g[b];if($.from!=j.from||$.to!=j.to||$.size!=j.size)return!1}return!0}draw(d,g){return Decoration.replace({widget:new LineGapWidget(this.size*(g?d.scaleY:d.scaleX),g)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(d,g){super(),this.size=d,this.vertical=g}eq(d){return d.size==this.size&&d.vertical==this.vertical}toDOM(){let d=document.createElement("div");return this.vertical?d.style.height=this.size+"px":(d.style.width=this.size+"px",d.style.height="2px",d.style.display="inline-block"),d}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(d){this.state=d,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let g=d.facet(contentAttributes).some(b=>typeof b!="function"&&b.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(g),this.stateDeco=d.facet(decorations).filter(b=>typeof b!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(d.doc),[new ChangedRange(0,0,0,d.doc.length)]);for(let b=0;b<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());b++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(b=>b.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let d=[this.viewport],{main:g}=this.state.selection;for(let b=0;b<=1;b++){let $=b?g.head:g.anchor;if(!d.some(({from:j,to:_e})=>$>=j&&$<=_e)){let{from:j,to:_e}=this.lineBlockAt($);d.push(new Viewport$1(j,_e))}}return this.viewports=d.sort((b,$)=>b.from-$.from),this.updateScaler()}updateScaler(){let d=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),d.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,d=>{this.viewportLines.push(scaleBlock(d,this.scaler))})}update(d,g=null){this.state=d.state;let b=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(it=>typeof it!="function");let $=d.changedRanges,j=ChangedRange.extendWithRanges($,heightRelevantDecoChanges(b,this.stateDeco,d?d.changes:ChangeSet.empty(this.state.doc.length))),_e=this.heightMap.height,et=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,d.startState.doc,this.heightOracle.setDoc(this.state.doc),j),this.heightMap.height!=_e&&(d.flags|=2),et?(this.scrollAnchorPos=d.changes.mapPos(et.from,-1),this.scrollAnchorHeight=et.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let tt=j.length?this.mapViewport(this.viewport,d.changes):this.viewport;(g&&(g.range.head<tt.from||g.range.head>tt.to)||!this.viewportIsAppropriate(tt))&&(tt=this.getViewport(0,g));let nt=tt.from!=this.viewport.from||tt.to!=this.viewport.to;this.viewport=tt,d.flags|=this.updateForViewport(),(nt||!d.changes.empty||d.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,d.changes))),d.flags|=this.computeVisibleRanges(),g&&(this.scrollTarget=g),!this.mustEnforceCursorAssoc&&d.selectionSet&&d.view.lineWrapping&&d.state.selection.main.empty&&d.state.selection.main.assoc&&!d.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(d){let g=d.contentDOM,b=window.getComputedStyle(g),$=this.heightOracle,j=b.whiteSpace;this.defaultTextDirection=b.direction=="rtl"?Direction.RTL:Direction.LTR;let _e=this.heightOracle.mustRefreshForWrapping(j),et=g.getBoundingClientRect(),tt=_e||this.mustMeasureContent||this.contentDOMHeight!=et.height;this.contentDOMHeight=et.height,this.mustMeasureContent=!1;let nt=0,it=0;if(et.width&&et.height){let{scaleX:mt,scaleY:pt}=getScale$1(g,et);(mt>.005&&Math.abs(this.scaleX-mt)>.005||pt>.005&&Math.abs(this.scaleY-pt)>.005)&&(this.scaleX=mt,this.scaleY=pt,nt|=8,_e=tt=!0)}let rt=(parseInt(b.paddingTop)||0)*this.scaleY,st=(parseInt(b.paddingBottom)||0)*this.scaleY;(this.paddingTop!=rt||this.paddingBottom!=st)&&(this.paddingTop=rt,this.paddingBottom=st,nt|=10),this.editorWidth!=d.scrollDOM.clientWidth&&($.lineWrapping&&(tt=!0),this.editorWidth=d.scrollDOM.clientWidth,nt|=8);let ot=d.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=ot&&(this.scrollAnchorHeight=-1,this.scrollTop=ot),this.scrolledToBottom=isScrolledToBottom(d.scrollDOM);let at=(this.printing?fullPixelRange:visiblePixelRange)(g,this.paddingTop),ct=at.top-this.pixelViewport.top,ht=at.bottom-this.pixelViewport.bottom;this.pixelViewport=at;let ut=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(ut!=this.inView&&(this.inView=ut,ut&&(tt=!0)),!this.inView&&!this.scrollTarget)return 0;let dt=et.width;if((this.contentDOMWidth!=dt||this.editorHeight!=d.scrollDOM.clientHeight)&&(this.contentDOMWidth=et.width,this.editorHeight=d.scrollDOM.clientHeight,nt|=8),tt){let mt=d.docView.measureVisibleLineHeights(this.viewport);if($.mustRefreshForHeights(mt)&&(_e=!0),_e||$.lineWrapping&&Math.abs(dt-this.contentDOMWidth)>$.charWidth){let{lineHeight:pt,charWidth:Ot,textHeight:gt}=d.docView.measureTextSize();_e=pt>0&&$.refresh(j,pt,Ot,gt,dt/Ot,mt),_e&&(d.docView.minWidth=0,nt|=8)}ct>0&&ht>0?it=Math.max(ct,ht):ct<0&&ht<0&&(it=Math.min(ct,ht)),$.heightChanged=!1;for(let pt of this.viewports){let Ot=pt.from==this.viewport.from?mt:d.docView.measureVisibleLineHeights(pt);this.heightMap=(_e?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,d.state.doc.length)]):this.heightMap).updateHeight($,0,_e,new MeasuredHeights(pt.from,Ot))}$.heightChanged&&(nt|=2)}let ft=!this.viewportIsAppropriate(this.viewport,it)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return ft&&(nt&2&&(nt|=this.updateScaler()),this.viewport=this.getViewport(it,this.scrollTarget),nt|=this.updateForViewport()),(nt&2||ft)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(_e?[]:this.lineGaps,d)),nt|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,d.docView.enforceCursorAssoc()),nt}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(d,g){let b=.5-Math.max(-.5,Math.min(.5,d/1e3/2)),$=this.heightMap,j=this.heightOracle,{visibleTop:_e,visibleBottom:et}=this,tt=new Viewport$1($.lineAt(_e-b*1e3,QueryType$1.ByHeight,j,0,0).from,$.lineAt(et+(1-b)*1e3,QueryType$1.ByHeight,j,0,0).to);if(g){let{head:nt}=g.range;if(nt<tt.from||nt>tt.to){let it=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),rt=$.lineAt(nt,QueryType$1.ByPos,j,0,0),st;g.y=="center"?st=(rt.top+rt.bottom)/2-it/2:g.y=="start"||g.y=="nearest"&&nt<tt.from?st=rt.top:st=rt.bottom-it,tt=new Viewport$1($.lineAt(st-1e3/2,QueryType$1.ByHeight,j,0,0).from,$.lineAt(st+it+1e3/2,QueryType$1.ByHeight,j,0,0).to)}}return tt}mapViewport(d,g){let b=g.mapPos(d.from,-1),$=g.mapPos(d.to,1);return new Viewport$1(this.heightMap.lineAt(b,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt($,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:d,to:g},b=0){if(!this.inView)return!0;let{top:$}=this.heightMap.lineAt(d,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:j}=this.heightMap.lineAt(g,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:_e,visibleBottom:et}=this;return(d==0||$<=_e-Math.max(10,Math.min(-b,250)))&&(g==this.state.doc.length||j>=et+Math.max(10,Math.min(b,250)))&&$>_e-2*1e3&&j<et+2*1e3}mapLineGaps(d,g){if(!d.length||g.empty)return d;let b=[];for(let $ of d)g.touchesRange($.from,$.to)||b.push(new LineGap(g.mapPos($.from),g.mapPos($.to),$.size));return b}ensureLineGaps(d,g){let b=this.heightOracle.lineWrapping,$=b?1e4:2e3,j=$>>1,_e=$<<1;if(this.defaultTextDirection!=Direction.LTR&&!b)return[];let et=[],tt=(it,rt,st,ot)=>{if(rt-it<j)return;let at=this.state.selection.main,ct=[at.from];at.empty||ct.push(at.to);for(let ut of ct)if(ut>it&&ut<rt){tt(it,ut-10,st,ot),tt(ut+10,rt,st,ot);return}let ht=find(d,ut=>ut.from>=st.from&&ut.to<=st.to&&Math.abs(ut.from-it)<j&&Math.abs(ut.to-rt)<j&&!ct.some(dt=>ut.from<dt&&ut.to>dt));if(!ht){if(rt<st.to&&g&&b&&g.visibleRanges.some(ut=>ut.from<=rt&&ut.to>=rt)){let ut=g.moveToLineBoundary(EditorSelection.cursor(rt),!1,!0).head;ut>it&&(rt=ut)}ht=new LineGap(it,rt,this.gapSize(st,it,rt,ot))}et.push(ht)},nt=it=>{if(it.length<_e||it.type!=BlockType.Text)return;let rt=lineStructure(it.from,it.to,this.stateDeco);if(rt.total<_e)return;let st=this.scrollTarget?this.scrollTarget.range.head:null,ot,at;if(b){let ct=$/this.heightOracle.lineLength*this.heightOracle.lineHeight,ht,ut;if(st!=null){let dt=findFraction(rt,st),ft=((this.visibleBottom-this.visibleTop)/2+ct)/it.height;ht=dt-ft,ut=dt+ft}else ht=(this.visibleTop-it.top-ct)/it.height,ut=(this.visibleBottom-it.top+ct)/it.height;ot=findPosition(rt,ht),at=findPosition(rt,ut)}else{let ct=rt.total*this.heightOracle.charWidth,ht=$*this.heightOracle.charWidth,ut,dt;if(st!=null){let ft=findFraction(rt,st),mt=((this.pixelViewport.right-this.pixelViewport.left)/2+ht)/ct;ut=ft-mt,dt=ft+mt}else ut=(this.pixelViewport.left-ht)/ct,dt=(this.pixelViewport.right+ht)/ct;ot=findPosition(rt,ut),at=findPosition(rt,dt)}ot>it.from&&tt(it.from,ot,it,rt),at<it.to&&tt(at,it.to,it,rt)};for(let it of this.viewportLines)Array.isArray(it.type)?it.type.forEach(nt):nt(it);return et}gapSize(d,g,b,$){let j=findFraction($,b)-findFraction($,g);return this.heightOracle.lineWrapping?d.height*j:$.total*this.heightOracle.charWidth*j}updateLineGaps(d){LineGap.same(d,this.lineGaps)||(this.lineGaps=d,this.lineGapDeco=Decoration.set(d.map(g=>g.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let d=this.stateDeco;this.lineGaps.length&&(d=d.concat(this.lineGapDeco));let g=[];RangeSet.spans(d,this.viewport.from,this.viewport.to,{span($,j){g.push({from:$,to:j})},point(){}},20);let b=g.length!=this.visibleRanges.length||this.visibleRanges.some(($,j)=>$.from!=g[j].from||$.to!=g[j].to);return this.visibleRanges=g,b?4:0}lineBlockAt(d){return d>=this.viewport.from&&d<=this.viewport.to&&this.viewportLines.find(g=>g.from<=d&&g.to>=d)||scaleBlock(this.heightMap.lineAt(d,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(d){return d>=this.viewportLines[0].top&&d<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(g=>g.top<=d&&g.bottom>=d)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(d),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(d){let g=this.lineBlockAtHeight(d+8);return g.from>=this.viewport.from||this.viewportLines[0].top-d>200?g:this.viewportLines[0]}elementAtHeight(d){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(d),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Viewport$1=class{constructor(d,g){this.from=d,this.to=g}};function lineStructure(_,d,g){let b=[],$=_,j=0;return RangeSet.spans(g,_,d,{span(){},point(_e,et){_e>$&&(b.push({from:$,to:_e}),j+=_e-$),$=et}},20),$<d&&(b.push({from:$,to:d}),j+=d-$),{total:j,ranges:b}}function findPosition({total:_,ranges:d},g){if(g<=0)return d[0].from;if(g>=1)return d[d.length-1].to;let b=Math.floor(_*g);for(let $=0;;$++){let{from:j,to:_e}=d[$],et=_e-j;if(b<=et)return j+b;b-=et}}function findFraction(_,d){let g=0;for(let{from:b,to:$}of _.ranges){if(d<=$){g+=d-b;break}g+=$-b}return g/_.total}function find(_,d){for(let g of _)if(d(g))return g}const IdScaler={toDOM(_){return _},fromDOM(_){return _},scale:1,eq(_){return _==this}};class BigScaler{constructor(d,g,b){let $=0,j=0,_e=0;this.viewports=b.map(({from:et,to:tt})=>{let nt=g.lineAt(et,QueryType$1.ByPos,d,0,0).top,it=g.lineAt(tt,QueryType$1.ByPos,d,0,0).bottom;return $+=it-nt,{from:et,to:tt,top:nt,bottom:it,domTop:0,domBottom:0}}),this.scale=(7e6-$)/(g.height-$);for(let et of this.viewports)et.domTop=_e+(et.top-j)*this.scale,_e=et.domBottom=et.domTop+(et.bottom-et.top),j=et.bottom}toDOM(d){for(let g=0,b=0,$=0;;g++){let j=g<this.viewports.length?this.viewports[g]:null;if(!j||d<j.top)return $+(d-b)*this.scale;if(d<=j.bottom)return j.domTop+(d-j.top);b=j.bottom,$=j.domBottom}}fromDOM(d){for(let g=0,b=0,$=0;;g++){let j=g<this.viewports.length?this.viewports[g]:null;if(!j||d<j.domTop)return b+(d-$)/this.scale;if(d<=j.domBottom)return j.top+(d-j.domTop);b=j.bottom,$=j.domBottom}}eq(d){return d instanceof BigScaler?this.scale==d.scale&&this.viewports.length==d.viewports.length&&this.viewports.every((g,b)=>g.from==d.viewports[b].from&&g.to==d.viewports[b].to):!1}}function scaleBlock(_,d){if(d.scale==1)return _;let g=d.toDOM(_.top),b=d.toDOM(_.bottom);return new BlockInfo(_.from,_.length,g,b-g,Array.isArray(_._content)?_._content.map($=>scaleBlock($,d)):_._content)}const theme=Facet.define({combine:_=>_.join(" ")}),darkTheme=Facet.define({combine:_=>_.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(_,d,g){return new StyleModule(d,{finish(b){return/&/.test(b)?b.replace(/&\w*/,$=>{if($=="&")return _;if(!g||!g[$])throw new RangeError(`Unsupported selector: ${$}`);return g[$]}):_+" "+b}})}const baseTheme$1$2=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),LineBreakPlaceholder="";class DOMReader{constructor(d,g){this.points=d,this.text="",this.lineSeparator=g.facet(EditorState.lineSeparator)}append(d){this.text+=d}lineBreak(){this.text+=LineBreakPlaceholder}readRange(d,g){if(!d)return this;let b=d.parentNode;for(let $=d;;){this.findPointBefore(b,$);let j=this.text.length;this.readNode($);let _e=$.nextSibling;if(_e==g)break;let et=ContentView.get($),tt=ContentView.get(_e);(et&&tt?et.breakAfter:(et?et.breakAfter:isBlockElement($))||isBlockElement(_e)&&($.nodeName!="BR"||$.cmIgnore)&&this.text.length>j)&&this.lineBreak(),$=_e}return this.findPointBefore(b,g),this}readTextNode(d){let g=d.nodeValue;for(let b of this.points)b.node==d&&(b.pos=this.text.length+Math.min(b.offset,g.length));for(let b=0,$=this.lineSeparator?null:/\r\n?|\n/g;;){let j=-1,_e=1,et;if(this.lineSeparator?(j=g.indexOf(this.lineSeparator,b),_e=this.lineSeparator.length):(et=$.exec(g))&&(j=et.index,_e=et[0].length),this.append(g.slice(b,j<0?g.length:j)),j<0)break;if(this.lineBreak(),_e>1)for(let tt of this.points)tt.node==d&&tt.pos>this.text.length&&(tt.pos-=_e-1);b=j+_e}}readNode(d){if(d.cmIgnore)return;let g=ContentView.get(d),b=g&&g.overrideDOMText;if(b!=null){this.findPointInside(d,b.length);for(let $=b.iter();!$.next().done;)$.lineBreak?this.lineBreak():this.append($.value)}else d.nodeType==3?this.readTextNode(d):d.nodeName=="BR"?d.nextSibling&&this.lineBreak():d.nodeType==1&&this.readRange(d.firstChild,null)}findPointBefore(d,g){for(let b of this.points)b.node==d&&d.childNodes[b.offset]==g&&(b.pos=this.text.length)}findPointInside(d,g){for(let b of this.points)(d.nodeType==3?b.node==d:d.contains(b.node))&&(b.pos=this.text.length+(isAtEnd(d,b.node,b.offset)?g:0))}}function isAtEnd(_,d,g){for(;;){if(!d||g<maxOffset(d))return!1;if(d==_)return!0;g=domIndex(d)+1,d=d.parentNode}}class DOMPoint{constructor(d,g){this.node=d,this.offset=g,this.pos=-1}}class DOMChange{constructor(d,g,b,$){this.typeOver=$,this.bounds=null,this.text="",this.domChanged=g>-1;let{impreciseHead:j,impreciseAnchor:_e}=d.docView;if(d.state.readOnly&&g>-1)this.newSel=null;else if(g>-1&&(this.bounds=d.docView.domBoundsAround(g,b,0))){let et=j||_e?[]:selectionPoints(d),tt=new DOMReader(et,d.state);tt.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=tt.text,this.newSel=selectionFromPoints(et,this.bounds.from)}else{let et=d.observer.selectionRange,tt=j&&j.node==et.focusNode&&j.offset==et.focusOffset||!contains(d.contentDOM,et.focusNode)?d.state.selection.main.head:d.docView.posFromDOM(et.focusNode,et.focusOffset),nt=_e&&_e.node==et.anchorNode&&_e.offset==et.anchorOffset||!contains(d.contentDOM,et.anchorNode)?d.state.selection.main.anchor:d.docView.posFromDOM(et.anchorNode,et.anchorOffset),it=d.viewport;if((browser.ios||browser.chrome)&&d.state.selection.main.empty&&tt!=nt&&(it.from>0||it.to<d.state.doc.length)){let rt=Math.min(tt,nt),st=Math.max(tt,nt),ot=it.from-rt,at=it.to-st;(ot==0||ot==1||rt==0)&&(at==0||at==-1||st==d.state.doc.length)&&(tt=0,nt=d.state.doc.length)}this.newSel=EditorSelection.single(nt,tt)}}}function applyDOMChange(_,d){let g,{newSel:b}=d,$=_.state.selection.main,j=_.inputState.lastKeyTime>Date.now()-100?_.inputState.lastKeyCode:-1;if(d.bounds){let{from:_e,to:et}=d.bounds,tt=$.from,nt=null;(j===8||browser.android&&d.text.length<et-_e)&&(tt=$.to,nt="end");let it=findDiff(_.state.doc.sliceString(_e,et,LineBreakPlaceholder),d.text,tt-_e,nt);it&&(browser.chrome&&j==13&&it.toB==it.from+2&&d.text.slice(it.from,it.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&it.toB--,g={from:_e+it.from,to:_e+it.toA,insert:Text.of(d.text.slice(it.from,it.toB).split(LineBreakPlaceholder))})}else b&&(!_.hasFocus&&_.state.facet(editable)||b.main.eq($))&&(b=null);if(!g&&!b)return!1;if(!g&&d.typeOver&&!$.empty&&b&&b.main.empty?g={from:$.from,to:$.to,insert:_.state.doc.slice($.from,$.to)}:g&&g.from>=$.from&&g.to<=$.to&&(g.from!=$.from||g.to!=$.to)&&$.to-$.from-(g.to-g.from)<=4?g={from:$.from,to:$.to,insert:_.state.doc.slice($.from,g.from).append(g.insert).append(_.state.doc.slice(g.to,$.to))}:(browser.mac||browser.android)&&g&&g.from==g.to&&g.from==$.head-1&&/^\. ?$/.test(g.insert.toString())&&_.contentDOM.getAttribute("autocorrect")=="off"?(b&&g.insert.length==2&&(b=EditorSelection.single(b.main.anchor-1,b.main.head-1)),g={from:$.from,to:$.to,insert:Text.of([" "])}):browser.chrome&&g&&g.from==g.to&&g.from==$.head&&g.insert.toString()==`
 `&&_.lineWrapping&&(b&&(b=EditorSelection.single(b.main.anchor-1,b.main.head-1)),g={from:$.from,to:$.to,insert:Text.of([" "])}),g)return applyDOMChangeInner(_,g,b,j);if(b&&!b.main.eq($)){let _e=!1,et="select";return _.inputState.lastSelectionTime>Date.now()-50&&(_.inputState.lastSelectionOrigin=="select"&&(_e=!0),et=_.inputState.lastSelectionOrigin),_.dispatch({selection:b,scrollIntoView:_e,userEvent:et}),!0}else return!1}function applyDOMChangeInner(_,d,g,b=-1){if(browser.ios&&_.inputState.flushIOSKey(d))return!0;let $=_.state.selection.main;if(browser.android&&(d.to==$.to&&(d.from==$.from||d.from==$.from-1&&_.state.sliceDoc(d.from,$.from)==" ")&&d.insert.length==1&&d.insert.lines==2&&dispatchKey(_.contentDOM,"Enter",13)||(d.from==$.from-1&&d.to==$.to&&d.insert.length==0||b==8&&d.insert.length<d.to-d.from&&d.to>$.head)&&dispatchKey(_.contentDOM,"Backspace",8)||d.from==$.from&&d.to==$.to+1&&d.insert.length==0&&dispatchKey(_.contentDOM,"Delete",46)))return!0;let j=d.insert.toString();_.inputState.composing>=0&&_.inputState.composing++;let _e,et=()=>_e||(_e=applyDefaultInsert(_,d,g));return _.state.facet(inputHandler$1).some(tt=>tt(_,d.from,d.to,j,et))||_.dispatch(et()),!0}function applyDefaultInsert(_,d,g){let b,$=_.state,j=$.selection.main;if(d.from>=j.from&&d.to<=j.to&&d.to-d.from>=(j.to-j.from)/3&&(!g||g.main.empty&&g.main.from==d.from+d.insert.length)&&_.inputState.composing<0){let et=j.from<d.from?$.sliceDoc(j.from,d.from):"",tt=j.to>d.to?$.sliceDoc(d.to,j.to):"";b=$.replaceSelection(_.state.toText(et+d.insert.sliceString(0,void 0,_.state.lineBreak)+tt))}else{let et=$.changes(d),tt=g&&g.main.to<=et.newLength?g.main:void 0;if($.selection.ranges.length>1&&_.inputState.composing>=0&&d.to<=j.to&&d.to>=j.to-10){let nt=_.state.sliceDoc(d.from,d.to),it,rt=g&&findCompositionNode(_,g.main.head);if(rt){let at=d.insert.length-(d.to-d.from);it={from:rt.from,to:rt.to-at}}else it=_.state.doc.lineAt(j.head);let st=j.to-d.to,ot=j.to-j.from;b=$.changeByRange(at=>{if(at.from==j.from&&at.to==j.to)return{changes:et,range:tt||at.map(et)};let ct=at.to-st,ht=ct-nt.length;if(at.to-at.from!=ot||_.state.sliceDoc(ht,ct)!=nt||at.to>=it.from&&at.from<=it.to)return{range:at};let ut=$.changes({from:ht,to:ct,insert:d.insert}),dt=at.to-j.to;return{changes:ut,range:tt?EditorSelection.range(Math.max(0,tt.anchor+dt),Math.max(0,tt.head+dt)):at.map(ut)}})}else b={changes:et,selection:tt&&$.selection.replaceRange(tt)}}let _e="input.type";return(_.composing||_.inputState.compositionPendingChange&&_.inputState.compositionEndedAt>Date.now()-50)&&(_.inputState.compositionPendingChange=!1,_e+=".compose",_.inputState.compositionFirstChange&&(_e+=".start",_.inputState.compositionFirstChange=!1)),$.update(b,{userEvent:_e,scrollIntoView:!0})}function findDiff(_,d,g,b){let $=Math.min(_.length,d.length),j=0;for(;j<$&&_.charCodeAt(j)==d.charCodeAt(j);)j++;if(j==$&&_.length==d.length)return null;let _e=_.length,et=d.length;for(;_e>0&&et>0&&_.charCodeAt(_e-1)==d.charCodeAt(et-1);)_e--,et--;if(b=="end"){let tt=Math.max(0,j-Math.min(_e,et));g-=_e+tt-j}if(_e<j&&_.length<d.length){let tt=g<=j&&g>=_e?j-g:0;j-=tt,et=j+(et-_e),_e=j}else if(et<j){let tt=g<=j&&g>=et?j-g:0;j-=tt,_e=j+(_e-et),et=j}return{from:j,toA:_e,toB:et}}function selectionPoints(_){let d=[];if(_.root.activeElement!=_.contentDOM)return d;let{anchorNode:g,anchorOffset:b,focusNode:$,focusOffset:j}=_.observer.selectionRange;return g&&(d.push(new DOMPoint(g,b)),($!=g||j!=b)&&d.push(new DOMPoint($,j))),d}function selectionFromPoints(_,d){if(_.length==0)return null;let g=_[0].pos,b=_.length==2?_[1].pos:g;return g>-1&&b>-1?EditorSelection.single(g+d,b+d):null}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(d){this.view=d,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=d.contentDOM,this.observer=new MutationObserver(g=>{for(let b of g)this.queue.push(b);(browser.ie&&browser.ie_version<=11||browser.ios&&d.composing)&&g.some(b=>b.type=="childList"&&b.removedNodes.length||b.type=="characterData"&&b.oldValue.length>b.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&d.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(d),d.state.facet(editable)&&(d.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=g=>{this.queue.push({target:g.target,type:"characterData",oldValue:g.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var g;((g=this.view.docView)===null||g===void 0?void 0:g.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(d.scrollDOM)),this.addWindowListeners(this.win=d.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(g=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),g.length>0&&g[g.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(g=>{g.length>0&&g[g.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(d){this.view.inputState.runHandlers("scroll",d),this.intersecting&&this.view.measure()}onScroll(d){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(d)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(d){d.type=="change"&&!d.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(d){if(this.gapIntersection&&(d.length!=this.gaps.length||this.gaps.some((g,b)=>g!=d[b]))){this.gapIntersection.disconnect();for(let g of d)this.gapIntersection.observe(g);this.gaps=d}}onSelectionChange(d){let g=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:b}=this,$=this.selectionRange;if(b.state.facet(editable)?b.root.activeElement!=this.dom:!hasSelection(b.dom,$))return;let j=$.anchorNode&&b.docView.nearest($.anchorNode);if(j&&j.ignoreEvent(d)){g||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!b.state.selection.main.empty&&$.focusNode&&isEquivalentPosition($.focusNode,$.focusOffset,$.anchorNode,$.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:d}=this,g=getSelection(d.root);if(!g)return!1;let b=browser.safari&&d.root.nodeType==11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariSelectionRangeHack(this.view,g)||g;if(!b||this.selectionRange.eq(b))return!1;let $=hasSelection(this.dom,b);return $&&!this.selectionChanged&&d.inputState.lastFocusTime>Date.now()-200&&d.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,b)?(this.view.inputState.lastFocusTime=0,d.docView.updateSelection(),!1):(this.selectionRange.setRange(b),$&&(this.selectionChanged=!0),!0)}setSelectionRange(d,g){this.selectionRange.set(d.node,d.offset,g.node,g.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let d=0,g=null;for(let b=this.dom;b;)if(b.nodeType==1)!g&&d<this.scrollTargets.length&&this.scrollTargets[d]==b?d++:g||(g=this.scrollTargets.slice(0,d)),g&&g.push(b),b=b.assignedSlot||b.parentNode;else if(b.nodeType==11)b=b.host;else break;if(d<this.scrollTargets.length&&!g&&(g=this.scrollTargets.slice(0,d)),g){for(let b of this.scrollTargets)b.removeEventListener("scroll",this.onScroll);for(let b of this.scrollTargets=g)b.addEventListener("scroll",this.onScroll)}}ignore(d){if(!this.active)return d();try{return this.stop(),d()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(d,g){var b;if(!this.delayedAndroidKey){let $=()=>{let j=this.delayedAndroidKey;j&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=j.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&j.force&&dispatchKey(this.dom,j.key,j.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame($)}(!this.delayedAndroidKey||d=="Enter")&&(this.delayedAndroidKey={key:d,keyCode:g,force:this.lastChange<Date.now()-50||!!(!((b=this.delayedAndroidKey)===null||b===void 0)&&b.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let d of this.observer.takeRecords())this.queue.push(d);return this.queue}processRecords(){let d=this.pendingRecords();d.length&&(this.queue=[]);let g=-1,b=-1,$=!1;for(let j of d){let _e=this.readMutation(j);_e&&(_e.typeOver&&($=!0),g==-1?{from:g,to:b}=_e:(g=Math.min(_e.from,g),b=Math.max(_e.to,b)))}return{from:g,to:b,typeOver:$}}readChange(){let{from:d,to:g,typeOver:b}=this.processRecords(),$=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(d<0&&!$)return null;d>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let j=new DOMChange(this.view,d,g,b);return this.view.docView.domChanged={newSel:j.newSel?j.newSel.main:null},j}flush(d=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;d&&this.readSelectionRange();let g=this.readChange();if(!g)return this.view.requestMeasure(),!1;let b=this.view.state,$=applyDOMChange(this.view,g);return this.view.state==b&&(g.domChanged||g.newSel&&!g.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),$}readMutation(d){let g=this.view.docView.nearest(d.target);if(!g||g.ignoreMutation(d))return null;if(g.markDirty(d.type=="attributes"),d.type=="attributes"&&(g.flags|=4),d.type=="childList"){let b=findChild(g,d.previousSibling||d.target.previousSibling,-1),$=findChild(g,d.nextSibling||d.target.nextSibling,1);return{from:b?g.posAfter(b):g.posAtStart,to:$?g.posBefore($):g.posAtEnd,typeOver:!1}}else return d.type=="characterData"?{from:g.posAtStart,to:g.posAtEnd,typeOver:d.target.nodeValue==d.oldValue}:null}setWindow(d){d!=this.win&&(this.removeWindowListeners(this.win),this.win=d,this.addWindowListeners(this.win))}addWindowListeners(d){d.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):d.addEventListener("beforeprint",this.onPrint),d.addEventListener("scroll",this.onScroll),d.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(d){d.removeEventListener("scroll",this.onScroll),d.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):d.removeEventListener("beforeprint",this.onPrint),d.document.removeEventListener("selectionchange",this.onSelectionChange)}update(d){this.editContext&&(this.editContext.update(d),d.startState.facet(editable)!=d.state.facet(editable)&&(d.view.contentDOM.editContext=d.state.facet(editable)?this.editContext.editContext:null))}destroy(){var d,g,b;this.stop(),(d=this.intersection)===null||d===void 0||d.disconnect(),(g=this.gapIntersection)===null||g===void 0||g.disconnect(),(b=this.resizeScroll)===null||b===void 0||b.disconnect();for(let $ of this.scrollTargets)$.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function findChild(_,d,g){for(;d;){let b=ContentView.get(d);if(b&&b.parent==_)return b;let $=d.parentNode;d=$!=_.dom?$:g>0?d.nextSibling:d.previousSibling}return null}function buildSelectionRangeFromRange(_,d){let g=d.startContainer,b=d.startOffset,$=d.endContainer,j=d.endOffset,_e=_.docView.domAtPos(_.state.selection.main.anchor);return isEquivalentPosition(_e.node,_e.offset,$,j)&&([g,b,$,j]=[$,j,g,b]),{anchorNode:g,anchorOffset:b,focusNode:$,focusOffset:j}}function safariSelectionRangeHack(_,d){if(d.getComposedRanges){let $=d.getComposedRanges(_.root)[0];if($)return buildSelectionRangeFromRange(_,$)}let g=null;function b($){$.preventDefault(),$.stopImmediatePropagation(),g=$.getTargetRanges()[0]}return _.contentDOM.addEventListener("beforeinput",b,!0),_.dom.ownerDocument.execCommand("indent"),_.contentDOM.removeEventListener("beforeinput",b,!0),g?buildSelectionRangeFromRange(_,g):null}class EditContextManager{constructor(d){this.from=0,this.to=0,this.pendingContextChange=null,this.resetRange(d.state);let g=this.editContext=new window.EditContext({text:d.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,d.state.selection.main.anchor))),selectionEnd:this.toContextPos(d.state.selection.main.head)});g.addEventListener("textupdate",b=>{let{anchor:$}=d.state.selection.main,j={from:this.toEditorPos(b.updateRangeStart),to:this.toEditorPos(b.updateRangeEnd),insert:Text.of(b.text.split(`
`))};j.from==this.from&&$<this.from?j.from=$:j.to==this.to&&$>this.to&&(j.to=$),!(j.from==j.to&&!j.insert.length)&&(this.pendingContextChange=j,applyDOMChangeInner(d,j,EditorSelection.single(this.toEditorPos(b.selectionStart),this.toEditorPos(b.selectionEnd))),this.pendingContextChange&&this.revertPending(d.state))}),g.addEventListener("characterboundsupdate",b=>{let $=[],j=null;for(let _e=this.toEditorPos(b.rangeStart),et=this.toEditorPos(b.rangeEnd);_e<et;_e++){let tt=d.coordsForChar(_e);j=tt&&new DOMRect(tt.left,tt.top,tt.right-tt.left,tt.bottom-tt.top)||j||new DOMRect,$.push(j)}g.updateCharacterBounds(b.rangeStart,$)}),g.addEventListener("textformatupdate",b=>{let $=[];for(let j of b.getTextFormats()){let _e=j.underlineStyle,et=j.underlineThickness;if(_e!="None"&&et!="None"){let tt=`text-decoration: underline ${_e=="Dashed"?"dashed ":_e=="Squiggle"?"wavy ":""}${et=="Thin"?1:2}px`;$.push(Decoration.mark({attributes:{style:tt}}).range(this.toEditorPos(j.rangeStart),this.toEditorPos(j.rangeEnd)))}}d.dispatch({effects:setEditContextFormatting.of(Decoration.set($))})}),g.addEventListener("compositionstart",()=>{d.inputState.composing<0&&(d.inputState.composing=0,d.inputState.compositionFirstChange=!0)}),g.addEventListener("compositionend",()=>{d.inputState.composing=-1,d.inputState.compositionFirstChange=null}),this.measureReq={read:b=>{this.editContext.updateControlBounds(b.contentDOM.getBoundingClientRect());let $=getSelection(b.root);$&&$.rangeCount&&this.editContext.updateSelectionBounds($.getRangeAt(0).getBoundingClientRect())}}}applyEdits(d){let g=0,b=!1,$=this.pendingContextChange;return d.changes.iterChanges((j,_e,et,tt,nt)=>{if(b)return;let it=nt.length-(_e-j);if($&&_e>=$.to)if($.from==j&&$.to==_e&&$.insert.eq(nt)){$=this.pendingContextChange=null,g+=it,this.to+=it;return}else $=null,this.revertPending(d.state);if(j+=g,_e+=g,_e<=this.from)this.from+=it,this.to+=it;else if(j<this.to){if(j<this.from||_e>this.to||this.to-this.from+nt.length>3e4){b=!0;return}this.editContext.updateText(this.toContextPos(j),this.toContextPos(_e),nt.toString()),this.to+=it}g+=it}),$&&!b&&this.revertPending(d.state),!b}update(d){!this.applyEdits(d)||!this.rangeIsValid(d.state)?(this.pendingContextChange=null,this.resetRange(d.state),this.editContext.updateText(0,this.editContext.text.length,d.state.doc.sliceString(this.from,this.to)),this.setSelection(d.state)):(d.docChanged||d.selectionSet)&&this.setSelection(d.state),(d.geometryChanged||d.docChanged||d.selectionSet)&&d.view.requestMeasure(this.measureReq)}resetRange(d){let{head:g}=d.selection.main;this.from=Math.max(0,g-1e4),this.to=Math.min(d.doc.length,g+1e4)}revertPending(d){let g=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(g.from),this.toContextPos(g.to+g.insert.length),d.doc.sliceString(g.from,g.to))}setSelection(d){let{main:g}=d.selection,b=this.toContextPos(Math.max(this.from,Math.min(this.to,g.anchor))),$=this.toContextPos(g.head);(this.editContext.selectionStart!=b||this.editContext.selectionEnd!=$)&&this.editContext.updateSelection(b,$)}rangeIsValid(d){let{head:g}=d.selection.main;return!(this.from>0&&g-this.from<500||this.to<d.doc.length&&this.to-g<500||this.to-this.from>1e4*3)}toEditorPos(d){return d+this.from}toContextPos(d){return d-this.from}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(d={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),d.parent&&d.parent.appendChild(this.dom);let{dispatch:g}=d;this.dispatchTransactions=d.dispatchTransactions||g&&(b=>b.forEach($=>g($,this)))||(b=>this.update(b)),this.dispatch=this.dispatch.bind(this),this._root=d.root||getRoot(d.parent)||document,this.viewState=new ViewState(d.state||EditorState.create(d)),d.scrollTo&&d.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=d.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(b=>new PluginInstance(b));for(let b of this.plugins)b.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...d){let g=d.length==1&&d[0]instanceof Transaction?d:d.length==1&&Array.isArray(d[0])?d[0]:[this.state.update(...d)];this.dispatchTransactions(g,this)}update(d){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let g=!1,b=!1,$,j=this.state;for(let st of d){if(st.startState!=j)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");j=st.state}if(this.destroyed){this.viewState.state=j;return}let _e=this.hasFocus,et=0,tt=null;d.some(st=>st.annotation(isFocusChange))?(this.inputState.notifiedFocused=_e,et=1):_e!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=_e,tt=focusChangeTransaction(j,_e),tt||(et=1));let nt=this.observer.delayedAndroidKey,it=null;if(nt?(this.observer.clearDelayedAndroidKey(),it=this.observer.readChange(),(it&&!this.state.doc.eq(j.doc)||!this.state.selection.eq(j.selection))&&(it=null)):this.observer.clear(),j.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(j);$=ViewUpdate.create(this,j,d),$.flags|=et;let rt=this.viewState.scrollTarget;try{this.updateState=2;for(let st of d){if(rt&&(rt=rt.map(st.changes)),st.scrollIntoView){let{main:ot}=st.state.selection;rt=new ScrollTarget(ot.empty?ot:EditorSelection.cursor(ot.head,ot.head>ot.anchor?-1:1))}for(let ot of st.effects)ot.is(scrollIntoView$1)&&(rt=ot.value.clip(this.state))}this.viewState.update($,rt),this.bidiCache=CachedOrder.update(this.bidiCache,$.changes),$.empty||(this.updatePlugins($),this.inputState.update($)),g=this.docView.update($),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),b=this.updateAttrs(),this.showAnnouncements(d),this.docView.updateSelection(g,d.some(st=>st.isUserEvent("select.pointer")))}finally{this.updateState=0}if($.startState.facet(theme)!=$.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(g||b||rt||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),g&&this.docViewUpdate(),!$.empty)for(let st of this.state.facet(updateListener))try{st($)}catch(ot){logException(this.state,ot,"update listener")}(tt||it)&&Promise.resolve().then(()=>{tt&&this.state==tt.startState&&this.dispatch(tt),it&&!applyDOMChange(this,it)&&nt.force&&dispatchKey(this.contentDOM,nt.key,nt.keyCode)})}setState(d){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=d;return}this.updateState=2;let g=this.hasFocus;try{for(let b of this.plugins)b.destroy(this);this.viewState=new ViewState(d),this.plugins=d.facet(viewPlugin).map(b=>new PluginInstance(b)),this.pluginMap.clear();for(let b of this.plugins)b.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}g&&this.focus(),this.requestMeasure()}updatePlugins(d){let g=d.startState.facet(viewPlugin),b=d.state.facet(viewPlugin);if(g!=b){let $=[];for(let j of b){let _e=g.indexOf(j);if(_e<0)$.push(new PluginInstance(j));else{let et=this.plugins[_e];et.mustUpdate=d,$.push(et)}}for(let j of this.plugins)j.mustUpdate!=d&&j.destroy(this);this.plugins=$,this.pluginMap.clear()}else for(let $ of this.plugins)$.mustUpdate=d;for(let $=0;$<this.plugins.length;$++)this.plugins[$].update(this);g!=b&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let d of this.plugins){let g=d.value;if(g&&g.docViewUpdate)try{g.docViewUpdate(this)}catch(b){logException(this.state,b,"doc view update listener")}}}measure(d=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,d&&this.observer.forceFlush();let g=null,b=this.scrollDOM,$=b.scrollTop*this.scaleY,{scrollAnchorPos:j,scrollAnchorHeight:_e}=this.viewState;Math.abs($-this.viewState.scrollTop)>1&&(_e=-1),this.viewState.scrollAnchorHeight=-1;try{for(let et=0;;et++){if(_e<0)if(isScrolledToBottom(b))j=-1,_e=this.viewState.heightMap.height;else{let ot=this.viewState.scrollAnchorAt($);j=ot.from,_e=ot.top}this.updateState=1;let tt=this.viewState.measure(this);if(!tt&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(et>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let nt=[];tt&4||([this.measureRequests,nt]=[nt,this.measureRequests]);let it=nt.map(ot=>{try{return ot.read(this)}catch(at){return logException(this.state,at),BadMeasure}}),rt=ViewUpdate.create(this,this.state,[]),st=!1;rt.flags|=tt,g?g.flags|=tt:g=rt,this.updateState=2,rt.empty||(this.updatePlugins(rt),this.inputState.update(rt),this.updateAttrs(),st=this.docView.update(rt),st&&this.docViewUpdate());for(let ot=0;ot<nt.length;ot++)if(it[ot]!=BadMeasure)try{let at=nt[ot];at.write&&at.write(it[ot],this)}catch(at){logException(this.state,at)}if(st&&this.docView.updateSelection(!0),!rt.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,_e=-1;continue}else{let at=(j<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(j).top)-_e;if(at>1||at<-1){$=$+at,b.scrollTop=$/this.scaleY,_e=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(g&&!g.empty)for(let et of this.state.facet(updateListener))et(g)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let d=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),g={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(g["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,g);let b=this.observer.ignore(()=>{let $=updateAttrs(this.contentDOM,this.contentAttrs,g),j=updateAttrs(this.dom,this.editorAttrs,d);return $||j});return this.editorAttrs=d,this.contentAttrs=g,b}showAnnouncements(d){let g=!0;for(let b of d)for(let $ of b.effects)if($.is(EditorView.announce)){g&&(this.announceDOM.textContent=""),g=!1;let j=this.announceDOM.appendChild(document.createElement("div"));j.textContent=$.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let d=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$2).reverse(),d?{nonce:d}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(d){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),d){if(this.measureRequests.indexOf(d)>-1)return;if(d.key!=null){for(let g=0;g<this.measureRequests.length;g++)if(this.measureRequests[g].key===d.key){this.measureRequests[g]=d;return}}this.measureRequests.push(d)}}plugin(d){let g=this.pluginMap.get(d);return(g===void 0||g&&g.spec!=d)&&this.pluginMap.set(d,g=this.plugins.find(b=>b.spec==d)||null),g&&g.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(d){return this.readMeasured(),this.viewState.elementAtHeight(d)}lineBlockAtHeight(d){return this.readMeasured(),this.viewState.lineBlockAtHeight(d)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(d){return this.viewState.lineBlockAt(d)}get contentHeight(){return this.viewState.contentHeight}moveByChar(d,g,b){return skipAtoms(this,d,moveByChar(this,d,g,b))}moveByGroup(d,g){return skipAtoms(this,d,moveByChar(this,d,g,b=>byGroup(this,d.head,b)))}visualLineSide(d,g){let b=this.bidiSpans(d),$=this.textDirectionAt(d.from),j=b[g?b.length-1:0];return EditorSelection.cursor(j.side(g,$)+d.from,j.forward(!g,$)?1:-1)}moveToLineBoundary(d,g,b=!0){return moveToLineBoundary(this,d,g,b)}moveVertically(d,g,b){return skipAtoms(this,d,moveVertically(this,d,g,b))}domAtPos(d){return this.docView.domAtPos(d)}posAtDOM(d,g=0){return this.docView.posFromDOM(d,g)}posAtCoords(d,g=!0){return this.readMeasured(),posAtCoords(this,d,g)}coordsAtPos(d,g=1){this.readMeasured();let b=this.docView.coordsAt(d,g);if(!b||b.left==b.right)return b;let $=this.state.doc.lineAt(d),j=this.bidiSpans($),_e=j[BidiSpan.find(j,d-$.from,-1,g)];return flattenRect(b,_e.dir==Direction.LTR==g>0)}coordsForChar(d){return this.readMeasured(),this.docView.coordsForChar(d)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(d){return!this.state.facet(perLineTextDirection)||d<this.viewport.from||d>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(d))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(d){if(d.length>MaxBidiLine)return trivialOrder(d.length);let g=this.textDirectionAt(d.from),b;for(let j of this.bidiCache)if(j.from==d.from&&j.dir==g&&(j.fresh||isolatesEq(j.isolates,b=getIsolatedRanges(this,d))))return j.order;b||(b=getIsolatedRanges(this,d));let $=computeOrder(d.text,g,b);return this.bidiCache.push(new CachedOrder(d.from,d.to,g,b,!0,$)),$}get hasFocus(){var d;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((d=this.inputState)===null||d===void 0?void 0:d.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(d){this._root!=d&&(this._root=d,this.observer.setWindow((d.nodeType==9?d:d.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let d of this.plugins)d.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(d,g={}){return scrollIntoView$1.of(new ScrollTarget(typeof d=="number"?EditorSelection.cursor(d):d,g.y,g.x,g.yMargin,g.xMargin))}scrollSnapshot(){let{scrollTop:d,scrollLeft:g}=this.scrollDOM,b=this.viewState.scrollAnchorAt(d);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(b.from),"start","start",b.top-d,g,!0))}setTabFocusMode(d){d==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof d=="boolean"?this.inputState.tabFocusMode=d?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+d)}static domEventHandlers(d){return ViewPlugin.define(()=>({}),{eventHandlers:d})}static domEventObservers(d){return ViewPlugin.define(()=>({}),{eventObservers:d})}static theme(d,g){let b=StyleModule.newName(),$=[theme.of(b),styleModule.of(buildTheme(`.${b}`,d))];return g&&g.dark&&$.push(darkTheme.of(!0)),$}static baseTheme(d){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,d,lightDarkIDs)))}static findFromDOM(d){var g;let b=d.querySelector(".cm-content"),$=b&&ContentView.get(b)||ContentView.get(d);return((g=$==null?void 0:$.rootView)===null||g===void 0?void 0:g.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.scrollHandler=scrollHandler;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.outerDecorations=outerDecorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:_=>_.length?_[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(d,g,b,$,j,_e){this.from=d,this.to=g,this.dir=b,this.isolates=$,this.fresh=j,this.order=_e}static update(d,g){if(g.empty&&!d.some(j=>j.fresh))return d;let b=[],$=d.length?d[d.length-1].dir:Direction.LTR;for(let j=Math.max(0,d.length-10);j<d.length;j++){let _e=d[j];_e.dir==$&&!g.touchesRange(_e.from,_e.to)&&b.push(new CachedOrder(g.mapPos(_e.from,1),g.mapPos(_e.to,-1),_e.dir,_e.isolates,!1,_e.order))}return b}}function attrsFromFacet(_,d,g){for(let b=_.state.facet(d),$=b.length-1;$>=0;$--){let j=b[$],_e=typeof j=="function"?j(_):j;_e&&combineAttrs(_e,g)}return g}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(_,d){const g=_.split(/-(?!$)/);let b=g[g.length-1];b=="Space"&&(b=" ");let $,j,_e,et;for(let tt=0;tt<g.length-1;++tt){const nt=g[tt];if(/^(cmd|meta|m)$/i.test(nt))et=!0;else if(/^a(lt)?$/i.test(nt))$=!0;else if(/^(c|ctrl|control)$/i.test(nt))j=!0;else if(/^s(hift)?$/i.test(nt))_e=!0;else if(/^mod$/i.test(nt))d=="mac"?et=!0:j=!0;else throw new Error("Unrecognized modifier name: "+nt)}return $&&(b="Alt-"+b),j&&(b="Ctrl-"+b),et&&(b="Meta-"+b),_e&&(b="Shift-"+b),b}function modifiers(_,d,g){return d.altKey&&(_="Alt-"+_),d.ctrlKey&&(_="Ctrl-"+_),d.metaKey&&(_="Meta-"+_),g!==!1&&d.shiftKey&&(_="Shift-"+_),_}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(_,d){return runHandlers(getKeymap(d.state),_,d,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(_){let d=_.facet(keymap),g=Keymaps.get(d);return g||Keymaps.set(d,g=buildKeymap(d.reduce((b,$)=>b.concat($),[]))),g}function runScopeHandlers(_,d,g){return runHandlers(getKeymap(_.state),d,_,g)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(_,d=currentPlatform){let g=Object.create(null),b=Object.create(null),$=(_e,et)=>{let tt=b[_e];if(tt==null)b[_e]=et;else if(tt!=et)throw new Error("Key binding "+_e+" is used both as a regular binding and as a multi-stroke prefix")},j=(_e,et,tt,nt,it)=>{var rt,st;let ot=g[_e]||(g[_e]=Object.create(null)),at=et.split(/ (?!$)/).map(ut=>normalizeKeyName(ut,d));for(let ut=1;ut<at.length;ut++){let dt=at.slice(0,ut).join(" ");$(dt,!0),ot[dt]||(ot[dt]={preventDefault:!0,stopPropagation:!1,run:[ft=>{let mt=storedPrefix={view:ft,prefix:dt,scope:_e};return setTimeout(()=>{storedPrefix==mt&&(storedPrefix=null)},PrefixTimeout),!0}]})}let ct=at.join(" ");$(ct,!1);let ht=ot[ct]||(ot[ct]={preventDefault:!1,stopPropagation:!1,run:((st=(rt=ot._any)===null||rt===void 0?void 0:rt.run)===null||st===void 0?void 0:st.slice())||[]});tt&&ht.run.push(tt),nt&&(ht.preventDefault=!0),it&&(ht.stopPropagation=!0)};for(let _e of _){let et=_e.scope?_e.scope.split(" "):["editor"];if(_e.any)for(let nt of et){let it=g[nt]||(g[nt]=Object.create(null));it._any||(it._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:rt}=_e;for(let st in it)it[st].run.push(ot=>rt(ot,currentKeyEvent))}let tt=_e[d]||_e.key;if(tt)for(let nt of et)j(nt,tt,_e.run,_e.preventDefault,_e.stopPropagation),_e.shift&&j(nt,"Shift-"+tt,_e.shift,_e.preventDefault,_e.stopPropagation)}return g}let currentKeyEvent=null;function runHandlers(_,d,g,b){currentKeyEvent=d;let $=keyName(d),j=codePointAt($,0),_e=codePointSize(j)==$.length&&$!=" ",et="",tt=!1,nt=!1,it=!1;storedPrefix&&storedPrefix.view==g&&storedPrefix.scope==b&&(et=storedPrefix.prefix+" ",modifierCodes.indexOf(d.keyCode)<0&&(nt=!0,storedPrefix=null));let rt=new Set,st=ht=>{if(ht){for(let ut of ht.run)if(!rt.has(ut)&&(rt.add(ut),ut(g)))return ht.stopPropagation&&(it=!0),!0;ht.preventDefault&&(ht.stopPropagation&&(it=!0),nt=!0)}return!1},ot=_[b],at,ct;return ot&&(st(ot[et+modifiers($,d,!_e)])?tt=!0:_e&&(d.altKey||d.metaKey||d.ctrlKey)&&!(browser.windows&&d.ctrlKey&&d.altKey)&&(at=base[d.keyCode])&&at!=$?(st(ot[et+modifiers(at,d,!0)])||d.shiftKey&&(ct=shift$3[d.keyCode])!=$&&ct!=at&&st(ot[et+modifiers(ct,d,!1)]))&&(tt=!0):_e&&d.shiftKey&&st(ot[et+modifiers($,d,!0)])&&(tt=!0),!tt&&st(ot._any)&&(tt=!0)),nt&&(tt=!0),tt&&it&&d.stopPropagation(),currentKeyEvent=null,tt}class RectangleMarker{constructor(d,g,b,$,j){this.className=d,this.left=g,this.top=b,this.width=$,this.height=j}draw(){let d=document.createElement("div");return d.className=this.className,this.adjust(d),d}update(d,g){return g.className!=this.className?!1:(this.adjust(d),!0)}adjust(d){d.style.left=this.left+"px",d.style.top=this.top+"px",this.width!=null&&(d.style.width=this.width+"px"),d.style.height=this.height+"px"}eq(d){return this.left==d.left&&this.top==d.top&&this.width==d.width&&this.height==d.height&&this.className==d.className}static forRange(d,g,b){if(b.empty){let $=d.coordsAtPos(b.head,b.assoc||1);if(!$)return[];let j=getBase(d);return[new RectangleMarker(g,$.left-j.left,$.top-j.top,null,$.bottom-$.top)]}else return rectanglesForRange(d,g,b)}}function getBase(_){let d=_.scrollDOM.getBoundingClientRect();return{left:(_.textDirection==Direction.LTR?d.left:d.right-_.scrollDOM.clientWidth*_.scaleX)-_.scrollDOM.scrollLeft*_.scaleX,top:d.top-_.scrollDOM.scrollTop*_.scaleY}}function wrappedLine(_,d,g,b){let $=_.coordsAtPos(d,g*2);if(!$)return b;let j=_.dom.getBoundingClientRect(),_e=($.top+$.bottom)/2,et=_.posAtCoords({x:j.left+1,y:_e}),tt=_.posAtCoords({x:j.right-1,y:_e});return et==null||tt==null?b:{from:Math.max(b.from,Math.min(et,tt)),to:Math.min(b.to,Math.max(et,tt))}}function rectanglesForRange(_,d,g){if(g.to<=_.viewport.from||g.from>=_.viewport.to)return[];let b=Math.max(g.from,_.viewport.from),$=Math.min(g.to,_.viewport.to),j=_.textDirection==Direction.LTR,_e=_.contentDOM,et=_e.getBoundingClientRect(),tt=getBase(_),nt=_e.querySelector(".cm-line"),it=nt&&window.getComputedStyle(nt),rt=et.left+(it?parseInt(it.paddingLeft)+Math.min(0,parseInt(it.textIndent)):0),st=et.right-(it?parseInt(it.paddingRight):0),ot=blockAt(_,b),at=blockAt(_,$),ct=ot.type==BlockType.Text?ot:null,ht=at.type==BlockType.Text?at:null;if(ct&&(_.lineWrapping||ot.widgetLineBreaks)&&(ct=wrappedLine(_,b,1,ct)),ht&&(_.lineWrapping||at.widgetLineBreaks)&&(ht=wrappedLine(_,$,-1,ht)),ct&&ht&&ct.from==ht.from&&ct.to==ht.to)return dt(ft(g.from,g.to,ct));{let pt=ct?ft(g.from,null,ct):mt(ot,!1),Ot=ht?ft(null,g.to,ht):mt(at,!0),gt=[];return(ct||ot).to<(ht||at).from-(ct&&ht?1:0)||ot.widgetLineBreaks>1&&pt.bottom+_.defaultLineHeight/2<Ot.top?gt.push(ut(rt,pt.bottom,st,Ot.top)):pt.bottom<Ot.top&&_.elementAtHeight((pt.bottom+Ot.top)/2).type==BlockType.Text&&(pt.bottom=Ot.top=(pt.bottom+Ot.top)/2),dt(pt).concat(gt).concat(dt(Ot))}function ut(pt,Ot,gt,yt){return new RectangleMarker(d,pt-tt.left,Ot-tt.top-.01,gt-pt,yt-Ot+.01)}function dt({top:pt,bottom:Ot,horizontal:gt}){let yt=[];for(let St=0;St<gt.length;St+=2)yt.push(ut(gt[St],pt,gt[St+1],Ot));return yt}function ft(pt,Ot,gt){let yt=1e9,St=-1e9,vt=[];function wt(bt,Et,At,Tt,_t){let Ct=_.coordsAtPos(bt,bt==gt.to?-2:2),Pt=_.coordsAtPos(At,At==gt.from?2:-2);!Ct||!Pt||(yt=Math.min(Ct.top,Pt.top,yt),St=Math.max(Ct.bottom,Pt.bottom,St),_t==Direction.LTR?vt.push(j&&Et?rt:Ct.left,j&&Tt?st:Pt.right):vt.push(!j&&Tt?rt:Pt.left,!j&&Et?st:Ct.right))}let xt=pt??gt.from,kt=Ot??gt.to;for(let bt of _.visibleRanges)if(bt.to>xt&&bt.from<kt)for(let Et=Math.max(bt.from,xt),At=Math.min(bt.to,kt);;){let Tt=_.state.doc.lineAt(Et);for(let _t of _.bidiSpans(Tt)){let Ct=_t.from+Tt.from,Pt=_t.to+Tt.from;if(Ct>=At)break;Pt>Et&&wt(Math.max(Ct,Et),pt==null&&Ct<=xt,Math.min(Pt,At),Ot==null&&Pt>=kt,_t.dir)}if(Et=Tt.to+1,Et>=At)break}return vt.length==0&&wt(xt,pt==null,kt,Ot==null,_.textDirection),{top:yt,bottom:St,horizontal:vt}}function mt(pt,Ot){let gt=et.top+(Ot?pt.top:pt.bottom);return{top:gt,bottom:gt,horizontal:[]}}}function sameMarker(_,d){return _.constructor==d.constructor&&_.eq(d)}class LayerView{constructor(d,g){this.view=d,this.layer=g,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=d.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),g.above&&this.dom.classList.add("cm-layer-above"),g.class&&this.dom.classList.add(g.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(d.state),d.requestMeasure(this.measureReq),g.mount&&g.mount(this.dom,d)}update(d){d.startState.facet(layerOrder)!=d.state.facet(layerOrder)&&this.setOrder(d.state),(this.layer.update(d,this.dom)||d.geometryChanged)&&(this.scale(),d.view.requestMeasure(this.measureReq))}docViewUpdate(d){this.layer.updateOnDocViewUpdate!==!1&&d.requestMeasure(this.measureReq)}setOrder(d){let g=0,b=d.facet(layerOrder);for(;g<b.length&&b[g]!=this.layer;)g++;this.dom.style.zIndex=String((this.layer.above?150:-1)-g)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:d,scaleY:g}=this.view;(d!=this.scaleX||g!=this.scaleY)&&(this.scaleX=d,this.scaleY=g,this.dom.style.transform=`scale(${1/d}, ${1/g})`)}draw(d){if(d.length!=this.drawn.length||d.some((g,b)=>!sameMarker(g,this.drawn[b]))){let g=this.dom.firstChild,b=0;for(let $ of d)$.update&&g&&$.constructor&&this.drawn[b].constructor&&$.update(g,this.drawn[b])?(g=g.nextSibling,b++):this.dom.insertBefore($.draw(),g);for(;g;){let $=g.nextSibling;g.remove(),g=$}this.drawn=d}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(_){return[ViewPlugin.define(d=>new LayerView(d,_)),layerOrder.of(_)]}const CanHidePrimary=!browser.ios,selectionConfig=Facet.define({combine(_){return combineConfig(_,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(d,g)=>Math.min(d,g),drawRangeCursor:(d,g)=>d||g})}});function drawSelection(_={}){return[selectionConfig.of(_),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(_){return _.startState.facet(selectionConfig)!=_.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(_){let{state:d}=_,g=d.facet(selectionConfig),b=[];for(let $ of d.selection.ranges){let j=$==d.selection.main;if($.empty?!j||CanHidePrimary:g.drawRangeCursor){let _e=j?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",et=$.empty?$:EditorSelection.cursor($.head,$.head>$.anchor?-1:1);for(let tt of RectangleMarker.forRange(_,_e,et))b.push(tt)}}return b},update(_,d){_.transactions.some(b=>b.selection)&&(d.style.animationName=d.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let g=configChanged(_);return g&&setBlinkRate(_.state,d),_.docChanged||_.selectionSet||g},mount(_,d){setBlinkRate(d.state,_)},class:"cm-cursorLayer"});function setBlinkRate(_,d){d.style.animationDuration=_.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(_){return _.state.selection.ranges.map(d=>d.empty?[]:RectangleMarker.forRange(_,"cm-selectionBackground",d)).reduce((d,g)=>d.concat(g))},update(_,d){return _.docChanged||_.selectionSet||_.viewportChanged||configChanged(_)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor=themeSpec[".cm-content"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec)),setDropCursorPos=StateEffect.define({map(_,d){return _==null?null:d.mapPos(_)}}),dropCursorPos=StateField.define({create(){return null},update(_,d){return _!=null&&(_=d.changes.mapPos(_)),d.effects.reduce((g,b)=>b.is(setDropCursorPos)?b.value:g,_)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(_){var d;let g=_.state.field(dropCursorPos);g==null?this.cursor!=null&&((d=this.cursor)===null||d===void 0||d.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(_.startState.field(dropCursorPos)!=g||_.docChanged||_.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:_}=this,d=_.state.field(dropCursorPos),g=d!=null&&_.coordsAtPos(d);if(!g)return null;let b=_.scrollDOM.getBoundingClientRect();return{left:g.left-b.left+_.scrollDOM.scrollLeft*_.scaleX,top:g.top-b.top+_.scrollDOM.scrollTop*_.scaleY,height:g.bottom-g.top}}drawCursor(_){if(this.cursor){let{scaleX:d,scaleY:g}=this.view;_?(this.cursor.style.left=_.left/d+"px",this.cursor.style.top=_.top/g+"px",this.cursor.style.height=_.height/g+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(_){this.view.state.field(dropCursorPos)!=_&&this.view.dispatch({effects:setDropCursorPos.of(_)})}},{eventObservers:{dragover(_){this.setDropPos(this.view.posAtCoords({x:_.clientX,y:_.clientY}))},dragleave(_){(_.target==this.view.contentDOM||!this.view.contentDOM.contains(_.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(_,d,g,b,$){d.lastIndex=0;for(let j=_.iterRange(g,b),_e=g,et;!j.next().done;_e+=j.value.length)if(!j.lineBreak)for(;et=d.exec(j.value);)$(_e+et.index,et)}function matchRanges(_,d){let g=_.visibleRanges;if(g.length==1&&g[0].from==_.viewport.from&&g[0].to==_.viewport.to)return g;let b=[];for(let{from:$,to:j}of g)$=Math.max(_.state.doc.lineAt($).from,$-d),j=Math.min(_.state.doc.lineAt(j).to,j+d),b.length&&b[b.length-1].to>=$?b[b.length-1].to=j:b.push({from:$,to:j});return b}class MatchDecorator{constructor(d){const{regexp:g,decoration:b,decorate:$,boundary:j,maxLength:_e=1e3}=d;if(!g.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=g,$)this.addMatch=(et,tt,nt,it)=>$(it,nt,nt+et[0].length,et,tt);else if(typeof b=="function")this.addMatch=(et,tt,nt,it)=>{let rt=b(et,tt,nt);rt&&it(nt,nt+et[0].length,rt)};else if(b)this.addMatch=(et,tt,nt,it)=>it(nt,nt+et[0].length,b);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=j,this.maxLength=_e}createDeco(d){let g=new RangeSetBuilder,b=g.add.bind(g);for(let{from:$,to:j}of matchRanges(d,this.maxLength))iterMatches(d.state.doc,this.regexp,$,j,(_e,et)=>this.addMatch(et,d,_e,b));return g.finish()}updateDeco(d,g){let b=1e9,$=-1;return d.docChanged&&d.changes.iterChanges((j,_e,et,tt)=>{tt>d.view.viewport.from&&et<d.view.viewport.to&&(b=Math.min(et,b),$=Math.max(tt,$))}),d.viewportChanged||$-b>1e3?this.createDeco(d.view):$>-1?this.updateRange(d.view,g.map(d.changes),b,$):g}updateRange(d,g,b,$){for(let j of d.visibleRanges){let _e=Math.max(j.from,b),et=Math.min(j.to,$);if(et>_e){let tt=d.state.doc.lineAt(_e),nt=tt.to<et?d.state.doc.lineAt(et):tt,it=Math.max(j.from,tt.from),rt=Math.min(j.to,nt.to);if(this.boundary){for(;_e>tt.from;_e--)if(this.boundary.test(tt.text[_e-1-tt.from])){it=_e;break}for(;et<nt.to;et++)if(this.boundary.test(nt.text[et-nt.from])){rt=et;break}}let st=[],ot,at=(ct,ht,ut)=>st.push(ut.range(ct,ht));if(tt==nt)for(this.regexp.lastIndex=it-tt.from;(ot=this.regexp.exec(tt.text))&&ot.index<rt-tt.from;)this.addMatch(ot,d,ot.index+tt.from,at);else iterMatches(d.state.doc,this.regexp,it,rt,(ct,ht)=>this.addMatch(ht,d,ct,at));g=g.update({filterFrom:it,filterTo:rt,filter:(ct,ht)=>ct<it||ht>rt,add:st})}}return g}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var _;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let d=document.body.style;_supportsTabSize=((_=d.tabSize)!==null&&_!==void 0?_:d.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(_){let d=combineConfig(_,{render:null,specialChars:Specials,addSpecialChars:null});return(d.replaceTabs=!supportsTabSize())&&(d.specialChars=new RegExp("	|"+d.specialChars.source,UnicodeRegexpSupport)),d.addSpecialChars&&(d.specialChars=new RegExp(d.specialChars.source+"|"+d.addSpecialChars.source,UnicodeRegexpSupport)),d}});function highlightSpecialChars(_={}){return[specialCharConfig.of(_),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(_.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(_)}makeDecorator(_){return new MatchDecorator({regexp:_.specialChars,decoration:(d,g,b)=>{let{doc:$}=g.state,j=codePointAt(d[0],0);if(j==9){let _e=$.lineAt(b),et=g.state.tabSize,tt=countColumn(_e.text,et,b-_e.from);return Decoration.replace({widget:new TabWidget((et-tt%et)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[j]||(this.decorationCache[j]=Decoration.replace({widget:new SpecialCharWidget(_,j)}))},boundary:_.replaceTabs?void 0:/[^]/})}update(_){let d=_.state.facet(specialCharConfig);_.startState.facet(specialCharConfig)!=d?(this.decorator=this.makeDecorator(d),this.decorations=this.decorator.createDeco(_.view)):this.decorations=this.decorator.updateDeco(_,this.decorations)}},{decorations:_=>_.decorations}))}const DefaultPlaceholder="";function placeholder$1(_){return _>=32?DefaultPlaceholder:_==10?"":String.fromCharCode(9216+_)}class SpecialCharWidget extends WidgetType{constructor(d,g){super(),this.options=d,this.code=g}eq(d){return d.code==this.code}toDOM(d){let g=placeholder$1(this.code),b=d.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),$=this.options.render&&this.options.render(this.code,b,g);if($)return $;let j=document.createElement("span");return j.textContent=g,j.title=b,j.setAttribute("aria-label",b),j.className="cm-specialChar",j}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(d){super(),this.width=d}eq(d){return d.width==this.width}toDOM(){let d=document.createElement("span");return d.textContent="	",d.className="cm-tab",d.style.width=this.width+"px",d}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(_){this.decorations=this.getDeco(_)}update(_){(_.docChanged||_.selectionSet)&&(this.decorations=this.getDeco(_.view))}getDeco(_){let d=-1,g=[];for(let b of _.state.selection.ranges){let $=_.lineBlockAt(b.head);$.from>d&&(g.push(lineDeco.range($.from)),d=$.from)}return Decoration.set(g)}},{decorations:_=>_.decorations});class Placeholder extends WidgetType{constructor(d){super(),this.content=d}toDOM(){let d=document.createElement("span");return d.className="cm-placeholder",d.style.pointerEvents="none",d.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?d.setAttribute("aria-label","placeholder "+this.content):d.setAttribute("aria-hidden","true"),d}coordsAt(d){let g=d.firstChild?clientRectsFor(d.firstChild):[];if(!g.length)return null;let b=window.getComputedStyle(d.parentNode),$=flattenRect(g[0],b.direction!="rtl"),j=parseInt(b.lineHeight);return $.bottom-$.top>j*1.5?{left:$.left,right:$.right,top:$.top,bottom:$.top+j}:$}ignoreEvent(){return!1}}function placeholder(_){return ViewPlugin.fromClass(class{constructor(d){this.view=d,this.placeholder=_?Decoration.set([Decoration.widget({widget:new Placeholder(_),side:1}).range(0)]):Decoration.none}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:d=>d.decorations})}const MaxOff=2e3;function rectangleFor(_,d,g){let b=Math.min(d.line,g.line),$=Math.max(d.line,g.line),j=[];if(d.off>MaxOff||g.off>MaxOff||d.col<0||g.col<0){let _e=Math.min(d.off,g.off),et=Math.max(d.off,g.off);for(let tt=b;tt<=$;tt++){let nt=_.doc.line(tt);nt.length<=et&&j.push(EditorSelection.range(nt.from+_e,nt.to+et))}}else{let _e=Math.min(d.col,g.col),et=Math.max(d.col,g.col);for(let tt=b;tt<=$;tt++){let nt=_.doc.line(tt),it=findColumn(nt.text,_e,_.tabSize,!0);if(it<0)j.push(EditorSelection.cursor(nt.to));else{let rt=findColumn(nt.text,et,_.tabSize);j.push(EditorSelection.range(nt.from+it,nt.from+rt))}}}return j}function absoluteColumn(_,d){let g=_.coordsAtPos(_.viewport.from);return g?Math.round(Math.abs((g.left-d)/_.defaultCharacterWidth)):-1}function getPos(_,d){let g=_.posAtCoords({x:d.clientX,y:d.clientY},!1),b=_.state.doc.lineAt(g),$=g-b.from,j=$>MaxOff?-1:$==b.length?absoluteColumn(_,d.clientX):countColumn(b.text,_.state.tabSize,g-b.from);return{line:b.number,col:j,off:$}}function rectangleSelectionStyle(_,d){let g=getPos(_,d),b=_.state.selection;return g?{update($){if($.docChanged){let j=$.changes.mapPos($.startState.doc.line(g.line).from),_e=$.state.doc.lineAt(j);g={line:_e.number,col:g.col,off:Math.min(g.off,_e.length)},b=b.map($.changes)}},get($,j,_e){let et=getPos(_,$);if(!et)return b;let tt=rectangleFor(_.state,g,et);return tt.length?_e?EditorSelection.create(tt.concat(b.ranges)):EditorSelection.create(tt):b}}:null}function rectangularSelection(_){let d=(_==null?void 0:_.eventFilter)||(g=>g.altKey&&g.button==0);return EditorView.mouseSelectionStyle.of((g,b)=>d(b)?rectangleSelectionStyle(g,b):null)}const keys={Alt:[18,_=>!!_.altKey],Control:[17,_=>!!_.ctrlKey],Shift:[16,_=>!!_.shiftKey],Meta:[91,_=>!!_.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(_={}){let[d,g]=keys[_.key||"Alt"],b=ViewPlugin.fromClass(class{constructor($){this.view=$,this.isDown=!1}set($){this.isDown!=$&&(this.isDown=$,this.view.update([]))}},{eventObservers:{keydown($){this.set($.keyCode==d||g($))},keyup($){($.keyCode==d||!g($))&&this.set(!1)},mousemove($){this.set(g($))}}});return[b,EditorView.contentAttributes.of($=>{var j;return!((j=$.plugin(b))===null||j===void 0)&&j.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(d,g,b,$){this.facet=g,this.createTooltipView=b,this.removeTooltipView=$,this.input=d.state.facet(g),this.tooltips=this.input.filter(_e=>_e);let j=null;this.tooltipViews=this.tooltips.map(_e=>j=b(_e,j))}update(d,g){var b;let $=d.state.facet(this.facet),j=$.filter(tt=>tt);if($===this.input){for(let tt of this.tooltipViews)tt.update&&tt.update(d);return!1}let _e=[],et=g?[]:null;for(let tt=0;tt<j.length;tt++){let nt=j[tt],it=-1;if(nt){for(let rt=0;rt<this.tooltips.length;rt++){let st=this.tooltips[rt];st&&st.create==nt.create&&(it=rt)}if(it<0)_e[tt]=this.createTooltipView(nt,tt?_e[tt-1]:null),et&&(et[tt]=!!nt.above);else{let rt=_e[tt]=this.tooltipViews[it];et&&(et[tt]=g[it]),rt.update&&rt.update(d)}}}for(let tt of this.tooltipViews)_e.indexOf(tt)<0&&(this.removeTooltipView(tt),(b=tt.destroy)===null||b===void 0||b.call(tt));return g&&(et.forEach((tt,nt)=>g[nt]=tt),g.length=et.length),this.input=$,this.tooltips=j,this.tooltipViews=_e,!0}}function windowSpace(_){let{win:d}=_;return{top:0,left:0,bottom:d.innerHeight,right:d.innerWidth}}const tooltipConfig=Facet.define({combine:_=>{var d,g,b;return{position:browser.ios?"absolute":((d=_.find($=>$.position))===null||d===void 0?void 0:d.position)||"fixed",parent:((g=_.find($=>$.parent))===null||g===void 0?void 0:g.parent)||null,tooltipSpace:((b=_.find($=>$.tooltipSpace))===null||b===void 0?void 0:b.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let d=_.state.facet(tooltipConfig);this.position=d.position,this.parent=d.parent,this.classes=_.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TooltipViewManager(_,showTooltip,(g,b)=>this.createTooltip(g,b),g=>{this.resizeObserver&&this.resizeObserver.unobserve(g.dom),g.dom.remove()}),this.above=this.manager.tooltips.map(g=>!!g.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(g=>{Date.now()>this.lastTransaction-50&&g.length>0&&g[g.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),_.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let _ of this.manager.tooltipViews)this.intersectionObserver.observe(_.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(_){_.transactions.length&&(this.lastTransaction=Date.now());let d=this.manager.update(_,this.above);d&&this.observeIntersection();let g=d||_.geometryChanged,b=_.state.facet(tooltipConfig);if(b.position!=this.position&&!this.madeAbsolute){this.position=b.position;for(let $ of this.manager.tooltipViews)$.dom.style.position=this.position;g=!0}if(b.parent!=this.parent){this.parent&&this.container.remove(),this.parent=b.parent,this.createContainer();for(let $ of this.manager.tooltipViews)this.container.appendChild($.dom);g=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);g&&this.maybeMeasure()}createTooltip(_,d){let g=_.create(this.view),b=d?d.dom:null;if(g.dom.classList.add("cm-tooltip"),_.arrow&&!g.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let $=document.createElement("div");$.className="cm-tooltip-arrow",g.dom.appendChild($)}return g.dom.style.position=this.position,g.dom.style.top=Outside,g.dom.style.left="0px",this.container.insertBefore(g.dom,b),g.mount&&g.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(g.dom),g}destroy(){var _,d,g;this.view.win.removeEventListener("resize",this.measureSoon);for(let b of this.manager.tooltipViews)b.dom.remove(),(_=b.destroy)===null||_===void 0||_.call(b);this.parent&&this.container.remove(),(d=this.resizeObserver)===null||d===void 0||d.disconnect(),(g=this.intersectionObserver)===null||g===void 0||g.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let _=this.view.dom.getBoundingClientRect(),d=1,g=1,b=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:$}=this.manager.tooltipViews[0];if(browser.gecko)b=$.offsetParent!=this.container.ownerDocument.body;else if($.style.top==Outside&&$.style.left=="0px"){let j=$.getBoundingClientRect();b=Math.abs(j.top+1e4)>1||Math.abs(j.left)>1}}if(b||this.position=="absolute")if(this.parent){let $=this.parent.getBoundingClientRect();$.width&&$.height&&(d=$.width/this.parent.offsetWidth,g=$.height/this.parent.offsetHeight)}else({scaleX:d,scaleY:g}=this.view.viewState);return{editor:_,parent:this.parent?this.container.getBoundingClientRect():_,pos:this.manager.tooltips.map(($,j)=>{let _e=this.manager.tooltipViews[j];return _e.getCoords?_e.getCoords($.pos):this.view.coordsAtPos($.pos)}),size:this.manager.tooltipViews.map(({dom:$})=>$.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:d,scaleY:g,makeAbsolute:b}}writeMeasure(_){var d;if(_.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let et of this.manager.tooltipViews)et.dom.style.position="absolute"}let{editor:g,space:b,scaleX:$,scaleY:j}=_,_e=[];for(let et=0;et<this.manager.tooltips.length;et++){let tt=this.manager.tooltips[et],nt=this.manager.tooltipViews[et],{dom:it}=nt,rt=_.pos[et],st=_.size[et];if(!rt||rt.bottom<=Math.max(g.top,b.top)||rt.top>=Math.min(g.bottom,b.bottom)||rt.right<Math.max(g.left,b.left)-.1||rt.left>Math.min(g.right,b.right)+.1){it.style.top=Outside;continue}let ot=tt.arrow?nt.dom.querySelector(".cm-tooltip-arrow"):null,at=ot?7:0,ct=st.right-st.left,ht=(d=knownHeight.get(nt))!==null&&d!==void 0?d:st.bottom-st.top,ut=nt.offset||noOffset,dt=this.view.textDirection==Direction.LTR,ft=st.width>b.right-b.left?dt?b.left:b.right-st.width:dt?Math.min(rt.left-(ot?14:0)+ut.x,b.right-ct):Math.max(b.left,rt.left-ct+(ot?14:0)-ut.x),mt=this.above[et];!tt.strictSide&&(mt?rt.top-(st.bottom-st.top)-ut.y<b.top:rt.bottom+(st.bottom-st.top)+ut.y>b.bottom)&&mt==b.bottom-rt.bottom>rt.top-b.top&&(mt=this.above[et]=!mt);let pt=(mt?rt.top-b.top:b.bottom-rt.bottom)-at;if(pt<ht&&nt.resize!==!1){if(pt<this.view.defaultLineHeight){it.style.top=Outside;continue}knownHeight.set(nt,ht),it.style.height=(ht=pt)/j+"px"}else it.style.height&&(it.style.height="");let Ot=mt?rt.top-ht-at-ut.y:rt.bottom+at+ut.y,gt=ft+ct;if(nt.overlap!==!0)for(let yt of _e)yt.left<gt&&yt.right>ft&&yt.top<Ot+ht&&yt.bottom>Ot&&(Ot=mt?yt.top-ht-2-at:yt.bottom+at+2);if(this.position=="absolute"?(it.style.top=(Ot-_.parent.top)/j+"px",it.style.left=(ft-_.parent.left)/$+"px"):(it.style.top=Ot/j+"px",it.style.left=ft/$+"px"),ot){let yt=rt.left+(dt?ut.x:-ut.x)-(ft+14-7);ot.style.left=yt/$+"px"}nt.overlap!==!0&&_e.push({left:ft,top:Ot,right:gt,bottom:Ot+ht}),it.classList.toggle("cm-tooltip-above",mt),it.classList.toggle("cm-tooltip-below",!mt),nt.positioned&&nt.positioned(_.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let _ of this.manager.tooltipViews)_.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}}),baseTheme$5=EditorView.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$5]}),showHoverTooltip=Facet.define({combine:_=>_.reduce((d,g)=>d.concat(g),[])});class HoverTooltipHost{static create(d){return new HoverTooltipHost(d)}constructor(d){this.view=d,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(d,showHoverTooltip,(g,b)=>this.createHostedView(g,b),g=>g.dom.remove())}createHostedView(d,g){let b=d.create(this.view);return b.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(b.dom,g?g.dom.nextSibling:this.dom.firstChild),this.mounted&&b.mount&&b.mount(this.view),b}mount(d){for(let g of this.manager.tooltipViews)g.mount&&g.mount(d);this.mounted=!0}positioned(d){for(let g of this.manager.tooltipViews)g.positioned&&g.positioned(d)}update(d){this.manager.update(d)}destroy(){var d;for(let g of this.manager.tooltipViews)(d=g.destroy)===null||d===void 0||d.call(g)}passProp(d){let g;for(let b of this.manager.tooltipViews){let $=b[d];if($!==void 0){if(g===void 0)g=$;else if(g!==$)return}}return g}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],_=>{let d=_.facet(showHoverTooltip);return d.length===0?null:{pos:Math.min(...d.map(g=>g.pos)),end:Math.max(...d.map(g=>{var b;return(b=g.end)!==null&&b!==void 0?b:g.pos})),create:HoverTooltipHost.create,above:d[0].above,arrow:d.some(g=>g.arrow)}});class HoverPlugin{constructor(d,g,b,$,j){this.view=d,this.source=g,this.field=b,this.setHover=$,this.hoverTime=j,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:d.dom,time:0},this.checkHover=this.checkHover.bind(this),d.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),d.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let d=Date.now()-this.lastMove.time;d<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-d):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:d,lastMove:g}=this,b=d.docView.nearest(g.target);if(!b)return;let $,j=1;if(b instanceof WidgetView)$=b.posAtStart;else{if($=d.posAtCoords(g),$==null)return;let et=d.coordsAtPos($);if(!et||g.y<et.top||g.y>et.bottom||g.x<et.left-d.defaultCharacterWidth||g.x>et.right+d.defaultCharacterWidth)return;let tt=d.bidiSpans(d.state.doc.lineAt($)).find(it=>it.from<=$&&it.to>=$),nt=tt&&tt.dir==Direction.RTL?-1:1;j=g.x<et.left?-nt:nt}let _e=this.source(d,$,j);if(_e!=null&&_e.then){let et=this.pending={pos:$};_e.then(tt=>{this.pending==et&&(this.pending=null,tt&&!(Array.isArray(tt)&&!tt.length)&&d.dispatch({effects:this.setHover.of(Array.isArray(tt)?tt:[tt])}))},tt=>logException(d.state,tt,"hover tooltip"))}else _e&&!(Array.isArray(_e)&&!_e.length)&&d.dispatch({effects:this.setHover.of(Array.isArray(_e)?_e:[_e])})}get tooltip(){let d=this.view.plugin(tooltipPlugin),g=d?d.manager.tooltips.findIndex(b=>b.create==HoverTooltipHost.create):-1;return g>-1?d.manager.tooltipViews[g]:null}mousemove(d){var g,b;this.lastMove={x:d.clientX,y:d.clientY,target:d.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:$,tooltip:j}=this;if($.length&&j&&!isInTooltip(j.dom,d)||this.pending){let{pos:_e}=$[0]||this.pending,et=(b=(g=$[0])===null||g===void 0?void 0:g.end)!==null&&b!==void 0?b:_e;(_e==et?this.view.posAtCoords(this.lastMove)!=_e:!isOverRange(this.view,_e,et,d.clientX,d.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(d){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:g}=this;if(g.length){let{tooltip:b}=this;b&&b.dom.contains(d.relatedTarget)?this.watchTooltipLeave(b.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(d){let g=b=>{d.removeEventListener("mouseleave",g),this.active.length&&!this.view.dom.contains(b.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};d.addEventListener("mouseleave",g)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(_,d){let g=_.getBoundingClientRect();return d.clientX>=g.left-tooltipMargin&&d.clientX<=g.right+tooltipMargin&&d.clientY>=g.top-tooltipMargin&&d.clientY<=g.bottom+tooltipMargin}function isOverRange(_,d,g,b,$,j){let _e=_.scrollDOM.getBoundingClientRect(),et=_.documentTop+_.documentPadding.top+_.contentHeight;if(_e.left>b||_e.right<b||_e.top>$||Math.min(_e.bottom,et)<$)return!1;let tt=_.posAtCoords({x:b,y:$},!1);return tt>=d&&tt<=g}function hoverTooltip(_,d={}){let g=StateEffect.define(),b=StateField.define({create(){return[]},update($,j){if($.length&&(d.hideOnChange&&(j.docChanged||j.selection)?$=[]:d.hideOn&&($=$.filter(_e=>!d.hideOn(j,_e))),j.docChanged)){let _e=[];for(let et of $){let tt=j.changes.mapPos(et.pos,-1,MapMode.TrackDel);if(tt!=null){let nt=Object.assign(Object.create(null),et);nt.pos=tt,nt.end!=null&&(nt.end=j.changes.mapPos(nt.end)),_e.push(nt)}}$=_e}for(let _e of j.effects)_e.is(g)&&($=_e.value),_e.is(closeHoverTooltipEffect)&&($=[]);return $},provide:$=>showHoverTooltip.from($)});return[b,ViewPlugin.define($=>new HoverPlugin($,_,b,g,d.hoverTime||300)),showHoverTooltipHost]}function getTooltip(_,d){let g=_.plugin(tooltipPlugin);if(!g)return null;let b=g.manager.tooltips.indexOf(d);return b<0?null:g.manager.tooltipViews[b]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(_){let d,g;for(let b of _)d=d||b.topContainer,g=g||b.bottomContainer;return{topContainer:d,bottomContainer:g}}});function getPanel(_,d){let g=_.plugin(panelPlugin),b=g?g.specs.indexOf(d):-1;return b>-1?g.panels[b]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(_){this.input=_.state.facet(showPanel),this.specs=this.input.filter(g=>g),this.panels=this.specs.map(g=>g(_));let d=_.state.facet(panelConfig);this.top=new PanelGroup(_,!0,d.topContainer),this.bottom=new PanelGroup(_,!1,d.bottomContainer),this.top.sync(this.panels.filter(g=>g.top)),this.bottom.sync(this.panels.filter(g=>!g.top));for(let g of this.panels)g.dom.classList.add("cm-panel"),g.mount&&g.mount()}update(_){let d=_.state.facet(panelConfig);this.top.container!=d.topContainer&&(this.top.sync([]),this.top=new PanelGroup(_.view,!0,d.topContainer)),this.bottom.container!=d.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(_.view,!1,d.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let g=_.state.facet(showPanel);if(g!=this.input){let b=g.filter(tt=>tt),$=[],j=[],_e=[],et=[];for(let tt of b){let nt=this.specs.indexOf(tt),it;nt<0?(it=tt(_.view),et.push(it)):(it=this.panels[nt],it.update&&it.update(_)),$.push(it),(it.top?j:_e).push(it)}this.specs=b,this.panels=$,this.top.sync(j),this.bottom.sync(_e);for(let tt of et)tt.dom.classList.add("cm-panel"),tt.mount&&tt.mount()}else for(let b of this.panels)b.update&&b.update(_)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:_=>EditorView.scrollMargins.of(d=>{let g=d.plugin(_);return g&&{top:g.top.scrollMargin(),bottom:g.bottom.scrollMargin()}})});class PanelGroup{constructor(d,g,b){this.view=d,this.top=g,this.container=b,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(d){for(let g of this.panels)g.destroy&&d.indexOf(g)<0&&g.destroy();this.panels=d,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let g=this.container||this.view.dom;g.insertBefore(this.dom,this.top?g.firstChild:null)}let d=this.dom.firstChild;for(let g of this.panels)if(g.dom.parentNode==this.dom){for(;d!=g.dom;)d=rm(d);d=d.nextSibling}else this.dom.insertBefore(g.dom,d);for(;d;)d=rm(d)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let d of this.classes.split(" "))d&&this.container.classList.remove(d);for(let d of(this.classes=this.view.themeClasses).split(" "))d&&this.container.classList.add(d)}}}function rm(_){let d=_.nextSibling;return _.remove(),d}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(d){return this==d||this.constructor==d.constructor&&this.eq(d)}eq(d){return!1}destroy(d){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(_){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$1),_))]}const unfixGutters=Facet.define({combine:_=>_.some(d=>d)});function gutters(_){let d=[gutterView];return _&&_.fixed===!1&&d.push(unfixGutters.of(!0)),d}const gutterView=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.prevViewport=_.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=_.state.facet(activeGutters).map(d=>new SingleGutterView(_,d));for(let d of this.gutters)this.dom.appendChild(d.dom);this.fixed=!_.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),_.scrollDOM.insertBefore(this.dom,_.contentDOM)}update(_){if(this.updateGutters(_)){let d=this.prevViewport,g=_.view.viewport,b=Math.min(d.to,g.to)-Math.max(d.from,g.from);this.syncGutters(b<(g.to-g.from)*.8)}_.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=_.view.viewport}syncGutters(_){let d=this.dom.nextSibling;_&&this.dom.remove();let g=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),b=[],$=this.gutters.map(j=>new UpdateContext(j,this.view.viewport,-this.view.documentPadding.top));for(let j of this.view.viewportLineBlocks)if(b.length&&(b=[]),Array.isArray(j.type)){let _e=!0;for(let et of j.type)if(et.type==BlockType.Text&&_e){advanceCursor(g,b,et.from);for(let tt of $)tt.line(this.view,et,b);_e=!1}else if(et.widget)for(let tt of $)tt.widget(this.view,et)}else if(j.type==BlockType.Text){advanceCursor(g,b,j.from);for(let _e of $)_e.line(this.view,j,b)}else if(j.widget)for(let _e of $)_e.widget(this.view,j);for(let j of $)j.finish();_&&this.view.scrollDOM.insertBefore(this.dom,d)}updateGutters(_){let d=_.startState.facet(activeGutters),g=_.state.facet(activeGutters),b=_.docChanged||_.heightChanged||_.viewportChanged||!RangeSet.eq(_.startState.facet(gutterLineClass),_.state.facet(gutterLineClass),_.view.viewport.from,_.view.viewport.to);if(d==g)for(let $ of this.gutters)$.update(_)&&(b=!0);else{b=!0;let $=[];for(let j of g){let _e=d.indexOf(j);_e<0?$.push(new SingleGutterView(this.view,j)):(this.gutters[_e].update(_),$.push(this.gutters[_e]))}for(let j of this.gutters)j.dom.remove(),$.indexOf(j)<0&&j.destroy();for(let j of $)this.dom.appendChild(j.dom);this.gutters=$}return b}destroy(){for(let _ of this.gutters)_.destroy();this.dom.remove()}},{provide:_=>EditorView.scrollMargins.of(d=>{let g=d.plugin(_);return!g||g.gutters.length==0||!g.fixed?null:d.textDirection==Direction.LTR?{left:g.dom.offsetWidth*d.scaleX}:{right:g.dom.offsetWidth*d.scaleX}})});function asArray(_){return Array.isArray(_)?_:[_]}function advanceCursor(_,d,g){for(;_.value&&_.from<=g;)_.from==g&&d.push(_.value),_.next()}class UpdateContext{constructor(d,g,b){this.gutter=d,this.height=b,this.i=0,this.cursor=RangeSet.iter(d.markers,g.from)}addElement(d,g,b){let{gutter:$}=this,j=(g.top-this.height)/d.scaleY,_e=g.height/d.scaleY;if(this.i==$.elements.length){let et=new GutterElement(d,_e,j,b);$.elements.push(et),$.dom.appendChild(et.dom)}else $.elements[this.i].update(d,_e,j,b);this.height=g.bottom,this.i++}line(d,g,b){let $=[];advanceCursor(this.cursor,$,g.from),b.length&&($=$.concat(b));let j=this.gutter.config.lineMarker(d,g,$);j&&$.unshift(j);let _e=this.gutter;$.length==0&&!_e.config.renderEmptyElements||this.addElement(d,g,$)}widget(d,g){let b=this.gutter.config.widgetMarker(d,g.widget,g);b&&this.addElement(d,g,[b])}finish(){let d=this.gutter;for(;d.elements.length>this.i;){let g=d.elements.pop();d.dom.removeChild(g.dom),g.destroy()}}}class SingleGutterView{constructor(d,g){this.view=d,this.config=g,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let b in g.domEventHandlers)this.dom.addEventListener(b,$=>{let j=$.target,_e;if(j!=this.dom&&this.dom.contains(j)){for(;j.parentNode!=this.dom;)j=j.parentNode;let tt=j.getBoundingClientRect();_e=(tt.top+tt.bottom)/2}else _e=$.clientY;let et=d.lineBlockAtHeight(_e-d.documentTop);g.domEventHandlers[b](d,et,$)&&$.preventDefault()});this.markers=asArray(g.markers(d)),g.initialSpacer&&(this.spacer=new GutterElement(d,0,0,[g.initialSpacer(d)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(d){let g=this.markers;if(this.markers=asArray(this.config.markers(d.view)),this.spacer&&this.config.updateSpacer){let $=this.config.updateSpacer(this.spacer.markers[0],d);$!=this.spacer.markers[0]&&this.spacer.update(d.view,0,0,[$])}let b=d.view.viewport;return!RangeSet.eq(this.markers,g,b.from,b.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(d):!1)}destroy(){for(let d of this.elements)d.destroy()}}class GutterElement{constructor(d,g,b,$){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(d,g,b,$)}update(d,g,b,$){this.height!=g&&(this.height=g,this.dom.style.height=g+"px"),this.above!=b&&(this.dom.style.marginTop=(this.above=b)?b+"px":""),sameMarkers(this.markers,$)||this.setMarkers(d,$)}setMarkers(d,g){let b="cm-gutterElement",$=this.dom.firstChild;for(let j=0,_e=0;;){let et=_e,tt=j<g.length?g[j++]:null,nt=!1;if(tt){let it=tt.elementClass;it&&(b+=" "+it);for(let rt=_e;rt<this.markers.length;rt++)if(this.markers[rt].compare(tt)){et=rt,nt=!0;break}}else et=this.markers.length;for(;_e<et;){let it=this.markers[_e++];if(it.toDOM){it.destroy($);let rt=$.nextSibling;$.remove(),$=rt}}if(!tt)break;tt.toDOM&&(nt?$=$.nextSibling:this.dom.insertBefore(tt.toDOM(d),$)),nt&&_e++}this.dom.className=b,this.markers=g}destroy(){this.setMarkers(null,[])}}function sameMarkers(_,d){if(_.length!=d.length)return!1;for(let g=0;g<_.length;g++)if(!_[g].compare(d[g]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberConfig=Facet.define({combine(_){return combineConfig(_,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(d,g){let b=Object.assign({},d);for(let $ in g){let j=b[$],_e=g[$];b[$]=j?(et,tt,nt)=>j(et,tt,nt)||_e(et,tt,nt):_e}return b}})}});class NumberMarker extends GutterMarker{constructor(d){super(),this.number=d}eq(d){return this.number==d.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(_,d){return _.state.facet(lineNumberConfig).formatNumber(d,_.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],_=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(d){return d.state.facet(lineNumberMarkers)},lineMarker(d,g,b){return b.some($=>$.toDOM)?null:new NumberMarker(formatNumber(d,d.state.doc.lineAt(g.from).number))},widgetMarker:()=>null,lineMarkerChange:d=>d.startState.facet(lineNumberConfig)!=d.state.facet(lineNumberConfig),initialSpacer(d){return new NumberMarker(formatNumber(d,maxLineNumber(d.state.doc.lines)))},updateSpacer(d,g){let b=formatNumber(g.view,maxLineNumber(g.view.state.doc.lines));return b==d.number?d:new NumberMarker(b)},domEventHandlers:_.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(_={}){return[lineNumberConfig.of(_),gutters(),lineNumberGutter]}function maxLineNumber(_){let d=9;for(;d<_;)d=d*10+9;return d}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],_=>{let d=[],g=-1;for(let b of _.selection.ranges){let $=_.doc.lineAt(b.head).from;$>g&&(g=$,d.push(activeLineGutterMarker.range($)))}return RangeSet.of(d)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(_){return Facet.define({combine:_?d=>d.concat(_):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(d,g,b=[],$=""){this.data=d,this.name=$,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=g,this.extension=[language.of(this),EditorState.languageData.of((j,_e,et)=>{let tt=topNodeAt(j,_e,et),nt=tt.type.prop(languageDataProp);if(!nt)return[];let it=j.facet(nt),rt=tt.type.prop(sublanguageProp);if(rt){let st=tt.resolve(_e-tt.from,et);for(let ot of rt)if(ot.test(st,j)){let at=j.facet(ot.facet);return ot.type=="replace"?at:at.concat(it)}}return it})].concat(b)}isActiveAt(d,g,b=-1){return topNodeAt(d,g,b).type.prop(languageDataProp)==this.data}findRegions(d){let g=d.facet(language);if((g==null?void 0:g.data)==this.data)return[{from:0,to:d.doc.length}];if(!g||!g.allowsNesting)return[];let b=[],$=(j,_e)=>{if(j.prop(languageDataProp)==this.data){b.push({from:_e,to:_e+j.length});return}let et=j.prop(NodeProp.mounted);if(et){if(et.tree.prop(languageDataProp)==this.data){if(et.overlay)for(let tt of et.overlay)b.push({from:tt.from+_e,to:tt.to+_e});else b.push({from:_e,to:_e+j.length});return}else if(et.overlay){let tt=b.length;if($(et.tree,et.overlay[0].from+_e),b.length>tt)return}}for(let tt=0;tt<j.children.length;tt++){let nt=j.children[tt];nt instanceof Tree&&$(nt,j.positions[tt]+_e)}};return $(syntaxTree(d),0),b}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(_,d,g){let b=_.facet(language),$=syntaxTree(_).topNode;if(!b||b.allowsNesting)for(let j=$;j;j=j.enter(d,g,IterMode.ExcludeBuffers))j.type.isTop&&($=j);return $}class LRLanguage extends Language{constructor(d,g,b){super(d,g,[],b),this.parser=g}static define(d){let g=defineLanguageFacet(d.languageData);return new LRLanguage(g,d.parser.configure({props:[languageDataProp.add(b=>b.isTop?g:void 0)]}),d.name)}configure(d,g){return new LRLanguage(this.data,this.parser.configure(d),g||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(_){let d=_.field(Language.state,!1);return d?d.tree:Tree.empty}class DocInput{constructor(d){this.doc=d,this.cursorPos=0,this.string="",this.cursor=d.iter()}get length(){return this.doc.length}syncTo(d){return this.string=this.cursor.next(d-this.cursorPos).value,this.cursorPos=d+this.string.length,this.cursorPos-this.string.length}chunk(d){return this.syncTo(d),this.string}get lineChunks(){return!0}read(d,g){let b=this.cursorPos-this.string.length;return d<b||g>=this.cursorPos?this.doc.sliceString(d,g):this.string.slice(d-b,g-b)}}let currentContext=null;class ParseContext{constructor(d,g,b=[],$,j,_e,et,tt){this.parser=d,this.state=g,this.fragments=b,this.tree=$,this.treeLen=j,this.viewport=_e,this.skipped=et,this.scheduleOn=tt,this.parse=null,this.tempSkipped=[]}static create(d,g,b){return new ParseContext(d,g,[],Tree.empty,0,b,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(d,g){return g!=null&&g>=this.state.doc.length&&(g=void 0),this.tree!=Tree.empty&&this.isDone(g??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var b;if(typeof d=="number"){let $=Date.now()+d;d=()=>Date.now()>$}for(this.parse||(this.parse=this.startParse()),g!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>g)&&g<this.state.doc.length&&this.parse.stopAt(g);;){let $=this.parse.advance();if($)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree($,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(b=this.parse.stoppedAt)!==null&&b!==void 0?b:this.state.doc.length,this.tree=$,this.parse=null,this.treeLen<(g??this.state.doc.length))this.parse=this.startParse();else return!0;if(d())return!1}})}takeTree(){let d,g;this.parse&&(d=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>d)&&this.parse.stopAt(d),this.withContext(()=>{for(;!(g=this.parse.advance()););}),this.treeLen=d,this.tree=g,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(d){let g=currentContext;currentContext=this;try{return d()}finally{currentContext=g}}withoutTempSkipped(d){for(let g;g=this.tempSkipped.pop();)d=cutFragments(d,g.from,g.to);return d}changes(d,g){let{fragments:b,tree:$,treeLen:j,viewport:_e,skipped:et}=this;if(this.takeTree(),!d.empty){let tt=[];if(d.iterChangedRanges((nt,it,rt,st)=>tt.push({fromA:nt,toA:it,fromB:rt,toB:st})),b=TreeFragment.applyChanges(b,tt),$=Tree.empty,j=0,_e={from:d.mapPos(_e.from,-1),to:d.mapPos(_e.to,1)},this.skipped.length){et=[];for(let nt of this.skipped){let it=d.mapPos(nt.from,1),rt=d.mapPos(nt.to,-1);it<rt&&et.push({from:it,to:rt})}}}return new ParseContext(this.parser,g,b,$,j,_e,et,this.scheduleOn)}updateViewport(d){if(this.viewport.from==d.from&&this.viewport.to==d.to)return!1;this.viewport=d;let g=this.skipped.length;for(let b=0;b<this.skipped.length;b++){let{from:$,to:j}=this.skipped[b];$<d.to&&j>d.from&&(this.fragments=cutFragments(this.fragments,$,j),this.skipped.splice(b--,1))}return this.skipped.length>=g?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(d,g){this.skipped.push({from:d,to:g})}static getSkippingParser(d){return new class extends Parser{createParse(g,b,$){let j=$[0].from,_e=$[$.length-1].to;return{parsedPos:j,advance(){let tt=currentContext;if(tt){for(let nt of $)tt.tempSkipped.push(nt);d&&(tt.scheduleOn=tt.scheduleOn?Promise.all([tt.scheduleOn,d]):d)}return this.parsedPos=_e,new Tree(NodeType.none,[],[],_e-j)},stoppedAt:null,stopAt(){}}}}}isDone(d){d=Math.min(d,this.state.doc.length);let g=this.fragments;return this.treeLen>=d&&g.length&&g[0].from==0&&g[0].to>=d}static get(){return currentContext}}function cutFragments(_,d,g){return TreeFragment.applyChanges(_,[{fromA:d,toA:g,fromB:d,toB:g}])}class LanguageState{constructor(d){this.context=d,this.tree=d.tree}apply(d){if(!d.docChanged&&this.tree==this.context.tree)return this;let g=this.context.changes(d.changes,d.state),b=this.context.treeLen==d.startState.doc.length?void 0:Math.max(d.changes.mapPos(this.context.treeLen),g.viewport.to);return g.work(20,b)||g.takeTree(),new LanguageState(g)}static init(d){let g=Math.min(3e3,d.doc.length),b=ParseContext.create(d.facet(language).parser,d,{from:0,to:g});return b.work(20,g)||b.takeTree(),new LanguageState(b)}}Language.state=StateField.define({create:LanguageState.init,update(_,d){for(let g of d.effects)if(g.is(Language.setState))return g.value;return d.startState.facet(language)!=d.state.facet(language)?LanguageState.init(d.state):_.apply(d)}});let requestIdle=_=>{let d=setTimeout(()=>_(),500);return()=>clearTimeout(d)};typeof requestIdleCallback<"u"&&(requestIdle=_=>{let d=-1,g=setTimeout(()=>{d=requestIdleCallback(_,{timeout:500-100})},100);return()=>d<0?clearTimeout(g):cancelIdleCallback(d)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(d){this.view=d,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(d){let g=this.view.state.field(Language.state).context;(g.updateViewport(d.view.viewport)||this.view.viewport.to>g.treeLen)&&this.scheduleWork(),(d.docChanged||d.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(g)}scheduleWork(){if(this.working)return;let{state:d}=this.view,g=d.field(Language.state);(g.tree!=g.context.tree||!g.context.isDone(d.doc.length))&&(this.working=requestIdle(this.work))}work(d){this.working=null;let g=Date.now();if(this.chunkEnd<g&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=g+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:b,viewport:{to:$}}=this.view,j=b.field(Language.state);if(j.tree==j.context.tree&&j.context.isDone($+1e5))return;let _e=Date.now()+Math.min(this.chunkBudget,100,d&&!isInputPending?Math.max(25,d.timeRemaining()-5):1e9),et=j.context.treeLen<$&&b.doc.length>$+1e3,tt=j.context.work(()=>isInputPending&&isInputPending()||Date.now()>_e,$+(et?0:1e5));this.chunkBudget-=Date.now()-g,(tt||this.chunkBudget<=0)&&(j.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(j.context))})),this.chunkBudget>0&&!(tt&&!et)&&this.scheduleWork(),this.checkAsyncSchedule(j.context)}checkAsyncSchedule(d){d.scheduleOn&&(this.workScheduled++,d.scheduleOn.then(()=>this.scheduleWork()).catch(g=>logException(this.view.state,g)).then(()=>this.workScheduled--),d.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(_){return _.length?_[0]:null},enables:_=>[Language.state,parseWorker,EditorView.contentAttributes.compute([_],d=>{let g=d.facet(_);return g&&g.name?{"data-language":g.name}:{}})]});class LanguageSupport{constructor(d,g=[]){this.language=d,this.support=g,this.extension=[d,g]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:_=>{if(!_.length)return"  ";let d=_[0];if(!d||/\S/.test(d)||Array.from(d).some(g=>g!=d[0]))throw new Error("Invalid indent unit: "+JSON.stringify(_[0]));return d}});function getIndentUnit(_){let d=_.facet(indentUnit);return d.charCodeAt(0)==9?_.tabSize*d.length:d.length}function indentString(_,d){let g="",b=_.tabSize,$=_.facet(indentUnit)[0];if($=="	"){for(;d>=b;)g+="	",d-=b;$=" "}for(let j=0;j<d;j++)g+=$;return g}function getIndentation(_,d){_ instanceof EditorState&&(_=new IndentContext(_));for(let b of _.state.facet(indentService)){let $=b(_,d);if($!==void 0)return $}let g=syntaxTree(_.state);return g.length>=d?syntaxIndentation(_,g,d):null}class IndentContext{constructor(d,g={}){this.state=d,this.options=g,this.unit=getIndentUnit(d)}lineAt(d,g=1){let b=this.state.doc.lineAt(d),{simulateBreak:$,simulateDoubleBreak:j}=this.options;return $!=null&&$>=b.from&&$<=b.to?j&&$==d?{text:"",from:d}:(g<0?$<d:$<=d)?{text:b.text.slice($-b.from),from:$}:{text:b.text.slice(0,$-b.from),from:b.from}:b}textAfterPos(d,g=1){if(this.options.simulateDoubleBreak&&d==this.options.simulateBreak)return"";let{text:b,from:$}=this.lineAt(d,g);return b.slice(d-$,Math.min(b.length,d+100-$))}column(d,g=1){let{text:b,from:$}=this.lineAt(d,g),j=this.countColumn(b,d-$),_e=this.options.overrideIndentation?this.options.overrideIndentation($):-1;return _e>-1&&(j+=_e-this.countColumn(b,b.search(/\S|$/))),j}countColumn(d,g=d.length){return countColumn(d,this.state.tabSize,g)}lineIndent(d,g=1){let{text:b,from:$}=this.lineAt(d,g),j=this.options.overrideIndentation;if(j){let _e=j($);if(_e>-1)return _e}return this.countColumn(b,b.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(_,d,g){let b=d.resolveStack(g),$=b.node.enterUnfinishedNodesBefore(g);if($!=b.node){let j=[];for(let _e=$;_e!=b.node;_e=_e.parent)j.push(_e);for(let _e=j.length-1;_e>=0;_e--)b={node:j[_e],next:b}}return indentFor(b,_,g)}function indentFor(_,d,g){for(let b=_;b;b=b.next){let $=indentStrategy(b.node);if($)return $(TreeIndentContext.create(d,g,b))}return 0}function ignoreClosed(_){return _.pos==_.options.simulateBreak&&_.options.simulateDoubleBreak}function indentStrategy(_){let d=_.type.prop(indentNodeProp);if(d)return d;let g=_.firstChild,b;if(g&&(b=g.type.prop(NodeProp.closedBy))){let $=_.lastChild,j=$&&b.indexOf($.name)>-1;return _e=>delimitedStrategy(_e,!0,1,void 0,j&&!ignoreClosed(_e)?$.from:void 0)}return _.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(d,g,b){super(d.state,d.options),this.base=d,this.pos=g,this.context=b}get node(){return this.context.node}static create(d,g,b){return new TreeIndentContext(d,g,b)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(d){let g=this.state.doc.lineAt(d.from);for(;;){let b=d.resolve(g.from);for(;b.parent&&b.parent.from==b.from;)b=b.parent;if(isParent(b,d))break;g=this.state.doc.lineAt(b.from)}return this.lineIndent(g.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(_,d){for(let g=d;g;g=g.parent)if(_==g)return!0;return!1}function bracketedAligned(_){let d=_.node,g=d.childAfter(d.from),b=d.lastChild;if(!g)return null;let $=_.options.simulateBreak,j=_.state.doc.lineAt(g.from),_e=$==null||$<=j.from?j.to:Math.min(j.to,$);for(let et=g.to;;){let tt=d.childAfter(et);if(!tt||tt==b)return null;if(!tt.type.isSkipped)return tt.from<_e?g:null;et=tt.to}}function delimitedIndent({closing:_,align:d=!0,units:g=1}){return b=>delimitedStrategy(b,d,g,_)}function delimitedStrategy(_,d,g,b,$){let j=_.textAfter,_e=j.match(/^\s*/)[0].length,et=b&&j.slice(_e,_e+b.length)==b||$==_.pos+_e,tt=d?bracketedAligned(_):null;return tt?et?_.column(tt.from):_.column(tt.to):_.baseIndent+(et?0:_.unit*g)}const flatIndent=_=>_.baseIndent;function continuedIndent({except:_,units:d=1}={}){return g=>{let b=_&&_.test(g.textAfter);return g.baseIndent+(b?0:d*g.unit)}}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(_=>{if(!_.docChanged||!_.isUserEvent("input.type")&&!_.isUserEvent("input.complete"))return _;let d=_.startState.languageDataAt("indentOnInput",_.startState.selection.main.head);if(!d.length)return _;let g=_.newDoc,{head:b}=_.newSelection.main,$=g.lineAt(b);if(b>$.from+DontIndentBeyond)return _;let j=g.sliceString($.from,b);if(!d.some(nt=>nt.test(j)))return _;let{state:_e}=_,et=-1,tt=[];for(let{head:nt}of _e.selection.ranges){let it=_e.doc.lineAt(nt);if(it.from==et)continue;et=it.from;let rt=getIndentation(_e,it.from);if(rt==null)continue;let st=/^\s*/.exec(it.text)[0],ot=indentString(_e,rt);st!=ot&&tt.push({from:it.from,to:it.from+st.length,insert:ot})}return tt.length?[_,{changes:tt,sequential:!0}]:_})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(_){let d=_.firstChild,g=_.lastChild;return d&&d.to<g.from?{from:d.to,to:g.type.isError?_.to:g.from}:null}function syntaxFolding(_,d,g){let b=syntaxTree(_);if(b.length<g)return null;let $=b.resolveStack(g,1),j=null;for(let _e=$;_e;_e=_e.next){let et=_e.node;if(et.to<=g||et.from>g)continue;if(j&&et.from<d)break;let tt=et.type.prop(foldNodeProp);if(tt&&(et.to<b.length-50||b.length==_.doc.length||!isUnfinished(et))){let nt=tt(et,_);nt&&nt.from<=g&&nt.from>=d&&nt.to>g&&(j=nt)}}return j}function isUnfinished(_){let d=_.lastChild;return d&&d.to==_.to&&d.type.isError}function foldable(_,d,g){for(let b of _.facet(foldService)){let $=b(_,d,g);if($)return $}return syntaxFolding(_,d,g)}function mapRange(_,d){let g=d.mapPos(_.from,1),b=d.mapPos(_.to,-1);return g>=b?void 0:{from:g,to:b}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(_){let d=[];for(let{head:g}of _.state.selection.ranges)d.some(b=>b.from<=g&&b.to>=g)||d.push(_.lineBlockAt(g));return d}const foldState=StateField.define({create(){return Decoration.none},update(_,d){_=_.map(d.changes);for(let g of d.effects)if(g.is(foldEffect)&&!foldExists(_,g.value.from,g.value.to)){let{preparePlaceholder:b}=d.state.facet(foldConfig),$=b?Decoration.replace({widget:new PreparedFoldWidget(b(d.state,g.value))}):foldWidget;_=_.update({add:[$.range(g.value.from,g.value.to)]})}else g.is(unfoldEffect)&&(_=_.update({filter:(b,$)=>g.value.from!=b||g.value.to!=$,filterFrom:g.value.from,filterTo:g.value.to}));if(d.selection){let g=!1,{head:b}=d.selection.main;_.between(b,b,($,j)=>{$<b&&j>b&&(g=!0)}),g&&(_=_.update({filterFrom:b,filterTo:b,filter:($,j)=>j<=b||$>=b}))}return _},provide:_=>EditorView.decorations.from(_),toJSON(_,d){let g=[];return _.between(0,d.doc.length,(b,$)=>{g.push(b,$)}),g},fromJSON(_){if(!Array.isArray(_)||_.length%2)throw new RangeError("Invalid JSON for fold state");let d=[];for(let g=0;g<_.length;){let b=_[g++],$=_[g++];if(typeof b!="number"||typeof $!="number")throw new RangeError("Invalid JSON for fold state");d.push(foldWidget.range(b,$))}return Decoration.set(d,!0)}});function findFold(_,d,g){var b;let $=null;return(b=_.field(foldState,!1))===null||b===void 0||b.between(d,g,(j,_e)=>{(!$||$.from>j)&&($={from:j,to:_e})}),$}function foldExists(_,d,g){let b=!1;return _.between(d,d,($,j)=>{$==d&&j==g&&(b=!0)}),b}function maybeEnable(_,d){return _.field(foldState,!1)?d:d.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=_=>{for(let d of selectedLines(_)){let g=foldable(_.state,d.from,d.to);if(g)return _.dispatch({effects:maybeEnable(_.state,[foldEffect.of(g),announceFold(_,g)])}),!0}return!1},unfoldCode=_=>{if(!_.state.field(foldState,!1))return!1;let d=[];for(let g of selectedLines(_)){let b=findFold(_.state,g.from,g.to);b&&d.push(unfoldEffect.of(b),announceFold(_,b,!1))}return d.length&&_.dispatch({effects:d}),d.length>0};function announceFold(_,d,g=!0){let b=_.state.doc.lineAt(d.from).number,$=_.state.doc.lineAt(d.to).number;return EditorView.announce.of(`${_.state.phrase(g?"Folded lines":"Unfolded lines")} ${b} ${_.state.phrase("to")} ${$}.`)}const foldAll=_=>{let{state:d}=_,g=[];for(let b=0;b<d.doc.length;){let $=_.lineBlockAt(b),j=foldable(d,$.from,$.to);j&&g.push(foldEffect.of(j)),b=(j?_.lineBlockAt(j.to):$).to+1}return g.length&&_.dispatch({effects:maybeEnable(_.state,g)}),!!g.length},unfoldAll=_=>{let d=_.state.field(foldState,!1);if(!d||!d.size)return!1;let g=[];return d.between(0,_.state.doc.length,(b,$)=>{g.push(unfoldEffect.of({from:b,to:$}))}),_.dispatch({effects:g}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},foldConfig=Facet.define({combine(_){return combineConfig(_,defaultConfig)}});function codeFolding(_){let d=[foldState,baseTheme$1$1];return _&&d.push(foldConfig.of(_)),d}function widgetToDOM(_,d){let{state:g}=_,b=g.facet(foldConfig),$=_e=>{let et=_.lineBlockAt(_.posAtDOM(_e.target)),tt=findFold(_.state,et.from,et.to);tt&&_.dispatch({effects:unfoldEffect.of(tt)}),_e.preventDefault()};if(b.placeholderDOM)return b.placeholderDOM(_,$,d);let j=document.createElement("span");return j.textContent=b.placeholderText,j.setAttribute("aria-label",g.phrase("folded code")),j.title=g.phrase("unfold"),j.className="cm-foldPlaceholder",j.onclick=$,j}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(_){return widgetToDOM(_,null)}}});class PreparedFoldWidget extends WidgetType{constructor(d){super(),this.value=d}eq(d){return this.value==d.value}toDOM(d){return widgetToDOM(d,this.value)}}const foldGutterDefaults={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(d,g){super(),this.config=d,this.open=g}eq(d){return this.config==d.config&&this.open==d.open}toDOM(d){if(this.config.markerDOM)return this.config.markerDOM(this.open);let g=document.createElement("span");return g.textContent=this.open?this.config.openText:this.config.closedText,g.title=d.state.phrase(this.open?"Fold line":"Unfold line"),g}}function foldGutter(_={}){let d=Object.assign(Object.assign({},foldGutterDefaults),_),g=new FoldMarker(d,!0),b=new FoldMarker(d,!1),$=ViewPlugin.fromClass(class{constructor(_e){this.from=_e.viewport.from,this.markers=this.buildMarkers(_e)}update(_e){(_e.docChanged||_e.viewportChanged||_e.startState.facet(language)!=_e.state.facet(language)||_e.startState.field(foldState,!1)!=_e.state.field(foldState,!1)||syntaxTree(_e.startState)!=syntaxTree(_e.state)||d.foldingChanged(_e))&&(this.markers=this.buildMarkers(_e.view))}buildMarkers(_e){let et=new RangeSetBuilder;for(let tt of _e.viewportLineBlocks){let nt=findFold(_e.state,tt.from,tt.to)?b:foldable(_e.state,tt.from,tt.to)?g:null;nt&&et.add(tt.from,tt.from,nt)}return et.finish()}}),{domEventHandlers:j}=d;return[$,gutter({class:"cm-foldGutter",markers(_e){var et;return((et=_e.plugin($))===null||et===void 0?void 0:et.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(d,!1)},domEventHandlers:Object.assign(Object.assign({},j),{click:(_e,et,tt)=>{if(j.click&&j.click(_e,et,tt))return!0;let nt=findFold(_e.state,et.from,et.to);if(nt)return _e.dispatch({effects:unfoldEffect.of(nt)}),!0;let it=foldable(_e.state,et.from,et.to);return it?(_e.dispatch({effects:foldEffect.of(it)}),!0):!1}})}),codeFolding()]}const baseTheme$1$1=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(d,g){this.specs=d;let b;function $(et){let tt=StyleModule.newName();return(b||(b=Object.create(null)))["."+tt]=et,tt}const j=typeof g.all=="string"?g.all:g.all?$(g.all):void 0,_e=g.scope;this.scope=_e instanceof Language?et=>et.prop(languageDataProp)==_e.data:_e?et=>et==_e:void 0,this.style=tagHighlighter(d.map(et=>({tag:et.tag,class:et.class||$(Object.assign({},et,{tag:null}))})),{all:j}).style,this.module=b?new StyleModule(b):null,this.themeType=g.themeType}static define(d,g){return new HighlightStyle(d,g||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(_){return _.length?[_[0]]:null}});function getHighlighters(_){let d=_.facet(highlighterFacet);return d.length?d:_.facet(fallbackHighlighter)}function syntaxHighlighting(_,d){let g=[treeHighlighter],b;return _ instanceof HighlightStyle&&(_.module&&g.push(EditorView.styleModule.of(_.module)),b=_.themeType),d!=null&&d.fallback?g.push(fallbackHighlighter.of(_)):b?g.push(highlighterFacet.computeN([EditorView.darkTheme],$=>$.facet(EditorView.darkTheme)==(b=="dark")?[_]:[])):g.push(highlighterFacet.of(_)),g}class TreeHighlighter{constructor(d){this.markCache=Object.create(null),this.tree=syntaxTree(d.state),this.decorations=this.buildDeco(d,getHighlighters(d.state)),this.decoratedTo=d.viewport.to}update(d){let g=syntaxTree(d.state),b=getHighlighters(d.state),$=b!=getHighlighters(d.startState),{viewport:j}=d.view,_e=d.changes.mapPos(this.decoratedTo,1);g.length<j.to&&!$&&g.type==this.tree.type&&_e>=j.to?(this.decorations=this.decorations.map(d.changes),this.decoratedTo=_e):(g!=this.tree||d.viewportChanged||$)&&(this.tree=g,this.decorations=this.buildDeco(d.view,b),this.decoratedTo=j.to)}buildDeco(d,g){if(!g||!this.tree.length)return Decoration.none;let b=new RangeSetBuilder;for(let{from:$,to:j}of d.visibleRanges)highlightTree(this.tree,g,(_e,et,tt)=>{b.add(_e,et,this.markCache[tt]||(this.markCache[tt]=Decoration.mark({class:tt})))},$,j);return b.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:_=>_.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$4=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(_){return combineConfig(_,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(_){let d=[],g=_.matched?matchingMark:nonmatchingMark;return d.push(g.range(_.start.from,_.start.to)),_.end&&d.push(g.range(_.end.from,_.end.to)),d}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(_,d){if(!d.docChanged&&!d.selection)return _;let g=[],b=d.state.facet(bracketMatchingConfig);for(let $ of d.state.selection.ranges){if(!$.empty)continue;let j=matchBrackets(d.state,$.head,-1,b)||$.head>0&&matchBrackets(d.state,$.head-1,1,b)||b.afterCursor&&(matchBrackets(d.state,$.head,1,b)||$.head<d.state.doc.length&&matchBrackets(d.state,$.head+1,-1,b));j&&(g=g.concat(b.renderMatch(j,d.state)))}return Decoration.set(g,!0)},provide:_=>EditorView.decorations.from(_)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$4];function bracketMatching(_={}){return[bracketMatchingConfig.of(_),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(_,d,g){let b=_.prop(d<0?NodeProp.openedBy:NodeProp.closedBy);if(b)return b;if(_.name.length==1){let $=g.indexOf(_.name);if($>-1&&$%2==(d<0?1:0))return[g[$+d]]}return null}function findHandle(_){let d=_.type.prop(bracketMatchingHandle);return d?d(_.node):_}function matchBrackets(_,d,g,b={}){let $=b.maxScanDistance||DefaultScanDist,j=b.brackets||DefaultBrackets,_e=syntaxTree(_),et=_e.resolveInner(d,g);for(let tt=et;tt;tt=tt.parent){let nt=matchingNodes(tt.type,g,j);if(nt&&tt.from<tt.to){let it=findHandle(tt);if(it&&(g>0?d>=it.from&&d<it.to:d>it.from&&d<=it.to))return matchMarkedBrackets(_,d,g,tt,it,nt,j)}}return matchPlainBrackets(_,d,g,_e,et.type,$,j)}function matchMarkedBrackets(_,d,g,b,$,j,_e){let et=b.parent,tt={from:$.from,to:$.to},nt=0,it=et==null?void 0:et.cursor();if(it&&(g<0?it.childBefore(b.from):it.childAfter(b.to)))do if(g<0?it.to<=b.from:it.from>=b.to){if(nt==0&&j.indexOf(it.type.name)>-1&&it.from<it.to){let rt=findHandle(it);return{start:tt,end:rt?{from:rt.from,to:rt.to}:void 0,matched:!0}}else if(matchingNodes(it.type,g,_e))nt++;else if(matchingNodes(it.type,-g,_e)){if(nt==0){let rt=findHandle(it);return{start:tt,end:rt&&rt.from<rt.to?{from:rt.from,to:rt.to}:void 0,matched:!1}}nt--}}while(g<0?it.prevSibling():it.nextSibling());return{start:tt,matched:!1}}function matchPlainBrackets(_,d,g,b,$,j,_e){let et=g<0?_.sliceDoc(d-1,d):_.sliceDoc(d,d+1),tt=_e.indexOf(et);if(tt<0||tt%2==0!=g>0)return null;let nt={from:g<0?d-1:d,to:g>0?d+1:d},it=_.doc.iterRange(d,g>0?_.doc.length:0),rt=0;for(let st=0;!it.next().done&&st<=j;){let ot=it.value;g<0&&(st+=ot.length);let at=d+st*g;for(let ct=g>0?0:ot.length-1,ht=g>0?ot.length:-1;ct!=ht;ct+=g){let ut=_e.indexOf(ot[ct]);if(!(ut<0||b.resolveInner(at+ct,1).type!=$))if(ut%2==0==g>0)rt++;else{if(rt==1)return{start:nt,end:{from:at+ct,to:at+ct+1},matched:ut>>1==tt>>1};rt--}}g>0&&(st+=ot.length)}return it.done?{start:nt,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[_,d]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[_]=createTokenType(noTokens,d);function warnForPart(_,d){warned.indexOf(_)>-1||(warned.push(_),console.warn(d))}function createTokenType(_,d){let g=[];for(let et of d.split(" ")){let tt=[];for(let nt of et.split(".")){let it=_[nt]||tags[nt];it?typeof it=="function"?tt.length?tt=tt.map(it):warnForPart(nt,`Modifier ${nt} used at start of tag`):tt.length?warnForPart(nt,`Tag ${nt} used as modifier`):tt=Array.isArray(it)?it:[it]:warnForPart(nt,`Unknown highlighting tag ${nt}`)}for(let nt of tt)g.push(nt)}if(!g.length)return 0;let b=d.replace(/ /g,"_"),$=b+" "+g.map(et=>et.id),j=byTag[$];if(j)return j.id;let _e=byTag[$]=NodeType.define({id:typeArray.length,name:b,props:[styleTags({[b]:g})]});return typeArray.push(_e),_e.id}Direction.RTL,Direction.LTR;class CompletionContext{constructor(d,g,b,$){this.state=d,this.pos=g,this.explicit=b,this.view=$,this.abortListeners=[]}tokenBefore(d){let g=syntaxTree(this.state).resolveInner(this.pos,-1);for(;g&&d.indexOf(g.name)<0;)g=g.parent;return g?{from:g.from,to:this.pos,text:this.state.sliceDoc(g.from,this.pos),type:g.type}:null}matchBefore(d){let g=this.state.doc.lineAt(this.pos),b=Math.max(g.from,this.pos-250),$=g.text.slice(b-g.from,this.pos-g.from),j=$.search(ensureAnchor(d,!1));return j<0?null:{from:b+j,to:this.pos,text:$.slice(j)}}get aborted(){return this.abortListeners==null}addEventListener(d,g){d=="abort"&&this.abortListeners&&this.abortListeners.push(g)}}function toSet(_){let d=Object.keys(_).join(""),g=/\w/.test(d);return g&&(d=d.replace(/\w/g,"")),`[${g?"\\w":""}${d.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(_){let d=Object.create(null),g=Object.create(null);for(let{label:$}of _){d[$[0]]=!0;for(let j=1;j<$.length;j++)g[$[j]]=!0}let b=toSet(d)+toSet(g)+"*$";return[new RegExp("^"+b),new RegExp(b)]}function completeFromList(_){let d=_.map($=>typeof $=="string"?{label:$}:$),[g,b]=d.every($=>/^\w+$/.test($.label))?[/\w*$/,/\w+$/]:prefixMatch(d);return $=>{let j=$.matchBefore(b);return j||$.explicit?{from:j?j.from:$.pos,options:d,validFor:g}:null}}function ifNotIn(_,d){return g=>{for(let b=syntaxTree(g.state).resolveInner(g.pos,-1);b;b=b.parent){if(_.indexOf(b.name)>-1)return null;if(b.type.isTop)break}return d(g)}}class Option{constructor(d,g,b,$){this.completion=d,this.source=g,this.match=b,this.score=$}}function cur(_){return _.selection.main.from}function ensureAnchor(_,d){var g;let{source:b}=_,$=d&&b[0]!="^",j=b[b.length-1]!="$";return!$&&!j?_:new RegExp(`${$?"^":""}(?:${b})${j?"$":""}`,(g=_.flags)!==null&&g!==void 0?g:_.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(_,d,g,b){let{main:$}=_.selection,j=g-$.from,_e=b-$.from;return Object.assign(Object.assign({},_.changeByRange(et=>et!=$&&g!=b&&_.sliceDoc(et.from+j,et.from+_e)!=_.sliceDoc(g,b)?{range:et}:{changes:{from:et.from+j,to:b==$.from?et.to:et.from+_e,insert:d},range:EditorSelection.cursor(et.from+j+d.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const SourceCache=new WeakMap;function asSource(_){if(!Array.isArray(_))return _;let d=SourceCache.get(_);return d||SourceCache.set(_,d=completeFromList(_)),d}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(d){this.pattern=d,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let g=0;g<d.length;){let b=codePointAt(d,g),$=codePointSize(b);this.chars.push(b);let j=d.slice(g,g+$),_e=j.toUpperCase();this.folded.push(codePointAt(_e==j?j.toLowerCase():_e,0)),g+=$}this.astral=d.length!=this.chars.length}ret(d,g){return this.score=d,this.matched=g,this}match(d){if(this.pattern.length==0)return this.ret(-100,[]);if(d.length<this.pattern.length)return null;let{chars:g,folded:b,any:$,precise:j,byWord:_e}=this;if(g.length==1){let dt=codePointAt(d,0),ft=codePointSize(dt),mt=ft==d.length?0:-100;if(dt!=g[0])if(dt==b[0])mt+=-200;else return null;return this.ret(mt,[0,ft])}let et=d.indexOf(this.pattern);if(et==0)return this.ret(d.length==this.pattern.length?0:-100,[0,this.pattern.length]);let tt=g.length,nt=0;if(et<0){for(let dt=0,ft=Math.min(d.length,200);dt<ft&&nt<tt;){let mt=codePointAt(d,dt);(mt==g[nt]||mt==b[nt])&&($[nt++]=dt),dt+=codePointSize(mt)}if(nt<tt)return null}let it=0,rt=0,st=!1,ot=0,at=-1,ct=-1,ht=/[a-z]/.test(d),ut=!0;for(let dt=0,ft=Math.min(d.length,200),mt=0;dt<ft&&rt<tt;){let pt=codePointAt(d,dt);et<0&&(it<tt&&pt==g[it]&&(j[it++]=dt),ot<tt&&(pt==g[ot]||pt==b[ot]?(ot==0&&(at=dt),ct=dt+1,ot++):ot=0));let Ot,gt=pt<255?pt>=48&&pt<=57||pt>=97&&pt<=122?2:pt>=65&&pt<=90?1:0:(Ot=fromCodePoint(pt))!=Ot.toLowerCase()?1:Ot!=Ot.toUpperCase()?2:0;(!dt||gt==1&&ht||mt==0&&gt!=0)&&(g[rt]==pt||b[rt]==pt&&(st=!0)?_e[rt++]=dt:_e.length&&(ut=!1)),mt=gt,dt+=codePointSize(pt)}return rt==tt&&_e[0]==0&&ut?this.result(-100+(st?-200:0),_e,d):ot==tt&&at==0?this.ret(-200-d.length+(ct==d.length?0:-100),[0,ct]):et>-1?this.ret(-700-d.length,[et,et+this.pattern.length]):ot==tt?this.ret(-200+-700-d.length,[at,ct]):rt==tt?this.result(-100+(st?-200:0)+-700+(ut?0:-1100),_e,d):g.length==2?null:this.result(($[0]?-700:0)+-200+-1100,$,d)}result(d,g,b){let $=[],j=0;for(let _e of g){let et=_e+(this.astral?codePointSize(codePointAt(b,_e)):1);j&&$[j-1]==_e?$[j-1]=et:($[j++]=_e,$[j++]=et)}return this.ret(d-b.length,$)}}class StrictMatcher{constructor(d){this.pattern=d,this.matched=[],this.score=0,this.folded=d.toLowerCase()}match(d){if(d.length<this.pattern.length)return null;let g=d.slice(0,this.pattern.length),b=g==this.pattern?0:g.toLowerCase()==this.folded?-200:null;return b==null?null:(this.matched=[0,g.length],this.score=b+(d.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine(_){return combineConfig(_,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:(d,g)=>d.label.localeCompare(g.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(d,g)=>d&&g,closeOnBlur:(d,g)=>d&&g,icons:(d,g)=>d&&g,tooltipClass:(d,g)=>b=>joinClass(d(b),g(b)),optionClass:(d,g)=>b=>joinClass(d(b),g(b)),addToOptions:(d,g)=>d.concat(g),filterStrict:(d,g)=>d||g})}});function joinClass(_,d){return _?d?_+" "+d:_:d}function defaultPositionInfo(_,d,g,b,$,j){let _e=_.textDirection==Direction.RTL,et=_e,tt=!1,nt="top",it,rt,st=d.left-$.left,ot=$.right-d.right,at=b.right-b.left,ct=b.bottom-b.top;if(et&&st<Math.min(at,ot)?et=!1:!et&&ot<Math.min(at,st)&&(et=!0),at<=(et?st:ot))it=Math.max($.top,Math.min(g.top,$.bottom-ct))-d.top,rt=Math.min(400,et?st:ot);else{tt=!0,rt=Math.min(400,(_e?d.right:$.right-d.left)-30);let dt=$.bottom-d.bottom;dt>=ct||dt>d.top?it=g.bottom-d.top:(nt="bottom",it=d.bottom-g.top)}let ht=(d.bottom-d.top)/j.offsetHeight,ut=(d.right-d.left)/j.offsetWidth;return{style:`${nt}: ${it/ht}px; max-width: ${rt/ut}px`,class:"cm-completionInfo-"+(tt?_e?"left-narrow":"right-narrow":et?"left":"right")}}function optionContent(_){let d=_.addToOptions.slice();return _.icons&&d.push({render(g){let b=document.createElement("div");return b.classList.add("cm-completionIcon"),g.type&&b.classList.add(...g.type.split(/\s+/g).map($=>"cm-completionIcon-"+$)),b.setAttribute("aria-hidden","true"),b},position:20}),d.push({render(g,b,$,j){let _e=document.createElement("span");_e.className="cm-completionLabel";let et=g.displayLabel||g.label,tt=0;for(let nt=0;nt<j.length;){let it=j[nt++],rt=j[nt++];it>tt&&_e.appendChild(document.createTextNode(et.slice(tt,it)));let st=_e.appendChild(document.createElement("span"));st.appendChild(document.createTextNode(et.slice(it,rt))),st.className="cm-completionMatchedText",tt=rt}return tt<et.length&&_e.appendChild(document.createTextNode(et.slice(tt))),_e},position:50},{render(g){if(!g.detail)return null;let b=document.createElement("span");return b.className="cm-completionDetail",b.textContent=g.detail,b},position:80}),d.sort((g,b)=>g.position-b.position).map(g=>g.render)}function rangeAroundSelected(_,d,g){if(_<=g)return{from:0,to:_};if(d<0&&(d=0),d<=_>>1){let $=Math.floor(d/g);return{from:$*g,to:($+1)*g}}let b=Math.floor((_-d)/g);return{from:_-(b+1)*g,to:_-b*g}}class CompletionTooltip{constructor(d,g,b){this.view=d,this.stateField=g,this.applyCompletion=b,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:tt=>this.placeInfo(tt),key:this},this.space=null,this.currentClass="";let $=d.state.field(g),{options:j,selected:_e}=$.open,et=d.state.facet(completionConfig);this.optionContent=optionContent(et),this.optionClass=et.optionClass,this.tooltipClass=et.tooltipClass,this.range=rangeAroundSelected(j.length,_e,et.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(d.state),this.dom.addEventListener("mousedown",tt=>{let{options:nt}=d.state.field(g).open;for(let it=tt.target,rt;it&&it!=this.dom;it=it.parentNode)if(it.nodeName=="LI"&&(rt=/-(\d+)$/.exec(it.id))&&+rt[1]<nt.length){this.applyCompletion(d,nt[+rt[1]]),tt.preventDefault();return}}),this.dom.addEventListener("focusout",tt=>{let nt=d.state.field(this.stateField,!1);nt&&nt.tooltip&&d.state.facet(completionConfig).closeOnBlur&&tt.relatedTarget!=d.contentDOM&&d.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(j,$.id)}mount(){this.updateSel()}showOptions(d,g){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(d,g,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(d){var g;let b=d.state.field(this.stateField),$=d.startState.field(this.stateField);if(this.updateTooltipClass(d.state),b!=$){let{options:j,selected:_e,disabled:et}=b.open;(!$.open||$.open.options!=j)&&(this.range=rangeAroundSelected(j.length,_e,d.state.facet(completionConfig).maxRenderedOptions),this.showOptions(j,b.id)),this.updateSel(),et!=((g=$.open)===null||g===void 0?void 0:g.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!et)}}updateTooltipClass(d){let g=this.tooltipClass(d);if(g!=this.currentClass){for(let b of this.currentClass.split(" "))b&&this.dom.classList.remove(b);for(let b of g.split(" "))b&&this.dom.classList.add(b);this.currentClass=g}}positioned(d){this.space=d,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let d=this.view.state.field(this.stateField),g=d.open;if((g.selected>-1&&g.selected<this.range.from||g.selected>=this.range.to)&&(this.range=rangeAroundSelected(g.options.length,g.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(g.options,d.id)),this.updateSelectedOption(g.selected)){this.destroyInfo();let{completion:b}=g.options[g.selected],{info:$}=b;if(!$)return;let j=typeof $=="string"?document.createTextNode($):$(b);if(!j)return;"then"in j?j.then(_e=>{_e&&this.view.state.field(this.stateField,!1)==d&&this.addInfoPane(_e,b)}).catch(_e=>logException(this.view.state,_e,"completion info")):this.addInfoPane(j,b)}}addInfoPane(d,g){this.destroyInfo();let b=this.info=document.createElement("div");if(b.className="cm-tooltip cm-completionInfo",d.nodeType!=null)b.appendChild(d),this.infoDestroy=null;else{let{dom:$,destroy:j}=d;b.appendChild($),this.infoDestroy=j||null}this.dom.appendChild(b),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(d){let g=null;for(let b=this.list.firstChild,$=this.range.from;b;b=b.nextSibling,$++)b.nodeName!="LI"||!b.id?$--:$==d?b.hasAttribute("aria-selected")||(b.setAttribute("aria-selected","true"),g=b):b.hasAttribute("aria-selected")&&b.removeAttribute("aria-selected");return g&&scrollIntoView(this.list,g),g}measureInfo(){let d=this.dom.querySelector("[aria-selected]");if(!d||!this.info)return null;let g=this.dom.getBoundingClientRect(),b=this.info.getBoundingClientRect(),$=d.getBoundingClientRect(),j=this.space;if(!j){let _e=this.dom.ownerDocument.defaultView||window;j={left:0,top:0,right:_e.innerWidth,bottom:_e.innerHeight}}return $.top>Math.min(j.bottom,g.bottom)-10||$.bottom<Math.max(j.top,g.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,g,$,b,j,this.dom)}placeInfo(d){this.info&&(d?(d.style&&(this.info.style.cssText=d.style),this.info.className="cm-tooltip cm-completionInfo "+(d.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(d,g,b){const $=document.createElement("ul");$.id=g,$.setAttribute("role","listbox"),$.setAttribute("aria-expanded","true"),$.setAttribute("aria-label",this.view.state.phrase("Completions"));let j=null;for(let _e=b.from;_e<b.to;_e++){let{completion:et,match:tt}=d[_e],{section:nt}=et;if(nt){let st=typeof nt=="string"?nt:nt.name;if(st!=j&&(_e>b.from||b.from==0))if(j=st,typeof nt!="string"&&nt.header)$.appendChild(nt.header(nt));else{let ot=$.appendChild(document.createElement("completion-section"));ot.textContent=st}}const it=$.appendChild(document.createElement("li"));it.id=g+"-"+_e,it.setAttribute("role","option");let rt=this.optionClass(et);rt&&(it.className=rt);for(let st of this.optionContent){let ot=st(et,this.view.state,this.view,tt);ot&&it.appendChild(ot)}}return b.from&&$.classList.add("cm-completionListIncompleteTop"),b.to<d.length&&$.classList.add("cm-completionListIncompleteBottom"),$}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(_,d){return g=>new CompletionTooltip(g,_,d)}function scrollIntoView(_,d){let g=_.getBoundingClientRect(),b=d.getBoundingClientRect(),$=g.height/_.offsetHeight;b.top<g.top?_.scrollTop-=(g.top-b.top)/$:b.bottom>g.bottom&&(_.scrollTop+=(b.bottom-g.bottom)/$)}function score(_){return(_.boost||0)*100+(_.apply?10:0)+(_.info?5:0)+(_.type?1:0)}function sortOptions(_,d){let g=[],b=null,$=nt=>{g.push(nt);let{section:it}=nt.completion;if(it){b||(b=[]);let rt=typeof it=="string"?it:it.name;b.some(st=>st.name==rt)||b.push(typeof it=="string"?{name:rt}:it)}},j=d.facet(completionConfig);for(let nt of _)if(nt.hasResult()){let it=nt.result.getMatch;if(nt.result.filter===!1)for(let rt of nt.result.options)$(new Option(rt,nt.source,it?it(rt):[],1e9-g.length));else{let rt=d.sliceDoc(nt.from,nt.to),st,ot=j.filterStrict?new StrictMatcher(rt):new FuzzyMatcher(rt);for(let at of nt.result.options)if(st=ot.match(at.label)){let ct=at.displayLabel?it?it(at,st.matched):[]:st.matched;$(new Option(at,nt.source,ct,st.score+(at.boost||0)))}}}if(b){let nt=Object.create(null),it=0,rt=(st,ot)=>{var at,ct;return((at=st.rank)!==null&&at!==void 0?at:1e9)-((ct=ot.rank)!==null&&ct!==void 0?ct:1e9)||(st.name<ot.name?-1:1)};for(let st of b.sort(rt))it-=1e5,nt[st.name]=it;for(let st of g){let{section:ot}=st.completion;ot&&(st.score+=nt[typeof ot=="string"?ot:ot.name])}}let _e=[],et=null,tt=j.compareCompletions;for(let nt of g.sort((it,rt)=>rt.score-it.score||tt(it.completion,rt.completion))){let it=nt.completion;!et||et.label!=it.label||et.detail!=it.detail||et.type!=null&&it.type!=null&&et.type!=it.type||et.apply!=it.apply||et.boost!=it.boost?_e.push(nt):score(nt.completion)>score(et)&&(_e[_e.length-1]=nt),et=nt.completion}return _e}class CompletionDialog{constructor(d,g,b,$,j,_e){this.options=d,this.attrs=g,this.tooltip=b,this.timestamp=$,this.selected=j,this.disabled=_e}setSelected(d,g){return d==this.selected||d>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(g,d),this.tooltip,this.timestamp,d,this.disabled)}static build(d,g,b,$,j){let _e=sortOptions(d,g);if(!_e.length)return $&&d.some(tt=>tt.state==1)?new CompletionDialog($.options,$.attrs,$.tooltip,$.timestamp,$.selected,!0):null;let et=g.facet(completionConfig).selectOnOpen?0:-1;if($&&$.selected!=et&&$.selected!=-1){let tt=$.options[$.selected].completion;for(let nt=0;nt<_e.length;nt++)if(_e[nt].completion==tt){et=nt;break}}return new CompletionDialog(_e,makeAttrs(b,et),{pos:d.reduce((tt,nt)=>nt.hasResult()?Math.min(tt,nt.from):tt,1e8),create:createTooltip,above:j.aboveCursor},$?$.timestamp:Date.now(),et,!1)}map(d){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:d.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class CompletionState{constructor(d,g,b){this.active=d,this.id=g,this.open=b}static start(){return new CompletionState(none$1,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(d){let{state:g}=d,b=g.facet(completionConfig),j=(b.override||g.languageDataAt("autocomplete",cur(g)).map(asSource)).map(et=>(this.active.find(nt=>nt.source==et)||new ActiveSource(et,this.active.some(nt=>nt.state!=0)?1:0)).update(d,b));j.length==this.active.length&&j.every((et,tt)=>et==this.active[tt])&&(j=this.active);let _e=this.open;_e&&d.docChanged&&(_e=_e.map(d.changes)),d.selection||j.some(et=>et.hasResult()&&d.changes.touchesRange(et.from,et.to))||!sameResults(j,this.active)?_e=CompletionDialog.build(j,g,this.id,_e,b):_e&&_e.disabled&&!j.some(et=>et.state==1)&&(_e=null),!_e&&j.every(et=>et.state!=1)&&j.some(et=>et.hasResult())&&(j=j.map(et=>et.hasResult()?new ActiveSource(et.source,0):et));for(let et of d.effects)et.is(setSelectedEffect)&&(_e=_e&&_e.setSelected(et.value,this.id));return j==this.active&&_e==this.open?this:new CompletionState(j,this.id,_e)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs}}function sameResults(_,d){if(_==d)return!0;for(let g=0,b=0;;){for(;g<_.length&&!_[g].hasResult;)g++;for(;b<d.length&&!d[b].hasResult;)b++;let $=g==_.length,j=b==d.length;if($||j)return $==j;if(_[g++].result!=d[b++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"},noAttrs={};function makeAttrs(_,d){let g={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":_};return d>-1&&(g["aria-activedescendant"]=_+"-"+d),g}const none$1=[];function getUpdateType(_,d){if(_.isUserEvent("input.complete")){let b=_.annotation(pickedCompletion);if(b&&d.activateOnCompletion(b))return 12}let g=_.isUserEvent("input.type");return g&&d.activateOnTyping?5:g?1:_.isUserEvent("delete.backward")?2:_.selection?8:_.docChanged?16:0}class ActiveSource{constructor(d,g,b=-1){this.source=d,this.state=g,this.explicitPos=b}hasResult(){return!1}update(d,g){let b=getUpdateType(d,g),$=this;(b&8||b&16&&this.touches(d))&&($=new ActiveSource($.source,0)),b&4&&$.state==0&&($=new ActiveSource(this.source,1)),$=$.updateFor(d,b);for(let j of d.effects)if(j.is(startCompletionEffect))$=new ActiveSource($.source,1,j.value?cur(d.state):-1);else if(j.is(closeCompletionEffect))$=new ActiveSource($.source,0);else if(j.is(setActiveEffect))for(let _e of j.value)_e.source==$.source&&($=_e);return $}updateFor(d,g){return this.map(d.changes)}map(d){return d.empty||this.explicitPos<0?this:new ActiveSource(this.source,this.state,d.mapPos(this.explicitPos))}touches(d){return d.changes.touchesRange(cur(d.state))}}class ActiveResult extends ActiveSource{constructor(d,g,b,$,j){super(d,2,g),this.result=b,this.from=$,this.to=j}hasResult(){return!0}updateFor(d,g){var b;if(!(g&3))return this.map(d.changes);let $=this.result;$.map&&!d.changes.empty&&($=$.map($,d.changes));let j=d.changes.mapPos(this.from),_e=d.changes.mapPos(this.to,1),et=cur(d.state);if((this.explicitPos<0?et<=j:et<this.from)||et>_e||!$||g&2&&cur(d.startState)==this.from)return new ActiveSource(this.source,g&4?1:0);let tt=this.explicitPos<0?-1:d.changes.mapPos(this.explicitPos);return checkValid($.validFor,d.state,j,_e)?new ActiveResult(this.source,tt,$,j,_e):$.update&&($=$.update($,j,_e,new CompletionContext(d.state,et,tt>=0)))?new ActiveResult(this.source,tt,$,$.from,(b=$.to)!==null&&b!==void 0?b:cur(d.state)):new ActiveSource(this.source,1,tt)}map(d){return d.empty?this:(this.result.map?this.result.map(this.result,d):this.result)?new ActiveResult(this.source,this.explicitPos<0?-1:d.mapPos(this.explicitPos),this.result,d.mapPos(this.from),d.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches(d){return d.changes.touchesRange(this.from,this.to)}}function checkValid(_,d,g,b){if(!_)return!1;let $=d.sliceDoc(g,b);return typeof _=="function"?_($,g,b,d):ensureAnchor(_,!0).test($)}const setActiveEffect=StateEffect.define({map(_,d){return _.map(g=>g.map(d))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(_,d){return _.update(d)},provide:_=>[showTooltip.from(_,d=>d.tooltip),EditorView.contentAttributes.from(_,d=>d.attrs)]});function applyCompletion(_,d){const g=d.completion.apply||d.completion.label;let b=_.state.field(completionState).active.find($=>$.source==d.source);return b instanceof ActiveResult?(typeof g=="string"?_.dispatch(Object.assign(Object.assign({},insertCompletionText(_.state,g,b.from,b.to)),{annotations:pickedCompletion.of(d.completion)})):g(_,d.completion,b.from,b.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(_,d="option"){return g=>{let b=g.state.field(completionState,!1);if(!b||!b.open||b.open.disabled||Date.now()-b.open.timestamp<g.state.facet(completionConfig).interactionDelay)return!1;let $=1,j;d=="page"&&(j=getTooltip(g,b.open.tooltip))&&($=Math.max(2,Math.floor(j.dom.offsetHeight/j.dom.querySelector("li").offsetHeight)-1));let{length:_e}=b.open.options,et=b.open.selected>-1?b.open.selected+$*(_?1:-1):_?0:_e-1;return et<0?et=d=="page"?0:_e-1:et>=_e&&(et=d=="page"?_e-1:0),g.dispatch({effects:setSelectedEffect.of(et)}),!0}}const acceptCompletion=_=>{let d=_.state.field(completionState,!1);return _.state.readOnly||!d||!d.open||d.open.selected<0||d.open.disabled||Date.now()-d.open.timestamp<_.state.facet(completionConfig).interactionDelay?!1:applyCompletion(_,d.open.options[d.open.selected])},startCompletion=_=>_.state.field(completionState,!1)?(_.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=_=>{let d=_.state.field(completionState,!1);return!d||!d.active.some(g=>g.state!=0)?!1:(_.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(d,g){this.active=d,this.context=g,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let d of _.state.field(completionState).active)d.state==1&&this.startQuery(d)}update(_){let d=_.state.field(completionState),g=_.state.facet(completionConfig);if(!_.selectionSet&&!_.docChanged&&_.startState.field(completionState)==d)return;let b=_.transactions.some(j=>{let _e=getUpdateType(j,g);return _e&8||(j.selection||j.docChanged)&&!(_e&3)});for(let j=0;j<this.running.length;j++){let _e=this.running[j];if(b||_e.updates.length+_.transactions.length>MaxUpdateCount&&Date.now()-_e.time>MinAbortTime){for(let et of _e.context.abortListeners)try{et()}catch(tt){logException(this.view.state,tt)}_e.context.abortListeners=null,this.running.splice(j--,1)}else _e.updates.push(..._.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),_.transactions.some(j=>j.effects.some(_e=>_e.is(startCompletionEffect)))&&(this.pendingStart=!0);let $=this.pendingStart?50:g.activateOnTypingDelay;if(this.debounceUpdate=d.active.some(j=>j.state==1&&!this.running.some(_e=>_e.active.source==j.source))?setTimeout(()=>this.startUpdate(),$):-1,this.composing!=0)for(let j of _.transactions)j.isUserEvent("input.type")?this.composing=2:this.composing==2&&j.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:_}=this.view,d=_.field(completionState);for(let g of d.active)g.state==1&&!this.running.some(b=>b.active.source==g.source)&&this.startQuery(g)}startQuery(_){let{state:d}=this.view,g=cur(d),b=new CompletionContext(d,g,_.explicitPos==g,this.view),$=new RunningQuery(_,b);this.running.push($),Promise.resolve(_.source(b)).then(j=>{$.context.aborted||($.done=j||null,this.scheduleAccept())},j=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,j)})}scheduleAccept(){this.running.every(_=>_.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var _;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let d=[],g=this.view.state.facet(completionConfig);for(let b=0;b<this.running.length;b++){let $=this.running[b];if($.done===void 0)continue;if(this.running.splice(b--,1),$.done){let _e=new ActiveResult($.active.source,$.active.explicitPos,$.done,$.done.from,(_=$.done.to)!==null&&_!==void 0?_:cur($.updates.length?$.updates[0].startState:this.view.state));for(let et of $.updates)_e=_e.update(et,g);if(_e.hasResult()){d.push(_e);continue}}let j=this.view.state.field(completionState).active.find(_e=>_e.source==$.active.source);if(j&&j.state==1)if($.done==null){let _e=new ActiveSource($.active.source,0);for(let et of $.updates)_e=_e.update(et,g);_e.state!=1&&d.push(_e)}else this.startQuery(j)}d.length&&this.view.dispatch({effects:setActiveEffect.of(d)})}},{eventHandlers:{blur(_){let d=this.view.state.field(completionState,!1);if(d&&d.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let g=d.open&&getTooltip(this.view,d.open.tooltip);(!g||!g.dom.contains(_.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows=typeof navigator=="object"&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(_,d){let g=d.state.field(completionState,!1);if(!g||!g.open||g.open.disabled||g.open.selected<0||_.key.length>1||_.ctrlKey&&!(windows&&_.altKey)||_.metaKey)return!1;let b=g.open.options[g.open.selected],$=g.active.find(_e=>_e.source==b.source),j=b.completion.commitCharacters||$.result.commitCharacters;return j&&j.indexOf(_.key)>-1&&applyCompletion(d,b),!1}})),baseTheme$3=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(d,g,b,$){this.field=d,this.line=g,this.from=b,this.to=$}}class FieldRange{constructor(d,g,b){this.field=d,this.from=g,this.to=b}map(d){let g=d.mapPos(this.from,-1,MapMode.TrackDel),b=d.mapPos(this.to,1,MapMode.TrackDel);return g==null||b==null?null:new FieldRange(this.field,g,b)}}class Snippet{constructor(d,g){this.lines=d,this.fieldPositions=g}instantiate(d,g){let b=[],$=[g],j=d.doc.lineAt(g),_e=/^\s*/.exec(j.text)[0];for(let tt of this.lines){if(b.length){let nt=_e,it=/^\t*/.exec(tt)[0].length;for(let rt=0;rt<it;rt++)nt+=d.facet(indentUnit);$.push(g+nt.length-it),tt=nt+tt.slice(it)}b.push(tt),g+=tt.length+1}let et=this.fieldPositions.map(tt=>new FieldRange(tt.field,$[tt.line]+tt.from,$[tt.line]+tt.to));return{text:b,ranges:et}}static parse(d){let g=[],b=[],$=[],j;for(let _e of d.split(/\r\n?|\n/)){for(;j=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(_e);){let et=j[1]?+j[1]:null,tt=j[2]||j[3]||"",nt=-1,it=tt.replace(/\\[{}]/g,rt=>rt[1]);for(let rt=0;rt<g.length;rt++)(et!=null?g[rt].seq==et:it&&g[rt].name==it)&&(nt=rt);if(nt<0){let rt=0;for(;rt<g.length&&(et==null||g[rt].seq!=null&&g[rt].seq<et);)rt++;g.splice(rt,0,{seq:et,name:it}),nt=rt;for(let st of $)st.field>=nt&&st.field++}$.push(new FieldPos(nt,b.length,j.index,j.index+it.length)),_e=_e.slice(0,j.index)+tt+_e.slice(j.index+j[0].length)}_e=_e.replace(/\\([{}])/g,(et,tt,nt)=>{for(let it of $)it.line==b.length&&it.from>nt&&(it.from--,it.to--);return tt}),b.push(_e)}return new Snippet(b,$)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let _=document.createElement("span");return _.className="cm-snippetFieldPosition",_}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(d,g){this.ranges=d,this.active=g,this.deco=Decoration.set(d.map(b=>(b.from==b.to?fieldMarker:fieldRange).range(b.from,b.to)))}map(d){let g=[];for(let b of this.ranges){let $=b.map(d);if(!$)return null;g.push($)}return new ActiveSnippet(g,this.active)}selectionInsideField(d){return d.ranges.every(g=>this.ranges.some(b=>b.field==this.active&&b.from<=g.from&&b.to>=g.to))}}const setActive=StateEffect.define({map(_,d){return _&&_.map(d)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(_,d){for(let g of d.effects){if(g.is(setActive))return g.value;if(g.is(moveToField)&&_)return new ActiveSnippet(_.ranges,g.value)}return _&&d.docChanged&&(_=_.map(d.changes)),_&&d.selection&&!_.selectionInsideField(d.selection)&&(_=null),_},provide:_=>EditorView.decorations.from(_,d=>d?d.deco:Decoration.none)});function fieldSelection(_,d){return EditorSelection.create(_.filter(g=>g.field==d).map(g=>EditorSelection.range(g.from,g.to)))}function snippet(_){let d=Snippet.parse(_);return(g,b,$,j)=>{let{text:_e,ranges:et}=d.instantiate(g.state,$),tt={changes:{from:$,to:j,insert:Text.of(_e)},scrollIntoView:!0,annotations:b?[pickedCompletion.of(b),Transaction.userEvent.of("input.complete")]:void 0};if(et.length&&(tt.selection=fieldSelection(et,0)),et.some(nt=>nt.field>0)){let nt=new ActiveSnippet(et,0),it=tt.effects=[setActive.of(nt)];g.state.field(snippetState,!1)===void 0&&it.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$3]))}g.dispatch(g.state.update(tt))}}function moveField(_){return({state:d,dispatch:g})=>{let b=d.field(snippetState,!1);if(!b||_<0&&b.active==0)return!1;let $=b.active+_,j=_>0&&!b.ranges.some(_e=>_e.field==$+_);return g(d.update({selection:fieldSelection(b.ranges,$),effects:setActive.of(j?null:new ActiveSnippet(b.ranges,$)),scrollIntoView:!0})),!0}}const clearSnippet=({state:_,dispatch:d})=>_.field(snippetState,!1)?(d(_.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(_){return _.length?_[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],_=>_.facet(snippetKeymap)));function snippetCompletion(_,d){return Object.assign(Object.assign({},d),{apply:snippet(_)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(_,d){let g=d.state.field(snippetState,!1),b;if(!g||(b=d.posAtCoords({x:_.clientX,y:_.clientY}))==null)return!1;let $=g.ranges.find(j=>j.from<=b&&j.to>=b);return!$||$.field==g.active?!1:(d.dispatch({selection:fieldSelection(g.ranges,$.field),effects:setActive.of(g.ranges.some(j=>j.field>$.field)?new ActiveSnippet(g.ranges,$.field):null),scrollIntoView:!0}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(_,d){let g=d.mapPos(_,-1,MapMode.TrackAfter);return g??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(_,d){if(_=_.map(d.changes),d.selection){let g=d.state.doc.lineAt(d.selection.main.head);_=_.update({filter:b=>b>=g.from&&b<=g.to})}for(let g of d.effects)g.is(closeBracketEffect)&&(_=_.update({add:[closedBracket.range(g.value,g.value+1)]}));return _}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(_){for(let d=0;d<definedClosing.length;d+=2)if(definedClosing.charCodeAt(d)==_)return definedClosing.charAt(d+1);return fromCodePoint(_<128?_:_+1)}function config(_,d){return _.languageDataAt("closeBrackets",d)[0]||defaults}const android$1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((_,d,g,b)=>{if((android$1?_.composing:_.compositionStarted)||_.state.readOnly)return!1;let $=_.state.selection.main;if(b.length>2||b.length==2&&codePointSize(codePointAt(b,0))==1||d!=$.from||g!=$.to)return!1;let j=insertBracket(_.state,b);return j?(_.dispatch(j),!0):!1}),deleteBracketPair=({state:_,dispatch:d})=>{if(_.readOnly)return!1;let b=config(_,_.selection.main.head).brackets||defaults.brackets,$=null,j=_.changeByRange(_e=>{if(_e.empty){let et=prevChar(_.doc,_e.head);for(let tt of b)if(tt==et&&nextChar(_.doc,_e.head)==closing(codePointAt(tt,0)))return{changes:{from:_e.head-tt.length,to:_e.head+tt.length},range:EditorSelection.cursor(_e.head-tt.length)}}return{range:$=_e}});return $||d(_.update(j,{scrollIntoView:!0,userEvent:"delete.backward"})),!$},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(_,d){let g=config(_,_.selection.main.head),b=g.brackets||defaults.brackets;for(let $ of b){let j=closing(codePointAt($,0));if(d==$)return j==$?handleSame(_,$,b.indexOf($+$+$)>-1,g):handleOpen(_,$,j,g.before||defaults.before);if(d==j&&closedBracketAt(_,_.selection.main.from))return handleClose(_,$,j)}return null}function closedBracketAt(_,d){let g=!1;return _.field(bracketState).between(0,_.doc.length,b=>{b==d&&(g=!0)}),g}function nextChar(_,d){let g=_.sliceString(d,d+2);return g.slice(0,codePointSize(codePointAt(g,0)))}function prevChar(_,d){let g=_.sliceString(d-2,d);return codePointSize(codePointAt(g,0))==g.length?g:g.slice(1)}function handleOpen(_,d,g,b){let $=null,j=_.changeByRange(_e=>{if(!_e.empty)return{changes:[{insert:d,from:_e.from},{insert:g,from:_e.to}],effects:closeBracketEffect.of(_e.to+d.length),range:EditorSelection.range(_e.anchor+d.length,_e.head+d.length)};let et=nextChar(_.doc,_e.head);return!et||/\s/.test(et)||b.indexOf(et)>-1?{changes:{insert:d+g,from:_e.head},effects:closeBracketEffect.of(_e.head+d.length),range:EditorSelection.cursor(_e.head+d.length)}:{range:$=_e}});return $?null:_.update(j,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(_,d,g){let b=null,$=_.changeByRange(j=>j.empty&&nextChar(_.doc,j.head)==g?{changes:{from:j.head,to:j.head+g.length,insert:g},range:EditorSelection.cursor(j.head+g.length)}:b={range:j});return b?null:_.update($,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(_,d,g,b){let $=b.stringPrefixes||defaults.stringPrefixes,j=null,_e=_.changeByRange(et=>{if(!et.empty)return{changes:[{insert:d,from:et.from},{insert:d,from:et.to}],effects:closeBracketEffect.of(et.to+d.length),range:EditorSelection.range(et.anchor+d.length,et.head+d.length)};let tt=et.head,nt=nextChar(_.doc,tt),it;if(nt==d){if(nodeStart(_,tt))return{changes:{insert:d+d,from:tt},effects:closeBracketEffect.of(tt+d.length),range:EditorSelection.cursor(tt+d.length)};if(closedBracketAt(_,tt)){let st=g&&_.sliceDoc(tt,tt+d.length*3)==d+d+d?d+d+d:d;return{changes:{from:tt,to:tt+st.length,insert:st},range:EditorSelection.cursor(tt+st.length)}}}else{if(g&&_.sliceDoc(tt-2*d.length,tt)==d+d&&(it=canStartStringAt(_,tt-2*d.length,$))>-1&&nodeStart(_,it))return{changes:{insert:d+d+d+d,from:tt},effects:closeBracketEffect.of(tt+d.length),range:EditorSelection.cursor(tt+d.length)};if(_.charCategorizer(tt)(nt)!=CharCategory.Word&&canStartStringAt(_,tt,$)>-1&&!probablyInString(_,tt,d,$))return{changes:{insert:d+d,from:tt},effects:closeBracketEffect.of(tt+d.length),range:EditorSelection.cursor(tt+d.length)}}return{range:j=et}});return j?null:_.update(_e,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(_,d){let g=syntaxTree(_).resolveInner(d+1);return g.parent&&g.from==d}function probablyInString(_,d,g,b){let $=syntaxTree(_).resolveInner(d,-1),j=b.reduce((_e,et)=>Math.max(_e,et.length),0);for(let _e=0;_e<5;_e++){let et=_.sliceDoc($.from,Math.min($.to,$.from+g.length+j)),tt=et.indexOf(g);if(!tt||tt>-1&&b.indexOf(et.slice(0,tt))>-1){let it=$.firstChild;for(;it&&it.from==$.from&&it.to-it.from>g.length+tt;){if(_.sliceDoc(it.to-g.length,it.to)==g)return!1;it=it.firstChild}return!0}let nt=$.to==d&&$.parent;if(!nt)break;$=nt}return!1}function canStartStringAt(_,d,g){let b=_.charCategorizer(d);if(b(_.sliceDoc(d-1,d))!=CharCategory.Word)return d;for(let $ of g){let j=d-$.length;if(_.sliceDoc(j,d)==$&&b(_.sliceDoc(j-1,j))!=CharCategory.Word)return j}return-1}function autocompletion(_={}){return[commitCharacters,completionState,completionConfig.of(_),completionPlugin,completionKeymapExt,baseTheme$3]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],_=>_.facet(completionConfig).defaultKeymap?[completionKeymap]:[])),snippets=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],typescriptSnippets=snippets.concat([snippetCompletion("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),snippetCompletion("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),snippetCompletion("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(_){return(d,g)=>{let b=d.node.getChild("VariableDefinition");return b&&g(b,_),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(_,d){_.matchContext(functionContext)||d(_,"variable")},TypeDefinition(_,d){d(_,"type")},__proto__:null};function getScope(_,d){let g=cache.get(d);if(g)return g;let b=[],$=!0;function j(_e,et){let tt=_.sliceString(_e.from,_e.to);b.push({label:tt,type:et})}return d.cursor(IterMode.IncludeAnonymous).iterate(_e=>{if($)$=!1;else if(_e.name){let et=gatherCompletions[_e.name];if(et&&et(_e,j)||ScopeNodes.has(_e.name))return!1}else if(_e.to-_e.from>8192){for(let et of getScope(_,_e.node))b.push(et);return!1}}),cache.set(d,b),b}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function localCompletionSource(_){let d=syntaxTree(_.state).resolveInner(_.pos,-1);if(dontComplete.indexOf(d.name)>-1)return null;let g=d.name=="VariableName"||d.to-d.from<20&&Identifier.test(_.state.sliceDoc(d.from,d.to));if(!g&&!_.explicit)return null;let b=[];for(let $=d;$;$=$.parent)ScopeNodes.has($.name)&&(b=b.concat(getScope(_.state.doc,$)));return{options:b,from:g?d.from:_.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:_=>{let d=_.textAfter,g=/^\s*\}/.test(d),b=/^\s*(case|default)\b/.test(d);return _.baseIndent+(g?0:b?1:2)*_.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:_=>_.baseIndent+_.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^{/}),JSXElement(_){let d=/^\s*<\//.test(_.textAfter);return _.lineIndent(_.node.from)+(d?0:_.unit)},JSXEscape(_){let d=/\s*\}/.test(_.textAfter);return _.lineIndent(_.node.from)+(d?0:_.unit)},"JSXOpenTag JSXSelfClosingTag"(_){return _.column(_.node.from)+_.unit}}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment(_){return{from:_.from+2,to:_.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:_=>/^JSX/.test(_.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(_=>_.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(_=>_.isTop?[jsxSublanguage]:void 0)]},"typescript");let kwCompletion=_=>({label:_,type:"keyword"});const keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(kwCompletion),typescriptKeywords=keywords.concat(["declare","implements","private","protected","public"].map(kwCompletion));function javascript(_={}){let d=_.jsx?_.typescript?tsxLanguage:jsxLanguage:_.typescript?typescriptLanguage:javascriptLanguage,g=_.typescript?typescriptSnippets.concat(typescriptKeywords):snippets.concat(keywords);return new LanguageSupport(d,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(g))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),_.jsx?autoCloseTags:[]])}function findOpenTag(_){for(;;){if(_.name=="JSXOpenTag"||_.name=="JSXSelfClosingTag"||_.name=="JSXFragmentTag")return _;if(_.name=="JSXEscape"||!_.parent)return null;_=_.parent}}function elementName(_,d,g=_.length){for(let b=d==null?void 0:d.firstChild;b;b=b.nextSibling)if(b.name=="JSXIdentifier"||b.name=="JSXBuiltin"||b.name=="JSXNamespacedName"||b.name=="JSXMemberExpression")return _.sliceString(b.from,Math.min(b.to,g));return""}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of((_,d,g,b,$)=>{if((android?_.composing:_.compositionStarted)||_.state.readOnly||d!=g||b!=">"&&b!="/"||!javascriptLanguage.isActiveAt(_.state,d,-1))return!1;let j=$(),{state:_e}=j,et=_e.changeByRange(tt=>{var nt;let{head:it}=tt,rt=syntaxTree(_e).resolveInner(it-1,-1),st;if(rt.name=="JSXStartTag"&&(rt=rt.parent),!(_e.doc.sliceString(it-1,it)!=b||rt.name=="JSXAttributeValue"&&rt.to>it)){if(b==">"&&rt.name=="JSXFragmentTag")return{range:tt,changes:{from:it,insert:"</>"}};if(b=="/"&&rt.name=="JSXStartCloseTag"){let ot=rt.parent,at=ot.parent;if(at&&ot.from==it-2&&((st=elementName(_e.doc,at.firstChild,it))||((nt=at.firstChild)===null||nt===void 0?void 0:nt.name)=="JSXFragmentTag")){let ct=`${st}>`;return{range:EditorSelection.cursor(it+ct.length,-1),changes:{from:it,insert:ct}}}}else if(b==">"){let ot=findOpenTag(rt);if(ot&&ot.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(_e.doc.sliceString(it,it+2))&&(st=elementName(_e.doc,ot,it)))return{range:tt,changes:{from:it,insert:`</${st}>`}}}}return{range:tt}});return et.changes.empty?!1:(_.dispatch([j,_e.update(et,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});function _extends(){return _extends=Object.assign?Object.assign.bind():function(_){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var b in g)({}).hasOwnProperty.call(g,b)&&(_[b]=g[b])}return _},_extends.apply(null,arguments)}var createTheme=_=>{var{theme:d,settings:g={},styles:b=[]}=_,$={".cm-gutters":{}},j={};g.background&&(j.backgroundColor=g.background),g.backgroundImage&&(j.backgroundImage=g.backgroundImage),g.foreground&&(j.color=g.foreground),g.fontSize&&(j.fontSize=g.fontSize),(g.background||g.foreground)&&($["&"]=j),g.fontFamily&&($["&.cm-editor .cm-scroller"]={fontFamily:g.fontFamily}),g.gutterBackground&&($[".cm-gutters"].backgroundColor=g.gutterBackground),g.gutterForeground&&($[".cm-gutters"].color=g.gutterForeground),g.gutterBorder&&($[".cm-gutters"].borderRightColor=g.gutterBorder),g.caret&&($[".cm-content"]={caretColor:g.caret},$[".cm-cursor, .cm-dropCursor"]={borderLeftColor:g.caret});var _e={};g.gutterActiveForeground&&(_e.color=g.gutterActiveForeground),g.lineHighlight&&($[".cm-activeLine"]={backgroundColor:g.lineHighlight},_e.backgroundColor=g.lineHighlight),$[".cm-activeLineGutter"]=_e,g.selection&&($["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:g.selection+" !important"}),g.selectionMatch&&($["& .cm-selectionMatch"]={backgroundColor:g.selectionMatch});var et=EditorView.theme($,{dark:d==="dark"}),tt=HighlightStyle.define(b),nt=[et,syntaxHighlighting(tt)];return nt},defaultSettingsXcodeLight={background:"#fff",foreground:"#3D3D3D",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#AFAFAF",lineHighlight:"#d5e6ff69"},xcodeLightStyle=[{tag:[tags.comment,tags.quote],color:"#707F8D"},{tag:[tags.typeName,tags.typeOperator],color:"#aa0d91"},{tag:[tags.keyword],color:"#aa0d91",fontWeight:"bold"},{tag:[tags.string,tags.meta],color:"#D23423"},{tag:[tags.name],color:"#032f62"},{tag:[tags.typeName],color:"#522BB2"},{tag:[tags.variableName],color:"#23575C"},{tag:[tags.definition(tags.variableName)],color:"#327A9E"},{tag:[tags.regexp,tags.link],color:"#0e0eff"}];function xcodeLightInit(_){var{theme:d="light",settings:g={},styles:b=[]}=_||{};return createTheme({theme:d,settings:_extends({},defaultSettingsXcodeLight,g),styles:[...xcodeLightStyle,...b]})}xcodeLightInit();var defaultSettingsXcodeDark={background:"#292A30",foreground:"#CECFD0",caret:"#fff",selection:"#727377",selectionMatch:"#727377",lineHighlight:"#ffffff0f"},xcodeDarkStyle=[{tag:[tags.comment,tags.quote],color:"#7F8C98"},{tag:[tags.keyword],color:"#FF7AB2",fontWeight:"bold"},{tag:[tags.string,tags.meta],color:"#FF8170"},{tag:[tags.typeName],color:"#DABAFF"},{tag:[tags.definition(tags.variableName)],color:"#6BDFFF"},{tag:[tags.name],color:"#6BAA9F"},{tag:[tags.variableName],color:"#ACF2E4"},{tag:[tags.regexp,tags.link],color:"#FF8170"}],xcodeDarkInit=_=>{var{theme:d="dark",settings:g={},styles:b=[]}=_||{};return createTheme({theme:d,settings:_extends({},defaultSettingsXcodeDark,g),styles:[...xcodeDarkStyle,...b]})},xcodeDark=xcodeDarkInit();function _objectWithoutPropertiesLoose(_,d){if(_==null)return{};var g={};for(var b in _)if({}.hasOwnProperty.call(_,b)){if(d.indexOf(b)>=0)continue;g[b]=_[b]}return g}const toggleComment=_=>{let{state:d}=_,g=d.doc.lineAt(d.selection.main.from),b=getConfig(_.state,g.from);return b.line?toggleLineComment(_):b.block?toggleBlockCommentByLine(_):!1};function command(_,d){return({state:g,dispatch:b})=>{if(g.readOnly)return!1;let $=_(d,g);return $?(b(g.update($)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((_,d)=>changeBlockComment(_,d,selectedLineRanges(d)),0);function getConfig(_,d){let g=_.languageDataAt("commentTokens",d);return g.length?g[0]:{}}const SearchMargin=50;function findBlockComment(_,{open:d,close:g},b,$){let j=_.sliceDoc(b-SearchMargin,b),_e=_.sliceDoc($,$+SearchMargin),et=/\s*$/.exec(j)[0].length,tt=/^\s*/.exec(_e)[0].length,nt=j.length-et;if(j.slice(nt-d.length,nt)==d&&_e.slice(tt,tt+g.length)==g)return{open:{pos:b-et,margin:et&&1},close:{pos:$+tt,margin:tt&&1}};let it,rt;$-b<=2*SearchMargin?it=rt=_.sliceDoc(b,$):(it=_.sliceDoc(b,b+SearchMargin),rt=_.sliceDoc($-SearchMargin,$));let st=/^\s*/.exec(it)[0].length,ot=/\s*$/.exec(rt)[0].length,at=rt.length-ot-g.length;return it.slice(st,st+d.length)==d&&rt.slice(at,at+g.length)==g?{open:{pos:b+st+d.length,margin:/\s/.test(it.charAt(st+d.length))?1:0},close:{pos:$-ot-g.length,margin:/\s/.test(rt.charAt(at-1))?1:0}}:null}function selectedLineRanges(_){let d=[];for(let g of _.selection.ranges){let b=_.doc.lineAt(g.from),$=g.to<=b.to?b:_.doc.lineAt(g.to),j=d.length-1;j>=0&&d[j].to>b.from?d[j].to=$.to:d.push({from:b.from+/^\s*/.exec(b.text)[0].length,to:$.to})}return d}function changeBlockComment(_,d,g=d.selection.ranges){let b=g.map(j=>getConfig(d,j.from).block);if(!b.every(j=>j))return null;let $=g.map((j,_e)=>findBlockComment(d,b[_e],j.from,j.to));if(_!=2&&!$.every(j=>j))return{changes:d.changes(g.map((j,_e)=>$[_e]?[]:[{from:j.from,insert:b[_e].open+" "},{from:j.to,insert:" "+b[_e].close}]))};if(_!=1&&$.some(j=>j)){let j=[];for(let _e=0,et;_e<$.length;_e++)if(et=$[_e]){let tt=b[_e],{open:nt,close:it}=et;j.push({from:nt.pos-tt.open.length,to:nt.pos+nt.margin},{from:it.pos-it.margin,to:it.pos+tt.close.length})}return{changes:j}}return null}function changeLineComment(_,d,g=d.selection.ranges){let b=[],$=-1;for(let{from:j,to:_e}of g){let et=b.length,tt=1e9,nt=getConfig(d,j).line;if(nt){for(let it=j;it<=_e;){let rt=d.doc.lineAt(it);if(rt.from>$&&(j==_e||_e>rt.from)){$=rt.from;let st=/^\s*/.exec(rt.text)[0].length,ot=st==rt.length,at=rt.text.slice(st,st+nt.length)==nt?st:-1;st<rt.text.length&&st<tt&&(tt=st),b.push({line:rt,comment:at,token:nt,indent:st,empty:ot,single:!1})}it=rt.to+1}if(tt<1e9)for(let it=et;it<b.length;it++)b[it].indent<b[it].line.text.length&&(b[it].indent=tt);b.length==et+1&&(b[et].single=!0)}}if(_!=2&&b.some(j=>j.comment<0&&(!j.empty||j.single))){let j=[];for(let{line:et,token:tt,indent:nt,empty:it,single:rt}of b)(rt||!it)&&j.push({from:et.from+nt,insert:tt+" "});let _e=d.changes(j);return{changes:_e,selection:d.selection.map(_e,1)}}else if(_!=1&&b.some(j=>j.comment>=0)){let j=[];for(let{line:_e,comment:et,token:tt}of b)if(et>=0){let nt=_e.from+et,it=nt+tt.length;_e.text[it-_e.from]==" "&&it++,j.push({from:nt,to:it})}return{changes:j}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(_){return combineConfig(_,{minDepth:100,newGroupDelay:500,joinToEvent:(d,g)=>g},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(d,g)=>(b,$)=>d(b,$)||g(b,$)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(_,d){let g=d.state.facet(historyConfig),b=d.annotation(fromHistory);if(b){let tt=HistEvent.fromTransaction(d,b.selection),nt=b.side,it=nt==0?_.undone:_.done;return tt?it=updateBranch(it,it.length,g.minDepth,tt):it=addSelection(it,d.startState.selection),new HistoryState(nt==0?b.rest:it,nt==0?it:b.rest)}let $=d.annotation(isolateHistory);if(($=="full"||$=="before")&&(_=_.isolate()),d.annotation(Transaction.addToHistory)===!1)return d.changes.empty?_:_.addMapping(d.changes.desc);let j=HistEvent.fromTransaction(d),_e=d.annotation(Transaction.time),et=d.annotation(Transaction.userEvent);return j?_=_.addChanges(j,_e,et,g,d):d.selection&&(_=_.addSelection(d.startState.selection,_e,et,g.newGroupDelay)),($=="full"||$=="after")&&(_=_.isolate()),_},toJSON(_){return{done:_.done.map(d=>d.toJSON()),undone:_.undone.map(d=>d.toJSON())}},fromJSON(_){return new HistoryState(_.done.map(HistEvent.fromJSON),_.undone.map(HistEvent.fromJSON))}});function history(_={}){return[historyField_,historyConfig.of(_),EditorView.domEventHandlers({beforeinput(d,g){let b=d.inputType=="historyUndo"?undo:d.inputType=="historyRedo"?redo:null;return b?(d.preventDefault(),b(g)):!1}})]}function cmd(_,d){return function({state:g,dispatch:b}){if(!d&&g.readOnly)return!1;let $=g.field(historyField_,!1);if(!$)return!1;let j=$.pop(_,g,d);return j?(b(j),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(d,g,b,$,j){this.changes=d,this.effects=g,this.mapped=b,this.startSelection=$,this.selectionsAfter=j}setSelAfter(d){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,d)}toJSON(){var d,g,b;return{changes:(d=this.changes)===null||d===void 0?void 0:d.toJSON(),mapped:(g=this.mapped)===null||g===void 0?void 0:g.toJSON(),startSelection:(b=this.startSelection)===null||b===void 0?void 0:b.toJSON(),selectionsAfter:this.selectionsAfter.map($=>$.toJSON())}}static fromJSON(d){return new HistEvent(d.changes&&ChangeSet.fromJSON(d.changes),[],d.mapped&&ChangeDesc.fromJSON(d.mapped),d.startSelection&&EditorSelection.fromJSON(d.startSelection),d.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(d,g){let b=none;for(let $ of d.startState.facet(invertedEffects)){let j=$(d);j.length&&(b=b.concat(j))}return!b.length&&d.changes.empty?null:new HistEvent(d.changes.invert(d.startState.doc),b,void 0,g||d.startState.selection,none)}static selection(d){return new HistEvent(void 0,none,void 0,void 0,d)}}function updateBranch(_,d,g,b){let $=d+1>g+20?d-g-1:0,j=_.slice($,d);return j.push(b),j}function isAdjacent(_,d){let g=[],b=!1;return _.iterChangedRanges(($,j)=>g.push($,j)),d.iterChangedRanges(($,j,_e,et)=>{for(let tt=0;tt<g.length;){let nt=g[tt++],it=g[tt++];et>=nt&&_e<=it&&(b=!0)}}),b}function eqSelectionShape(_,d){return _.ranges.length==d.ranges.length&&_.ranges.filter((g,b)=>g.empty!=d.ranges[b].empty).length===0}function conc(_,d){return _.length?d.length?_.concat(d):_:d}const none=[],MaxSelectionsPerEvent=200;function addSelection(_,d){if(_.length){let g=_[_.length-1],b=g.selectionsAfter.slice(Math.max(0,g.selectionsAfter.length-MaxSelectionsPerEvent));return b.length&&b[b.length-1].eq(d)?_:(b.push(d),updateBranch(_,_.length-1,1e9,g.setSelAfter(b)))}else return[HistEvent.selection([d])]}function popSelection(_){let d=_[_.length-1],g=_.slice();return g[_.length-1]=d.setSelAfter(d.selectionsAfter.slice(0,d.selectionsAfter.length-1)),g}function addMappingToBranch(_,d){if(!_.length)return _;let g=_.length,b=none;for(;g;){let $=mapEvent(_[g-1],d,b);if($.changes&&!$.changes.empty||$.effects.length){let j=_.slice(0,g);return j[g-1]=$,j}else d=$.mapped,g--,b=$.selectionsAfter}return b.length?[HistEvent.selection(b)]:none}function mapEvent(_,d,g){let b=conc(_.selectionsAfter.length?_.selectionsAfter.map(et=>et.map(d)):none,g);if(!_.changes)return HistEvent.selection(b);let $=_.changes.map(d),j=d.mapDesc(_.changes,!0),_e=_.mapped?_.mapped.composeDesc(j):j;return new HistEvent($,StateEffect.mapEffects(_.effects,d),_e,_.startSelection.map(j),b)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(d,g,b=0,$=void 0){this.done=d,this.undone=g,this.prevTime=b,this.prevUserEvent=$}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(d,g,b,$,j){let _e=this.done,et=_e[_e.length-1];return et&&et.changes&&!et.changes.empty&&d.changes&&(!b||joinableUserEvent.test(b))&&(!et.selectionsAfter.length&&g-this.prevTime<$.newGroupDelay&&$.joinToEvent(j,isAdjacent(et.changes,d.changes))||b=="input.type.compose")?_e=updateBranch(_e,_e.length-1,$.minDepth,new HistEvent(d.changes.compose(et.changes),conc(d.effects,et.effects),et.mapped,et.startSelection,none)):_e=updateBranch(_e,_e.length,$.minDepth,d),new HistoryState(_e,none,g,b)}addSelection(d,g,b,$){let j=this.done.length?this.done[this.done.length-1].selectionsAfter:none;return j.length>0&&g-this.prevTime<$&&b==this.prevUserEvent&&b&&/^select($|\.)/.test(b)&&eqSelectionShape(j[j.length-1],d)?this:new HistoryState(addSelection(this.done,d),this.undone,g,b)}addMapping(d){return new HistoryState(addMappingToBranch(this.done,d),addMappingToBranch(this.undone,d),this.prevTime,this.prevUserEvent)}pop(d,g,b){let $=d==0?this.done:this.undone;if($.length==0)return null;let j=$[$.length-1],_e=j.selectionsAfter[0]||g.selection;if(b&&j.selectionsAfter.length)return g.update({selection:j.selectionsAfter[j.selectionsAfter.length-1],annotations:fromHistory.of({side:d,rest:popSelection($),selection:_e}),userEvent:d==0?"select.undo":"select.redo",scrollIntoView:!0});if(j.changes){let et=$.length==1?none:$.slice(0,$.length-1);return j.mapped&&(et=addMappingToBranch(et,j.mapped)),g.update({changes:j.changes,selection:j.startSelection,effects:j.effects,annotations:fromHistory.of({side:d,rest:et,selection:_e}),filter:!1,userEvent:d==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none,none);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(_,d){return EditorSelection.create(_.ranges.map(d),_.mainIndex)}function setSel(_,d){return _.update({selection:d,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:_,dispatch:d},g){let b=updateSel(_.selection,g);return b.eq(_.selection,!0)?!1:(d(setSel(_,b)),!0)}function rangeEnd(_,d){return EditorSelection.cursor(d?_.to:_.from)}function cursorByChar(_,d){return moveSel(_,g=>g.empty?_.moveByChar(g,d):rangeEnd(g,d))}function ltrAtCursor(_){return _.textDirectionAt(_.state.selection.main.head)==Direction.LTR}const cursorCharLeft=_=>cursorByChar(_,!ltrAtCursor(_)),cursorCharRight=_=>cursorByChar(_,ltrAtCursor(_));function cursorByGroup(_,d){return moveSel(_,g=>g.empty?_.moveByGroup(g,d):rangeEnd(g,d))}const cursorGroupLeft=_=>cursorByGroup(_,!ltrAtCursor(_)),cursorGroupRight=_=>cursorByGroup(_,ltrAtCursor(_));function interestingNode(_,d,g){if(d.type.prop(g))return!0;let b=d.to-d.from;return b&&(b>2||/[^\s,.;:]/.test(_.sliceDoc(d.from,d.to)))||d.firstChild}function moveBySyntax(_,d,g){let b=syntaxTree(_).resolveInner(d.head),$=g?NodeProp.closedBy:NodeProp.openedBy;for(let tt=d.head;;){let nt=g?b.childAfter(tt):b.childBefore(tt);if(!nt)break;interestingNode(_,nt,$)?b=nt:tt=g?nt.to:nt.from}let j=b.type.prop($),_e,et;return j&&(_e=g?matchBrackets(_,b.from,1):matchBrackets(_,b.to,-1))&&_e.matched?et=g?_e.end.to:_e.end.from:et=g?b.to:b.from,EditorSelection.cursor(et,g?-1:1)}const cursorSyntaxLeft=_=>moveSel(_,d=>moveBySyntax(_.state,d,!ltrAtCursor(_))),cursorSyntaxRight=_=>moveSel(_,d=>moveBySyntax(_.state,d,ltrAtCursor(_)));function cursorByLine(_,d){return moveSel(_,g=>{if(!g.empty)return rangeEnd(g,d);let b=_.moveVertically(g,d);return b.head!=g.head?b:_.moveToLineBoundary(g,d)})}const cursorLineUp=_=>cursorByLine(_,!1),cursorLineDown=_=>cursorByLine(_,!0);function pageInfo(_){let d=_.scrollDOM.clientHeight<_.scrollDOM.scrollHeight-2,g=0,b=0,$;if(d){for(let j of _.state.facet(EditorView.scrollMargins)){let _e=j(_);_e!=null&&_e.top&&(g=Math.max(_e==null?void 0:_e.top,g)),_e!=null&&_e.bottom&&(b=Math.max(_e==null?void 0:_e.bottom,b))}$=_.scrollDOM.clientHeight-g-b}else $=(_.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:g,marginBottom:b,selfScroll:d,height:Math.max(_.defaultLineHeight,$-5)}}function cursorByPage(_,d){let g=pageInfo(_),{state:b}=_,$=updateSel(b.selection,_e=>_e.empty?_.moveVertically(_e,d,g.height):rangeEnd(_e,d));if($.eq(b.selection))return!1;let j;if(g.selfScroll){let _e=_.coordsAtPos(b.selection.main.head),et=_.scrollDOM.getBoundingClientRect(),tt=et.top+g.marginTop,nt=et.bottom-g.marginBottom;_e&&_e.top>tt&&_e.bottom<nt&&(j=EditorView.scrollIntoView($.main.head,{y:"start",yMargin:_e.top-tt}))}return _.dispatch(setSel(b,$),{effects:j}),!0}const cursorPageUp=_=>cursorByPage(_,!1),cursorPageDown=_=>cursorByPage(_,!0);function moveByLineBoundary(_,d,g){let b=_.lineBlockAt(d.head),$=_.moveToLineBoundary(d,g);if($.head==d.head&&$.head!=(g?b.to:b.from)&&($=_.moveToLineBoundary(d,g,!1)),!g&&$.head==b.from&&b.length){let j=/^\s*/.exec(_.state.sliceDoc(b.from,Math.min(b.from+100,b.to)))[0].length;j&&d.head!=b.from+j&&($=EditorSelection.cursor(b.from+j))}return $}const cursorLineBoundaryForward=_=>moveSel(_,d=>moveByLineBoundary(_,d,!0)),cursorLineBoundaryBackward=_=>moveSel(_,d=>moveByLineBoundary(_,d,!1)),cursorLineBoundaryLeft=_=>moveSel(_,d=>moveByLineBoundary(_,d,!ltrAtCursor(_))),cursorLineBoundaryRight=_=>moveSel(_,d=>moveByLineBoundary(_,d,ltrAtCursor(_))),cursorLineStart=_=>moveSel(_,d=>EditorSelection.cursor(_.lineBlockAt(d.head).from,1)),cursorLineEnd=_=>moveSel(_,d=>EditorSelection.cursor(_.lineBlockAt(d.head).to,-1));function toMatchingBracket(_,d,g){let b=!1,$=updateSel(_.selection,j=>{let _e=matchBrackets(_,j.head,-1)||matchBrackets(_,j.head,1)||j.head>0&&matchBrackets(_,j.head-1,1)||j.head<_.doc.length&&matchBrackets(_,j.head+1,-1);if(!_e||!_e.end)return j;b=!0;let et=_e.start.from==j.head?_e.end.to:_e.end.from;return g?EditorSelection.range(j.anchor,et):EditorSelection.cursor(et)});return b?(d(setSel(_,$)),!0):!1}const cursorMatchingBracket=({state:_,dispatch:d})=>toMatchingBracket(_,d,!1);function extendSel(_,d){let g=updateSel(_.state.selection,b=>{let $=d(b);return EditorSelection.range(b.anchor,$.head,$.goalColumn,$.bidiLevel||void 0)});return g.eq(_.state.selection)?!1:(_.dispatch(setSel(_.state,g)),!0)}function selectByChar(_,d){return extendSel(_,g=>_.moveByChar(g,d))}const selectCharLeft=_=>selectByChar(_,!ltrAtCursor(_)),selectCharRight=_=>selectByChar(_,ltrAtCursor(_));function selectByGroup(_,d){return extendSel(_,g=>_.moveByGroup(g,d))}const selectGroupLeft=_=>selectByGroup(_,!ltrAtCursor(_)),selectGroupRight=_=>selectByGroup(_,ltrAtCursor(_)),selectSyntaxLeft=_=>extendSel(_,d=>moveBySyntax(_.state,d,!ltrAtCursor(_))),selectSyntaxRight=_=>extendSel(_,d=>moveBySyntax(_.state,d,ltrAtCursor(_)));function selectByLine(_,d){return extendSel(_,g=>_.moveVertically(g,d))}const selectLineUp=_=>selectByLine(_,!1),selectLineDown=_=>selectByLine(_,!0);function selectByPage(_,d){return extendSel(_,g=>_.moveVertically(g,d,pageInfo(_).height))}const selectPageUp=_=>selectByPage(_,!1),selectPageDown=_=>selectByPage(_,!0),selectLineBoundaryForward=_=>extendSel(_,d=>moveByLineBoundary(_,d,!0)),selectLineBoundaryBackward=_=>extendSel(_,d=>moveByLineBoundary(_,d,!1)),selectLineBoundaryLeft=_=>extendSel(_,d=>moveByLineBoundary(_,d,!ltrAtCursor(_))),selectLineBoundaryRight=_=>extendSel(_,d=>moveByLineBoundary(_,d,ltrAtCursor(_))),selectLineStart=_=>extendSel(_,d=>EditorSelection.cursor(_.lineBlockAt(d.head).from)),selectLineEnd=_=>extendSel(_,d=>EditorSelection.cursor(_.lineBlockAt(d.head).to)),cursorDocStart=({state:_,dispatch:d})=>(d(setSel(_,{anchor:0})),!0),cursorDocEnd=({state:_,dispatch:d})=>(d(setSel(_,{anchor:_.doc.length})),!0),selectDocStart=({state:_,dispatch:d})=>(d(setSel(_,{anchor:_.selection.main.anchor,head:0})),!0),selectDocEnd=({state:_,dispatch:d})=>(d(setSel(_,{anchor:_.selection.main.anchor,head:_.doc.length})),!0),selectAll=({state:_,dispatch:d})=>(d(_.update({selection:{anchor:0,head:_.doc.length},userEvent:"select"})),!0),selectLine=({state:_,dispatch:d})=>{let g=selectedLineBlocks(_).map(({from:b,to:$})=>EditorSelection.range(b,Math.min($+1,_.doc.length)));return d(_.update({selection:EditorSelection.create(g),userEvent:"select"})),!0},selectParentSyntax=({state:_,dispatch:d})=>{let g=updateSel(_.selection,b=>{var $;let j=syntaxTree(_).resolveStack(b.from,1);for(let _e=j;_e;_e=_e.next){let{node:et}=_e;if((et.from<b.from&&et.to>=b.to||et.to>b.to&&et.from<=b.from)&&(!(($=et.parent)===null||$===void 0)&&$.parent))return EditorSelection.range(et.to,et.from)}return b});return d(setSel(_,g)),!0},simplifySelection=({state:_,dispatch:d})=>{let g=_.selection,b=null;return g.ranges.length>1?b=EditorSelection.create([g.main]):g.main.empty||(b=EditorSelection.create([EditorSelection.cursor(g.main.head)])),b?(d(setSel(_,b)),!0):!1};function deleteBy(_,d){if(_.state.readOnly)return!1;let g="delete.selection",{state:b}=_,$=b.changeByRange(j=>{let{from:_e,to:et}=j;if(_e==et){let tt=d(j);tt<_e?(g="delete.backward",tt=skipAtomic(_,tt,!1)):tt>_e&&(g="delete.forward",tt=skipAtomic(_,tt,!0)),_e=Math.min(_e,tt),et=Math.max(et,tt)}else _e=skipAtomic(_,_e,!1),et=skipAtomic(_,et,!0);return _e==et?{range:j}:{changes:{from:_e,to:et},range:EditorSelection.cursor(_e,_e<j.head?-1:1)}});return $.changes.empty?!1:(_.dispatch(b.update($,{scrollIntoView:!0,userEvent:g,effects:g=="delete.selection"?EditorView.announce.of(b.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(_,d,g){if(_ instanceof EditorView)for(let b of _.state.facet(EditorView.atomicRanges).map($=>$(_)))b.between(d,d,($,j)=>{$<d&&j>d&&(d=g?j:$)});return d}const deleteByChar=(_,d,g)=>deleteBy(_,b=>{let $=b.from,{state:j}=_,_e=j.doc.lineAt($),et,tt;if(g&&!d&&$>_e.from&&$<_e.from+200&&!/[^ \t]/.test(et=_e.text.slice(0,$-_e.from))){if(et[et.length-1]=="	")return $-1;let nt=countColumn(et,j.tabSize),it=nt%getIndentUnit(j)||getIndentUnit(j);for(let rt=0;rt<it&&et[et.length-1-rt]==" ";rt++)$--;tt=$}else tt=findClusterBreak(_e.text,$-_e.from,d,d)+_e.from,tt==$&&_e.number!=(d?j.doc.lines:1)?tt+=d?1:-1:!d&&/[\ufe00-\ufe0f]/.test(_e.text.slice(tt-_e.from,$-_e.from))&&(tt=findClusterBreak(_e.text,tt-_e.from,!1,!1)+_e.from);return tt}),deleteCharBackward=_=>deleteByChar(_,!1,!0),deleteCharForward=_=>deleteByChar(_,!0,!1),deleteByGroup=(_,d)=>deleteBy(_,g=>{let b=g.head,{state:$}=_,j=$.doc.lineAt(b),_e=$.charCategorizer(b);for(let et=null;;){if(b==(d?j.to:j.from)){b==g.head&&j.number!=(d?$.doc.lines:1)&&(b+=d?1:-1);break}let tt=findClusterBreak(j.text,b-j.from,d)+j.from,nt=j.text.slice(Math.min(b,tt)-j.from,Math.max(b,tt)-j.from),it=_e(nt);if(et!=null&&it!=et)break;(nt!=" "||b!=g.head)&&(et=it),b=tt}return b}),deleteGroupBackward=_=>deleteByGroup(_,!1),deleteGroupForward=_=>deleteByGroup(_,!0),deleteToLineEnd=_=>deleteBy(_,d=>{let g=_.lineBlockAt(d.head).to;return d.head<g?g:Math.min(_.state.doc.length,d.head+1)}),deleteLineBoundaryBackward=_=>deleteBy(_,d=>{let g=_.moveToLineBoundary(d,!1).head;return d.head>g?g:Math.max(0,d.head-1)}),deleteLineBoundaryForward=_=>deleteBy(_,d=>{let g=_.moveToLineBoundary(d,!0).head;return d.head<g?g:Math.min(_.state.doc.length,d.head+1)}),splitLine=({state:_,dispatch:d})=>{if(_.readOnly)return!1;let g=_.changeByRange(b=>({changes:{from:b.from,to:b.to,insert:Text.of(["",""])},range:EditorSelection.cursor(b.from)}));return d(_.update(g,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:_,dispatch:d})=>{if(_.readOnly)return!1;let g=_.changeByRange(b=>{if(!b.empty||b.from==0||b.from==_.doc.length)return{range:b};let $=b.from,j=_.doc.lineAt($),_e=$==j.from?$-1:findClusterBreak(j.text,$-j.from,!1)+j.from,et=$==j.to?$+1:findClusterBreak(j.text,$-j.from,!0)+j.from;return{changes:{from:_e,to:et,insert:_.doc.slice($,et).append(_.doc.slice(_e,$))},range:EditorSelection.cursor(et)}});return g.changes.empty?!1:(d(_.update(g,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(_){let d=[],g=-1;for(let b of _.selection.ranges){let $=_.doc.lineAt(b.from),j=_.doc.lineAt(b.to);if(!b.empty&&b.to==j.from&&(j=_.doc.lineAt(b.to-1)),g>=$.number){let _e=d[d.length-1];_e.to=j.to,_e.ranges.push(b)}else d.push({from:$.from,to:j.to,ranges:[b]});g=j.number+1}return d}function moveLine(_,d,g){if(_.readOnly)return!1;let b=[],$=[];for(let j of selectedLineBlocks(_)){if(g?j.to==_.doc.length:j.from==0)continue;let _e=_.doc.lineAt(g?j.to+1:j.from-1),et=_e.length+1;if(g){b.push({from:j.to,to:_e.to},{from:j.from,insert:_e.text+_.lineBreak});for(let tt of j.ranges)$.push(EditorSelection.range(Math.min(_.doc.length,tt.anchor+et),Math.min(_.doc.length,tt.head+et)))}else{b.push({from:_e.from,to:j.from},{from:j.to,insert:_.lineBreak+_e.text});for(let tt of j.ranges)$.push(EditorSelection.range(tt.anchor-et,tt.head-et))}}return b.length?(d(_.update({changes:b,scrollIntoView:!0,selection:EditorSelection.create($,_.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:_,dispatch:d})=>moveLine(_,d,!1),moveLineDown=({state:_,dispatch:d})=>moveLine(_,d,!0);function copyLine(_,d,g){if(_.readOnly)return!1;let b=[];for(let $ of selectedLineBlocks(_))g?b.push({from:$.from,insert:_.doc.slice($.from,$.to)+_.lineBreak}):b.push({from:$.to,insert:_.lineBreak+_.doc.slice($.from,$.to)});return d(_.update({changes:b,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:_,dispatch:d})=>copyLine(_,d,!1),copyLineDown=({state:_,dispatch:d})=>copyLine(_,d,!0),deleteLine=_=>{if(_.state.readOnly)return!1;let{state:d}=_,g=d.changes(selectedLineBlocks(d).map(({from:$,to:j})=>($>0?$--:j<d.doc.length&&j++,{from:$,to:j}))),b=updateSel(d.selection,$=>{let j;if(_.lineWrapping){let _e=_.lineBlockAt($.head),et=_.coordsAtPos($.head,$.assoc||1);et&&(j=_e.bottom+_.documentTop-et.bottom+_.defaultLineHeight/2)}return _.moveVertically($,!0,j)}).map(g);return _.dispatch({changes:g,selection:b,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(_,d){if(/\(\)|\[\]|\{\}/.test(_.sliceDoc(d-1,d+1)))return{from:d,to:d};let g=syntaxTree(_).resolveInner(d),b=g.childBefore(d),$=g.childAfter(d),j;return b&&$&&b.to<=d&&$.from>=d&&(j=b.type.prop(NodeProp.closedBy))&&j.indexOf($.name)>-1&&_.doc.lineAt(b.to).from==_.doc.lineAt($.from).from&&!/\S/.test(_.sliceDoc(b.to,$.from))?{from:b.to,to:$.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(_){return({state:d,dispatch:g})=>{if(d.readOnly)return!1;let b=d.changeByRange($=>{let{from:j,to:_e}=$,et=d.doc.lineAt(j),tt=!_&&j==_e&&isBetweenBrackets(d,j);_&&(j=_e=(_e<=et.to?et:d.doc.lineAt(_e)).to);let nt=new IndentContext(d,{simulateBreak:j,simulateDoubleBreak:!!tt}),it=getIndentation(nt,j);for(it==null&&(it=countColumn(/^\s*/.exec(d.doc.lineAt(j).text)[0],d.tabSize));_e<et.to&&/\s/.test(et.text[_e-et.from]);)_e++;tt?{from:j,to:_e}=tt:j>et.from&&j<et.from+100&&!/\S/.test(et.text.slice(0,j))&&(j=et.from);let rt=["",indentString(d,it)];return tt&&rt.push(indentString(d,nt.lineIndent(et.from,-1))),{changes:{from:j,to:_e,insert:Text.of(rt)},range:EditorSelection.cursor(j+1+rt[1].length)}});return g(d.update(b,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(_,d){let g=-1;return _.changeByRange(b=>{let $=[];for(let _e=b.from;_e<=b.to;){let et=_.doc.lineAt(_e);et.number>g&&(b.empty||b.to>et.from)&&(d(et,$,b),g=et.number),_e=et.to+1}let j=_.changes($);return{changes:$,range:EditorSelection.range(j.mapPos(b.anchor,1),j.mapPos(b.head,1))}})}const indentSelection=({state:_,dispatch:d})=>{if(_.readOnly)return!1;let g=Object.create(null),b=new IndentContext(_,{overrideIndentation:j=>{let _e=g[j];return _e??-1}}),$=changeBySelectedLine(_,(j,_e,et)=>{let tt=getIndentation(b,j.from);if(tt==null)return;/\S/.test(j.text)||(tt=0);let nt=/^\s*/.exec(j.text)[0],it=indentString(_,tt);(nt!=it||et.from<j.from+nt.length)&&(g[j.from]=tt,_e.push({from:j.from,to:j.from+nt.length,insert:it}))});return $.changes.empty||d(_.update($,{userEvent:"indent"})),!0},indentMore=({state:_,dispatch:d})=>_.readOnly?!1:(d(_.update(changeBySelectedLine(_,(g,b)=>{b.push({from:g.from,insert:_.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:_,dispatch:d})=>_.readOnly?!1:(d(_.update(changeBySelectedLine(_,(g,b)=>{let $=/^\s*/.exec(g.text)[0];if(!$)return;let j=countColumn($,_.tabSize),_e=0,et=indentString(_,Math.max(0,j-getIndentUnit(_)));for(;_e<$.length&&_e<et.length&&$.charCodeAt(_e)==et.charCodeAt(_e);)_e++;b.push({from:g.from+_e,to:g.from+$.length,insert:et.slice(_e)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=_=>(_.setTabFocusMode(),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map(_=>({mac:_.key,run:_.run,shift:_.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess};function crelt(){var _=arguments[0];typeof _=="string"&&(_=document.createElement(_));var d=1,g=arguments[1];if(g&&typeof g=="object"&&g.nodeType==null&&!Array.isArray(g)){for(var b in g)if(Object.prototype.hasOwnProperty.call(g,b)){var $=g[b];typeof $=="string"?_.setAttribute(b,$):$!=null&&(_[b]=$)}d++}for(;d<arguments.length;d++)add(_,arguments[d]);return _}function add(_,d){if(typeof d=="string")_.appendChild(document.createTextNode(d));else if(d!=null)if(d.nodeType!=null)_.appendChild(d);else if(Array.isArray(d))for(var g=0;g<d.length;g++)add(_,d[g]);else throw new RangeError("Unsupported child node: "+d)}const basicNormalize=typeof String.prototype.normalize=="function"?_=>_.normalize("NFKD"):_=>_;class SearchCursor{constructor(d,g,b=0,$=d.length,j,_e){this.test=_e,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=d.iterRange(b,$),this.bufferStart=b,this.normalize=j?et=>j(basicNormalize(et)):basicNormalize,this.query=this.normalize(g)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let d=this.peek();if(d<0)return this.done=!0,this;let g=fromCodePoint(d),b=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(d);let $=this.normalize(g);for(let j=0,_e=b;;j++){let et=$.charCodeAt(j),tt=this.match(et,_e,this.bufferPos+this.bufferStart);if(j==$.length-1){if(tt)return this.value=tt,this;break}_e==b&&j<g.length&&g.charCodeAt(j)==et&&_e++}}}match(d,g,b){let $=null;for(let j=0;j<this.matches.length;j+=2){let _e=this.matches[j],et=!1;this.query.charCodeAt(_e)==d&&(_e==this.query.length-1?$={from:this.matches[j+1],to:b}:(this.matches[j]++,et=!0)),et||(this.matches.splice(j,2),j-=2)}return this.query.charCodeAt(0)==d&&(this.query.length==1?$={from:g,to:b}:this.matches.push(1,g)),$&&this.test&&!this.test($.from,$.to,this.buffer,this.bufferStart)&&($=null),$}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(d,g,b,$=0,j=d.length){if(this.text=d,this.to=j,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(g))return new MultilineRegExpCursor(d,g,b,$,j);this.re=new RegExp(g,baseFlags+(b!=null&&b.ignoreCase?"i":"")),this.test=b==null?void 0:b.test,this.iter=d.iter();let _e=d.lineAt($);this.curLineStart=_e.from,this.matchPos=toCharEnd(d,$),this.getLine(this.curLineStart)}getLine(d){this.iter.next(d),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let d=this.matchPos-this.curLineStart;;){this.re.lastIndex=d;let g=this.matchPos<=this.to&&this.re.exec(this.curLine);if(g){let b=this.curLineStart+g.index,$=b+g[0].length;if(this.matchPos=toCharEnd(this.text,$+(b==$?1:0)),b==this.curLineStart+this.curLine.length&&this.nextLine(),(b<$||b>this.value.to)&&(!this.test||this.test(b,$,g)))return this.value={from:b,to:$,match:g},this;d=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),d=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(d,g){this.from=d,this.text=g}get to(){return this.from+this.text.length}static get(d,g,b){let $=flattened.get(d);if(!$||$.from>=b||$.to<=g){let et=new FlattenedDoc(g,d.sliceString(g,b));return flattened.set(d,et),et}if($.from==g&&$.to==b)return $;let{text:j,from:_e}=$;return _e>g&&(j=d.sliceString(g,_e)+j,_e=g),$.to<b&&(j+=d.sliceString($.to,b)),flattened.set(d,new FlattenedDoc(_e,j)),new FlattenedDoc(g,j.slice(g-_e,b-_e))}}class MultilineRegExpCursor{constructor(d,g,b,$,j){this.text=d,this.to=j,this.done=!1,this.value=empty,this.matchPos=toCharEnd(d,$),this.re=new RegExp(g,baseFlags+(b!=null&&b.ignoreCase?"i":"")),this.test=b==null?void 0:b.test,this.flat=FlattenedDoc.get(d,$,this.chunkEnd($+5e3))}chunkEnd(d){return d>=this.to?this.to:this.text.lineAt(d).to}next(){for(;;){let d=this.re.lastIndex=this.matchPos-this.flat.from,g=this.re.exec(this.flat.text);if(g&&!g[0]&&g.index==d&&(this.re.lastIndex=d+1,g=this.re.exec(this.flat.text)),g){let b=this.flat.from+g.index,$=b+g[0].length;if((this.flat.to>=this.to||g.index+g[0].length<=this.flat.text.length-10)&&(!this.test||this.test(b,$,g)))return this.value={from:b,to:$,match:g},this.matchPos=toCharEnd(this.text,$+(b==$?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(_){try{return new RegExp(_,baseFlags),!0}catch{return!1}}function toCharEnd(_,d){if(d>=_.length)return d;let g=_.lineAt(d),b;for(;d<g.to&&(b=g.text.charCodeAt(d-g.from))>=56320&&b<57344;)d++;return d}function createLineDialog(_){let d=String(_.state.doc.lineAt(_.state.selection.main.head).number),g=crelt("input",{class:"cm-textfield",name:"line",value:d}),b=crelt("form",{class:"cm-gotoLine",onkeydown:j=>{j.keyCode==27?(j.preventDefault(),_.dispatch({effects:dialogEffect.of(!1)}),_.focus()):j.keyCode==13&&(j.preventDefault(),$())},onsubmit:j=>{j.preventDefault(),$()}},crelt("label",_.state.phrase("Go to line"),": ",g)," ",crelt("button",{class:"cm-button",type:"submit"},_.state.phrase("go")));function $(){let j=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(g.value);if(!j)return;let{state:_e}=_,et=_e.doc.lineAt(_e.selection.main.head),[,tt,nt,it,rt]=j,st=it?+it.slice(1):0,ot=nt?+nt:et.number;if(nt&&rt){let ht=ot/100;tt&&(ht=ht*(tt=="-"?-1:1)+et.number/_e.doc.lines),ot=Math.round(_e.doc.lines*ht)}else nt&&tt&&(ot=ot*(tt=="-"?-1:1)+et.number);let at=_e.doc.line(Math.max(1,Math.min(_e.doc.lines,ot))),ct=EditorSelection.cursor(at.from+Math.max(0,Math.min(st,at.length)));_.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(ct.from,{y:"center"})],selection:ct}),_.focus()}return{dom:b}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(_,d){for(let g of d.effects)g.is(dialogEffect)&&(_=g.value);return _},provide:_=>showPanel.from(_,d=>d?createLineDialog:null)}),gotoLine=_=>{let d=getPanel(_,createLineDialog);if(!d){let g=[dialogEffect.of(!0)];_.state.field(dialogField,!1)==null&&g.push(StateEffect.appendConfig.of([dialogField,baseTheme$1])),_.dispatch({effects:g}),d=getPanel(_,createLineDialog)}return d&&d.dom.querySelector("input").select(),!0},baseTheme$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(_){return combineConfig(_,defaultHighlightOptions,{highlightWordAroundCursor:(d,g)=>d||g,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(_){let d=[defaultTheme,matchHighlighter];return _&&d.push(highlightConfig.of(_)),d}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(_,d,g,b){return(g==0||_(d.sliceDoc(g-1,g))!=CharCategory.Word)&&(b==d.doc.length||_(d.sliceDoc(b,b+1))!=CharCategory.Word)}function insideWord(_,d,g,b){return _(d.sliceDoc(g,g+1))==CharCategory.Word&&_(d.sliceDoc(b-1,b))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(_){this.decorations=this.getDeco(_)}update(_){(_.selectionSet||_.docChanged||_.viewportChanged)&&(this.decorations=this.getDeco(_.view))}getDeco(_){let d=_.state.facet(highlightConfig),{state:g}=_,b=g.selection;if(b.ranges.length>1)return Decoration.none;let $=b.main,j,_e=null;if($.empty){if(!d.highlightWordAroundCursor)return Decoration.none;let tt=g.wordAt($.head);if(!tt)return Decoration.none;_e=g.charCategorizer($.head),j=g.sliceDoc(tt.from,tt.to)}else{let tt=$.to-$.from;if(tt<d.minSelectionLength||tt>200)return Decoration.none;if(d.wholeWords){if(j=g.sliceDoc($.from,$.to),_e=g.charCategorizer($.head),!(insideWordBoundaries(_e,g,$.from,$.to)&&insideWord(_e,g,$.from,$.to)))return Decoration.none}else if(j=g.sliceDoc($.from,$.to),!j)return Decoration.none}let et=[];for(let tt of _.visibleRanges){let nt=new SearchCursor(g.doc,j,tt.from,tt.to);for(;!nt.next().done;){let{from:it,to:rt}=nt.value;if((!_e||insideWordBoundaries(_e,g,it,rt))&&($.empty&&it<=$.from&&rt>=$.to?et.push(mainMatchDeco.range(it,rt)):(it>=$.to||rt<=$.from)&&et.push(matchDeco.range(it,rt)),et.length>d.maxMatches))return Decoration.none}}return Decoration.set(et)}},{decorations:_=>_.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:_,dispatch:d})=>{let{selection:g}=_,b=EditorSelection.create(g.ranges.map($=>_.wordAt($.head)||EditorSelection.cursor($.head)),g.mainIndex);return b.eq(g)?!1:(d(_.update({selection:b})),!0)};function findNextOccurrence(_,d){let{main:g,ranges:b}=_.selection,$=_.wordAt(g.head),j=$&&$.from==g.from&&$.to==g.to;for(let _e=!1,et=new SearchCursor(_.doc,d,b[b.length-1].to);;)if(et.next(),et.done){if(_e)return null;et=new SearchCursor(_.doc,d,0,Math.max(0,b[b.length-1].from-1)),_e=!0}else{if(_e&&b.some(tt=>tt.from==et.value.from))continue;if(j){let tt=_.wordAt(et.value.from);if(!tt||tt.from!=et.value.from||tt.to!=et.value.to)continue}return et.value}}const selectNextOccurrence=({state:_,dispatch:d})=>{let{ranges:g}=_.selection;if(g.some(j=>j.from===j.to))return selectWord({state:_,dispatch:d});let b=_.sliceDoc(g[0].from,g[0].to);if(_.selection.ranges.some(j=>_.sliceDoc(j.from,j.to)!=b))return!1;let $=findNextOccurrence(_,b);return $?(d(_.update({selection:_.selection.addRange(EditorSelection.range($.from,$.to),!1),effects:EditorView.scrollIntoView($.to)})),!0):!1},searchConfigFacet=Facet.define({combine(_){return combineConfig(_,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:d=>new SearchPanel(d),scrollToMatch:d=>EditorView.scrollIntoView(d)})}});class SearchQuery{constructor(d){this.search=d.search,this.caseSensitive=!!d.caseSensitive,this.literal=!!d.literal,this.regexp=!!d.regexp,this.replace=d.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!d.wholeWord}unquote(d){return this.literal?d:d.replace(/\\([nrt\\])/g,(g,b)=>b=="n"?`
`:b=="r"?"\r":b=="t"?"	":"\\")}eq(d){return this.search==d.search&&this.replace==d.replace&&this.caseSensitive==d.caseSensitive&&this.regexp==d.regexp&&this.wholeWord==d.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(d,g=0,b){let $=d.doc?d:EditorState.create({doc:d});return b==null&&(b=$.doc.length),this.regexp?regexpCursor(this,$,g,b):stringCursor(this,$,g,b)}}class QueryType{constructor(d){this.spec=d}}function stringCursor(_,d,g,b){return new SearchCursor(d.doc,_.unquoted,g,b,_.caseSensitive?void 0:$=>$.toLowerCase(),_.wholeWord?stringWordTest(d.doc,d.charCategorizer(d.selection.main.head)):void 0)}function stringWordTest(_,d){return(g,b,$,j)=>((j>g||j+$.length<b)&&(j=Math.max(0,g-2),$=_.sliceString(j,Math.min(_.length,b+2))),(d(charBefore($,g-j))!=CharCategory.Word||d(charAfter($,g-j))!=CharCategory.Word)&&(d(charAfter($,b-j))!=CharCategory.Word||d(charBefore($,b-j))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(d){super(d)}nextMatch(d,g,b){let $=stringCursor(this.spec,d,b,d.doc.length).nextOverlapping();return $.done&&($=stringCursor(this.spec,d,0,g).nextOverlapping()),$.done?null:$.value}prevMatchInRange(d,g,b){for(let $=b;;){let j=Math.max(g,$-1e4-this.spec.unquoted.length),_e=stringCursor(this.spec,d,j,$),et=null;for(;!_e.nextOverlapping().done;)et=_e.value;if(et)return et;if(j==g)return null;$-=1e4}}prevMatch(d,g,b){return this.prevMatchInRange(d,0,g)||this.prevMatchInRange(d,b,d.doc.length)}getReplacement(d){return this.spec.unquote(this.spec.replace)}matchAll(d,g){let b=stringCursor(this.spec,d,0,d.doc.length),$=[];for(;!b.next().done;){if($.length>=g)return null;$.push(b.value)}return $}highlight(d,g,b,$){let j=stringCursor(this.spec,d,Math.max(0,g-this.spec.unquoted.length),Math.min(b+this.spec.unquoted.length,d.doc.length));for(;!j.next().done;)$(j.value.from,j.value.to)}}function regexpCursor(_,d,g,b){return new RegExpCursor(d.doc,_.search,{ignoreCase:!_.caseSensitive,test:_.wholeWord?regexpWordTest(d.charCategorizer(d.selection.main.head)):void 0},g,b)}function charBefore(_,d){return _.slice(findClusterBreak(_,d,!1),d)}function charAfter(_,d){return _.slice(d,findClusterBreak(_,d))}function regexpWordTest(_){return(d,g,b)=>!b[0].length||(_(charBefore(b.input,b.index))!=CharCategory.Word||_(charAfter(b.input,b.index))!=CharCategory.Word)&&(_(charAfter(b.input,b.index+b[0].length))!=CharCategory.Word||_(charBefore(b.input,b.index+b[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(d,g,b){let $=regexpCursor(this.spec,d,b,d.doc.length).next();return $.done&&($=regexpCursor(this.spec,d,0,g).next()),$.done?null:$.value}prevMatchInRange(d,g,b){for(let $=1;;$++){let j=Math.max(g,b-$*1e4),_e=regexpCursor(this.spec,d,j,b),et=null;for(;!_e.next().done;)et=_e.value;if(et&&(j==g||et.from>j+10))return et;if(j==g)return null}}prevMatch(d,g,b){return this.prevMatchInRange(d,0,g)||this.prevMatchInRange(d,b,d.doc.length)}getReplacement(d){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(g,b)=>b=="$"?"$":b=="&"?d.match[0]:b!="0"&&+b<d.match.length?d.match[b]:g)}matchAll(d,g){let b=regexpCursor(this.spec,d,0,d.doc.length),$=[];for(;!b.next().done;){if($.length>=g)return null;$.push(b.value)}return $}highlight(d,g,b,$){let j=regexpCursor(this.spec,d,Math.max(0,g-250),Math.min(b+250,d.doc.length));for(;!j.next().done;)$(j.value.from,j.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(_){return new SearchState(defaultQuery(_).create(),null)},update(_,d){for(let g of d.effects)g.is(setSearchQuery)?_=new SearchState(g.value.create(),_.panel):g.is(togglePanel$1)&&(_=new SearchState(_.query,g.value?createSearchPanel:null));return _},provide:_=>showPanel.from(_,d=>d.panel)});class SearchState{constructor(d,g){this.query=d,this.panel=g}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(_){this.view=_,this.decorations=this.highlight(_.state.field(searchState))}update(_){let d=_.state.field(searchState);(d!=_.startState.field(searchState)||_.docChanged||_.selectionSet||_.viewportChanged)&&(this.decorations=this.highlight(d))}highlight({query:_,panel:d}){if(!d||!_.spec.valid)return Decoration.none;let{view:g}=this,b=new RangeSetBuilder;for(let $=0,j=g.visibleRanges,_e=j.length;$<_e;$++){let{from:et,to:tt}=j[$];for(;$<_e-1&&tt>j[$+1].from-2*250;)tt=j[++$].to;_.highlight(g.state,et,tt,(nt,it)=>{let rt=g.state.selection.ranges.some(st=>st.from==nt&&st.to==it);b.add(nt,it,rt?selectedMatchMark:matchMark)})}return b.finish()}},{decorations:_=>_.decorations});function searchCommand(_){return d=>{let g=d.state.field(searchState,!1);return g&&g.query.spec.valid?_(d,g):openSearchPanel(d)}}const findNext=searchCommand((_,{query:d})=>{let{to:g}=_.state.selection.main,b=d.nextMatch(_.state,g,g);if(!b)return!1;let $=EditorSelection.single(b.from,b.to),j=_.state.facet(searchConfigFacet);return _.dispatch({selection:$,effects:[announceMatch(_,b),j.scrollToMatch($.main,_)],userEvent:"select.search"}),selectSearchInput(_),!0}),findPrevious=searchCommand((_,{query:d})=>{let{state:g}=_,{from:b}=g.selection.main,$=d.prevMatch(g,b,b);if(!$)return!1;let j=EditorSelection.single($.from,$.to),_e=_.state.facet(searchConfigFacet);return _.dispatch({selection:j,effects:[announceMatch(_,$),_e.scrollToMatch(j.main,_)],userEvent:"select.search"}),selectSearchInput(_),!0}),selectMatches=searchCommand((_,{query:d})=>{let g=d.matchAll(_.state,1e3);return!g||!g.length?!1:(_.dispatch({selection:EditorSelection.create(g.map(b=>EditorSelection.range(b.from,b.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:_,dispatch:d})=>{let g=_.selection;if(g.ranges.length>1||g.main.empty)return!1;let{from:b,to:$}=g.main,j=[],_e=0;for(let et=new SearchCursor(_.doc,_.sliceDoc(b,$));!et.next().done;){if(j.length>1e3)return!1;et.value.from==b&&(_e=j.length),j.push(EditorSelection.range(et.value.from,et.value.to))}return d(_.update({selection:EditorSelection.create(j,_e),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((_,{query:d})=>{let{state:g}=_,{from:b,to:$}=g.selection.main;if(g.readOnly)return!1;let j=d.nextMatch(g,b,b);if(!j)return!1;let _e=[],et,tt,nt=[];if(j.from==b&&j.to==$&&(tt=g.toText(d.getReplacement(j)),_e.push({from:j.from,to:j.to,insert:tt}),j=d.nextMatch(g,j.from,j.to),nt.push(EditorView.announce.of(g.phrase("replaced match on line $",g.doc.lineAt(b).number)+"."))),j){let it=_e.length==0||_e[0].from>=j.to?0:j.to-j.from-tt.length;et=EditorSelection.single(j.from-it,j.to-it),nt.push(announceMatch(_,j)),nt.push(g.facet(searchConfigFacet).scrollToMatch(et.main,_))}return _.dispatch({changes:_e,selection:et,effects:nt,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((_,{query:d})=>{if(_.state.readOnly)return!1;let g=d.matchAll(_.state,1e9).map($=>{let{from:j,to:_e}=$;return{from:j,to:_e,insert:d.getReplacement($)}});if(!g.length)return!1;let b=_.state.phrase("replaced $ matches",g.length)+".";return _.dispatch({changes:g,effects:EditorView.announce.of(b),userEvent:"input.replace.all"}),!0});function createSearchPanel(_){return _.state.facet(searchConfigFacet).createPanel(_)}function defaultQuery(_,d){var g,b,$,j,_e;let et=_.selection.main,tt=et.empty||et.to>et.from+100?"":_.sliceDoc(et.from,et.to);if(d&&!tt)return d;let nt=_.facet(searchConfigFacet);return new SearchQuery({search:((g=d==null?void 0:d.literal)!==null&&g!==void 0?g:nt.literal)?tt:tt.replace(/\n/g,"\\n"),caseSensitive:(b=d==null?void 0:d.caseSensitive)!==null&&b!==void 0?b:nt.caseSensitive,literal:($=d==null?void 0:d.literal)!==null&&$!==void 0?$:nt.literal,regexp:(j=d==null?void 0:d.regexp)!==null&&j!==void 0?j:nt.regexp,wholeWord:(_e=d==null?void 0:d.wholeWord)!==null&&_e!==void 0?_e:nt.wholeWord})}function getSearchInput(_){let d=getPanel(_,createSearchPanel);return d&&d.dom.querySelector("[main-field]")}function selectSearchInput(_){let d=getSearchInput(_);d&&d==_.root.activeElement&&d.select()}const openSearchPanel=_=>{let d=_.state.field(searchState,!1);if(d&&d.panel){let g=getSearchInput(_);if(g&&g!=_.root.activeElement){let b=defaultQuery(_.state,d.query.spec);b.valid&&_.dispatch({effects:setSearchQuery.of(b)}),g.focus(),g.select()}}else _.dispatch({effects:[togglePanel$1.of(!0),d?setSearchQuery.of(defaultQuery(_.state,d.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=_=>{let d=_.state.field(searchState,!1);if(!d||!d.panel)return!1;let g=getPanel(_,createSearchPanel);return g&&g.dom.contains(_.root.activeElement)&&_.focus(),_.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(d){this.view=d;let g=this.query=d.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:g.search,placeholder:phrase(d,"Find"),"aria-label":phrase(d,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:g.replace,placeholder:phrase(d,"Replace"),"aria-label":phrase(d,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:g.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:g.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:g.wholeWord,onchange:this.commit});function b($,j,_e){return crelt("button",{class:"cm-button",name:$,onclick:j,type:"button"},_e)}this.dom=crelt("div",{onkeydown:$=>this.keydown($),class:"cm-search"},[this.searchField,b("next",()=>findNext(d),[phrase(d,"next")]),b("prev",()=>findPrevious(d),[phrase(d,"previous")]),b("select",()=>selectMatches(d),[phrase(d,"all")]),crelt("label",null,[this.caseField,phrase(d,"match case")]),crelt("label",null,[this.reField,phrase(d,"regexp")]),crelt("label",null,[this.wordField,phrase(d,"by word")]),...d.state.readOnly?[]:[crelt("br"),this.replaceField,b("replace",()=>replaceNext(d),[phrase(d,"replace")]),b("replaceAll",()=>replaceAll(d),[phrase(d,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(d),"aria-label":phrase(d,"close"),type:"button"},[""])])}commit(){let d=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});d.eq(this.query)||(this.query=d,this.view.dispatch({effects:setSearchQuery.of(d)}))}keydown(d){runScopeHandlers(this.view,d,"search-panel")?d.preventDefault():d.keyCode==13&&d.target==this.searchField?(d.preventDefault(),(d.shiftKey?findPrevious:findNext)(this.view)):d.keyCode==13&&d.target==this.replaceField&&(d.preventDefault(),replaceNext(this.view))}update(d){for(let g of d.transactions)for(let b of g.effects)b.is(setSearchQuery)&&!b.value.eq(this.query)&&this.setQuery(b.value)}setQuery(d){this.query=d,this.searchField.value=d.search,this.replaceField.value=d.replace,this.caseField.checked=d.caseSensitive,this.reField.checked=d.regexp,this.wordField.checked=d.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(_,d){return _.state.phrase(d)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(_,{from:d,to:g}){let b=_.state.doc.lineAt(d),$=_.state.doc.lineAt(g).to,j=Math.max(b.from,d-AnnounceMargin),_e=Math.min($,g+AnnounceMargin),et=_.state.sliceDoc(j,_e);if(j!=b.from){for(let tt=0;tt<AnnounceMargin;tt++)if(!Break.test(et[tt+1])&&Break.test(et[tt])){et=et.slice(tt);break}}if(_e!=$){for(let tt=et.length-1;tt>et.length-AnnounceMargin;tt--)if(!Break.test(et[tt-1])&&Break.test(et[tt])){et=et.slice(0,tt);break}}return EditorView.announce.of(`${_.state.phrase("current match")}. ${et} ${_.state.phrase("on line")} ${b.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];class SelectedDiagnostic{constructor(d,g,b){this.from=d,this.to=g,this.diagnostic=b}}class LintState{constructor(d,g,b){this.diagnostics=d,this.panel=g,this.selected=b}static init(d,g,b){let $=d,j=b.facet(lintConfig).markerFilter;j&&($=j($,b));let _e=Decoration.set($.map(et=>et.from==et.to||et.from==et.to-1&&b.doc.lineAt(et.from).to==et.from?Decoration.widget({widget:new DiagnosticWidget(et),diagnostic:et}).range(et.from):Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+et.severity+(et.markClass?" "+et.markClass:"")},diagnostic:et}).range(et.from,et.to)),!0);return new LintState(_e,g,findDiagnostic(_e))}}function findDiagnostic(_,d=null,g=0){let b=null;return _.between(g,1e9,($,j,{spec:_e})=>{if(!(d&&_e.diagnostic!=d))return b=new SelectedDiagnostic($,j,_e.diagnostic),!1}),b}function hideTooltip(_,d){let g=d.pos,b=d.end||g,$=_.state.facet(lintConfig).hideOn(_,g,b);if($!=null)return $;let j=_.startState.doc.lineAt(d.pos);return!!(_.effects.some(_e=>_e.is(setDiagnosticsEffect))||_.changes.touchesRange(j.from,Math.max(j.to,b)))}function maybeEnableLint(_,d){return _.field(lintState,!1)?d:d.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(_,d){if(d.docChanged&&_.diagnostics.size){let g=_.diagnostics.map(d.changes),b=null,$=_.panel;if(_.selected){let j=d.changes.mapPos(_.selected.from,1);b=findDiagnostic(g,_.selected.diagnostic,j)||findDiagnostic(g,null,j)}!g.size&&$&&d.state.facet(lintConfig).autoPanel&&($=null),_=new LintState(g,$,b)}for(let g of d.effects)if(g.is(setDiagnosticsEffect)){let b=d.state.facet(lintConfig).autoPanel?g.value.length?LintPanel.open:null:_.panel;_=LintState.init(g.value,b,d.state)}else g.is(togglePanel)?_=new LintState(_.diagnostics,g.value?LintPanel.open:null,_.selected):g.is(movePanelSelection)&&(_=new LintState(_.diagnostics,_.panel,g.value));return _},provide:_=>[showPanel.from(_,d=>d.panel),EditorView.decorations.from(_,d=>d.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(_,d,g){let{diagnostics:b}=_.state.field(lintState),$=[],j=2e8,_e=0;b.between(d-(g<0?1:0),d+(g>0?1:0),(tt,nt,{spec:it})=>{d>=tt&&d<=nt&&(tt==nt||(d>tt||g>0)&&(d<nt||g<0))&&($.push(it.diagnostic),j=Math.min(tt,j),_e=Math.max(nt,_e))});let et=_.state.facet(lintConfig).tooltipFilter;return et&&($=et($,_.state)),$.length?{pos:j,end:_e,above:_.state.doc.lineAt(j).to<_e,create(){return{dom:diagnosticsTooltip(_,$)}}}:null}function diagnosticsTooltip(_,d){return crelt("ul",{class:"cm-tooltip-lint"},d.map(g=>renderDiagnostic(_,g,!1)))}const openLintPanel=_=>{let d=_.state.field(lintState,!1);(!d||!d.panel)&&_.dispatch({effects:maybeEnableLint(_.state,[togglePanel.of(!0)])});let g=getPanel(_,LintPanel.open);return g&&g.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=_=>{let d=_.state.field(lintState,!1);return!d||!d.panel?!1:(_.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=_=>{let d=_.state.field(lintState,!1);if(!d)return!1;let g=_.state.selection.main,b=d.diagnostics.iter(g.to+1);return!b.value&&(b=d.diagnostics.iter(0),!b.value||b.from==g.from&&b.to==g.to)?!1:(_.dispatch({selection:{anchor:b.from,head:b.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine(_){return Object.assign({sources:_.map(d=>d.source).filter(d=>d!=null)},combineConfig(_.map(d=>d.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(d,g)=>d?g?b=>d(b)||g(b):d:g}))}});function assignKeys(_){let d=[];if(_)e:for(let{name:g}of _){for(let b=0;b<g.length;b++){let $=g[b];if(/[a-zA-Z]/.test($)&&!d.some(j=>j.toLowerCase()==$.toLowerCase())){d.push($);continue e}}d.push("")}return d}function renderDiagnostic(_,d,g){var b;let $=g?assignKeys(d.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+d.severity},crelt("span",{class:"cm-diagnosticText"},d.renderMessage?d.renderMessage(_):d.message),(b=d.actions)===null||b===void 0?void 0:b.map((j,_e)=>{let et=!1,tt=st=>{if(st.preventDefault(),et)return;et=!0;let ot=findDiagnostic(_.state.field(lintState).diagnostics,d);ot&&j.apply(_,ot.from,ot.to)},{name:nt}=j,it=$[_e]?nt.indexOf($[_e]):-1,rt=it<0?nt:[nt.slice(0,it),crelt("u",nt.slice(it,it+1)),nt.slice(it+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:tt,onmousedown:tt,"aria-label":` Action: ${nt}${it<0?"":` (access key "${$[_e]})"`}.`},rt)}),d.source&&crelt("div",{class:"cm-diagnosticSource"},d.source))}class DiagnosticWidget extends WidgetType{constructor(d){super(),this.diagnostic=d}eq(d){return d.diagnostic==this.diagnostic}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PanelItem{constructor(d,g){this.diagnostic=g,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(d,g,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(d){this.view=d,this.items=[];let g=$=>{if($.keyCode==27)closeLintPanel(this.view),this.view.focus();else if($.keyCode==38||$.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if($.keyCode==40||$.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if($.keyCode==36)this.moveSelection(0);else if($.keyCode==35)this.moveSelection(this.items.length-1);else if($.keyCode==13)this.view.focus();else if($.keyCode>=65&&$.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:j}=this.items[this.selectedIndex],_e=assignKeys(j.actions);for(let et=0;et<_e.length;et++)if(_e[et].toUpperCase().charCodeAt(0)==$.keyCode){let tt=findDiagnostic(this.view.state.field(lintState).diagnostics,j);tt&&j.actions[et].apply(d,tt.from,tt.to)}}else return;$.preventDefault()},b=$=>{for(let j=0;j<this.items.length;j++)this.items[j].dom.contains($.target)&&this.moveSelection(j)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:g,onclick:b}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"")),this.update()}get selectedIndex(){let d=this.view.state.field(lintState).selected;if(!d)return-1;for(let g=0;g<this.items.length;g++)if(this.items[g].diagnostic==d.diagnostic)return g;return-1}update(){let{diagnostics:d,selected:g}=this.view.state.field(lintState),b=0,$=!1,j=null;for(d.between(0,this.view.state.doc.length,(_e,et,{spec:tt})=>{let nt=-1,it;for(let rt=b;rt<this.items.length;rt++)if(this.items[rt].diagnostic==tt.diagnostic){nt=rt;break}nt<0?(it=new PanelItem(this.view,tt.diagnostic),this.items.splice(b,0,it),$=!0):(it=this.items[nt],nt>b&&(this.items.splice(b,nt-b),$=!0)),g&&it.diagnostic==g.diagnostic?it.dom.hasAttribute("aria-selected")||(it.dom.setAttribute("aria-selected","true"),j=it):it.dom.hasAttribute("aria-selected")&&it.dom.removeAttribute("aria-selected"),b++});b<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)$=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),$=!0),j?(this.list.setAttribute("aria-activedescendant",j.id),this.view.requestMeasure({key:this,read:()=>({sel:j.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:_e,panel:et})=>{let tt=et.height/this.list.offsetHeight;_e.top<et.top?this.list.scrollTop-=(et.top-_e.top)/tt:_e.bottom>et.bottom&&(this.list.scrollTop+=(_e.bottom-et.bottom)/tt)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),$&&this.sync()}sync(){let d=this.list.firstChild;function g(){let b=d;d=b.nextSibling,b.remove()}for(let b of this.items)if(b.dom.parentNode==this.list){for(;d!=b.dom;)g();d=b.dom.nextSibling}else this.list.insertBefore(b.dom,d);for(;d;)g()}moveSelection(d){if(this.selectedIndex<0)return;let g=this.view.state.field(lintState),b=findDiagnostic(g.diagnostics,this.items[d].diagnostic);b&&this.view.dispatch({selection:{anchor:b.from,head:b.to},scrollIntoView:!0,effects:movePanelSelection.of(b)})}static open(d){return new LintPanel(d)}}function svg(_,d='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${d}>${encodeURIComponent(_)}</svg>')`}function underline(_){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${_}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),lintExtensions=[lintState,EditorView.decorations.compute([lintState],_=>{let{selected:d,panel:g}=_.field(lintState);return!d||!g||d.from==d.to?Decoration.none:Decoration.set([activeMark.range(d.from,d.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme];var basicSetup=function(d){d===void 0&&(d={});var{crosshairCursor:g=!1}=d,b=[];d.closeBracketsKeymap!==!1&&(b=b.concat(closeBracketsKeymap)),d.defaultKeymap!==!1&&(b=b.concat(defaultKeymap)),d.searchKeymap!==!1&&(b=b.concat(searchKeymap)),d.historyKeymap!==!1&&(b=b.concat(historyKeymap)),d.foldKeymap!==!1&&(b=b.concat(foldKeymap)),d.completionKeymap!==!1&&(b=b.concat(completionKeymap)),d.lintKeymap!==!1&&(b=b.concat(lintKeymap));var $=[];return d.lineNumbers!==!1&&$.push(lineNumbers()),d.highlightActiveLineGutter!==!1&&$.push(highlightActiveLineGutter()),d.highlightSpecialChars!==!1&&$.push(highlightSpecialChars()),d.history!==!1&&$.push(history()),d.foldGutter!==!1&&$.push(foldGutter()),d.drawSelection!==!1&&$.push(drawSelection()),d.dropCursor!==!1&&$.push(dropCursor()),d.allowMultipleSelections!==!1&&$.push(EditorState.allowMultipleSelections.of(!0)),d.indentOnInput!==!1&&$.push(indentOnInput()),d.syntaxHighlighting!==!1&&$.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),d.bracketMatching!==!1&&$.push(bracketMatching()),d.closeBrackets!==!1&&$.push(closeBrackets()),d.autocompletion!==!1&&$.push(autocompletion()),d.rectangularSelection!==!1&&$.push(rectangularSelection()),g!==!1&&$.push(crosshairCursor()),d.highlightActiveLine!==!1&&$.push(highlightActiveLine()),d.highlightSelectionMatches!==!1&&$.push(highlightSelectionMatches()),d.tabSize&&typeof d.tabSize=="number"&&$.push(indentUnit.of(" ".repeat(d.tabSize))),$.concat([keymap.of(b.flat())]).filter(Boolean)};const chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)];var defaultLightThemeOption=EditorView.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),getDefaultExtensions=function(d){d===void 0&&(d={});var{indentWithTab:g=!0,editable:b=!0,readOnly:$=!1,theme:j="light",placeholder:_e="",basicSetup:et=!0}=d,tt=[];switch(g&&tt.unshift(keymap.of([indentWithTab])),et&&(typeof et=="boolean"?tt.unshift(basicSetup()):tt.unshift(basicSetup(et))),_e&&tt.unshift(placeholder(_e)),j){case"light":tt.push(defaultLightThemeOption);break;case"dark":tt.push(oneDark);break;case"none":break;default:tt.push(j);break}return b===!1&&tt.push(EditorView.editable.of(!1)),$&&tt.push(EditorState.readOnly.of(!0)),[...tt]},getStatistics=_=>({line:_.state.doc.lineAt(_.state.selection.main.from),lineCount:_.state.doc.lines,lineBreak:_.state.lineBreak,length:_.state.doc.length,readOnly:_.state.readOnly,tabSize:_.state.tabSize,selection:_.state.selection,selectionAsSingle:_.state.selection.asSingle().main,ranges:_.state.selection.ranges,selectionCode:_.state.sliceDoc(_.state.selection.main.from,_.state.selection.main.to),selections:_.state.selection.ranges.map(d=>_.state.sliceDoc(d.from,d.to)),selectedText:_.state.selection.ranges.some(d=>!d.empty)}),External=Annotation.define(),emptyExtensions=[];function useCodeMirror(_){var{value:d,selection:g,onChange:b,onStatistics:$,onCreateEditor:j,onUpdate:_e,extensions:et=emptyExtensions,autoFocus:tt,theme:nt="light",height:it=null,minHeight:rt=null,maxHeight:st=null,width:ot=null,minWidth:at=null,maxWidth:ct=null,placeholder:ht="",editable:ut=!0,readOnly:dt=!1,indentWithTab:ft=!0,basicSetup:mt=!0,root:pt,initialState:Ot}=_,[gt,yt]=reactExports.useState(),[St,vt]=reactExports.useState(),[wt,xt]=reactExports.useState(),kt=EditorView.theme({"&":{height:it,minHeight:rt,maxHeight:st,width:ot,minWidth:at,maxWidth:ct},"& .cm-scroller":{height:"100% !important"}}),bt=EditorView.updateListener.of(Tt=>{if(Tt.docChanged&&typeof b=="function"&&!Tt.transactions.some(Pt=>Pt.annotation(External))){var _t=Tt.state.doc,Ct=_t.toString();b(Ct,Tt)}$&&$(getStatistics(Tt))}),Et=getDefaultExtensions({theme:nt,editable:ut,readOnly:dt,placeholder:ht,indentWithTab:ft,basicSetup:mt}),At=[bt,kt,...Et];return _e&&typeof _e=="function"&&At.push(EditorView.updateListener.of(_e)),At=At.concat(et),reactExports.useEffect(()=>{if(gt&&!wt){var Tt={doc:d,selection:g,extensions:At},_t=Ot?EditorState.fromJSON(Ot.json,Tt,Ot.fields):EditorState.create(Tt);if(xt(_t),!St){var Ct=new EditorView({state:_t,parent:gt,root:pt});vt(Ct),j&&j(Ct,_t)}}return()=>{St&&(xt(void 0),vt(void 0))}},[gt,wt]),reactExports.useEffect(()=>yt(_.container),[_.container]),reactExports.useEffect(()=>()=>{St&&(St.destroy(),vt(void 0))},[St]),reactExports.useEffect(()=>{tt&&St&&St.focus()},[tt,St]),reactExports.useEffect(()=>{St&&St.dispatch({effects:StateEffect.reconfigure.of(At)})},[nt,et,it,rt,st,ot,at,ct,ht,ut,dt,ft,mt,b,_e]),reactExports.useEffect(()=>{if(d!==void 0){var Tt=St?St.state.doc.toString():"";St&&d!==Tt&&St.dispatch({changes:{from:0,to:Tt.length,insert:d||""},annotations:[External.of(!0)]})}},[d,St]),{state:wt,setState:xt,view:St,setView:vt,container:gt,setContainer:yt}}var _excluded=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ReactCodeMirror=reactExports.forwardRef((_,d)=>{var{className:g,value:b="",selection:$,extensions:j=[],onChange:_e,onStatistics:et,onCreateEditor:tt,onUpdate:nt,autoFocus:it,theme:rt="light",height:st,minHeight:ot,maxHeight:at,width:ct,minWidth:ht,maxWidth:ut,basicSetup:dt,placeholder:ft,indentWithTab:mt,editable:pt,readOnly:Ot,root:gt,initialState:yt}=_,St=_objectWithoutPropertiesLoose(_,_excluded),vt=reactExports.useRef(null),{state:wt,view:xt,container:kt}=useCodeMirror({container:vt.current,root:gt,value:b,autoFocus:it,theme:rt,height:st,minHeight:ot,maxHeight:at,width:ct,minWidth:ht,maxWidth:ut,basicSetup:dt,placeholder:ft,indentWithTab:mt,editable:pt,readOnly:Ot,selection:$,onChange:_e,onStatistics:et,onCreateEditor:tt,onUpdate:nt,extensions:j,initialState:yt});if(reactExports.useImperativeHandle(d,()=>({editor:vt.current,state:wt,view:xt}),[vt,kt,wt,xt]),typeof b!="string")throw new Error("value must be typeof string but got "+typeof b);var bt=typeof rt=="string"?"cm-theme-"+rt:"cm-theme";return jsxRuntimeExports.jsx("div",_extends({ref:vt,className:""+bt+(g?" "+g:"")},St))});ReactCodeMirror.displayName="CodeMirror";function clamp$1(_,[d,g]){return Math.min(g,Math.max(d,_))}function composeEventHandlers(_,d,{checkForDefaultPrevented:g=!0}={}){return function($){if(_==null||_($),g===!1||!$.defaultPrevented)return d==null?void 0:d($)}}function createContextScope(_,d=[]){let g=[];function b(j,_e){const et=reactExports.createContext(_e),tt=g.length;g=[...g,_e];function nt(rt){const{scope:st,children:ot,...at}=rt,ct=(st==null?void 0:st[_][tt])||et,ht=reactExports.useMemo(()=>at,Object.values(at));return jsxRuntimeExports.jsx(ct.Provider,{value:ht,children:ot})}function it(rt,st){const ot=(st==null?void 0:st[_][tt])||et,at=reactExports.useContext(ot);if(at)return at;if(_e!==void 0)return _e;throw new Error(`\`${rt}\` must be used within \`${j}\``)}return nt.displayName=j+"Provider",[nt,it]}const $=()=>{const j=g.map(_e=>reactExports.createContext(_e));return function(et){const tt=(et==null?void 0:et[_])||j;return reactExports.useMemo(()=>({[`__scope${_}`]:{...et,[_]:tt}}),[et,tt])}};return $.scopeName=_,[b,composeContextScopes($,...d)]}function composeContextScopes(..._){const d=_[0];if(_.length===1)return d;const g=()=>{const b=_.map($=>({useScope:$(),scopeName:$.scopeName}));return function(j){const _e=b.reduce((et,{useScope:tt,scopeName:nt})=>{const rt=tt(j)[`__scope${nt}`];return{...et,...rt}},{});return reactExports.useMemo(()=>({[`__scope${d.scopeName}`]:_e}),[_e])}};return g.scopeName=d.scopeName,g}function setRef(_,d){typeof _=="function"?_(d):_!=null&&(_.current=d)}function composeRefs(..._){return d=>_.forEach(g=>setRef(g,d))}function useComposedRefs(..._){return reactExports.useCallback(composeRefs(..._),_)}var Slot=reactExports.forwardRef((_,d)=>{const{children:g,...b}=_,$=reactExports.Children.toArray(g),j=$.find(isSlottable);if(j){const _e=j.props.children,et=$.map(tt=>tt===j?reactExports.Children.count(_e)>1?reactExports.Children.only(null):reactExports.isValidElement(_e)?_e.props.children:null:tt);return jsxRuntimeExports.jsx(SlotClone,{...b,ref:d,children:reactExports.isValidElement(_e)?reactExports.cloneElement(_e,void 0,et):null})}return jsxRuntimeExports.jsx(SlotClone,{...b,ref:d,children:g})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef((_,d)=>{const{children:g,...b}=_;if(reactExports.isValidElement(g)){const $=getElementRef(g);return reactExports.cloneElement(g,{...mergeProps(b,g.props),ref:d?composeRefs(d,$):$})}return reactExports.Children.count(g)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:_})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_});function isSlottable(_){return reactExports.isValidElement(_)&&_.type===Slottable}function mergeProps(_,d){const g={...d};for(const b in d){const $=_[b],j=d[b];/^on[A-Z]/.test(b)?$&&j?g[b]=(...et)=>{j(...et),$(...et)}:$&&(g[b]=$):b==="style"?g[b]={...$,...j}:b==="className"&&(g[b]=[$,j].filter(Boolean).join(" "))}return{..._,...g}}function getElementRef(_){var b,$;let d=(b=Object.getOwnPropertyDescriptor(_.props,"ref"))==null?void 0:b.get,g=d&&"isReactWarning"in d&&d.isReactWarning;return g?_.ref:(d=($=Object.getOwnPropertyDescriptor(_,"ref"))==null?void 0:$.get,g=d&&"isReactWarning"in d&&d.isReactWarning,g?_.props.ref:_.props.ref||_.ref)}function createCollection(_){const d=_+"CollectionProvider",[g,b]=createContextScope(d),[$,j]=g(d,{collectionRef:{current:null},itemMap:new Map}),_e=ot=>{const{scope:at,children:ct}=ot,ht=React.useRef(null),ut=React.useRef(new Map).current;return jsxRuntimeExports.jsx($,{scope:at,itemMap:ut,collectionRef:ht,children:ct})};_e.displayName=d;const et=_+"CollectionSlot",tt=React.forwardRef((ot,at)=>{const{scope:ct,children:ht}=ot,ut=j(et,ct),dt=useComposedRefs(at,ut.collectionRef);return jsxRuntimeExports.jsx(Slot,{ref:dt,children:ht})});tt.displayName=et;const nt=_+"CollectionItemSlot",it="data-radix-collection-item",rt=React.forwardRef((ot,at)=>{const{scope:ct,children:ht,...ut}=ot,dt=React.useRef(null),ft=useComposedRefs(at,dt),mt=j(nt,ct);return React.useEffect(()=>(mt.itemMap.set(dt,{ref:dt,...ut}),()=>void mt.itemMap.delete(dt))),jsxRuntimeExports.jsx(Slot,{[it]:"",ref:ft,children:ht})});rt.displayName=nt;function st(ot){const at=j(_+"CollectionConsumer",ot);return React.useCallback(()=>{const ht=at.collectionRef.current;if(!ht)return[];const ut=Array.from(ht.querySelectorAll(`[${it}]`));return Array.from(at.itemMap.values()).sort((mt,pt)=>ut.indexOf(mt.ref.current)-ut.indexOf(pt.ref.current))},[at.collectionRef,at.itemMap])}return[{Provider:_e,Slot:tt,ItemSlot:rt},st,b]}var DirectionContext=reactExports.createContext(void 0);function useDirection(_){const d=reactExports.useContext(DirectionContext);return _||d||"ltr"}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((_,d)=>{const g=reactExports.forwardRef((b,$)=>{const{asChild:j,..._e}=b,et=j?Slot:d;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(et,{..._e,ref:$})});return g.displayName=`Primitive.${d}`,{..._,[d]:g}},{});function dispatchDiscreteCustomEvent(_,d){_&&reactDomExports.flushSync(()=>_.dispatchEvent(d))}function useCallbackRef$1(_){const d=reactExports.useRef(_);return reactExports.useEffect(()=>{d.current=_}),reactExports.useMemo(()=>(...g)=>{var b;return(b=d.current)==null?void 0:b.call(d,...g)},[])}function useEscapeKeydown(_,d=globalThis==null?void 0:globalThis.document){const g=useCallbackRef$1(_);reactExports.useEffect(()=>{const b=$=>{$.key==="Escape"&&g($)};return d.addEventListener("keydown",b,{capture:!0}),()=>d.removeEventListener("keydown",b,{capture:!0})},[g,d])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((_,d)=>{const{disableOutsidePointerEvents:g=!1,onEscapeKeyDown:b,onPointerDownOutside:$,onFocusOutside:j,onInteractOutside:_e,onDismiss:et,...tt}=_,nt=reactExports.useContext(DismissableLayerContext),[it,rt]=reactExports.useState(null),st=(it==null?void 0:it.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,ot]=reactExports.useState({}),at=useComposedRefs(d,gt=>rt(gt)),ct=Array.from(nt.layers),[ht]=[...nt.layersWithOutsidePointerEventsDisabled].slice(-1),ut=ct.indexOf(ht),dt=it?ct.indexOf(it):-1,ft=nt.layersWithOutsidePointerEventsDisabled.size>0,mt=dt>=ut,pt=usePointerDownOutside(gt=>{const yt=gt.target,St=[...nt.branches].some(vt=>vt.contains(yt));!mt||St||($==null||$(gt),_e==null||_e(gt),gt.defaultPrevented||et==null||et())},st),Ot=useFocusOutside(gt=>{const yt=gt.target;[...nt.branches].some(vt=>vt.contains(yt))||(j==null||j(gt),_e==null||_e(gt),gt.defaultPrevented||et==null||et())},st);return useEscapeKeydown(gt=>{dt===nt.layers.size-1&&(b==null||b(gt),!gt.defaultPrevented&&et&&(gt.preventDefault(),et()))},st),reactExports.useEffect(()=>{if(it)return g&&(nt.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=st.body.style.pointerEvents,st.body.style.pointerEvents="none"),nt.layersWithOutsidePointerEventsDisabled.add(it)),nt.layers.add(it),dispatchUpdate(),()=>{g&&nt.layersWithOutsidePointerEventsDisabled.size===1&&(st.body.style.pointerEvents=originalBodyPointerEvents)}},[it,st,g,nt]),reactExports.useEffect(()=>()=>{it&&(nt.layers.delete(it),nt.layersWithOutsidePointerEventsDisabled.delete(it),dispatchUpdate())},[it,nt]),reactExports.useEffect(()=>{const gt=()=>ot({});return document.addEventListener(CONTEXT_UPDATE,gt),()=>document.removeEventListener(CONTEXT_UPDATE,gt)},[]),jsxRuntimeExports.jsx(Primitive.div,{...tt,ref:at,style:{pointerEvents:ft?mt?"auto":"none":void 0,..._.style},onFocusCapture:composeEventHandlers(_.onFocusCapture,Ot.onFocusCapture),onBlurCapture:composeEventHandlers(_.onBlurCapture,Ot.onBlurCapture),onPointerDownCapture:composeEventHandlers(_.onPointerDownCapture,pt.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((_,d)=>{const g=reactExports.useContext(DismissableLayerContext),b=reactExports.useRef(null),$=useComposedRefs(d,b);return reactExports.useEffect(()=>{const j=b.current;if(j)return g.branches.add(j),()=>{g.branches.delete(j)}},[g.branches]),jsxRuntimeExports.jsx(Primitive.div,{..._,ref:$})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(_,d=globalThis==null?void 0:globalThis.document){const g=useCallbackRef$1(_),b=reactExports.useRef(!1),$=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const j=et=>{if(et.target&&!b.current){let tt=function(){handleAndDispatchCustomEvent(POINTER_DOWN_OUTSIDE,g,nt,{discrete:!0})};const nt={originalEvent:et};et.pointerType==="touch"?(d.removeEventListener("click",$.current),$.current=tt,d.addEventListener("click",$.current,{once:!0})):tt()}else d.removeEventListener("click",$.current);b.current=!1},_e=window.setTimeout(()=>{d.addEventListener("pointerdown",j)},0);return()=>{window.clearTimeout(_e),d.removeEventListener("pointerdown",j),d.removeEventListener("click",$.current)}},[d,g]),{onPointerDownCapture:()=>b.current=!0}}function useFocusOutside(_,d=globalThis==null?void 0:globalThis.document){const g=useCallbackRef$1(_),b=reactExports.useRef(!1);return reactExports.useEffect(()=>{const $=j=>{j.target&&!b.current&&handleAndDispatchCustomEvent(FOCUS_OUTSIDE,g,{originalEvent:j},{discrete:!1})};return d.addEventListener("focusin",$),()=>d.removeEventListener("focusin",$)},[d,g]),{onFocusCapture:()=>b.current=!0,onBlurCapture:()=>b.current=!1}}function dispatchUpdate(){const _=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(_)}function handleAndDispatchCustomEvent(_,d,g,{discrete:b}){const $=g.originalEvent.target,j=new CustomEvent(_,{bubbles:!1,cancelable:!0,detail:g});d&&$.addEventListener(_,d,{once:!0}),b?dispatchDiscreteCustomEvent($,j):$.dispatchEvent(j)}var count$1=0;function useFocusGuards(){reactExports.useEffect(()=>{const _=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",_[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",_[1]??createFocusGuard()),count$1++,()=>{count$1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(d=>d.remove()),count$1--}},[])}function createFocusGuard(){const _=document.createElement("span");return _.setAttribute("data-radix-focus-guard",""),_.tabIndex=0,_.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",_}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((_,d)=>{const{loop:g=!1,trapped:b=!1,onMountAutoFocus:$,onUnmountAutoFocus:j,..._e}=_,[et,tt]=reactExports.useState(null),nt=useCallbackRef$1($),it=useCallbackRef$1(j),rt=reactExports.useRef(null),st=useComposedRefs(d,ct=>tt(ct)),ot=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(b){let ct=function(ft){if(ot.paused||!et)return;const mt=ft.target;et.contains(mt)?rt.current=mt:focus(rt.current,{select:!0})},ht=function(ft){if(ot.paused||!et)return;const mt=ft.relatedTarget;mt!==null&&(et.contains(mt)||focus(rt.current,{select:!0}))},ut=function(ft){if(document.activeElement===document.body)for(const pt of ft)pt.removedNodes.length>0&&focus(et)};document.addEventListener("focusin",ct),document.addEventListener("focusout",ht);const dt=new MutationObserver(ut);return et&&dt.observe(et,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",ct),document.removeEventListener("focusout",ht),dt.disconnect()}}},[b,et,ot.paused]),reactExports.useEffect(()=>{if(et){focusScopesStack.add(ot);const ct=document.activeElement;if(!et.contains(ct)){const ut=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS);et.addEventListener(AUTOFOCUS_ON_MOUNT,nt),et.dispatchEvent(ut),ut.defaultPrevented||(focusFirst(removeLinks(getTabbableCandidates(et)),{select:!0}),document.activeElement===ct&&focus(et))}return()=>{et.removeEventListener(AUTOFOCUS_ON_MOUNT,nt),setTimeout(()=>{const ut=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS);et.addEventListener(AUTOFOCUS_ON_UNMOUNT,it),et.dispatchEvent(ut),ut.defaultPrevented||focus(ct??document.body,{select:!0}),et.removeEventListener(AUTOFOCUS_ON_UNMOUNT,it),focusScopesStack.remove(ot)},0)}}},[et,nt,it,ot]);const at=reactExports.useCallback(ct=>{if(!g&&!b||ot.paused)return;const ht=ct.key==="Tab"&&!ct.altKey&&!ct.ctrlKey&&!ct.metaKey,ut=document.activeElement;if(ht&&ut){const dt=ct.currentTarget,[ft,mt]=getTabbableEdges(dt);ft&&mt?!ct.shiftKey&&ut===mt?(ct.preventDefault(),g&&focus(ft,{select:!0})):ct.shiftKey&&ut===ft&&(ct.preventDefault(),g&&focus(mt,{select:!0})):ut===dt&&ct.preventDefault()}},[g,b,ot.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,..._e,ref:st,onKeyDown:at})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst(_,{select:d=!1}={}){const g=document.activeElement;for(const b of _)if(focus(b,{select:d}),document.activeElement!==g)return}function getTabbableEdges(_){const d=getTabbableCandidates(_),g=findVisible(d,_),b=findVisible(d.reverse(),_);return[g,b]}function getTabbableCandidates(_){const d=[],g=document.createTreeWalker(_,NodeFilter.SHOW_ELEMENT,{acceptNode:b=>{const $=b.tagName==="INPUT"&&b.type==="hidden";return b.disabled||b.hidden||$?NodeFilter.FILTER_SKIP:b.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;g.nextNode();)d.push(g.currentNode);return d}function findVisible(_,d){for(const g of _)if(!isHidden(g,{upTo:d}))return g}function isHidden(_,{upTo:d}){if(getComputedStyle(_).visibility==="hidden")return!0;for(;_;){if(d!==void 0&&_===d)return!1;if(getComputedStyle(_).display==="none")return!0;_=_.parentElement}return!1}function isSelectableInput(_){return _ instanceof HTMLInputElement&&"select"in _}function focus(_,{select:d=!1}={}){if(_&&_.focus){const g=document.activeElement;_.focus({preventScroll:!0}),_!==g&&isSelectableInput(_)&&d&&_.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let _=[];return{add(d){const g=_[0];d!==g&&(g==null||g.pause()),_=arrayRemove(_,d),_.unshift(d)},remove(d){var g;_=arrayRemove(_,d),(g=_[0])==null||g.resume()}}}function arrayRemove(_,d){const g=[..._],b=g.indexOf(d);return b!==-1&&g.splice(b,1),g}function removeLinks(_){return _.filter(d=>d.tagName!=="A")}var useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},useReactId=React$1["useId".toString()]||(()=>{}),count=0;function useId(_){const[d,g]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{_||g(b=>b??String(count++))},[_]),_||(d?`radix-${d}`:"")}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=_=>({x:_,y:_}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(_,d,g){return max(_,min(d,g))}function evaluate(_,d){return typeof _=="function"?_(d):_}function getSide(_){return _.split("-")[0]}function getAlignment(_){return _.split("-")[1]}function getOppositeAxis(_){return _==="x"?"y":"x"}function getAxisLength(_){return _==="y"?"height":"width"}function getSideAxis(_){return["top","bottom"].includes(getSide(_))?"y":"x"}function getAlignmentAxis(_){return getOppositeAxis(getSideAxis(_))}function getAlignmentSides(_,d,g){g===void 0&&(g=!1);const b=getAlignment(_),$=getAlignmentAxis(_),j=getAxisLength($);let _e=$==="x"?b===(g?"end":"start")?"right":"left":b==="start"?"bottom":"top";return d.reference[j]>d.floating[j]&&(_e=getOppositePlacement(_e)),[_e,getOppositePlacement(_e)]}function getExpandedPlacements(_){const d=getOppositePlacement(_);return[getOppositeAlignmentPlacement(_),d,getOppositeAlignmentPlacement(d)]}function getOppositeAlignmentPlacement(_){return _.replace(/start|end/g,d=>oppositeAlignmentMap[d])}function getSideList(_,d,g){const b=["left","right"],$=["right","left"],j=["top","bottom"],_e=["bottom","top"];switch(_){case"top":case"bottom":return g?d?$:b:d?b:$;case"left":case"right":return d?j:_e;default:return[]}}function getOppositeAxisPlacements(_,d,g,b){const $=getAlignment(_);let j=getSideList(getSide(_),g==="start",b);return $&&(j=j.map(_e=>_e+"-"+$),d&&(j=j.concat(j.map(getOppositeAlignmentPlacement)))),j}function getOppositePlacement(_){return _.replace(/left|right|bottom|top/g,d=>oppositeSideMap[d])}function expandPaddingObject(_){return{top:0,right:0,bottom:0,left:0,..._}}function getPaddingObject(_){return typeof _!="number"?expandPaddingObject(_):{top:_,right:_,bottom:_,left:_}}function rectToClientRect(_){const{x:d,y:g,width:b,height:$}=_;return{width:b,height:$,top:g,left:d,right:d+b,bottom:g+$,x:d,y:g}}function computeCoordsFromPlacement(_,d,g){let{reference:b,floating:$}=_;const j=getSideAxis(d),_e=getAlignmentAxis(d),et=getAxisLength(_e),tt=getSide(d),nt=j==="y",it=b.x+b.width/2-$.width/2,rt=b.y+b.height/2-$.height/2,st=b[et]/2-$[et]/2;let ot;switch(tt){case"top":ot={x:it,y:b.y-$.height};break;case"bottom":ot={x:it,y:b.y+b.height};break;case"right":ot={x:b.x+b.width,y:rt};break;case"left":ot={x:b.x-$.width,y:rt};break;default:ot={x:b.x,y:b.y}}switch(getAlignment(d)){case"start":ot[_e]-=st*(g&&nt?-1:1);break;case"end":ot[_e]+=st*(g&&nt?-1:1);break}return ot}const computePosition$1=async(_,d,g)=>{const{placement:b="bottom",strategy:$="absolute",middleware:j=[],platform:_e}=g,et=j.filter(Boolean),tt=await(_e.isRTL==null?void 0:_e.isRTL(d));let nt=await _e.getElementRects({reference:_,floating:d,strategy:$}),{x:it,y:rt}=computeCoordsFromPlacement(nt,b,tt),st=b,ot={},at=0;for(let ct=0;ct<et.length;ct++){const{name:ht,fn:ut}=et[ct],{x:dt,y:ft,data:mt,reset:pt}=await ut({x:it,y:rt,initialPlacement:b,placement:st,strategy:$,middlewareData:ot,rects:nt,platform:_e,elements:{reference:_,floating:d}});it=dt??it,rt=ft??rt,ot={...ot,[ht]:{...ot[ht],...mt}},pt&&at<=50&&(at++,typeof pt=="object"&&(pt.placement&&(st=pt.placement),pt.rects&&(nt=pt.rects===!0?await _e.getElementRects({reference:_,floating:d,strategy:$}):pt.rects),{x:it,y:rt}=computeCoordsFromPlacement(nt,st,tt)),ct=-1)}return{x:it,y:rt,placement:st,strategy:$,middlewareData:ot}};async function detectOverflow(_,d){var g;d===void 0&&(d={});const{x:b,y:$,platform:j,rects:_e,elements:et,strategy:tt}=_,{boundary:nt="clippingAncestors",rootBoundary:it="viewport",elementContext:rt="floating",altBoundary:st=!1,padding:ot=0}=evaluate(d,_),at=getPaddingObject(ot),ht=et[st?rt==="floating"?"reference":"floating":rt],ut=rectToClientRect(await j.getClippingRect({element:(g=await(j.isElement==null?void 0:j.isElement(ht)))==null||g?ht:ht.contextElement||await(j.getDocumentElement==null?void 0:j.getDocumentElement(et.floating)),boundary:nt,rootBoundary:it,strategy:tt})),dt=rt==="floating"?{x:b,y:$,width:_e.floating.width,height:_e.floating.height}:_e.reference,ft=await(j.getOffsetParent==null?void 0:j.getOffsetParent(et.floating)),mt=await(j.isElement==null?void 0:j.isElement(ft))?await(j.getScale==null?void 0:j.getScale(ft))||{x:1,y:1}:{x:1,y:1},pt=rectToClientRect(j.convertOffsetParentRelativeRectToViewportRelativeRect?await j.convertOffsetParentRelativeRectToViewportRelativeRect({elements:et,rect:dt,offsetParent:ft,strategy:tt}):dt);return{top:(ut.top-pt.top+at.top)/mt.y,bottom:(pt.bottom-ut.bottom+at.bottom)/mt.y,left:(ut.left-pt.left+at.left)/mt.x,right:(pt.right-ut.right+at.right)/mt.x}}const arrow$3=_=>({name:"arrow",options:_,async fn(d){const{x:g,y:b,placement:$,rects:j,platform:_e,elements:et,middlewareData:tt}=d,{element:nt,padding:it=0}=evaluate(_,d)||{};if(nt==null)return{};const rt=getPaddingObject(it),st={x:g,y:b},ot=getAlignmentAxis($),at=getAxisLength(ot),ct=await _e.getDimensions(nt),ht=ot==="y",ut=ht?"top":"left",dt=ht?"bottom":"right",ft=ht?"clientHeight":"clientWidth",mt=j.reference[at]+j.reference[ot]-st[ot]-j.floating[at],pt=st[ot]-j.reference[ot],Ot=await(_e.getOffsetParent==null?void 0:_e.getOffsetParent(nt));let gt=Ot?Ot[ft]:0;(!gt||!await(_e.isElement==null?void 0:_e.isElement(Ot)))&&(gt=et.floating[ft]||j.floating[at]);const yt=mt/2-pt/2,St=gt/2-ct[at]/2-1,vt=min(rt[ut],St),wt=min(rt[dt],St),xt=vt,kt=gt-ct[at]-wt,bt=gt/2-ct[at]/2+yt,Et=clamp(xt,bt,kt),At=!tt.arrow&&getAlignment($)!=null&&bt!==Et&&j.reference[at]/2-(bt<xt?vt:wt)-ct[at]/2<0,Tt=At?bt<xt?bt-xt:bt-kt:0;return{[ot]:st[ot]+Tt,data:{[ot]:Et,centerOffset:bt-Et-Tt,...At&&{alignmentOffset:Tt}},reset:At}}}),flip$2=function(_){return _===void 0&&(_={}),{name:"flip",options:_,async fn(d){var g,b;const{placement:$,middlewareData:j,rects:_e,initialPlacement:et,platform:tt,elements:nt}=d,{mainAxis:it=!0,crossAxis:rt=!0,fallbackPlacements:st,fallbackStrategy:ot="bestFit",fallbackAxisSideDirection:at="none",flipAlignment:ct=!0,...ht}=evaluate(_,d);if((g=j.arrow)!=null&&g.alignmentOffset)return{};const ut=getSide($),dt=getSideAxis(et),ft=getSide(et)===et,mt=await(tt.isRTL==null?void 0:tt.isRTL(nt.floating)),pt=st||(ft||!ct?[getOppositePlacement(et)]:getExpandedPlacements(et)),Ot=at!=="none";!st&&Ot&&pt.push(...getOppositeAxisPlacements(et,ct,at,mt));const gt=[et,...pt],yt=await detectOverflow(d,ht),St=[];let vt=((b=j.flip)==null?void 0:b.overflows)||[];if(it&&St.push(yt[ut]),rt){const bt=getAlignmentSides($,_e,mt);St.push(yt[bt[0]],yt[bt[1]])}if(vt=[...vt,{placement:$,overflows:St}],!St.every(bt=>bt<=0)){var wt,xt;const bt=(((wt=j.flip)==null?void 0:wt.index)||0)+1,Et=gt[bt];if(Et)return{data:{index:bt,overflows:vt},reset:{placement:Et}};let At=(xt=vt.filter(Tt=>Tt.overflows[0]<=0).sort((Tt,_t)=>Tt.overflows[1]-_t.overflows[1])[0])==null?void 0:xt.placement;if(!At)switch(ot){case"bestFit":{var kt;const Tt=(kt=vt.filter(_t=>{if(Ot){const Ct=getSideAxis(_t.placement);return Ct===dt||Ct==="y"}return!0}).map(_t=>[_t.placement,_t.overflows.filter(Ct=>Ct>0).reduce((Ct,Pt)=>Ct+Pt,0)]).sort((_t,Ct)=>_t[1]-Ct[1])[0])==null?void 0:kt[0];Tt&&(At=Tt);break}case"initialPlacement":At=et;break}if($!==At)return{reset:{placement:At}}}return{}}}};function getSideOffsets(_,d){return{top:_.top-d.height,right:_.right-d.width,bottom:_.bottom-d.height,left:_.left-d.width}}function isAnySideFullyClipped(_){return sides.some(d=>_[d]>=0)}const hide$2=function(_){return _===void 0&&(_={}),{name:"hide",options:_,async fn(d){const{rects:g}=d,{strategy:b="referenceHidden",...$}=evaluate(_,d);switch(b){case"referenceHidden":{const j=await detectOverflow(d,{...$,elementContext:"reference"}),_e=getSideOffsets(j,g.reference);return{data:{referenceHiddenOffsets:_e,referenceHidden:isAnySideFullyClipped(_e)}}}case"escaped":{const j=await detectOverflow(d,{...$,altBoundary:!0}),_e=getSideOffsets(j,g.floating);return{data:{escapedOffsets:_e,escaped:isAnySideFullyClipped(_e)}}}default:return{}}}}};async function convertValueToCoords(_,d){const{placement:g,platform:b,elements:$}=_,j=await(b.isRTL==null?void 0:b.isRTL($.floating)),_e=getSide(g),et=getAlignment(g),tt=getSideAxis(g)==="y",nt=["left","top"].includes(_e)?-1:1,it=j&&tt?-1:1,rt=evaluate(d,_);let{mainAxis:st,crossAxis:ot,alignmentAxis:at}=typeof rt=="number"?{mainAxis:rt,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...rt};return et&&typeof at=="number"&&(ot=et==="end"?at*-1:at),tt?{x:ot*it,y:st*nt}:{x:st*nt,y:ot*it}}const offset$2=function(_){return _===void 0&&(_=0),{name:"offset",options:_,async fn(d){var g,b;const{x:$,y:j,placement:_e,middlewareData:et}=d,tt=await convertValueToCoords(d,_);return _e===((g=et.offset)==null?void 0:g.placement)&&(b=et.arrow)!=null&&b.alignmentOffset?{}:{x:$+tt.x,y:j+tt.y,data:{...tt,placement:_e}}}}},shift$2=function(_){return _===void 0&&(_={}),{name:"shift",options:_,async fn(d){const{x:g,y:b,placement:$}=d,{mainAxis:j=!0,crossAxis:_e=!1,limiter:et={fn:ht=>{let{x:ut,y:dt}=ht;return{x:ut,y:dt}}},...tt}=evaluate(_,d),nt={x:g,y:b},it=await detectOverflow(d,tt),rt=getSideAxis(getSide($)),st=getOppositeAxis(rt);let ot=nt[st],at=nt[rt];if(j){const ht=st==="y"?"top":"left",ut=st==="y"?"bottom":"right",dt=ot+it[ht],ft=ot-it[ut];ot=clamp(dt,ot,ft)}if(_e){const ht=rt==="y"?"top":"left",ut=rt==="y"?"bottom":"right",dt=at+it[ht],ft=at-it[ut];at=clamp(dt,at,ft)}const ct=et.fn({...d,[st]:ot,[rt]:at});return{...ct,data:{x:ct.x-g,y:ct.y-b}}}}},limitShift$2=function(_){return _===void 0&&(_={}),{options:_,fn(d){const{x:g,y:b,placement:$,rects:j,middlewareData:_e}=d,{offset:et=0,mainAxis:tt=!0,crossAxis:nt=!0}=evaluate(_,d),it={x:g,y:b},rt=getSideAxis($),st=getOppositeAxis(rt);let ot=it[st],at=it[rt];const ct=evaluate(et,d),ht=typeof ct=="number"?{mainAxis:ct,crossAxis:0}:{mainAxis:0,crossAxis:0,...ct};if(tt){const ft=st==="y"?"height":"width",mt=j.reference[st]-j.floating[ft]+ht.mainAxis,pt=j.reference[st]+j.reference[ft]-ht.mainAxis;ot<mt?ot=mt:ot>pt&&(ot=pt)}if(nt){var ut,dt;const ft=st==="y"?"width":"height",mt=["top","left"].includes(getSide($)),pt=j.reference[rt]-j.floating[ft]+(mt&&((ut=_e.offset)==null?void 0:ut[rt])||0)+(mt?0:ht.crossAxis),Ot=j.reference[rt]+j.reference[ft]+(mt?0:((dt=_e.offset)==null?void 0:dt[rt])||0)-(mt?ht.crossAxis:0);at<pt?at=pt:at>Ot&&(at=Ot)}return{[st]:ot,[rt]:at}}}},size$2=function(_){return _===void 0&&(_={}),{name:"size",options:_,async fn(d){const{placement:g,rects:b,platform:$,elements:j}=d,{apply:_e=()=>{},...et}=evaluate(_,d),tt=await detectOverflow(d,et),nt=getSide(g),it=getAlignment(g),rt=getSideAxis(g)==="y",{width:st,height:ot}=b.floating;let at,ct;nt==="top"||nt==="bottom"?(at=nt,ct=it===(await($.isRTL==null?void 0:$.isRTL(j.floating))?"start":"end")?"left":"right"):(ct=nt,at=it==="end"?"top":"bottom");const ht=ot-tt.top-tt.bottom,ut=st-tt.left-tt.right,dt=min(ot-tt[at],ht),ft=min(st-tt[ct],ut),mt=!d.middlewareData.shift;let pt=dt,Ot=ft;if(rt?Ot=it||mt?min(ft,ut):ut:pt=it||mt?min(dt,ht):ht,mt&&!it){const yt=max(tt.left,0),St=max(tt.right,0),vt=max(tt.top,0),wt=max(tt.bottom,0);rt?Ot=st-2*(yt!==0||St!==0?yt+St:max(tt.left,tt.right)):pt=ot-2*(vt!==0||wt!==0?vt+wt:max(tt.top,tt.bottom))}await _e({...d,availableWidth:Ot,availableHeight:pt});const gt=await $.getDimensions(j.floating);return st!==gt.width||ot!==gt.height?{reset:{rects:!0}}:{}}}};function getNodeName(_){return isNode(_)?(_.nodeName||"").toLowerCase():"#document"}function getWindow(_){var d;return(_==null||(d=_.ownerDocument)==null?void 0:d.defaultView)||window}function getDocumentElement(_){var d;return(d=(isNode(_)?_.ownerDocument:_.document)||window.document)==null?void 0:d.documentElement}function isNode(_){return _ instanceof Node||_ instanceof getWindow(_).Node}function isElement(_){return _ instanceof Element||_ instanceof getWindow(_).Element}function isHTMLElement(_){return _ instanceof HTMLElement||_ instanceof getWindow(_).HTMLElement}function isShadowRoot(_){return typeof ShadowRoot>"u"?!1:_ instanceof ShadowRoot||_ instanceof getWindow(_).ShadowRoot}function isOverflowElement(_){const{overflow:d,overflowX:g,overflowY:b,display:$}=getComputedStyle$1(_);return/auto|scroll|overlay|hidden|clip/.test(d+b+g)&&!["inline","contents"].includes($)}function isTableElement(_){return["table","td","th"].includes(getNodeName(_))}function isTopLayer(_){return[":popover-open",":modal"].some(d=>{try{return _.matches(d)}catch{return!1}})}function isContainingBlock(_){const d=isWebKit(),g=getComputedStyle$1(_);return g.transform!=="none"||g.perspective!=="none"||(g.containerType?g.containerType!=="normal":!1)||!d&&(g.backdropFilter?g.backdropFilter!=="none":!1)||!d&&(g.filter?g.filter!=="none":!1)||["transform","perspective","filter"].some(b=>(g.willChange||"").includes(b))||["paint","layout","strict","content"].some(b=>(g.contain||"").includes(b))}function getContainingBlock(_){let d=getParentNode(_);for(;isHTMLElement(d)&&!isLastTraversableNode(d);){if(isTopLayer(d))return null;if(isContainingBlock(d))return d;d=getParentNode(d)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(_){return["html","body","#document"].includes(getNodeName(_))}function getComputedStyle$1(_){return getWindow(_).getComputedStyle(_)}function getNodeScroll(_){return isElement(_)?{scrollLeft:_.scrollLeft,scrollTop:_.scrollTop}:{scrollLeft:_.scrollX,scrollTop:_.scrollY}}function getParentNode(_){if(getNodeName(_)==="html")return _;const d=_.assignedSlot||_.parentNode||isShadowRoot(_)&&_.host||getDocumentElement(_);return isShadowRoot(d)?d.host:d}function getNearestOverflowAncestor(_){const d=getParentNode(_);return isLastTraversableNode(d)?_.ownerDocument?_.ownerDocument.body:_.body:isHTMLElement(d)&&isOverflowElement(d)?d:getNearestOverflowAncestor(d)}function getOverflowAncestors(_,d,g){var b;d===void 0&&(d=[]),g===void 0&&(g=!0);const $=getNearestOverflowAncestor(_),j=$===((b=_.ownerDocument)==null?void 0:b.body),_e=getWindow($);return j?d.concat(_e,_e.visualViewport||[],isOverflowElement($)?$:[],_e.frameElement&&g?getOverflowAncestors(_e.frameElement):[]):d.concat($,getOverflowAncestors($,[],g))}function getCssDimensions(_){const d=getComputedStyle$1(_);let g=parseFloat(d.width)||0,b=parseFloat(d.height)||0;const $=isHTMLElement(_),j=$?_.offsetWidth:g,_e=$?_.offsetHeight:b,et=round(g)!==j||round(b)!==_e;return et&&(g=j,b=_e),{width:g,height:b,$:et}}function unwrapElement(_){return isElement(_)?_:_.contextElement}function getScale(_){const d=unwrapElement(_);if(!isHTMLElement(d))return createCoords(1);const g=d.getBoundingClientRect(),{width:b,height:$,$:j}=getCssDimensions(d);let _e=(j?round(g.width):g.width)/b,et=(j?round(g.height):g.height)/$;return(!_e||!Number.isFinite(_e))&&(_e=1),(!et||!Number.isFinite(et))&&(et=1),{x:_e,y:et}}const noOffsets=createCoords(0);function getVisualOffsets(_){const d=getWindow(_);return!isWebKit()||!d.visualViewport?noOffsets:{x:d.visualViewport.offsetLeft,y:d.visualViewport.offsetTop}}function shouldAddVisualOffsets(_,d,g){return d===void 0&&(d=!1),!g||d&&g!==getWindow(_)?!1:d}function getBoundingClientRect(_,d,g,b){d===void 0&&(d=!1),g===void 0&&(g=!1);const $=_.getBoundingClientRect(),j=unwrapElement(_);let _e=createCoords(1);d&&(b?isElement(b)&&(_e=getScale(b)):_e=getScale(_));const et=shouldAddVisualOffsets(j,g,b)?getVisualOffsets(j):createCoords(0);let tt=($.left+et.x)/_e.x,nt=($.top+et.y)/_e.y,it=$.width/_e.x,rt=$.height/_e.y;if(j){const st=getWindow(j),ot=b&&isElement(b)?getWindow(b):b;let at=st,ct=at.frameElement;for(;ct&&b&&ot!==at;){const ht=getScale(ct),ut=ct.getBoundingClientRect(),dt=getComputedStyle$1(ct),ft=ut.left+(ct.clientLeft+parseFloat(dt.paddingLeft))*ht.x,mt=ut.top+(ct.clientTop+parseFloat(dt.paddingTop))*ht.y;tt*=ht.x,nt*=ht.y,it*=ht.x,rt*=ht.y,tt+=ft,nt+=mt,at=getWindow(ct),ct=at.frameElement}}return rectToClientRect({width:it,height:rt,x:tt,y:nt})}function convertOffsetParentRelativeRectToViewportRelativeRect(_){let{elements:d,rect:g,offsetParent:b,strategy:$}=_;const j=$==="fixed",_e=getDocumentElement(b),et=d?isTopLayer(d.floating):!1;if(b===_e||et&&j)return g;let tt={scrollLeft:0,scrollTop:0},nt=createCoords(1);const it=createCoords(0),rt=isHTMLElement(b);if((rt||!rt&&!j)&&((getNodeName(b)!=="body"||isOverflowElement(_e))&&(tt=getNodeScroll(b)),isHTMLElement(b))){const st=getBoundingClientRect(b);nt=getScale(b),it.x=st.x+b.clientLeft,it.y=st.y+b.clientTop}return{width:g.width*nt.x,height:g.height*nt.y,x:g.x*nt.x-tt.scrollLeft*nt.x+it.x,y:g.y*nt.y-tt.scrollTop*nt.y+it.y}}function getClientRects(_){return Array.from(_.getClientRects())}function getWindowScrollBarX(_){return getBoundingClientRect(getDocumentElement(_)).left+getNodeScroll(_).scrollLeft}function getDocumentRect(_){const d=getDocumentElement(_),g=getNodeScroll(_),b=_.ownerDocument.body,$=max(d.scrollWidth,d.clientWidth,b.scrollWidth,b.clientWidth),j=max(d.scrollHeight,d.clientHeight,b.scrollHeight,b.clientHeight);let _e=-g.scrollLeft+getWindowScrollBarX(_);const et=-g.scrollTop;return getComputedStyle$1(b).direction==="rtl"&&(_e+=max(d.clientWidth,b.clientWidth)-$),{width:$,height:j,x:_e,y:et}}function getViewportRect(_,d){const g=getWindow(_),b=getDocumentElement(_),$=g.visualViewport;let j=b.clientWidth,_e=b.clientHeight,et=0,tt=0;if($){j=$.width,_e=$.height;const nt=isWebKit();(!nt||nt&&d==="fixed")&&(et=$.offsetLeft,tt=$.offsetTop)}return{width:j,height:_e,x:et,y:tt}}function getInnerBoundingClientRect(_,d){const g=getBoundingClientRect(_,!0,d==="fixed"),b=g.top+_.clientTop,$=g.left+_.clientLeft,j=isHTMLElement(_)?getScale(_):createCoords(1),_e=_.clientWidth*j.x,et=_.clientHeight*j.y,tt=$*j.x,nt=b*j.y;return{width:_e,height:et,x:tt,y:nt}}function getClientRectFromClippingAncestor(_,d,g){let b;if(d==="viewport")b=getViewportRect(_,g);else if(d==="document")b=getDocumentRect(getDocumentElement(_));else if(isElement(d))b=getInnerBoundingClientRect(d,g);else{const $=getVisualOffsets(_);b={...d,x:d.x-$.x,y:d.y-$.y}}return rectToClientRect(b)}function hasFixedPositionAncestor(_,d){const g=getParentNode(_);return g===d||!isElement(g)||isLastTraversableNode(g)?!1:getComputedStyle$1(g).position==="fixed"||hasFixedPositionAncestor(g,d)}function getClippingElementAncestors(_,d){const g=d.get(_);if(g)return g;let b=getOverflowAncestors(_,[],!1).filter(et=>isElement(et)&&getNodeName(et)!=="body"),$=null;const j=getComputedStyle$1(_).position==="fixed";let _e=j?getParentNode(_):_;for(;isElement(_e)&&!isLastTraversableNode(_e);){const et=getComputedStyle$1(_e),tt=isContainingBlock(_e);!tt&&et.position==="fixed"&&($=null),(j?!tt&&!$:!tt&&et.position==="static"&&!!$&&["absolute","fixed"].includes($.position)||isOverflowElement(_e)&&!tt&&hasFixedPositionAncestor(_,_e))?b=b.filter(it=>it!==_e):$=et,_e=getParentNode(_e)}return d.set(_,b),b}function getClippingRect(_){let{element:d,boundary:g,rootBoundary:b,strategy:$}=_;const _e=[...g==="clippingAncestors"?isTopLayer(d)?[]:getClippingElementAncestors(d,this._c):[].concat(g),b],et=_e[0],tt=_e.reduce((nt,it)=>{const rt=getClientRectFromClippingAncestor(d,it,$);return nt.top=max(rt.top,nt.top),nt.right=min(rt.right,nt.right),nt.bottom=min(rt.bottom,nt.bottom),nt.left=max(rt.left,nt.left),nt},getClientRectFromClippingAncestor(d,et,$));return{width:tt.right-tt.left,height:tt.bottom-tt.top,x:tt.left,y:tt.top}}function getDimensions(_){const{width:d,height:g}=getCssDimensions(_);return{width:d,height:g}}function getRectRelativeToOffsetParent(_,d,g){const b=isHTMLElement(d),$=getDocumentElement(d),j=g==="fixed",_e=getBoundingClientRect(_,!0,j,d);let et={scrollLeft:0,scrollTop:0};const tt=createCoords(0);if(b||!b&&!j)if((getNodeName(d)!=="body"||isOverflowElement($))&&(et=getNodeScroll(d)),b){const rt=getBoundingClientRect(d,!0,j,d);tt.x=rt.x+d.clientLeft,tt.y=rt.y+d.clientTop}else $&&(tt.x=getWindowScrollBarX($));const nt=_e.left+et.scrollLeft-tt.x,it=_e.top+et.scrollTop-tt.y;return{x:nt,y:it,width:_e.width,height:_e.height}}function isStaticPositioned(_){return getComputedStyle$1(_).position==="static"}function getTrueOffsetParent(_,d){return!isHTMLElement(_)||getComputedStyle$1(_).position==="fixed"?null:d?d(_):_.offsetParent}function getOffsetParent(_,d){const g=getWindow(_);if(isTopLayer(_))return g;if(!isHTMLElement(_)){let $=getParentNode(_);for(;$&&!isLastTraversableNode($);){if(isElement($)&&!isStaticPositioned($))return $;$=getParentNode($)}return g}let b=getTrueOffsetParent(_,d);for(;b&&isTableElement(b)&&isStaticPositioned(b);)b=getTrueOffsetParent(b,d);return b&&isLastTraversableNode(b)&&isStaticPositioned(b)&&!isContainingBlock(b)?g:b||getContainingBlock(_)||g}const getElementRects=async function(_){const d=this.getOffsetParent||getOffsetParent,g=this.getDimensions,b=await g(_.floating);return{reference:getRectRelativeToOffsetParent(_.reference,await d(_.floating),_.strategy),floating:{x:0,y:0,width:b.width,height:b.height}}};function isRTL(_){return getComputedStyle$1(_).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(_,d){let g=null,b;const $=getDocumentElement(_);function j(){var et;clearTimeout(b),(et=g)==null||et.disconnect(),g=null}function _e(et,tt){et===void 0&&(et=!1),tt===void 0&&(tt=1),j();const{left:nt,top:it,width:rt,height:st}=_.getBoundingClientRect();if(et||d(),!rt||!st)return;const ot=floor(it),at=floor($.clientWidth-(nt+rt)),ct=floor($.clientHeight-(it+st)),ht=floor(nt),dt={rootMargin:-ot+"px "+-at+"px "+-ct+"px "+-ht+"px",threshold:max(0,min(1,tt))||1};let ft=!0;function mt(pt){const Ot=pt[0].intersectionRatio;if(Ot!==tt){if(!ft)return _e();Ot?_e(!1,Ot):b=setTimeout(()=>{_e(!1,1e-7)},1e3)}ft=!1}try{g=new IntersectionObserver(mt,{...dt,root:$.ownerDocument})}catch{g=new IntersectionObserver(mt,dt)}g.observe(_)}return _e(!0),j}function autoUpdate(_,d,g,b){b===void 0&&(b={});const{ancestorScroll:$=!0,ancestorResize:j=!0,elementResize:_e=typeof ResizeObserver=="function",layoutShift:et=typeof IntersectionObserver=="function",animationFrame:tt=!1}=b,nt=unwrapElement(_),it=$||j?[...nt?getOverflowAncestors(nt):[],...getOverflowAncestors(d)]:[];it.forEach(ut=>{$&&ut.addEventListener("scroll",g,{passive:!0}),j&&ut.addEventListener("resize",g)});const rt=nt&&et?observeMove(nt,g):null;let st=-1,ot=null;_e&&(ot=new ResizeObserver(ut=>{let[dt]=ut;dt&&dt.target===nt&&ot&&(ot.unobserve(d),cancelAnimationFrame(st),st=requestAnimationFrame(()=>{var ft;(ft=ot)==null||ft.observe(d)})),g()}),nt&&!tt&&ot.observe(nt),ot.observe(d));let at,ct=tt?getBoundingClientRect(_):null;tt&&ht();function ht(){const ut=getBoundingClientRect(_);ct&&(ut.x!==ct.x||ut.y!==ct.y||ut.width!==ct.width||ut.height!==ct.height)&&g(),ct=ut,at=requestAnimationFrame(ht)}return g(),()=>{var ut;it.forEach(dt=>{$&&dt.removeEventListener("scroll",g),j&&dt.removeEventListener("resize",g)}),rt==null||rt(),(ut=ot)==null||ut.disconnect(),ot=null,tt&&cancelAnimationFrame(at)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(_,d,g)=>{const b=new Map,$={platform,...g},j={...$.platform,_c:b};return computePosition$1(_,d,{...$,platform:j})};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(_,d){if(_===d)return!0;if(typeof _!=typeof d)return!1;if(typeof _=="function"&&_.toString()===d.toString())return!0;let g,b,$;if(_&&d&&typeof _=="object"){if(Array.isArray(_)){if(g=_.length,g!==d.length)return!1;for(b=g;b--!==0;)if(!deepEqual(_[b],d[b]))return!1;return!0}if($=Object.keys(_),g=$.length,g!==Object.keys(d).length)return!1;for(b=g;b--!==0;)if(!{}.hasOwnProperty.call(d,$[b]))return!1;for(b=g;b--!==0;){const j=$[b];if(!(j==="_owner"&&_.$$typeof)&&!deepEqual(_[j],d[j]))return!1}return!0}return _!==_&&d!==d}function getDPR(_){return typeof window>"u"?1:(_.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(_,d){const g=getDPR(_);return Math.round(d*g)/g}function useLatestRef(_){const d=reactExports.useRef(_);return index(()=>{d.current=_}),d}function useFloating(_){_===void 0&&(_={});const{placement:d="bottom",strategy:g="absolute",middleware:b=[],platform:$,elements:{reference:j,floating:_e}={},transform:et=!0,whileElementsMounted:tt,open:nt}=_,[it,rt]=reactExports.useState({x:0,y:0,strategy:g,placement:d,middlewareData:{},isPositioned:!1}),[st,ot]=reactExports.useState(b);deepEqual(st,b)||ot(b);const[at,ct]=reactExports.useState(null),[ht,ut]=reactExports.useState(null),dt=reactExports.useCallback(Tt=>{Tt!==Ot.current&&(Ot.current=Tt,ct(Tt))},[]),ft=reactExports.useCallback(Tt=>{Tt!==gt.current&&(gt.current=Tt,ut(Tt))},[]),mt=j||at,pt=_e||ht,Ot=reactExports.useRef(null),gt=reactExports.useRef(null),yt=reactExports.useRef(it),St=tt!=null,vt=useLatestRef(tt),wt=useLatestRef($),xt=reactExports.useCallback(()=>{if(!Ot.current||!gt.current)return;const Tt={placement:d,strategy:g,middleware:st};wt.current&&(Tt.platform=wt.current),computePosition(Ot.current,gt.current,Tt).then(_t=>{const Ct={..._t,isPositioned:!0};kt.current&&!deepEqual(yt.current,Ct)&&(yt.current=Ct,reactDomExports.flushSync(()=>{rt(Ct)}))})},[st,d,g,wt]);index(()=>{nt===!1&&yt.current.isPositioned&&(yt.current.isPositioned=!1,rt(Tt=>({...Tt,isPositioned:!1})))},[nt]);const kt=reactExports.useRef(!1);index(()=>(kt.current=!0,()=>{kt.current=!1}),[]),index(()=>{if(mt&&(Ot.current=mt),pt&&(gt.current=pt),mt&&pt){if(vt.current)return vt.current(mt,pt,xt);xt()}},[mt,pt,xt,vt,St]);const bt=reactExports.useMemo(()=>({reference:Ot,floating:gt,setReference:dt,setFloating:ft}),[dt,ft]),Et=reactExports.useMemo(()=>({reference:mt,floating:pt}),[mt,pt]),At=reactExports.useMemo(()=>{const Tt={position:g,left:0,top:0};if(!Et.floating)return Tt;const _t=roundByDPR(Et.floating,it.x),Ct=roundByDPR(Et.floating,it.y);return et?{...Tt,transform:"translate("+_t+"px, "+Ct+"px)",...getDPR(Et.floating)>=1.5&&{willChange:"transform"}}:{position:g,left:_t,top:Ct}},[g,et,Et.floating,it.x,it.y]);return reactExports.useMemo(()=>({...it,update:xt,refs:bt,elements:Et,floatingStyles:At}),[it,xt,bt,Et,At])}const arrow$1=_=>{function d(g){return{}.hasOwnProperty.call(g,"current")}return{name:"arrow",options:_,fn(g){const{element:b,padding:$}=typeof _=="function"?_(g):_;return b&&d(b)?b.current!=null?arrow$2({element:b.current,padding:$}).fn(g):{}:b?arrow$2({element:b,padding:$}).fn(g):{}}}},offset=(_,d)=>({...offset$1(_),options:[_,d]}),shift=(_,d)=>({...shift$1(_),options:[_,d]}),limitShift=(_,d)=>({...limitShift$1(_),options:[_,d]}),flip=(_,d)=>({...flip$1(_),options:[_,d]}),size=(_,d)=>({...size$1(_),options:[_,d]}),hide=(_,d)=>({...hide$1(_),options:[_,d]}),arrow=(_,d)=>({...arrow$1(_),options:[_,d]});var NAME$2="Arrow",Arrow$1=reactExports.forwardRef((_,d)=>{const{children:g,width:b=10,height:$=5,...j}=_;return jsxRuntimeExports.jsx(Primitive.svg,{...j,ref:d,width:b,height:$,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:_.asChild?g:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$2;var Root$2=Arrow$1;function useSize(_){const[d,g]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(_){g({width:_.offsetWidth,height:_.offsetHeight});const b=new ResizeObserver($=>{if(!Array.isArray($)||!$.length)return;const j=$[0];let _e,et;if("borderBoxSize"in j){const tt=j.borderBoxSize,nt=Array.isArray(tt)?tt[0]:tt;_e=nt.inlineSize,et=nt.blockSize}else _e=_.offsetWidth,et=_.offsetHeight;g({width:_e,height:et})});return b.observe(_,{box:"border-box"}),()=>b.unobserve(_)}else g(void 0)},[_]),d}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=_=>{const{__scopePopper:d,children:g}=_,[b,$]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:d,anchor:b,onAnchorChange:$,children:g})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME="PopperAnchor",PopperAnchor=reactExports.forwardRef((_,d)=>{const{__scopePopper:g,virtualRef:b,...$}=_,j=usePopperContext(ANCHOR_NAME,g),_e=reactExports.useRef(null),et=useComposedRefs(d,_e);return reactExports.useEffect(()=>{j.onAnchorChange((b==null?void 0:b.current)||_e.current)}),b?null:jsxRuntimeExports.jsx(Primitive.div,{...$,ref:et})});PopperAnchor.displayName=ANCHOR_NAME;var CONTENT_NAME$1="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$1),PopperContent=reactExports.forwardRef((_,d)=>{var Dt,Rt,Ut,Bt,jt,Wt;const{__scopePopper:g,side:b="bottom",sideOffset:$=0,align:j="center",alignOffset:_e=0,arrowPadding:et=0,avoidCollisions:tt=!0,collisionBoundary:nt=[],collisionPadding:it=0,sticky:rt="partial",hideWhenDetached:st=!1,updatePositionStrategy:ot="optimized",onPlaced:at,...ct}=_,ht=usePopperContext(CONTENT_NAME$1,g),[ut,dt]=reactExports.useState(null),ft=useComposedRefs(d,Gt=>dt(Gt)),[mt,pt]=reactExports.useState(null),Ot=useSize(mt),gt=(Ot==null?void 0:Ot.width)??0,yt=(Ot==null?void 0:Ot.height)??0,St=b+(j!=="center"?"-"+j:""),vt=typeof it=="number"?it:{top:0,right:0,bottom:0,left:0,...it},wt=Array.isArray(nt)?nt:[nt],xt=wt.length>0,kt={padding:vt,boundary:wt.filter(isNotNull),altBoundary:xt},{refs:bt,floatingStyles:Et,placement:At,isPositioned:Tt,middlewareData:_t}=useFloating({strategy:"fixed",placement:St,whileElementsMounted:(...Gt)=>autoUpdate(...Gt,{animationFrame:ot==="always"}),elements:{reference:ht.anchor},middleware:[offset({mainAxis:$+yt,alignmentAxis:_e}),tt&&shift({mainAxis:!0,crossAxis:!1,limiter:rt==="partial"?limitShift():void 0,...kt}),tt&&flip({...kt}),size({...kt,apply:({elements:Gt,rects:Yt,availableWidth:Mt,availableHeight:Qt})=>{const{width:zt,height:qt}=Yt.reference,Vt=Gt.floating.style;Vt.setProperty("--radix-popper-available-width",`${Mt}px`),Vt.setProperty("--radix-popper-available-height",`${Qt}px`),Vt.setProperty("--radix-popper-anchor-width",`${zt}px`),Vt.setProperty("--radix-popper-anchor-height",`${qt}px`)}}),mt&&arrow({element:mt,padding:et}),transformOrigin({arrowWidth:gt,arrowHeight:yt}),st&&hide({strategy:"referenceHidden",...kt})]}),[Ct,Pt]=getSideAndAlignFromPlacement(At),Nt=useCallbackRef$1(at);useLayoutEffect2(()=>{Tt&&(Nt==null||Nt())},[Tt,Nt]);const $t=(Dt=_t.arrow)==null?void 0:Dt.x,Zt=(Rt=_t.arrow)==null?void 0:Rt.y,Ft=((Ut=_t.arrow)==null?void 0:Ut.centerOffset)!==0,[It,Lt]=reactExports.useState();return useLayoutEffect2(()=>{ut&&Lt(window.getComputedStyle(ut).zIndex)},[ut]),jsxRuntimeExports.jsx("div",{ref:bt.setFloating,"data-radix-popper-content-wrapper":"",style:{...Et,transform:Tt?Et.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:It,"--radix-popper-transform-origin":[(Bt=_t.transformOrigin)==null?void 0:Bt.x,(jt=_t.transformOrigin)==null?void 0:jt.y].join(" "),...((Wt=_t.hide)==null?void 0:Wt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:_.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:g,placedSide:Ct,onArrowChange:pt,arrowX:$t,arrowY:Zt,shouldHideArrow:Ft,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":Ct,"data-align":Pt,...ct,ref:ft,style:{...ct.style,animation:Tt?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$1;var ARROW_NAME$1="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(d,g){const{__scopePopper:b,...$}=d,j=useContentContext(ARROW_NAME$1,b),_e=OPPOSITE_SIDE[j.placedSide];return jsxRuntimeExports.jsx("span",{ref:j.onArrowChange,style:{position:"absolute",left:j.arrowX,top:j.arrowY,[_e]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[j.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[j.placedSide],visibility:j.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$2,{...$,ref:g,style:{...$.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$1;function isNotNull(_){return _!==null}var transformOrigin=_=>({name:"transformOrigin",options:_,fn(d){var ht,ut,dt;const{placement:g,rects:b,middlewareData:$}=d,_e=((ht=$.arrow)==null?void 0:ht.centerOffset)!==0,et=_e?0:_.arrowWidth,tt=_e?0:_.arrowHeight,[nt,it]=getSideAndAlignFromPlacement(g),rt={start:"0%",center:"50%",end:"100%"}[it],st=(((ut=$.arrow)==null?void 0:ut.x)??0)+et/2,ot=(((dt=$.arrow)==null?void 0:dt.y)??0)+tt/2;let at="",ct="";return nt==="bottom"?(at=_e?rt:`${st}px`,ct=`${-tt}px`):nt==="top"?(at=_e?rt:`${st}px`,ct=`${b.floating.height+tt}px`):nt==="right"?(at=`${-tt}px`,ct=_e?rt:`${ot}px`):nt==="left"&&(at=`${b.floating.width+tt}px`,ct=_e?rt:`${ot}px`),{data:{x:at,y:ct}}}});function getSideAndAlignFromPlacement(_){const[d,g="center"]=_.split("-");return[d,g]}var Root2$1=Popper,Anchor=PopperAnchor,Content=PopperContent,Arrow=PopperArrow,PORTAL_NAME$1="Portal",Portal$1=reactExports.forwardRef((_,d)=>{var et;const{container:g,...b}=_,[$,j]=reactExports.useState(!1);useLayoutEffect2(()=>j(!0),[]);const _e=g||$&&((et=globalThis==null?void 0:globalThis.document)==null?void 0:et.body);return _e?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...b,ref:d}),_e):null});Portal$1.displayName=PORTAL_NAME$1;function useControllableState({prop:_,defaultProp:d,onChange:g=()=>{}}){const[b,$]=useUncontrolledState({defaultProp:d,onChange:g}),j=_!==void 0,_e=j?_:b,et=useCallbackRef$1(g),tt=reactExports.useCallback(nt=>{if(j){const rt=typeof nt=="function"?nt(_):nt;rt!==_&&et(rt)}else $(nt)},[j,_,$,et]);return[_e,tt]}function useUncontrolledState({defaultProp:_,onChange:d}){const g=reactExports.useState(_),[b]=g,$=reactExports.useRef(b),j=useCallbackRef$1(d);return reactExports.useEffect(()=>{$.current!==b&&(j(b),$.current=b)},[b,$,j]),g}function usePrevious(_){const d=reactExports.useRef({value:_,previous:_});return reactExports.useMemo(()=>(d.current.value!==_&&(d.current.previous=d.current.value,d.current.value=_),d.current.previous),[_])}var NAME$1="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((_,d)=>jsxRuntimeExports.jsx(Primitive.span,{..._,ref:d,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",..._.style}}));VisuallyHidden.displayName=NAME$1;var getDefaultParent=function(_){if(typeof document>"u")return null;var d=Array.isArray(_)?_[0]:_;return d.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(_){return _&&(_.host||unwrapHost(_.parentNode))},correctTargets=function(_,d){return d.map(function(g){if(_.contains(g))return g;var b=unwrapHost(g);return b&&_.contains(b)?b:(console.error("aria-hidden",g,"in not contained inside",_,". Doing nothing"),null)}).filter(function(g){return!!g})},applyAttributeToOthers=function(_,d,g,b){var $=correctTargets(d,Array.isArray(_)?_:[_]);markerMap[g]||(markerMap[g]=new WeakMap);var j=markerMap[g],_e=[],et=new Set,tt=new Set($),nt=function(rt){!rt||et.has(rt)||(et.add(rt),nt(rt.parentNode))};$.forEach(nt);var it=function(rt){!rt||tt.has(rt)||Array.prototype.forEach.call(rt.children,function(st){if(et.has(st))it(st);else try{var ot=st.getAttribute(b),at=ot!==null&&ot!=="false",ct=(counterMap.get(st)||0)+1,ht=(j.get(st)||0)+1;counterMap.set(st,ct),j.set(st,ht),_e.push(st),ct===1&&at&&uncontrolledNodes.set(st,!0),ht===1&&st.setAttribute(g,"true"),at||st.setAttribute(b,"true")}catch(ut){console.error("aria-hidden: cannot operate on ",st,ut)}})};return it(d),et.clear(),lockCount++,function(){_e.forEach(function(rt){var st=counterMap.get(rt)-1,ot=j.get(rt)-1;counterMap.set(rt,st),j.set(rt,ot),st||(uncontrolledNodes.has(rt)||rt.removeAttribute(b),uncontrolledNodes.delete(rt)),ot||rt.removeAttribute(g)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(_,d,g){g===void 0&&(g="data-aria-hidden");var b=Array.from(Array.isArray(_)?_:[_]),$=d||getDefaultParent(_);return $?(b.push.apply(b,Array.from($.querySelectorAll("[aria-live]"))),applyAttributeToOthers(b,$,g,"aria-hidden")):function(){return null}},zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(_,d){return typeof _=="function"?_(d):_&&(_.current=d),_}function useCallbackRef(_,d){var g=reactExports.useState(function(){return{value:_,callback:d,facade:{get current(){return g.value},set current(b){var $=g.value;$!==b&&(g.value=b,g.callback(b,$))}}}})[0];return g.callback=d,g.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(_,d){var g=useCallbackRef(d||null,function(b){return _.forEach(function($){return assignRef($,b)})});return useIsomorphicLayoutEffect(function(){var b=currentValues.get(g);if(b){var $=new Set(b),j=new Set(_),_e=g.current;$.forEach(function(et){j.has(et)||assignRef(et,null)}),j.forEach(function(et){$.has(et)||assignRef(et,_e)})}currentValues.set(g,_)},[_]),g}function ItoI(_){return _}function innerCreateMedium(_,d){d===void 0&&(d=ItoI);var g=[],b=!1,$={read:function(){if(b)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return g.length?g[g.length-1]:_},useMedium:function(j){var _e=d(j,b);return g.push(_e),function(){g=g.filter(function(et){return et!==_e})}},assignSyncMedium:function(j){for(b=!0;g.length;){var _e=g;g=[],_e.forEach(j)}g={push:function(et){return j(et)},filter:function(){return g}}},assignMedium:function(j){b=!0;var _e=[];if(g.length){var et=g;g=[],et.forEach(j),_e=g}var tt=function(){var it=_e;_e=[],it.forEach(j)},nt=function(){return Promise.resolve().then(tt)};nt(),g={push:function(it){_e.push(it),nt()},filter:function(it){return _e=_e.filter(it),g}}}};return $}function createSidecarMedium(_){_===void 0&&(_={});var d=innerCreateMedium(null);return d.options=__assign({async:!0,ssr:!1},_),d}var SideCar$1=function(_){var d=_.sideCar,g=__rest(_,["sideCar"]);if(!d)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var b=d.read();if(!b)throw new Error("Sidecar medium not found");return reactExports.createElement(b,__assign({},g))};SideCar$1.isSideCarExport=!0;function exportSidecar(_,d){return _.useMedium(d),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll$1=reactExports.forwardRef(function(_,d){var g=reactExports.useRef(null),b=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),$=b[0],j=b[1],_e=_.forwardProps,et=_.children,tt=_.className,nt=_.removeScrollBar,it=_.enabled,rt=_.shards,st=_.sideCar,ot=_.noIsolation,at=_.inert,ct=_.allowPinchZoom,ht=_.as,ut=ht===void 0?"div":ht,dt=_.gapMode,ft=__rest(_,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),mt=st,pt=useMergeRefs([g,d]),Ot=__assign(__assign({},ft),$);return reactExports.createElement(reactExports.Fragment,null,it&&reactExports.createElement(mt,{sideCar:effectCar,removeScrollBar:nt,shards:rt,noIsolation:ot,inert:at,setCallbacks:j,allowPinchZoom:!!ct,lockRef:g,gapMode:dt}),_e?reactExports.cloneElement(reactExports.Children.only(et),__assign(__assign({},Ot),{ref:pt})):reactExports.createElement(ut,__assign({},Ot,{className:tt,ref:pt}),et))});RemoveScroll$1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll$1.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var currentNonce,getNonce=function(){if(currentNonce)return currentNonce;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var _=document.createElement("style");_.type="text/css";var d=getNonce();return d&&_.setAttribute("nonce",d),_}function injectStyles(_,d){_.styleSheet?_.styleSheet.cssText=d:_.appendChild(document.createTextNode(d))}function insertStyleTag(_){var d=document.head||document.getElementsByTagName("head")[0];d.appendChild(_)}var stylesheetSingleton=function(){var _=0,d=null;return{add:function(g){_==0&&(d=makeStyleTag())&&(injectStyles(d,g),insertStyleTag(d)),_++},remove:function(){_--,!_&&d&&(d.parentNode&&d.parentNode.removeChild(d),d=null)}}},styleHookSingleton=function(){var _=stylesheetSingleton();return function(d,g){reactExports.useEffect(function(){return _.add(d),function(){_.remove()}},[d&&g])}},styleSingleton=function(){var _=styleHookSingleton(),d=function(g){var b=g.styles,$=g.dynamic;return _(b,$),null};return d},zeroGap={left:0,top:0,right:0,gap:0},parse=function(_){return parseInt(_||"",10)||0},getOffset=function(_){var d=window.getComputedStyle(document.body),g=d[_==="padding"?"paddingLeft":"marginLeft"],b=d[_==="padding"?"paddingTop":"marginTop"],$=d[_==="padding"?"paddingRight":"marginRight"];return[parse(g),parse(b),parse($)]},getGapWidth=function(_){if(_===void 0&&(_="margin"),typeof window>"u")return zeroGap;var d=getOffset(_),g=document.documentElement.clientWidth,b=window.innerWidth;return{left:d[0],top:d[1],right:d[2],gap:Math.max(0,b-g+d[2]-d[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(_,d,g,b){var $=_.left,j=_.top,_e=_.right,et=_.gap;return g===void 0&&(g="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(b,`;
   padding-right: `).concat(et,"px ").concat(b,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(b,`;
    overscroll-behavior: contain;
    `).concat([d&&"position: relative ".concat(b,";"),g==="margin"&&`
    padding-left: `.concat($,`px;
    padding-top: `).concat(j,`px;
    padding-right: `).concat(_e,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(et,"px ").concat(b,`;
    `),g==="padding"&&"padding-right: ".concat(et,"px ").concat(b,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(et,"px ").concat(b,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(et,"px ").concat(b,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(b,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(b,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(et,`px;
  }
`)},getCurrentUseCounter=function(){var _=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(_)?_:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var _=getCurrentUseCounter()-1;_<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,_.toString())}},[])},RemoveScrollBar=function(_){var d=_.noRelative,g=_.noImportant,b=_.gapMode,$=b===void 0?"margin":b;useLockAttribute();var j=reactExports.useMemo(function(){return getGapWidth($)},[$]);return reactExports.createElement(Style,{styles:getStyles(j,!d,$,g?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(_){return _.tagName==="TEXTAREA"},elementCanBeScrolled=function(_,d){var g=window.getComputedStyle(_);return g[d]!=="hidden"&&!(g.overflowY===g.overflowX&&!alwaysContainsScroll(_)&&g[d]==="visible")},elementCouldBeVScrolled=function(_){return elementCanBeScrolled(_,"overflowY")},elementCouldBeHScrolled=function(_){return elementCanBeScrolled(_,"overflowX")},locationCouldBeScrolled=function(_,d){var g=d.ownerDocument,b=d;do{typeof ShadowRoot<"u"&&b instanceof ShadowRoot&&(b=b.host);var $=elementCouldBeScrolled(_,b);if($){var j=getScrollVariables(_,b),_e=j[1],et=j[2];if(_e>et)return!0}b=b.parentNode}while(b&&b!==g.body);return!1},getVScrollVariables=function(_){var d=_.scrollTop,g=_.scrollHeight,b=_.clientHeight;return[d,g,b]},getHScrollVariables=function(_){var d=_.scrollLeft,g=_.scrollWidth,b=_.clientWidth;return[d,g,b]},elementCouldBeScrolled=function(_,d){return _==="v"?elementCouldBeVScrolled(d):elementCouldBeHScrolled(d)},getScrollVariables=function(_,d){return _==="v"?getVScrollVariables(d):getHScrollVariables(d)},getDirectionFactor=function(_,d){return _==="h"&&d==="rtl"?-1:1},handleScroll=function(_,d,g,b,$){var j=getDirectionFactor(_,window.getComputedStyle(d).direction),_e=j*b,et=g.target,tt=d.contains(et),nt=!1,it=_e>0,rt=0,st=0;do{var ot=getScrollVariables(_,et),at=ot[0],ct=ot[1],ht=ot[2],ut=ct-ht-j*at;(at||ut)&&elementCouldBeScrolled(_,et)&&(rt+=ut,st+=at),et instanceof ShadowRoot?et=et.host:et=et.parentNode}while(!tt&&et!==document.body||tt&&(d.contains(et)||d===et));return(it&&($&&Math.abs(rt)<1||!$&&_e>rt)||!it&&($&&Math.abs(st)<1||!$&&-_e>st))&&(nt=!0),nt},getTouchXY=function(_){return"changedTouches"in _?[_.changedTouches[0].clientX,_.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(_){return[_.deltaX,_.deltaY]},extractRef=function(_){return _&&"current"in _?_.current:_},deltaCompare=function(_,d){return _[0]===d[0]&&_[1]===d[1]},generateStyle=function(_){return`
  .block-interactivity-`.concat(_,` {pointer-events: none;}
  .allow-interactivity-`).concat(_,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(_){var d=reactExports.useRef([]),g=reactExports.useRef([0,0]),b=reactExports.useRef(),$=reactExports.useState(idCounter++)[0],j=reactExports.useState(styleSingleton)[0],_e=reactExports.useRef(_);reactExports.useEffect(function(){_e.current=_},[_]),reactExports.useEffect(function(){if(_.inert){document.body.classList.add("block-interactivity-".concat($));var ct=__spreadArray([_.lockRef.current],(_.shards||[]).map(extractRef),!0).filter(Boolean);return ct.forEach(function(ht){return ht.classList.add("allow-interactivity-".concat($))}),function(){document.body.classList.remove("block-interactivity-".concat($)),ct.forEach(function(ht){return ht.classList.remove("allow-interactivity-".concat($))})}}},[_.inert,_.lockRef.current,_.shards]);var et=reactExports.useCallback(function(ct,ht){if("touches"in ct&&ct.touches.length===2)return!_e.current.allowPinchZoom;var ut=getTouchXY(ct),dt=g.current,ft="deltaX"in ct?ct.deltaX:dt[0]-ut[0],mt="deltaY"in ct?ct.deltaY:dt[1]-ut[1],pt,Ot=ct.target,gt=Math.abs(ft)>Math.abs(mt)?"h":"v";if("touches"in ct&&gt==="h"&&Ot.type==="range")return!1;var yt=locationCouldBeScrolled(gt,Ot);if(!yt)return!0;if(yt?pt=gt:(pt=gt==="v"?"h":"v",yt=locationCouldBeScrolled(gt,Ot)),!yt)return!1;if(!b.current&&"changedTouches"in ct&&(ft||mt)&&(b.current=pt),!pt)return!0;var St=b.current||pt;return handleScroll(St,ht,ct,St==="h"?ft:mt,!0)},[]),tt=reactExports.useCallback(function(ct){var ht=ct;if(!(!lockStack.length||lockStack[lockStack.length-1]!==j)){var ut="deltaY"in ht?getDeltaXY(ht):getTouchXY(ht),dt=d.current.filter(function(pt){return pt.name===ht.type&&(pt.target===ht.target||ht.target===pt.shadowParent)&&deltaCompare(pt.delta,ut)})[0];if(dt&&dt.should){ht.cancelable&&ht.preventDefault();return}if(!dt){var ft=(_e.current.shards||[]).map(extractRef).filter(Boolean).filter(function(pt){return pt.contains(ht.target)}),mt=ft.length>0?et(ht,ft[0]):!_e.current.noIsolation;mt&&ht.cancelable&&ht.preventDefault()}}},[]),nt=reactExports.useCallback(function(ct,ht,ut,dt){var ft={name:ct,delta:ht,target:ut,should:dt,shadowParent:getOutermostShadowParent(ut)};d.current.push(ft),setTimeout(function(){d.current=d.current.filter(function(mt){return mt!==ft})},1)},[]),it=reactExports.useCallback(function(ct){g.current=getTouchXY(ct),b.current=void 0},[]),rt=reactExports.useCallback(function(ct){nt(ct.type,getDeltaXY(ct),ct.target,et(ct,_.lockRef.current))},[]),st=reactExports.useCallback(function(ct){nt(ct.type,getTouchXY(ct),ct.target,et(ct,_.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(j),_.setCallbacks({onScrollCapture:rt,onWheelCapture:rt,onTouchMoveCapture:st}),document.addEventListener("wheel",tt,nonPassive),document.addEventListener("touchmove",tt,nonPassive),document.addEventListener("touchstart",it,nonPassive),function(){lockStack=lockStack.filter(function(ct){return ct!==j}),document.removeEventListener("wheel",tt,nonPassive),document.removeEventListener("touchmove",tt,nonPassive),document.removeEventListener("touchstart",it,nonPassive)}},[]);var ot=_.removeScrollBar,at=_.inert;return reactExports.createElement(reactExports.Fragment,null,at?reactExports.createElement(j,{styles:generateStyle($)}):null,ot?reactExports.createElement(RemoveScrollBar,{gapMode:_.gapMode}):null)}function getOutermostShadowParent(_){for(var d=null;_!==null;)_ instanceof ShadowRoot&&(d=_.host,_=_.host),_=_.parentNode;return d}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(_,d){return reactExports.createElement(RemoveScroll$1,__assign({},_,{ref:d,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll$1.classNames;const RemoveScroll=ReactRemoveScroll;var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection,useCollection,createCollectionScope]=createCollection(SELECT_NAME),[createSelectContext,createSelectScope]=createContextScope(SELECT_NAME,[createCollectionScope,createPopperScope]),usePopperScope=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=_=>{const{__scopeSelect:d,children:g,open:b,defaultOpen:$,onOpenChange:j,value:_e,defaultValue:et,onValueChange:tt,dir:nt,name:it,autoComplete:rt,disabled:st,required:ot}=_,at=usePopperScope(d),[ct,ht]=reactExports.useState(null),[ut,dt]=reactExports.useState(null),[ft,mt]=reactExports.useState(!1),pt=useDirection(nt),[Ot=!1,gt]=useControllableState({prop:b,defaultProp:$,onChange:j}),[yt,St]=useControllableState({prop:_e,defaultProp:et,onChange:tt}),vt=reactExports.useRef(null),wt=ct?!!ct.closest("form"):!0,[xt,kt]=reactExports.useState(new Set),bt=Array.from(xt).map(Et=>Et.props.value).join(";");return jsxRuntimeExports.jsx(Root2$1,{...at,children:jsxRuntimeExports.jsxs(SelectProvider,{required:ot,scope:d,trigger:ct,onTriggerChange:ht,valueNode:ut,onValueNodeChange:dt,valueNodeHasChildren:ft,onValueNodeHasChildrenChange:mt,contentId:useId(),value:yt,onValueChange:St,open:Ot,onOpenChange:gt,dir:pt,triggerPointerDownPosRef:vt,disabled:st,children:[jsxRuntimeExports.jsx(Collection.Provider,{scope:d,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:_.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(Et=>{kt(At=>new Set(At).add(Et))},[]),onNativeOptionRemove:reactExports.useCallback(Et=>{kt(At=>{const Tt=new Set(At);return Tt.delete(Et),Tt})},[]),children:g})}),wt?jsxRuntimeExports.jsxs(BubbleSelect,{"aria-hidden":!0,required:ot,tabIndex:-1,name:it,autoComplete:rt,value:yt,onChange:Et=>St(Et.target.value),disabled:st,children:[yt===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(xt)]},bt):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,disabled:b=!1,...$}=_,j=usePopperScope(g),_e=useSelectContext(TRIGGER_NAME,g),et=_e.disabled||b,tt=useComposedRefs(d,_e.onTriggerChange),nt=useCollection(g),[it,rt,st]=useTypeaheadSearch(at=>{const ct=nt().filter(dt=>!dt.disabled),ht=ct.find(dt=>dt.value===_e.value),ut=findNextItem(ct,at,ht);ut!==void 0&&_e.onValueChange(ut.value)}),ot=()=>{et||(_e.onOpenChange(!0),st())};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...j,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"combobox","aria-controls":_e.contentId,"aria-expanded":_e.open,"aria-required":_e.required,"aria-autocomplete":"none",dir:_e.dir,"data-state":_e.open?"open":"closed",disabled:et,"data-disabled":et?"":void 0,"data-placeholder":shouldShowPlaceholder(_e.value)?"":void 0,...$,ref:tt,onClick:composeEventHandlers($.onClick,at=>{at.currentTarget.focus()}),onPointerDown:composeEventHandlers($.onPointerDown,at=>{const ct=at.target;ct.hasPointerCapture(at.pointerId)&&ct.releasePointerCapture(at.pointerId),at.button===0&&at.ctrlKey===!1&&(ot(),_e.triggerPointerDownPosRef.current={x:Math.round(at.pageX),y:Math.round(at.pageY)},at.preventDefault())}),onKeyDown:composeEventHandlers($.onKeyDown,at=>{const ct=it.current!=="";!(at.ctrlKey||at.altKey||at.metaKey)&&at.key.length===1&&rt(at.key),!(ct&&at.key===" ")&&OPEN_KEYS.includes(at.key)&&(ot(),at.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME;var VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,className:b,style:$,children:j,placeholder:_e="",...et}=_,tt=useSelectContext(VALUE_NAME,g),{onValueNodeHasChildrenChange:nt}=tt,it=j!==void 0,rt=useComposedRefs(d,tt.onValueNodeChange);return useLayoutEffect2(()=>{nt(it)},[nt,it]),jsxRuntimeExports.jsx(Primitive.span,{...et,ref:rt,style:{pointerEvents:"none"},children:shouldShowPlaceholder(tt.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_e}):j})});SelectValue$1.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,children:b,...$}=_;return jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...$,ref:d,children:b||""})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME="SelectPortal",SelectPortal=_=>jsxRuntimeExports.jsx(Portal$1,{asChild:!0,..._});SelectPortal.displayName=PORTAL_NAME;var CONTENT_NAME="SelectContent",SelectContent$1=reactExports.forwardRef((_,d)=>{const g=useSelectContext(CONTENT_NAME,_.__scopeSelect),[b,$]=reactExports.useState();if(useLayoutEffect2(()=>{$(new DocumentFragment)},[]),!g.open){const j=b;return j?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:_.__scopeSelect,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:_.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:_.children})})}),j):null}return jsxRuntimeExports.jsx(SelectContentImpl,{..._,ref:d})});SelectContent$1.displayName=CONTENT_NAME;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME),CONTENT_IMPL_NAME="SelectContentImpl",SelectContentImpl=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,position:b="item-aligned",onCloseAutoFocus:$,onEscapeKeyDown:j,onPointerDownOutside:_e,side:et,sideOffset:tt,align:nt,alignOffset:it,arrowPadding:rt,collisionBoundary:st,collisionPadding:ot,sticky:at,hideWhenDetached:ct,avoidCollisions:ht,...ut}=_,dt=useSelectContext(CONTENT_NAME,g),[ft,mt]=reactExports.useState(null),[pt,Ot]=reactExports.useState(null),gt=useComposedRefs(d,Dt=>mt(Dt)),[yt,St]=reactExports.useState(null),[vt,wt]=reactExports.useState(null),xt=useCollection(g),[kt,bt]=reactExports.useState(!1),Et=reactExports.useRef(!1);reactExports.useEffect(()=>{if(ft)return hideOthers(ft)},[ft]),useFocusGuards();const At=reactExports.useCallback(Dt=>{const[Rt,...Ut]=xt().map(Wt=>Wt.ref.current),[Bt]=Ut.slice(-1),jt=document.activeElement;for(const Wt of Dt)if(Wt===jt||(Wt==null||Wt.scrollIntoView({block:"nearest"}),Wt===Rt&&pt&&(pt.scrollTop=0),Wt===Bt&&pt&&(pt.scrollTop=pt.scrollHeight),Wt==null||Wt.focus(),document.activeElement!==jt))return},[xt,pt]),Tt=reactExports.useCallback(()=>At([yt,ft]),[At,yt,ft]);reactExports.useEffect(()=>{kt&&Tt()},[kt,Tt]);const{onOpenChange:_t,triggerPointerDownPosRef:Ct}=dt;reactExports.useEffect(()=>{if(ft){let Dt={x:0,y:0};const Rt=Bt=>{var jt,Wt;Dt={x:Math.abs(Math.round(Bt.pageX)-(((jt=Ct.current)==null?void 0:jt.x)??0)),y:Math.abs(Math.round(Bt.pageY)-(((Wt=Ct.current)==null?void 0:Wt.y)??0))}},Ut=Bt=>{Dt.x<=10&&Dt.y<=10?Bt.preventDefault():ft.contains(Bt.target)||_t(!1),document.removeEventListener("pointermove",Rt),Ct.current=null};return Ct.current!==null&&(document.addEventListener("pointermove",Rt),document.addEventListener("pointerup",Ut,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Rt),document.removeEventListener("pointerup",Ut,{capture:!0})}}},[ft,_t,Ct]),reactExports.useEffect(()=>{const Dt=()=>_t(!1);return window.addEventListener("blur",Dt),window.addEventListener("resize",Dt),()=>{window.removeEventListener("blur",Dt),window.removeEventListener("resize",Dt)}},[_t]);const[Pt,Nt]=useTypeaheadSearch(Dt=>{const Rt=xt().filter(jt=>!jt.disabled),Ut=Rt.find(jt=>jt.ref.current===document.activeElement),Bt=findNextItem(Rt,Dt,Ut);Bt&&setTimeout(()=>Bt.ref.current.focus())}),$t=reactExports.useCallback((Dt,Rt,Ut)=>{const Bt=!Et.current&&!Ut;(dt.value!==void 0&&dt.value===Rt||Bt)&&(St(Dt),Bt&&(Et.current=!0))},[dt.value]),Zt=reactExports.useCallback(()=>ft==null?void 0:ft.focus(),[ft]),Ft=reactExports.useCallback((Dt,Rt,Ut)=>{const Bt=!Et.current&&!Ut;(dt.value!==void 0&&dt.value===Rt||Bt)&&wt(Dt)},[dt.value]),It=b==="popper"?SelectPopperPosition:SelectItemAlignedPosition,Lt=It===SelectPopperPosition?{side:et,sideOffset:tt,align:nt,alignOffset:it,arrowPadding:rt,collisionBoundary:st,collisionPadding:ot,sticky:at,hideWhenDetached:ct,avoidCollisions:ht}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:g,content:ft,viewport:pt,onViewportChange:Ot,itemRefCallback:$t,selectedItem:yt,onItemLeave:Zt,itemTextRefCallback:Ft,focusSelectedItem:Tt,selectedItemText:vt,position:b,isPositioned:kt,searchRef:Pt,children:jsxRuntimeExports.jsx(RemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:dt.open,onMountAutoFocus:Dt=>{Dt.preventDefault()},onUnmountAutoFocus:composeEventHandlers($,Dt=>{var Rt;(Rt=dt.trigger)==null||Rt.focus({preventScroll:!0}),Dt.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:j,onPointerDownOutside:_e,onFocusOutside:Dt=>Dt.preventDefault(),onDismiss:()=>dt.onOpenChange(!1),children:jsxRuntimeExports.jsx(It,{role:"listbox",id:dt.contentId,"data-state":dt.open?"open":"closed",dir:dt.dir,onContextMenu:Dt=>Dt.preventDefault(),...ut,...Lt,onPlaced:()=>bt(!0),ref:gt,style:{display:"flex",flexDirection:"column",outline:"none",...ut.style},onKeyDown:composeEventHandlers(ut.onKeyDown,Dt=>{const Rt=Dt.ctrlKey||Dt.altKey||Dt.metaKey;if(Dt.key==="Tab"&&Dt.preventDefault(),!Rt&&Dt.key.length===1&&Nt(Dt.key),["ArrowUp","ArrowDown","Home","End"].includes(Dt.key)){let Bt=xt().filter(jt=>!jt.disabled).map(jt=>jt.ref.current);if(["ArrowUp","End"].includes(Dt.key)&&(Bt=Bt.slice().reverse()),["ArrowUp","ArrowDown"].includes(Dt.key)){const jt=Dt.target,Wt=Bt.indexOf(jt);Bt=Bt.slice(Wt+1)}setTimeout(()=>At(Bt)),Dt.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,onPlaced:b,...$}=_,j=useSelectContext(CONTENT_NAME,g),_e=useSelectContentContext(CONTENT_NAME,g),[et,tt]=reactExports.useState(null),[nt,it]=reactExports.useState(null),rt=useComposedRefs(d,gt=>it(gt)),st=useCollection(g),ot=reactExports.useRef(!1),at=reactExports.useRef(!0),{viewport:ct,selectedItem:ht,selectedItemText:ut,focusSelectedItem:dt}=_e,ft=reactExports.useCallback(()=>{if(j.trigger&&j.valueNode&&et&&nt&&ct&&ht&&ut){const gt=j.trigger.getBoundingClientRect(),yt=nt.getBoundingClientRect(),St=j.valueNode.getBoundingClientRect(),vt=ut.getBoundingClientRect();if(j.dir!=="rtl"){const jt=vt.left-yt.left,Wt=St.left-jt,Gt=gt.left-Wt,Yt=gt.width+Gt,Mt=Math.max(Yt,yt.width),Qt=window.innerWidth-CONTENT_MARGIN,zt=clamp$1(Wt,[CONTENT_MARGIN,Qt-Mt]);et.style.minWidth=Yt+"px",et.style.left=zt+"px"}else{const jt=yt.right-vt.right,Wt=window.innerWidth-St.right-jt,Gt=window.innerWidth-gt.right-Wt,Yt=gt.width+Gt,Mt=Math.max(Yt,yt.width),Qt=window.innerWidth-CONTENT_MARGIN,zt=clamp$1(Wt,[CONTENT_MARGIN,Qt-Mt]);et.style.minWidth=Yt+"px",et.style.right=zt+"px"}const wt=st(),xt=window.innerHeight-CONTENT_MARGIN*2,kt=ct.scrollHeight,bt=window.getComputedStyle(nt),Et=parseInt(bt.borderTopWidth,10),At=parseInt(bt.paddingTop,10),Tt=parseInt(bt.borderBottomWidth,10),_t=parseInt(bt.paddingBottom,10),Ct=Et+At+kt+_t+Tt,Pt=Math.min(ht.offsetHeight*5,Ct),Nt=window.getComputedStyle(ct),$t=parseInt(Nt.paddingTop,10),Zt=parseInt(Nt.paddingBottom,10),Ft=gt.top+gt.height/2-CONTENT_MARGIN,It=xt-Ft,Lt=ht.offsetHeight/2,Dt=ht.offsetTop+Lt,Rt=Et+At+Dt,Ut=Ct-Rt;if(Rt<=Ft){const jt=ht===wt[wt.length-1].ref.current;et.style.bottom="0px";const Wt=nt.clientHeight-ct.offsetTop-ct.offsetHeight,Gt=Math.max(It,Lt+(jt?Zt:0)+Wt+Tt),Yt=Rt+Gt;et.style.height=Yt+"px"}else{const jt=ht===wt[0].ref.current;et.style.top="0px";const Gt=Math.max(Ft,Et+ct.offsetTop+(jt?$t:0)+Lt)+Ut;et.style.height=Gt+"px",ct.scrollTop=Rt-Ft+ct.offsetTop}et.style.margin=`${CONTENT_MARGIN}px 0`,et.style.minHeight=Pt+"px",et.style.maxHeight=xt+"px",b==null||b(),requestAnimationFrame(()=>ot.current=!0)}},[st,j.trigger,j.valueNode,et,nt,ct,ht,ut,j.dir,b]);useLayoutEffect2(()=>ft(),[ft]);const[mt,pt]=reactExports.useState();useLayoutEffect2(()=>{nt&&pt(window.getComputedStyle(nt).zIndex)},[nt]);const Ot=reactExports.useCallback(gt=>{gt&&at.current===!0&&(ft(),dt==null||dt(),at.current=!1)},[ft,dt]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:g,contentWrapper:et,shouldExpandOnScrollRef:ot,onScrollButtonChange:Ot,children:jsxRuntimeExports.jsx("div",{ref:tt,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:mt},children:jsxRuntimeExports.jsx(Primitive.div,{...$,ref:rt,style:{boxSizing:"border-box",maxHeight:"100%",...$.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,align:b="start",collisionPadding:$=CONTENT_MARGIN,...j}=_,_e=usePopperScope(g);return jsxRuntimeExports.jsx(Content,{..._e,...j,ref:d,align:b,collisionPadding:$,style:{boxSizing:"border-box",...j.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME,{}),VIEWPORT_NAME="SelectViewport",SelectViewport=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,nonce:b,...$}=_,j=useSelectContentContext(VIEWPORT_NAME,g),_e=useSelectViewportContext(VIEWPORT_NAME,g),et=useComposedRefs(d,j.onViewportChange),tt=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:b}),jsxRuntimeExports.jsx(Collection.Slot,{scope:g,children:jsxRuntimeExports.jsx(Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...$,ref:et,style:{position:"relative",flex:1,overflow:"auto",...$.style},onScroll:composeEventHandlers($.onScroll,nt=>{const it=nt.currentTarget,{contentWrapper:rt,shouldExpandOnScrollRef:st}=_e;if(st!=null&&st.current&&rt){const ot=Math.abs(tt.current-it.scrollTop);if(ot>0){const at=window.innerHeight-CONTENT_MARGIN*2,ct=parseFloat(rt.style.minHeight),ht=parseFloat(rt.style.height),ut=Math.max(ct,ht);if(ut<at){const dt=ut+ot,ft=Math.min(at,dt),mt=dt-ft;rt.style.height=ft+"px",rt.style.bottom==="0px"&&(it.scrollTop=mt>0?mt:0,rt.style.justifyContent="flex-end")}}}tt.current=it.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME;var GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,...b}=_,$=useId();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:g,id:$,children:jsxRuntimeExports.jsx(Primitive.div,{role:"group","aria-labelledby":$,...b,ref:d})})});SelectGroup.displayName=GROUP_NAME;var LABEL_NAME="SelectLabel",SelectLabel$1=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,...b}=_,$=useSelectGroupContext(LABEL_NAME,g);return jsxRuntimeExports.jsx(Primitive.div,{id:$.id,...b,ref:d})});SelectLabel$1.displayName=LABEL_NAME;var ITEM_NAME="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME),SelectItem$1=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,value:b,disabled:$=!1,textValue:j,..._e}=_,et=useSelectContext(ITEM_NAME,g),tt=useSelectContentContext(ITEM_NAME,g),nt=et.value===b,[it,rt]=reactExports.useState(j??""),[st,ot]=reactExports.useState(!1),at=useComposedRefs(d,ut=>{var dt;return(dt=tt.itemRefCallback)==null?void 0:dt.call(tt,ut,b,$)}),ct=useId(),ht=()=>{$||(et.onValueChange(b),et.onOpenChange(!1))};if(b==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:g,value:b,disabled:$,textId:ct,isSelected:nt,onItemTextChange:reactExports.useCallback(ut=>{rt(dt=>dt||((ut==null?void 0:ut.textContent)??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:g,value:b,disabled:$,textValue:it,children:jsxRuntimeExports.jsx(Primitive.div,{role:"option","aria-labelledby":ct,"data-highlighted":st?"":void 0,"aria-selected":nt&&st,"data-state":nt?"checked":"unchecked","aria-disabled":$||void 0,"data-disabled":$?"":void 0,tabIndex:$?void 0:-1,..._e,ref:at,onFocus:composeEventHandlers(_e.onFocus,()=>ot(!0)),onBlur:composeEventHandlers(_e.onBlur,()=>ot(!1)),onPointerUp:composeEventHandlers(_e.onPointerUp,ht),onPointerMove:composeEventHandlers(_e.onPointerMove,ut=>{var dt;$?(dt=tt.onItemLeave)==null||dt.call(tt):ut.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers(_e.onPointerLeave,ut=>{var dt;ut.currentTarget===document.activeElement&&((dt=tt.onItemLeave)==null||dt.call(tt))}),onKeyDown:composeEventHandlers(_e.onKeyDown,ut=>{var ft;((ft=tt.searchRef)==null?void 0:ft.current)!==""&&ut.key===" "||(SELECTION_KEYS.includes(ut.key)&&ht(),ut.key===" "&&ut.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,className:b,style:$,...j}=_,_e=useSelectContext(ITEM_TEXT_NAME,g),et=useSelectContentContext(ITEM_TEXT_NAME,g),tt=useSelectItemContext(ITEM_TEXT_NAME,g),nt=useSelectNativeOptionsContext(ITEM_TEXT_NAME,g),[it,rt]=reactExports.useState(null),st=useComposedRefs(d,ut=>rt(ut),tt.onItemTextChange,ut=>{var dt;return(dt=et.itemTextRefCallback)==null?void 0:dt.call(et,ut,tt.value,tt.disabled)}),ot=it==null?void 0:it.textContent,at=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:tt.value,disabled:tt.disabled,children:ot},tt.value),[tt.disabled,tt.value,ot]),{onNativeOptionAdd:ct,onNativeOptionRemove:ht}=nt;return useLayoutEffect2(()=>(ct(at),()=>ht(at)),[ct,ht,at]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive.span,{id:tt.textId,...j,ref:st}),tt.isSelected&&_e.valueNode&&!_e.valueNodeHasChildren?reactDomExports.createPortal(j.children,_e.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,...b}=_;return useSelectItemContext(ITEM_INDICATOR_NAME,g).isSelected?jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...b,ref:d}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((_,d)=>{const g=useSelectContentContext(SCROLL_UP_BUTTON_NAME,_.__scopeSelect),b=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,_.__scopeSelect),[$,j]=reactExports.useState(!1),_e=useComposedRefs(d,b.onScrollButtonChange);return useLayoutEffect2(()=>{if(g.viewport&&g.isPositioned){let et=function(){const nt=tt.scrollTop>0;j(nt)};const tt=g.viewport;return et(),tt.addEventListener("scroll",et),()=>tt.removeEventListener("scroll",et)}},[g.viewport,g.isPositioned]),$?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._,ref:_e,onAutoScroll:()=>{const{viewport:et,selectedItem:tt}=g;et&&tt&&(et.scrollTop=et.scrollTop-tt.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((_,d)=>{const g=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,_.__scopeSelect),b=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,_.__scopeSelect),[$,j]=reactExports.useState(!1),_e=useComposedRefs(d,b.onScrollButtonChange);return useLayoutEffect2(()=>{if(g.viewport&&g.isPositioned){let et=function(){const nt=tt.scrollHeight-tt.clientHeight,it=Math.ceil(tt.scrollTop)<nt;j(it)};const tt=g.viewport;return et(),tt.addEventListener("scroll",et),()=>tt.removeEventListener("scroll",et)}},[g.viewport,g.isPositioned]),$?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._,ref:_e,onAutoScroll:()=>{const{viewport:et,selectedItem:tt}=g;et&&tt&&(et.scrollTop=et.scrollTop+tt.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,onAutoScroll:b,...$}=_,j=useSelectContentContext("SelectScrollButton",g),_e=reactExports.useRef(null),et=useCollection(g),tt=reactExports.useCallback(()=>{_e.current!==null&&(window.clearInterval(_e.current),_e.current=null)},[]);return reactExports.useEffect(()=>()=>tt(),[tt]),useLayoutEffect2(()=>{var it;const nt=et().find(rt=>rt.ref.current===document.activeElement);(it=nt==null?void 0:nt.ref.current)==null||it.scrollIntoView({block:"nearest"})},[et]),jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...$,ref:d,style:{flexShrink:0,...$.style},onPointerDown:composeEventHandlers($.onPointerDown,()=>{_e.current===null&&(_e.current=window.setInterval(b,50))}),onPointerMove:composeEventHandlers($.onPointerMove,()=>{var nt;(nt=j.onItemLeave)==null||nt.call(j),_e.current===null&&(_e.current=window.setInterval(b,50))}),onPointerLeave:composeEventHandlers($.onPointerLeave,()=>{tt()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator$1=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,...b}=_;return jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...b,ref:d})});SelectSeparator$1.displayName=SEPARATOR_NAME;var ARROW_NAME="SelectArrow",SelectArrow=reactExports.forwardRef((_,d)=>{const{__scopeSelect:g,...b}=_,$=usePopperScope(g),j=useSelectContext(ARROW_NAME,g),_e=useSelectContentContext(ARROW_NAME,g);return j.open&&_e.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...$,...b,ref:d}):null});SelectArrow.displayName=ARROW_NAME;function shouldShowPlaceholder(_){return _===""||_===void 0}var BubbleSelect=reactExports.forwardRef((_,d)=>{const{value:g,...b}=_,$=reactExports.useRef(null),j=useComposedRefs(d,$),_e=usePrevious(g);return reactExports.useEffect(()=>{const et=$.current,tt=window.HTMLSelectElement.prototype,it=Object.getOwnPropertyDescriptor(tt,"value").set;if(_e!==g&&it){const rt=new Event("change",{bubbles:!0});it.call(et,g),et.dispatchEvent(rt)}},[_e,g]),jsxRuntimeExports.jsx(VisuallyHidden,{asChild:!0,children:jsxRuntimeExports.jsx("select",{...b,ref:j,defaultValue:g})})});BubbleSelect.displayName="BubbleSelect";function useTypeaheadSearch(_){const d=useCallbackRef$1(_),g=reactExports.useRef(""),b=reactExports.useRef(0),$=reactExports.useCallback(_e=>{const et=g.current+_e;d(et),function tt(nt){g.current=nt,window.clearTimeout(b.current),nt!==""&&(b.current=window.setTimeout(()=>tt(""),1e3))}(et)},[d]),j=reactExports.useCallback(()=>{g.current="",window.clearTimeout(b.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(b.current),[]),[g,$,j]}function findNextItem(_,d,g){const $=d.length>1&&Array.from(d).every(nt=>nt===d[0])?d[0]:d,j=g?_.indexOf(g):-1;let _e=wrapArray(_,Math.max(j,0));$.length===1&&(_e=_e.filter(nt=>nt!==g));const tt=_e.find(nt=>nt.textValue.toLowerCase().startsWith($.toLowerCase()));return tt!==g?tt:void 0}function wrapArray(_,d){return _.map((g,b)=>_[(d+b)%_.length])}var Root2=Select$1,Trigger=SelectTrigger$1,Value=SelectValue$1,Icon$1=SelectIcon,Portal=SelectPortal,Content2=SelectContent$1,Viewport=SelectViewport,Label$2=SelectLabel$1,Item=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1,Separator=SelectSeparator$1;/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=_=>_.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(..._)=>_.filter((d,g,b)=>!!d&&b.indexOf(d)===g).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:_="currentColor",size:d=24,strokeWidth:g=2,absoluteStrokeWidth:b,className:$="",children:j,iconNode:_e,...et},tt)=>reactExports.createElement("svg",{ref:tt,...defaultAttributes,width:d,height:d,stroke:_,strokeWidth:b?Number(g)*24/Number(d):g,className:mergeClasses("lucide",$),...et},[..._e.map(([nt,it])=>reactExports.createElement(nt,it)),...Array.isArray(j)?j:[j]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(_,d)=>{const g=reactExports.forwardRef(({className:b,...$},j)=>reactExports.createElement(Icon,{ref:j,iconNode:d,className:mergeClasses(`lucide-${toKebabCase(_)}`,b),...$}));return g.displayName=`${_}`,g};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronUp=createLucideIcon("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Select=Root2,SelectValue=Value,SelectTrigger=reactExports.forwardRef(({className:_,children:d,...g},b)=>jsxRuntimeExports.jsxs(Trigger,{ref:b,className:cn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",_),...g,children:[d,jsxRuntimeExports.jsx(Icon$1,{asChild:!0,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=Trigger.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:_,...d},g)=>jsxRuntimeExports.jsx(ScrollUpButton,{ref:g,className:cn("flex cursor-default items-center justify-center py-1",_),...d,children:jsxRuntimeExports.jsx(ChevronUp,{className:"h-4 w-4"})}));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:_,...d},g)=>jsxRuntimeExports.jsx(ScrollDownButton,{ref:g,className:cn("flex cursor-default items-center justify-center py-1",_),...d,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})}));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:_,children:d,position:g="popper",...b},$)=>jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(Content2,{ref:$,className:cn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",g==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",_),position:g,...b,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport,{className:cn("p-1",g==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:d}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=Content2.displayName;const SelectLabel=reactExports.forwardRef(({className:_,...d},g)=>jsxRuntimeExports.jsx(Label$2,{ref:g,className:cn("py-1.5 pl-8 pr-2 text-sm font-semibold",_),...d}));SelectLabel.displayName=Label$2.displayName;const SelectItem=reactExports.forwardRef(({className:_,children:d,...g},b)=>jsxRuntimeExports.jsxs(Item,{ref:b,className:cn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_),...g,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:d})]}));SelectItem.displayName=Item.displayName;const SelectSeparator=reactExports.forwardRef(({className:_,...d},g)=>jsxRuntimeExports.jsx(Separator,{ref:g,className:cn("-mx-1 my-1 h-px bg-muted",_),...d}));SelectSeparator.displayName=Separator.displayName;var NAME="Label",Label$1=reactExports.forwardRef((_,d)=>jsxRuntimeExports.jsx(Primitive.label,{..._,ref:d,onMouseDown:g=>{var $;g.target.closest("button, input, select, textarea")||(($=_.onMouseDown)==null||$.call(_,g),!g.defaultPrevented&&g.detail>1&&g.preventDefault())}}));Label$1.displayName=NAME;var Root$1=Label$1;const labelVariants=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label=reactExports.forwardRef(({className:_,...d},g)=>jsxRuntimeExports.jsx(Root$1,{ref:g,className:cn(labelVariants(),_),...d}));Label.displayName=Root$1.displayName;const Input=reactExports.forwardRef(({className:_,type:d,...g},b)=>jsxRuntimeExports.jsx("input",{type:d,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",_),ref:b,...g}));Input.displayName="Input";var SWITCH_NAME="Switch",[createSwitchContext,createSwitchScope]=createContextScope(SWITCH_NAME),[SwitchProvider,useSwitchContext]=createSwitchContext(SWITCH_NAME),Switch$1=reactExports.forwardRef((_,d)=>{const{__scopeSwitch:g,name:b,checked:$,defaultChecked:j,required:_e,disabled:et,value:tt="on",onCheckedChange:nt,...it}=_,[rt,st]=reactExports.useState(null),ot=useComposedRefs(d,dt=>st(dt)),at=reactExports.useRef(!1),ct=rt?!!rt.closest("form"):!0,[ht=!1,ut]=useControllableState({prop:$,defaultProp:j,onChange:nt});return jsxRuntimeExports.jsxs(SwitchProvider,{scope:g,checked:ht,disabled:et,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"switch","aria-checked":ht,"aria-required":_e,"data-state":getState(ht),"data-disabled":et?"":void 0,disabled:et,value:tt,...it,ref:ot,onClick:composeEventHandlers(_.onClick,dt=>{ut(ft=>!ft),ct&&(at.current=dt.isPropagationStopped(),at.current||dt.stopPropagation())})}),ct&&jsxRuntimeExports.jsx(BubbleInput,{control:rt,bubbles:!at.current,name:b,value:tt,checked:ht,required:_e,disabled:et,style:{transform:"translateX(-100%)"}})]})});Switch$1.displayName=SWITCH_NAME;var THUMB_NAME="SwitchThumb",SwitchThumb=reactExports.forwardRef((_,d)=>{const{__scopeSwitch:g,...b}=_,$=useSwitchContext(THUMB_NAME,g);return jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState($.checked),"data-disabled":$.disabled?"":void 0,...b,ref:d})});SwitchThumb.displayName=THUMB_NAME;var BubbleInput=_=>{const{control:d,checked:g,bubbles:b=!0,...$}=_,j=reactExports.useRef(null),_e=usePrevious(g),et=useSize(d);return reactExports.useEffect(()=>{const tt=j.current,nt=window.HTMLInputElement.prototype,rt=Object.getOwnPropertyDescriptor(nt,"checked").set;if(_e!==g&&rt){const st=new Event("click",{bubbles:b});rt.call(tt,g),tt.dispatchEvent(st)}},[_e,g,b]),jsxRuntimeExports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:g,...$,tabIndex:-1,ref:j,style:{..._.style,...et,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function getState(_){return _?"checked":"unchecked"}var Root=Switch$1,Thumb=SwitchThumb;const Switch=reactExports.forwardRef(({className:_,...d},g)=>jsxRuntimeExports.jsx(Root,{className:cn("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-zinc-800",_),...d,ref:g,children:jsxRuntimeExports.jsx(Thumb,{className:cn("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Switch.displayName=Root.displayName;const state=proxy({keys:{aPressed:!1,sPressed:!1,dPressed:!1,fPressed:!1,gPressed:!1,hPressed:!1,jPressed:!1,wPressed:!1,ePressed:!1,tPressed:!1,yPressed:!1,uPressed:!1}}),offlineState=createStorageProxy("react-tone",{octave:"4",volume:"-8",useKeyboard:!0,code:`window.createSynth = async (Tone, volume) => {
  const synth = new Tone.PolySynth(Tone.MonoSynth, {
    oscillator: {
      type: 'sine'
    },
    envelope: {
      attack: 0.1
    }
  });
  const reverb = new Tone.Reverb(2);
  
  Tone.connectSeries(synth, reverb, volume)
  
  return synth
}`,codeError:null}),KeyMap={a:{stateKey:"aPressed",note:"C"},s:{stateKey:"sPressed",note:"D"},d:{stateKey:"dPressed",note:"E"},f:{stateKey:"fPressed",note:"F"},g:{stateKey:"gPressed",note:"G"},h:{stateKey:"hPressed",note:"A"},j:{stateKey:"jPressed",note:"B"},w:{stateKey:"wPressed",note:"C#"},e:{stateKey:"ePressed",note:"D#"},t:{stateKey:"tPressed",note:"F#"},y:{stateKey:"yPressed",note:"G#"},u:{stateKey:"uPressed",note:"A#"}},volume=new Volume(getStateVolume()).toDestination(),WhiteKey=({mapKey:_,children:d})=>{const g=useSnapshot(state),b=KeyMap[_],$=g.keys[b.stateKey],j=()=>attackKey(b),_e=()=>releaseKey(b);return jsxRuntimeExports.jsx("div",{className:clsx("flex-shrink-0 shadow-lg w-12 h-56 rounded-br-md rounded-bl-md cursor-pointer transition-colors relative",{"hover:bg-zinc-300 bg-white":!$,"bg-zinc-400":$}),onMouseDown:j,onMouseUp:_e,children:jsxRuntimeExports.jsx("div",{className:"text-lg w-12 absolute bottom-2 left-0 text-center text-zinc-600",children:d})})},BlackKey=({mapKey:_,className:d,children:g})=>{const b=useSnapshot(state),$=KeyMap[_],j=b.keys[$.stateKey],_e=()=>attackKey($),et=()=>releaseKey($);return jsxRuntimeExports.jsx("div",{className:clsx("flex-shrink-0 w-8 h-32 rounded-br-md rounded-bl-md cursor-pointer transition-colors absolute",{"hover:bg-zinc-700 bg-zinc-900":!j,"bg-zinc-600":j},d),onMouseDown:_e,onMouseUp:et,children:jsxRuntimeExports.jsx("div",{className:"text-lg w-8 absolute bottom-2 left-0 text-center text-zinc-400",children:g})})};function getStateVolume(){const _=Number(offlineState.volume);return isNaN(_)?0:_}function attackKey(_){var d;state.keys[_.stateKey]||((d=window.currentSynth)==null||d.forEach(g=>g.triggerAttack(`${_.note}${offlineState.octave}`)),state.keys[_.stateKey]=!0)}function releaseKey(_){var d;(d=window.currentSynth)==null||d.forEach(g=>g.triggerRelease(`${_.note}${offlineState.octave}`)),state.keys[_.stateKey]=!1}function handleVolumeChange(_){offlineState.volume=_.target.value,volume.set({volume:getStateVolume()})}function handleOctaveChange(_){offlineState.octave=_}function handleUseKeyboardChange(_){offlineState.useKeyboard=_}function handleCodeChange(_){offlineState.code=_}async function handleEvalClick(){var _;try{if((_=window.currentSynth)==null||_.forEach(d=>d.dispose()),eval(offlineState.code),!window.createSynth)throw new Error("window.createSynth() was not found");const result=await window.createSynth(Tone,volume);if(!result)throw new Error("Nothing was returned from createSynth()");Array.isArray(result)?window.currentSynth=result:window.currentSynth=[result],offlineState.codeError=null}catch(d){offlineState.codeError=(d==null?void 0:d.message)??"Unknown error"}}function handleKeyDown(_){if(offlineState.useKeyboard){const d=KeyMap[_.key];d&&attackKey(d)}}function handleKeyUp(_){if(offlineState.useKeyboard){const d=KeyMap[_.key];d&&releaseKey(d)}}function handleReleaseAllClick(){var _;Object.values(KeyMap).forEach(d=>{state.keys[d.stateKey]=!1}),(_=window.currentSynth)==null||_.forEach(d=>d.releaseAll())}const Synth=()=>{const _=useSnapshot(offlineState);return reactExports.useEffect(()=>(window.addEventListener("keydown",handleKeyDown),window.addEventListener("keyup",handleKeyUp),handleEvalClick(),()=>{window.removeEventListener("keydown",handleKeyDown),window.removeEventListener("keyup",handleKeyUp)}),[]),jsxRuntimeExports.jsxs("div",{className:"flex md:flex-row flex-col md:items-start items-center justify-center gap-12",children:[jsxRuntimeExports.jsxs("div",{className:"w-[392px]",children:[jsxRuntimeExports.jsx("div",{className:"rounded-md p-4 mb-4 select-none bg-gradient-to-b from-sky-400 to-sky-900",children:jsxRuntimeExports.jsxs("div",{className:"inline-flex gap-1 relative",children:[jsxRuntimeExports.jsx(WhiteKey,{mapKey:"a",children:"C"}),jsxRuntimeExports.jsx(WhiteKey,{mapKey:"s",children:"D"}),jsxRuntimeExports.jsx(WhiteKey,{mapKey:"d",children:"E"}),jsxRuntimeExports.jsx(WhiteKey,{mapKey:"f",children:"F"}),jsxRuntimeExports.jsx(WhiteKey,{mapKey:"g",children:"G"}),jsxRuntimeExports.jsx(WhiteKey,{mapKey:"h",children:"A"}),jsxRuntimeExports.jsx(WhiteKey,{mapKey:"j",children:"B"}),jsxRuntimeExports.jsxs(BlackKey,{className:"left-[34px]",mapKey:"w",children:[jsxRuntimeExports.jsx("div",{children:"C"}),jsxRuntimeExports.jsx("div",{children:"#"})]}),jsxRuntimeExports.jsxs(BlackKey,{className:"left-[86px]",mapKey:"e",children:[jsxRuntimeExports.jsx("div",{children:"D"}),jsxRuntimeExports.jsx("div",{children:"#"})]}),jsxRuntimeExports.jsxs(BlackKey,{className:"left-[190px]",mapKey:"t",children:[jsxRuntimeExports.jsx("div",{children:"F"}),jsxRuntimeExports.jsx("div",{children:"#"})]}),jsxRuntimeExports.jsxs(BlackKey,{className:"left-[242px]",mapKey:"y",children:[jsxRuntimeExports.jsx("div",{children:"G"}),jsxRuntimeExports.jsx("div",{children:"#"})]}),jsxRuntimeExports.jsxs(BlackKey,{className:"left-[294px]",mapKey:"u",children:[jsxRuntimeExports.jsx("div",{children:"A"}),jsxRuntimeExports.jsx("div",{children:"#"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{className:"block mb-2",children:"Volume"}),jsxRuntimeExports.jsx(Input,{className:"w-16",value:_.volume,onChange:handleVolumeChange})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{className:"block mb-2",children:"Octave"}),jsxRuntimeExports.jsxs(Select,{value:_.octave,onValueChange:handleOctaveChange,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-16",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select an octave"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"1",children:"1"}),jsxRuntimeExports.jsx(SelectItem,{value:"2",children:"2"}),jsxRuntimeExports.jsx(SelectItem,{value:"3",children:"3"}),jsxRuntimeExports.jsx(SelectItem,{value:"4",children:"4"}),jsxRuntimeExports.jsx(SelectItem,{value:"5",children:"5"}),jsxRuntimeExports.jsx(SelectItem,{value:"6",children:"6"}),jsxRuntimeExports.jsx(SelectItem,{value:"7",children:"7"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"keys-switch",className:"block mb-2",children:"Use Keyboard"}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx(Switch,{id:"keys-switch",checked:_.useKeyboard,onCheckedChange:handleUseKeyboardChange})})]})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:handleReleaseAllClick,children:"Release All"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 w-[500px]",children:[jsxRuntimeExports.jsx("div",{className:clsx("rounded-md overflow-hidden border w-full",{"border-danger":!!_.codeError}),children:jsxRuntimeExports.jsx(ReactCodeMirror,{extensions:[javascript()],theme:xcodeDark,minHeight:"200px",value:_.code,onChange:handleCodeChange})}),_.codeError&&jsxRuntimeExports.jsx("div",{className:"text-danger text-sm",children:_.codeError}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx(Button,{onClick:handleEvalClick,children:"Eval"})})]})]})},App=()=>jsxRuntimeExports.jsx("div",{className:"p-8",children:jsxRuntimeExports.jsx(ErrorBoundary,{FallbackComponent:ErrorFallback,children:jsxRuntimeExports.jsx(Synth,{})})}),styles="";client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
